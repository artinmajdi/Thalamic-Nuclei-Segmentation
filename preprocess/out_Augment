 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1621_10162015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2628_10282016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1621_10162015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2628_10282016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547775798
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [7.00321, -14.978, 9.73821]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 7.405172524201067, 19.22617401428038, -23.65639674638058]
level 0, iter 976, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.010317330370637317, 0.012576313325763604, -0.06193883250940986, 0.9979473784045563, 0.8681353531204051, 1.0365885173252265, 0.8687152123489074, -0.03200576239323416, 0.01970550415003765, 0.035305878682151966, 3.7762862809946083, 18.482661426652413, -21.73168573820676]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 137, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.0050179387261092764, 0.009414111762382356, -0.07233622150555072, 0.997323250430354, 0.8748009768878843, 1.0701665067131123, 0.8638444488874296, -0.04419507053490912, 0.017131640331206236, 0.0390104387231529, 3.5989475382961937, 18.398184099421943, -21.832376894226723]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 108, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.007040562545020361, 0.009461859973522913, -0.06593067664437031, 0.9977545036541338, 0.8587419239676616, 1.063920186824653, 0.8540746555452529, -0.04637528611428581, 0.018235454242640312, 0.04589261960797678, 3.7616264532644554, 18.541387655546984, -21.869185925485446]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 64, size: fix[42, 46, 32]-mov[36, 41, 35], affine para: [-0.0060996396670780694, 0.011248985892676568, -0.07007643930173908, 0.9974595467321509, 0.8731434277589832, 1.078450657101728, 0.8656614932465936, -0.05017982796827428, 0.018724754489075363, 0.04739079354999176, 3.6624788592159008, 18.66332768767579, -21.564664078226887]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 70, size: fix[83, 91, 45]-mov[72, 81, 49], affine para: [-0.009213599693406113, 0.015957329918265914, -0.06879945128708467, 0.9974603293891768, 0.8839332780995397, 1.0922828468345622, 0.8787231823910455, -0.05174788637412589, 0.018672771582524117, 0.04907929547406663, 3.794179950932613, 18.681753546342325, -21.738148938599647]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 4009, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.002878244207837762, -0.012623238950714839, 0.0569758931115683, 0.9982915992598617, 1.1409631689340052, 0.856429068538691, 1.164724109798257, -0.011529195021432067, -0.024326797032862748, -0.03138370446185282, -3.106322520747006, -17.44317469160293, 24.882725617446724]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 64, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.0046544990465341605, -0.01116260194435948, 0.05840542407342155, 0.9982196844358767, 1.1415152252052827, 0.8591817926595011, 1.1636111484733624, -0.011515210988674035, -0.029423972787576927, -0.030552508991073594, -3.0227228902907717, -17.594316560019543, 24.721317052396262]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 592, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.008627499703470086, -0.014449416646390361, 0.05987931931704751, 0.9980637493294566, 1.126656727429646, 0.8662503825446177, 1.1690959238349263, -0.018386251629761506, -0.02423534045360875, -0.0275015957032483, -2.9675926898999117, -17.795100867837544, 24.75006918488837]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 137, size: fix[36, 41, 35]-mov[42, 46, 32], affine para: [0.008743914589247302, -0.014517195493211826, 0.05326263880605379, 0.9984367212297851, 1.1216043968089502, 0.8606989096542588, 1.162548146930187, -0.020750933279819212, -0.024951655142374633, -0.03302697378233692, -3.2031411391937246, -17.90427233491627, 24.98910658043494]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 335, size: fix[72, 81, 49]-mov[83, 91, 45], affine para: [0.012977889382313946, -0.014722042121008583, 0.05181574776157397, 0.9984638021214773, 1.1115470355727484, 0.8589600701977345, 1.162401608855092, -0.021410971303645734, -0.030936923668180426, -0.03661302292678423, -3.0307217623396006, -18.25055344581449, 24.487341214578414]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.314813 v2 -0.319645
 last params [-0.009213599693406113, 0.015957329918265914, -0.06879945128708467, 0.9974603293891768, 0.8839332780995397, 1.0922828468345622, 0.8787231823910455, -0.05174788637412589, 0.018672771582524117, 0.04907929547406663, 3.794179950932613, 18.681753546342325, -21.738148938599647]
 my params [0.012977889382313946, -0.014722042121008583, 0.05181574776157397, 0.9984638021214773, 1.1115470355727484, 0.8589600701977345, 1.162401608855092, -0.021410971303645734, -0.030936923668180426, -0.03661302292678423, -3.0307217623396006, -18.25055344581449, 24.487341214578414]
A=0.891072 0.11678 0.0555345 
-0.121791 1.15669 0.0598686 
-0.0241345 -0.0236077 0.859625 

rotation R0.990432 0.134824 0.0294504 
-0.135371 0.990642 0.0174244 
-0.0268256 -0.0212444 0.999414 

upper R0.89968 -0.0402864 0.0238387 
0 1.16211 0.0485335 
0 0 0.8618 

s=0.250612 u=-0.00969085 v=0.0141034 w-0.0677143 r=0.997558
m_Rotation from vnl-0.00969085 0.0141034 -0.0677143 0.997558
 new params [-0.00969085190099332, 0.01410344773890201, -0.06771428121761726, 0.9975579964445627, 0.8996802611446775, 1.1621122625119884, 0.8618004195269515, -0.04477855425940422, 0.0264969022133443, 0.04176317531853479, 3.4720025497012577, 19.27510634152666, -21.553932214387643]
outputput affine center: [7.00321, -14.978, 9.73821]
output affine para: [-0.00969085190099332, 0.01410344773890201, -0.06771428121761726, 0.9975579964445627, 0.8996802611446775, 1.1621122625119884, 0.8618004195269515, -0.04477855425940422, 0.0264969022133443, 0.04176317531853479, 3.4720025497012577, 19.27510634152666, -21.553932214387643]
initial measure value (MMI): rval = -0.130022
final measure value (MMI): rval = -0.340886
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -4424.1
 iteration 2 energy 0 : -4811.49
 iteration 3 energy 0 : -5225.65
 iteration 4 energy 0 : -5543.43
 iteration 5 energy 0 : -5796.92
 iteration 6 energy 0 : -6011.66
 iteration 7 energy 0 : -6160.7
 iteration 8 energy 0 : -6285.71
 iteration 9 energy 0 : -6394.82
 iteration 10 energy 0 : -6495.24
 iteration 11 energy 0 : -6587.22
 iteration 12 energy 0 : -6671.08
 E-Slope 0.015226 iteration 13 energy 0 : -6749.1
 E-Slope 0.0123166 iteration 14 energy 0 : -6823.62
 E-Slope 0.0102863 iteration 15 energy 0 : -6898.54
 E-Slope 0.00885425 iteration 16 energy 0 : -6969.75
 E-Slope 0.00785396 iteration 17 energy 0 : -7039
 E-Slope 0.00719996 iteration 18 energy 0 : -7107.09
 E-Slope 0.0066845 iteration 19 energy 0 : -7164.75
 E-Slope 0.00625882 iteration 20 energy 0 : -7222.14
 E-Slope 0.00587542 iteration 21 energy 0 : -7272.3
 E-Slope 0.00542618 iteration 22 energy 0 : -7285.61
 E-Slope 0.00477903 iteration 23 energy 0 : -7248.93
 E-Slope 0.00412216 iteration 24 energy 0 : -7271.58
 E-Slope 0.00334514 iteration 25 energy 0 : -7247.72
 E-Slope 0.00261128 iteration 26 energy 0 : -7267.94
 E-Slope 0.00186573 iteration 27 energy 0 : -7251.62
 E-Slope 0.00123944 iteration 28 energy 0 : -7267.62
 E-Slope 0.000697874 iteration 29 energy 0 : -7258.96
 E-Slope 0.000325829 iteration 30 energy 0 : -7269.42
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -15775.5
 iteration 2 energy 0 : -16106.8
 iteration 3 energy 0 : -16405.4
 iteration 4 energy 0 : -16644
 iteration 5 energy 0 : -16819.4
 iteration 6 energy 0 : -16960.1
 iteration 7 energy 0 : -17087
 iteration 8 energy 0 : -17208.1
 iteration 9 energy 0 : -17328.6
 iteration 10 energy 0 : -17452.8
 iteration 11 energy 0 : -17588.4
 iteration 12 energy 0 : -17735.2
 E-Slope 0.00493892 iteration 13 energy 0 : -17876.7
 E-Slope 0.0045751 iteration 14 energy 0 : -18013.1
 E-Slope 0.00437663 iteration 15 energy 0 : -18127.6
 E-Slope 0.00425943 iteration 16 energy 0 : -18220.8
 E-Slope 0.00414795 iteration 17 energy 0 : -18306.7
 E-Slope 0.00399243 iteration 18 energy 0 : -18378.4
 E-Slope 0.00374378 iteration 19 energy 0 : -18410.7
 E-Slope 0.00329867 iteration 20 energy 0 : -18337.7
 E-Slope 0.00283113 iteration 21 energy 0 : -18393.2
 E-Slope 0.00222918 iteration 22 energy 0 : -18319.1
 E-Slope 0.0017033 iteration 23 energy 0 : -18388.1
 E-Slope 0.00116287 iteration 24 energy 0 : -18334.8
 E-Slope 0.000769787 iteration 25 energy 0 : -18399.5
 E-Slope 0.000423715 iteration 26 energy 0 : -18355.4
 E-Slope 0.000258997 iteration 27 energy 0 : -18433.6
 E-Slope 0.000121295 iteration 28 energy 0 : -18385.7
 E-Slope 0.000151411 iteration 29 energy 0 : -18463.4
 E-Slope 0.000193112 iteration 30 energy 0 : -18414.5
 E-Slope 0.000343859 iteration 31 energy 0 : -18491.6
 E-Slope 0.000328682 iteration 32 energy 0 : -18436.4
 E-Slope 0.000431523 iteration 33 energy 0 : -18506.8
 E-Slope 0.000374444 iteration 34 energy 0 : -18463.9
 E-Slope 0.000440627 iteration 35 energy 0 : -18529.5
 E-Slope 0.000367813 iteration 36 energy 0 : -18485.1
 E-Slope 0.000411592 iteration 37 energy 0 : -18548.7
 E-Slope 0.000327319 iteration 38 energy 0 : -18503.6
 E-Slope 0.000372149 iteration 39 energy 0 : -18562.8
 E-Slope 0.000287227 iteration 40 energy 0 : -18517.2
 E-Slope 0.000329353 iteration 41 energy 0 : -18572.8
 E-Slope 0.000238255 iteration 42 energy 0 : -18522.1
 E-Slope 0.000270464 iteration 43 energy 0 : -18571.3
 E-Slope 0.000181228 iteration 44 energy 0 : -18533.8
 E-Slope 0.000200249 iteration 45 energy 0 : -18573.2
 E-Slope 0.000111848 iteration 46 energy 0 : -18531.5
 E-Slope 0.000135764 iteration 47 energy 0 : -18574.7
 E-Slope 5.79879e-05 iteration 48 energy 0 : -18535.8
 Converged due to oscillation in optimization  metric 0 bad 15  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -121748
 iteration 2 energy 0 : -123718
 iteration 3 energy 0 : -126365
 iteration 4 energy 0 : -128711
 iteration 5 energy 0 : -130842
 iteration 6 energy 0 : -132535
 iteration 7 energy 0 : -133955
 iteration 8 energy 0 : -135226
 iteration 9 energy 0 : -136279
 iteration 10 energy 0 : -137191
 iteration 11 energy 0 : -137995
 iteration 12 energy 0 : -138702
 E-Slope 0.00587807 iteration 13 energy 0 : -139334
 E-Slope 0.00501123 iteration 14 energy 0 : -139921
 E-Slope 0.00429365 iteration 15 energy 0 : -140507
 E-Slope 0.00370813 iteration 16 energy 0 : -141008
 E-Slope 0.0032602 iteration 17 energy 0 : -141527
 E-Slope 0.0029021 iteration 18 energy 0 : -141979
 E-Slope 0.00262263 iteration 19 energy 0 : -142479
 E-Slope 0.00240465 iteration 20 energy 0 : -142891
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1621_10162015_Aug1_Ref_vimp2_2628_10282016/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1621_10162015_Aug1_Ref_vimp2_2628_10282016/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1621_10162015_Aug1_Ref_vimp2_2628_10282016/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1621_10162015_Aug1_Ref_vimp2_2628_10282016/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1621_10162015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2587_10132016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1621_10162015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2587_10132016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547775948
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [7.00321, -14.978, 9.73821]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 3.673249983522174, 29.11178681179904, -1.23468792806373]
level 0, iter 613, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.045207911757966415, 0.016245822323955095, -0.03019873139438409, 0.9983888794421101, 0.8918719378210593, 1.0060889653549139, 0.9132078128471715, 0.0017972205918221126, -0.03877589469598711, 0.0003066884298153593, 2.83723046598692, 28.932535724816493, -2.199192543884193]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 237, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.0512153976731123, 0.018586451971212545, -0.03689692264449712, 0.9978327234279665, 0.88400338419862, 1.0423504969874606, 0.9141566910630818, 0.0022279760557398975, -0.04765191376745526, 0.012425064351623199, 2.8012942434252115, 28.934754766462074, -2.2768236334281595]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 307, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.05215727252743199, 0.020470823636192858, -0.03175148710117576, 0.9979240488980207, 0.8789531638898935, 1.0643656876913425, 0.9090358645676648, -0.003059267303604038, -0.049166068443691764, 0.012549709787096328, 2.921573737667689, 28.71707766024222, -2.212256971129487]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 110, size: fix[42, 46, 32]-mov[37, 38, 32], affine para: [0.04480267400421611, 0.023012001841088675, -0.037088870503362986, 0.9980418748019155, 0.8799669455968464, 1.0764576432994495, 0.9017929056286337, -0.004441566351933465, -0.05653457546553542, 0.018462753788805002, 2.907687948832296, 28.602865308171097, -2.12829414443898]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 314, size: fix[83, 91, 45]-mov[73, 76, 40], affine para: [0.042862298881082, 0.020541229875736856, -0.04404699298543392, 0.9978981629498883, 0.8927160190977309, 1.0896876761077507, 0.9013191527912863, -0.009956228264331301, -0.062477843141882046, 0.014815310926644546, 2.8826824910083437, 28.814741879795818, -2.310966982976905]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 997, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.041979597541058775, -0.02622987660399329, 0.03275867022654937, 0.9982367336902696, 1.1248693808349226, 0.8853402071161462, 1.1228273070518493, -0.025384683977087884, 0.07035049089060572, -0.05138532397121214, -0.9663408693778079, -25.33297844702453, 4.550090423722466]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 1155, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.05247830753271737, -0.03303730336804598, 0.03928625147841072, 0.9973019373637275, 1.1270366437119184, 0.8654897096607056, 1.1197023000086717, -0.03287678040875215, 0.08577968435352067, -0.0692573817521684, -0.3673734554861044, -24.778105363344032, 5.079221821306673]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 1640, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.04776559840079105, -0.026132633639289422, 0.04061278866183398, 0.9976904001069662, 1.1239450793984658, 0.8656257020573623, 1.1341781193759033, -0.021015668797156696, 0.0654173463253792, -0.08586843765313223, -0.7438937698667301, -25.145282104357474, 4.779860273831224]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 410, size: fix[37, 38, 32]-mov[42, 46, 32], affine para: [-0.05000375242443031, -0.027580425219483038, 0.038576439893559196, 0.9976225755130681, 1.119887614878376, 0.8713211201839988, 1.1236805141385224, -0.02222784096813728, 0.06589619988386151, -0.08377611873055771, -0.5886225651300896, -25.10371423351553, 4.9388816949582415]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 485, size: fix[73, 76, 40]-mov[83, 91, 45], affine para: [-0.057412116165921886, -0.026015964684361532, 0.0372697821834572, 0.9973153873448912, 1.1279691792740716, 0.8643841208635181, 1.1137599894544015, -0.0172240049427, 0.05829151837677754, -0.08508303774365543, -0.880911497274799, -24.87749378283073, 5.302035646992953]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.362509 v2 -0.375475
 last params [0.042862298881082, 0.020541229875736856, -0.04404699298543392, 0.9978981629498883, 0.8927160190977309, 1.0896876761077507, 0.9013191527912863, -0.009956228264331301, -0.062477843141882046, 0.014815310926644546, 2.8826824910083437, 28.814741879795818, -2.310966982976905]
 my params [-0.057412116165921886, -0.026015964684361532, 0.0372697821834572, 0.9973153873448912, 1.1279691792740716, 0.8643841208635181, 1.1137599894544015, -0.0172240049427, 0.05829151837677754, -0.08508303774365543, -0.880911497274799, -24.87749378283073, 5.302035646992953]
A=0.88433 0.0825497 -0.0107259 
-0.086838 1.15465 -0.0589406 
-0.0504343 0.101078 0.890725 

rotation R0.993614 0.102185 0.0478447 
-0.0975692 0.991105 -0.0905005 
-0.0566669 0.0852544 0.994746 

upper R0.890014 -0.0363638 -0.0553812 
0 1.16144 0.0164259 
0 0 0.890867 

s=0.250644 u=0.044052 v=0.0261952 w-0.0500672 r=0.99743
m_Rotation from vnl0.044052 0.0261952 -0.0500672 0.99743
 new params [0.04405195165816828, 0.026195208543564986, -0.05006724316425677, 0.997429951308059, 0.8900137377063021, 1.1614350984484936, 0.8908666845323194, -0.040857602665107115, -0.06222510810243563, 0.01414275446974032, 2.8895145566491247, 28.960871029452854, -2.252514616651224]
outputput affine center: [7.00321, -14.978, 9.73821]
output affine para: [0.04405195165816828, 0.026195208543564986, -0.05006724316425677, 0.997429951308059, 0.8900137377063021, 1.1614350984484936, 0.8908666845323194, -0.040857602665107115, -0.06222510810243563, 0.01414275446974032, 2.8895145566491247, 28.960871029452854, -2.252514616651224]
initial measure value (MMI): rval = -0.259062
final measure value (MMI): rval = -0.400978
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -4721.15
 iteration 2 energy 0 : -5076.04
 iteration 3 energy 0 : -5482.45
 iteration 4 energy 0 : -5816.63
 iteration 5 energy 0 : -6049.53
 iteration 6 energy 0 : -6220.8
 iteration 7 energy 0 : -6369.69
 iteration 8 energy 0 : -6504.57
 iteration 9 energy 0 : -6607.61
 iteration 10 energy 0 : -6688.66
 iteration 11 energy 0 : -6754.6
 iteration 12 energy 0 : -6821.73
 E-Slope 0.0136631 iteration 13 energy 0 : -6894.18
 E-Slope 0.0109193 iteration 14 energy 0 : -6981.33
 E-Slope 0.00900824 iteration 15 energy 0 : -7043.93
 E-Slope 0.00773399 iteration 16 energy 0 : -7097.69
 E-Slope 0.00681202 iteration 17 energy 0 : -7145.68
 E-Slope 0.00608715 iteration 18 energy 0 : -7191.63
 E-Slope 0.00553335 iteration 19 energy 0 : -7240.46
 E-Slope 0.00510787 iteration 20 energy 0 : -7278.98
 E-Slope 0.00461504 iteration 21 energy 0 : -7271.49
 E-Slope 0.00403372 iteration 22 energy 0 : -7265.65
 E-Slope 0.00335719 iteration 23 energy 0 : -7259.56
 E-Slope 0.0026748 iteration 24 energy 0 : -7269.96
 E-Slope 0.00198292 iteration 25 energy 0 : -7259.34
 E-Slope 0.00144977 iteration 26 energy 0 : -7277.2
 E-Slope 0.000956111 iteration 27 energy 0 : -7264.16
 E-Slope 0.000598684 iteration 28 energy 0 : -7282.5
 E-Slope 0.0003075 iteration 29 energy 0 : -7274.17
 E-Slope 0.00014741 iteration 30 energy 0 : -7284.79
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -15500.8
 iteration 2 energy 0 : -15766.5
 iteration 3 energy 0 : -15969.4
 iteration 4 energy 0 : -16155.3
 iteration 5 energy 0 : -16348.2
 iteration 6 energy 0 : -16518.6
 iteration 7 energy 0 : -16672.6
 iteration 8 energy 0 : -16811.1
 iteration 9 energy 0 : -16909.9
 iteration 10 energy 0 : -17019.2
 iteration 11 energy 0 : -17104
 iteration 12 energy 0 : -17184.7
 E-Slope 0.00463688 iteration 13 energy 0 : -17235.9
 E-Slope 0.00408731 iteration 14 energy 0 : -17288.1
 E-Slope 0.00354099 iteration 15 energy 0 : -17316.5
 E-Slope 0.00303157 iteration 16 energy 0 : -17362.5
 E-Slope 0.00251973 iteration 17 energy 0 : -17340.5
 E-Slope 0.00207973 iteration 18 energy 0 : -17375.7
 E-Slope 0.00164636 iteration 19 energy 0 : -17348.3
 E-Slope 0.00130621 iteration 20 energy 0 : -17385.3
 E-Slope 0.000983156 iteration 21 energy 0 : -17379.6
 E-Slope 0.000749364 iteration 22 energy 0 : -17406.2
 E-Slope 0.000525624 iteration 23 energy 0 : -17375.6
 E-Slope 0.000402816 iteration 24 energy 0 : -17413
 E-Slope 0.000318691 iteration 25 energy 0 : -17421.1
 E-Slope 0.000268809 iteration 26 energy 0 : -17418.9
 E-Slope 0.00020013 iteration 27 energy 0 : -17391
 E-Slope 0.000223719 iteration 28 energy 0 : -17435.3
 E-Slope 0.000172421 iteration 29 energy 0 : -17407.2
 E-Slope 0.000184052 iteration 30 energy 0 : -17435.7
 E-Slope 0.000117697 iteration 31 energy 0 : -17407.8
 E-Slope 0.000127226 iteration 32 energy 0 : -17442.8
 E-Slope 9.59784e-05 iteration 33 energy 0 : -17421.5
 Converged due to oscillation in optimization  metric 0 bad 9  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -111329
 iteration 2 energy 0 : -112794
 iteration 3 energy 0 : -114410
 iteration 4 energy 0 : -115755
 iteration 5 energy 0 : -116978
 iteration 6 energy 0 : -118047
 iteration 7 energy 0 : -119006
 iteration 8 energy 0 : -119855
 iteration 9 energy 0 : -120641
 iteration 10 energy 0 : -121417
 iteration 11 energy 0 : -122208
 iteration 12 energy 0 : -122988
 E-Slope 0.0045986 iteration 13 energy 0 : -123742
 E-Slope 0.00421049 iteration 14 energy 0 : -124365
 E-Slope 0.00389694 iteration 15 energy 0 : -124908
 E-Slope 0.00361437 iteration 16 energy 0 : -125353
 E-Slope 0.00335107 iteration 17 energy 0 : -125745
 E-Slope 0.00308556 iteration 18 energy 0 : -126060
 E-Slope 0.00281545 iteration 19 energy 0 : -126367
 E-Slope 0.00253963 iteration 20 energy 0 : -126669
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1621_10162015_Aug2_Ref_vimp2_2587_10132016_Test_NewCases/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1621_10162015_Aug2_Ref_vimp2_2587_10132016_Test_NewCases/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1621_10162015_Aug2_Ref_vimp2_2587_10132016_Test_NewCases/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1621_10162015_Aug2_Ref_vimp2_2587_10132016_Test_NewCases/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1622_05292015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2628_10282016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1622_05292015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2628_10282016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547776084
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [7.26562, -25.593, 26.395]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 7.076496675263503, 29.95654905612517, -40.29915194546801]
level 0, iter 497, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.11565941033599106, 0.016685317301858172, -0.03429753058423778, 0.9925563865005809, 0.9684951015753834, 0.9482251018968456, 0.9825736567362032, -0.06325855482288949, -0.0007358732621146229, 0.04079195088727645, 5.378290012265185, 26.405672332612667, -39.8110159582141]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 27, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.11563750971077574, 0.016764388564359443, -0.036544824055631184, 0.9924774040040893, 0.9695415951801347, 0.9453403349272811, 0.9821577456817056, -0.06349117098082788, -0.0014371443344596468, 0.04080656390080888, 5.4111824161686695, 26.364346092885626, -39.77663759261329]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 160, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.11711566254719918, 0.016538183572636946, -0.03748671084807717, 0.9922727228842083, 0.9698904496600271, 0.9373141186635854, 0.9856663701029406, -0.0651784971606988, -0.0014555118638652892, 0.033765154923897756, 5.395902714189901, 26.420925503154574, -39.85604748146411]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 66, size: fix[37, 38, 32]-mov[36, 41, 35], affine para: [-0.11864152663146717, 0.016990792917777726, -0.0370460691692181, 0.9921003426436711, 0.971396165056223, 0.9377455581632599, 0.9836558129533072, -0.06716715960674688, -0.0022486767843562863, 0.03654101146475006, 5.429238700043081, 26.44291815638002, -39.80173976123901]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 38, size: fix[74, 75, 35]-mov[72, 81, 49], affine para: [-0.1226582236055789, 0.015477002959999575, -0.03840738589077799, 0.9915847393290887, 0.9725740036796106, 0.9371573342166666, 0.984932826775554, -0.06922776073692709, -0.0039179325834627875, 0.035364898178989176, 5.469664331137607, 26.52162932352064, -39.83895262410685]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 741, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.11318748586444538, -0.011495309318256774, 0.02418574057232117, 0.9932127168237085, 1.0238686801868289, 1.0338614463041573, 1.0251230499960604, 0.0328834415478363, -0.026253442188352766, -0.040308714450673695, -6.8671937124492795, -37.97397263290165, 32.97911995281441]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 693, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.10979428613218294, -0.014495261959067356, 0.036066242827810055, 0.9931940033255073, 1.0291815822331778, 1.033536399763853, 1.0286280969954495, 0.05489893952264064, -0.026900493548031295, -0.04928790266564883, -6.8977546403805, -38.01534340757294, 33.33212067607799]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 307, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.11083135077299107, -0.014839607400759855, 0.036500920711672866, 0.9930578434941367, 1.0298906764417761, 1.036090287250006, 1.0202225554521493, 0.061650807677165645, -0.02494710119647856, -0.04787894385173389, -6.9515452993560585, -38.043170910773625, 32.931711662812916]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 992, size: fix[36, 41, 35]-mov[37, 38, 32], affine para: [0.11843333848915308, -0.014923692253879892, 0.03266720376494807, 0.9923122903310251, 1.02523798034687, 1.047959192432622, 1.0333406865881183, 0.06331578059740234, -0.025790876354484557, -0.05056352636784767, -7.27944794021098, -39.36455360367164, 32.71044450454264]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 530, size: fix[72, 81, 49]-mov[74, 75, 35], affine para: [0.11297592971457346, -0.017180593034914853, 0.03377453706624188, 0.9928748899907064, 1.0136303857799518, 1.0470944742781014, 1.0246331957621098, 0.061511599254426993, -0.014229655181707716, -0.05635648007288784, -6.8723115616770105, -39.01965994958913, 32.68477376190529]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.598333 v2 -0.606023
 last params [-0.1226582236055789, 0.015477002959999575, -0.03840738589077799, 0.9915847393290887, 0.9725740036796106, 0.9371573342166666, 0.984932826775554, -0.06922776073692709, -0.0039179325834627875, 0.035364898178989176, 5.469664331137607, 26.52162932352064, -39.83895262410685]
 my params [0.11297592971457346, -0.017180593034914853, 0.03377453706624188, 0.9928748899907064, 1.0136303857799518, 1.0470944742781014, 1.0246331957621098, 0.061511599254426993, -0.014229655181707716, -0.05635648007288784, -6.8723115616770105, -39.01965994958913, 32.68477376190529]
A=0.987609 0.00285596 0.0383056 
-0.0692154 0.916063 0.266709 
-0.0258482 -0.220081 0.950469 

rotation R0.997213 0.0618093 0.0417756 
-0.0698885 0.969897 0.233273 
-0.0260996 -0.235542 0.971514 

upper R0.990369 -0.0554302 -0.00524788 
0 0.940501 0.0371716 
0 0 0.98721 

s=0.25194 u=-0.118113 v=0.0171005 w-0.03318 r=0.992298
m_Rotation from vnl-0.118113 0.0171005 -0.03318 0.992298
 new params [-0.11811346069367232, 0.01710049289597266, -0.033179991835030356, 0.9922982775796331, 0.9903693160599832, 0.9405011811605714, 0.9872100492983551, -0.05596925020833443, -0.005298916863998929, 0.039523202289451304, 5.646589654633389, 26.551479149555274, -39.83100735259996]
outputput affine center: [7.26562, -25.593, 26.395]
output affine para: [-0.11811346069367232, 0.01710049289597266, -0.033179991835030356, 0.9922982775796331, 0.9903693160599832, 0.9405011811605714, 0.9872100492983551, -0.05596925020833443, -0.005298916863998929, 0.039523202289451304, 5.646589654633389, 26.551479149555274, -39.83100735259996]
initial measure value (MMI): rval = -0.226418
final measure value (MMI): rval = -0.601021
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -7560.6
 iteration 2 energy 0 : -7918.3
 iteration 3 energy 0 : -8151.86
 iteration 4 energy 0 : -8302.96
 iteration 5 energy 0 : -8411.21
 iteration 6 energy 0 : -8498.44
 iteration 7 energy 0 : -8557.31
 iteration 8 energy 0 : -8585.28
 iteration 9 energy 0 : -8592.98
 iteration 10 energy 0 : -8598.59
 iteration 11 energy 0 : -8608.07
 iteration 12 energy 0 : -8611.93
 E-Slope 0.00354634 iteration 13 energy 0 : -8619.2
 E-Slope 0.00232204 iteration 14 energy 0 : -8620.45
 E-Slope 0.00151005 iteration 15 energy 0 : -8626.27
 E-Slope 0.000949942 iteration 16 energy 0 : -8626.51
 E-Slope 0.000586256 iteration 17 energy 0 : -8631.51
 E-Slope 0.000381194 iteration 18 energy 0 : -8631.15
 E-Slope 0.000296459 iteration 19 energy 0 : -8635.96
 E-Slope 0.000252627 iteration 20 energy 0 : -8634.5
 E-Slope 0.000220202 iteration 21 energy 0 : -8639.14
 E-Slope 0.000180423 iteration 22 energy 0 : -8637.08
 E-Slope 0.000161588 iteration 23 energy 0 : -8641.93
 E-Slope 0.000144996 iteration 24 energy 0 : -8644.04
 E-Slope 0.000138089 iteration 25 energy 0 : -8645.25
 E-Slope 0.000136875 iteration 26 energy 0 : -8650.62
 E-Slope 0.000146724 iteration 27 energy 0 : -8653.67
 E-Slope 0.000152573 iteration 28 energy 0 : -8656.17
 E-Slope 0.000160635 iteration 29 energy 0 : -8656.57
 E-Slope 0.000171088 iteration 30 energy 0 : -8662.76
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -12986.2
 iteration 2 energy 0 : -13060
 iteration 3 energy 0 : -13140.5
 iteration 4 energy 0 : -13222.9
 iteration 5 energy 0 : -13304.2
 iteration 6 energy 0 : -13391.5
 iteration 7 energy 0 : -13472.7
 iteration 8 energy 0 : -13536
 iteration 9 energy 0 : -13519.3
 iteration 10 energy 0 : -13555.8
 iteration 11 energy 0 : -13537.1
 iteration 12 energy 0 : -13589.2
 E-Slope 0.00203049 iteration 13 energy 0 : -13568.7
 E-Slope 0.00165842 iteration 14 energy 0 : -13610.1
 E-Slope 0.00126136 iteration 15 energy 0 : -13588.2
 E-Slope 0.000962317 iteration 16 energy 0 : -13628.8
 E-Slope 0.00068178 iteration 17 energy 0 : -13606.3
 E-Slope 0.000537865 iteration 18 energy 0 : -13644.8
 E-Slope 0.000440747 iteration 19 energy 0 : -13622.7
 E-Slope 0.000444919 iteration 20 energy 0 : -13647.3
 E-Slope 0.000360601 iteration 21 energy 0 : -13625.5
 E-Slope 0.000346571 iteration 22 energy 0 : -13652.4
 E-Slope 0.000248179 iteration 23 energy 0 : -13631.6
 E-Slope 0.00024496 iteration 24 energy 0 : -13654.8
 E-Slope 0.000163577 iteration 25 energy 0 : -13634.8
 E-Slope 0.000169195 iteration 26 energy 0 : -13659
 E-Slope 0.000100419 iteration 27 energy 0 : -13639.5
 E-Slope 0.000120915 iteration 28 energy 0 : -13663.4
 E-Slope 6.98045e-05 iteration 29 energy 0 : -13644.2
 Converged due to oscillation in optimization  metric 0 bad 11  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -72645.6
 iteration 2 energy 0 : -73951.7
 iteration 3 energy 0 : -75174.1
 iteration 4 energy 0 : -76141.2
 iteration 5 energy 0 : -76892.4
 iteration 6 energy 0 : -77475.8
 iteration 7 energy 0 : -77979.5
 iteration 8 energy 0 : -78498
 iteration 9 energy 0 : -79057.6
 iteration 10 energy 0 : -79571.4
 iteration 11 energy 0 : -80037.7
 iteration 12 energy 0 : -80449.8
 E-Slope 0.00432227 iteration 13 energy 0 : -80808.4
 E-Slope 0.00383881 iteration 14 energy 0 : -81123.4
 E-Slope 0.00347873 iteration 15 energy 0 : -81408.3
 E-Slope 0.00319308 iteration 16 energy 0 : -81673.6
 E-Slope 0.0029409 iteration 17 energy 0 : -81921.8
 E-Slope 0.00269213 iteration 18 energy 0 : -82154
 E-Slope 0.00243885 iteration 19 energy 0 : -82371.6
 E-Slope 0.00219366 iteration 20 energy 0 : -82561.1
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1622_05292015_Aug1_Ref_vimp2_2628_10282016/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1622_05292015_Aug1_Ref_vimp2_2628_10282016/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1622_05292015_Aug1_Ref_vimp2_2628_10282016/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1622_05292015_Aug1_Ref_vimp2_2628_10282016/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1622_05292015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1689_06262015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1622_05292015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1689_06262015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547776171
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [7.26562, -25.593, 26.395]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 2.840065005842664, 20.891628497598525, -25.845853058137322]
level 0, iter 467, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.06689277522300797, 0.0007611611164664565, -0.02449699921047333, 0.9974591090798666, 0.9746695682285591, 0.8696923146451518, 0.9693713606890303, -0.09465873445903471, 0.024432388775817, -0.03316849415135668, 2.8832950748568287, 19.21378530772667, -26.520283849087964]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 49, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.06461554753975622, -0.0007817163010978701, -0.027119135325277786, 0.9975413637714335, 0.9789494939655683, 0.8690188669181107, 0.970280467866247, -0.0959108864167788, 0.02472618035472842, -0.03526561836394601, 2.9155917140820797, 19.19061637223248, -26.51477522544329]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 30, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.06389708235257355, -0.0003939923741653486, -0.026098901720570895, 0.9976150835697191, 0.979842731631668, 0.8664829300098035, 0.9693543308598171, -0.09708422488449192, 0.02529978369898459, -0.03449535525317895, 2.887530437966937, 19.21041088295623, -26.528596259033094]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 224, size: fix[37, 38, 32]-mov[37, 41, 32], affine para: [-0.06690235068426849, 0.0018829299922476772, -0.02708797137384864, 0.9973899798245484, 0.9825246143169448, 0.8683268113270755, 0.9746601553685552, -0.09996242731518366, 0.020772094320567442, -0.04424662333295175, 2.9268742891760167, 19.113939571748634, -26.5764211595972]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 80, size: fix[74, 75, 35]-mov[74, 81, 37], affine para: [-0.06287457786020059, -0.0004760878688702803, -0.024658576709425006, 0.9977166508552957, 0.9769101871216552, 0.8610665110147953, 0.964812355434725, -0.09993448946264835, 0.02488367866076377, -0.04282768952890488, 2.9885961975015993, 19.182605104363255, -26.46515740386842]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 972, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.05909688192200176, -0.0017536373453422823, 0.022834964380697768, 0.9979895028029556, 1.0181422768714565, 1.1359246858313459, 1.021850618226627, 0.09573210825000203, -0.022037627233716293, 0.030867503668661082, -4.642696098734591, -23.95766374771766, 24.499959313609295]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 55, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.057706197065735904, -0.0012443066274250173, 0.022730586663090673, 0.9980740287930447, 1.0175870493853825, 1.1371453251845431, 1.0235626999514915, 0.09812203289693448, -0.020852068773026724, 0.030180789175107917, -4.6541275236369675, -23.883606541518102, 24.485761725006103]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 702, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.05880449630229137, -0.0019360312534719179, 0.0271435553479216, 0.997898547148303, 1.0108148107742503, 1.136537132269318, 1.0284170290758574, 0.1077020196661597, -0.019448269980225967, 0.02023676203483212, -4.52645666760283, -24.367205487735436, 24.601733865464663]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 222, size: fix[37, 41, 32]-mov[37, 38, 32], affine para: [0.05411704292255579, -0.0034647066205955633, 0.02649978557585445, 0.9981768895530416, 1.0127334282516838, 1.1398400865474034, 1.0248278976658312, 0.10953603966128936, -0.021634618329620124, 0.018130502386196675, -4.704203752431313, -24.202518630756035, 24.665395905425857]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 457, size: fix[74, 81, 37]-mov[74, 75, 35], affine para: [0.057575914759689324, 0.0005396931032502309, 0.02404865424772814, 0.9980512937719247, 1.016584643939052, 1.1535498822135153, 1.0216469335700673, 0.1111250157608851, -0.02450895378630401, 0.019842775671713074, -4.778957699161428, -24.5646133532904, 24.39758359648082]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.600364 v2 -0.603123
 last params [-0.06287457786020059, -0.0004760878688702803, -0.024658576709425006, 0.9977166508552957, 0.9769101871216552, 0.8610665110147953, 0.964812355434725, -0.09993448946264835, 0.02488367866076377, -0.04282768952890488, 2.9885961975015993, 19.182605104363255, -26.46515740386842]
 my params [0.057575914759689324, 0.0005396931032502309, 0.02404865424772814, 0.9980512937719247, 1.016584643939052, 1.1535498822135153, 1.0216469335700673, 0.1111250157608851, -0.02450895378630401, 0.019842775671713074, -4.778957699161428, -24.5646133532904, 24.39758359648082]
A=0.987266 -0.0513058 0.0165651 
-0.0416346 0.862371 0.0803583 
0.00376503 -0.112467 0.972322 

rotation R0.999105 0.0422726 0.00167629 
-0.0421339 0.990694 0.129419 
0.00381017 -0.129373 0.991589 

upper R0.988151 -0.0880234 0.0168692 
0 0.866727 -0.0454819 
0 0 0.974571 

s=0.250584 u=-0.0648491 v=-0.000534718 w-0.0211509 r=0.997671
m_Rotation from vnl-0.0648491 -0.000534718 -0.0211509 0.997671
 new params [-0.06484909524398572, -0.0005347176912550082, -0.021150871792306635, 0.9976707620981246, 0.9881511482705327, 0.8667273411386658, 0.9745707293691651, -0.08907890709509304, 0.017071486912337726, -0.052475393232467256, 3.053647641750797, 19.02428567101852, -26.467012329536693]
outputput affine center: [7.26562, -25.593, 26.395]
output affine para: [-0.06484909524398572, -0.0005347176912550082, -0.021150871792306635, 0.9976707620981246, 0.9881511482705327, 0.8667273411386658, 0.9745707293691651, -0.08907890709509304, 0.017071486912337726, -0.052475393232467256, 3.053647641750797, 19.02428567101852, -26.467012329536693]
initial measure value (MMI): rval = -0.315663
final measure value (MMI): rval = -0.634082
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -7569.5
 iteration 2 energy 0 : -7887.6
 iteration 3 energy 0 : -8101.22
 iteration 4 energy 0 : -8258.02
 iteration 5 energy 0 : -8386.49
 iteration 6 energy 0 : -8495.39
 iteration 7 energy 0 : -8576.97
 iteration 8 energy 0 : -8637.21
 iteration 9 energy 0 : -8685.7
 iteration 10 energy 0 : -8727.07
 iteration 11 energy 0 : -8761.65
 iteration 12 energy 0 : -8781.65
 E-Slope 0.00510908 iteration 13 energy 0 : -8779.31
 E-Slope 0.00391343 iteration 14 energy 0 : -8786.16
 E-Slope 0.00296365 iteration 15 energy 0 : -8785.75
 E-Slope 0.00219762 iteration 16 energy 0 : -8792.82
 E-Slope 0.00157972 iteration 17 energy 0 : -8793.11
 E-Slope 0.0011184 iteration 18 energy 0 : -8799.24
 E-Slope 0.000768311 iteration 19 energy 0 : -8799.72
 E-Slope 0.000514671 iteration 20 energy 0 : -8804.98
 E-Slope 0.00033579 iteration 21 energy 0 : -8805.59
 E-Slope 0.000236452 iteration 22 energy 0 : -8810.25
 E-Slope 0.000199407 iteration 23 energy 0 : -8810.82
 E-Slope 0.000204101 iteration 24 energy 0 : -8815.04
 E-Slope 0.000190377 iteration 25 energy 0 : -8815.58
 E-Slope 0.000188321 iteration 26 energy 0 : -8819.48
 E-Slope 0.00017342 iteration 27 energy 0 : -8820.08
 E-Slope 0.00017117 iteration 28 energy 0 : -8823.73
 E-Slope 0.000158958 iteration 29 energy 0 : -8824.36
 E-Slope 0.000157602 iteration 30 energy 0 : -8827.73
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -13248.7
 iteration 2 energy 0 : -13363.1
 iteration 3 energy 0 : -13445
 iteration 4 energy 0 : -13522.9
 iteration 5 energy 0 : -13595.7
 iteration 6 energy 0 : -13661.2
 iteration 7 energy 0 : -13687.8
 iteration 8 energy 0 : -13697.1
 iteration 9 energy 0 : -13726
 iteration 10 energy 0 : -13731.3
 iteration 11 energy 0 : -13746.5
 iteration 12 energy 0 : -13752.2
 E-Slope 0.00140783 iteration 13 energy 0 : -13768.3
 E-Slope 0.00108338 iteration 14 energy 0 : -13773.3
 E-Slope 0.000825278 iteration 15 energy 0 : -13787.9
 E-Slope 0.000628583 iteration 16 energy 0 : -13792.1
 E-Slope 0.000511654 iteration 17 energy 0 : -13805.1
 E-Slope 0.000459515 iteration 18 energy 0 : -13808.7
 E-Slope 0.000431761 iteration 19 energy 0 : -13820.5
 E-Slope 0.000391401 iteration 20 energy 0 : -13823.7
 E-Slope 0.000382036 iteration 21 energy 0 : -13834.6
 E-Slope 0.000358127 iteration 22 energy 0 : -13837.7
 E-Slope 0.000345938 iteration 23 energy 0 : -13847.5
 E-Slope 0.00032153 iteration 24 energy 0 : -13850.1
 E-Slope 0.00031136 iteration 25 energy 0 : -13858.9
 E-Slope 0.000289701 iteration 26 energy 0 : -13861.2
 E-Slope 0.0002812 iteration 27 energy 0 : -13869.3
 E-Slope 0.00026194 iteration 28 energy 0 : -13871.2
 E-Slope 0.000254266 iteration 29 energy 0 : -13878.6
 E-Slope 0.000236467 iteration 30 energy 0 : -13880.3
 E-Slope 0.000229388 iteration 31 energy 0 : -13887.1
 E-Slope 0.000213087 iteration 32 energy 0 : -13888.6
 E-Slope 0.000206739 iteration 33 energy 0 : -13894.7
 E-Slope 0.000191882 iteration 34 energy 0 : -13895.7
 E-Slope 0.000185803 iteration 35 energy 0 : -13901
 E-Slope 0.000171475 iteration 36 energy 0 : -13901.8
 E-Slope 0.000165209 iteration 37 energy 0 : -13906.5
 E-Slope 0.000151306 iteration 38 energy 0 : -13907
 E-Slope 0.000145175 iteration 39 energy 0 : -13911.4
 E-Slope 0.000132225 iteration 40 energy 0 : -13911.8
 E-Slope 0.000126943 iteration 41 energy 0 : -13915.9
 E-Slope 0.000115715 iteration 42 energy 0 : -13916.2
 E-Slope 0.00011187 iteration 43 energy 0 : -13920
 E-Slope 0.000102825 iteration 44 energy 0 : -13920.3
 E-Slope 0.00010059 iteration 45 energy 0 : -13923.8
 E-Slope 9.32366e-05 iteration 46 energy 0 : -13924
 Converged due to oscillation in optimization  metric 0 bad 0  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -75583.3
 iteration 2 energy 0 : -76919.3
 iteration 3 energy 0 : -78054.8
 iteration 4 energy 0 : -79028.5
 iteration 5 energy 0 : -79872.1
 iteration 6 energy 0 : -80516.7
 iteration 7 energy 0 : -81133.8
 iteration 8 energy 0 : -81683.2
 iteration 9 energy 0 : -82123
 iteration 10 energy 0 : -82466.2
 iteration 11 energy 0 : -82740.9
 iteration 12 energy 0 : -82959.2
 E-Slope 0.00388093 iteration 13 energy 0 : -83122.5
 E-Slope 0.00323322 iteration 14 energy 0 : -83270.9
 E-Slope 0.00268509 iteration 15 energy 0 : -83423
 E-Slope 0.00223926 iteration 16 energy 0 : -83611.2
 E-Slope 0.00189039 iteration 17 energy 0 : -83792.9
 E-Slope 0.00161166 iteration 18 energy 0 : -83975.1
 E-Slope 0.00141258 iteration 19 energy 0 : -84150.8
 E-Slope 0.00128824 iteration 20 energy 0 : -84320.1
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1622_05292015_Aug2_Ref_vimp2_1689_06262015/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1622_05292015_Aug2_Ref_vimp2_1689_06262015/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1622_05292015_Aug2_Ref_vimp2_1689_06262015/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1622_05292015_Aug2_Ref_vimp2_1689_06262015/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1623_05292015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1875_01262016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1623_05292015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1875_01262016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547776262
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [12.939, -14.353, 24.8575]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 2.5129044575740327, -0.3218705976673366, -43.87506096057756]
level 0, iter 2043, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.1432143038487299, 0.06207883258416148, -0.13225063088422775, 0.9788491468805779, 1.1159931518265054, 1.0934506272942217, 1.0472560981011199, -0.006644367648634748, 0.003624685447828434, 0.055774483428845396, 2.7236760931689314, -1.6522148526030869, -46.36944956844005]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 187, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.1355380369280662, 0.06126438566697708, -0.1361374574475316, 0.9794604169001705, 1.1159470312053907, 1.109604593360563, 1.0531658254369765, -0.01461814260408146, 0.002393521580930868, 0.06949725125456134, 2.811866360402988, -1.7873388034800626, -46.32653170521086]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 151, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.1473132287103045, 0.059519647733513134, -0.14151051953226562, 0.9771033707046212, 1.11688480369721, 1.1219842585205604, 1.05817490601562, -0.022688930099009415, 0.001540451038373001, 0.07955530143474608, 2.8222071851709436, -1.7191446543147697, -46.646076749322944]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 500, size: fix[37, 39, 32]-mov[45, 46, 43], affine para: [-0.1354777317554039, 0.0607814494370089, -0.14904523676442905, 0.9776179811156208, 1.1244475729548111, 1.1333176986413802, 1.049917908952267, -0.0437345685251896, -0.006086444941224331, 0.10814878698804015, 2.6912736692001644, -1.425470777298805, -46.59242270834031]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 221, size: fix[73, 78, 34]-mov[90, 92, 60], affine para: [-0.12863003218283606, 0.058036251876756734, -0.14917406249542314, 0.9786895357401917, 1.1152726833727247, 1.1246995073114008, 1.0503796892385862, -0.04186320711993817, -0.0030493681047345836, 0.11058833061206388, 2.8174384524039584, -1.5861854454640376, -46.45949453756918]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 4613, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.15779522555512004, -0.06335330156313049, 0.130940645623465, 0.9766993259426208, 0.8938763800677105, 0.8379949589393846, 0.9728177521176152, 0.00009915813229629389, -0.012634808738756812, -0.029460012435298454, -6.597851874999275, -15.29625411746204, 42.421460771360636]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 775, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.15649650611283245, -0.0652749167678111, 0.1315754775930457, 0.9766964331416358, 0.8943917977510957, 0.828572325464913, 0.9762157597430027, -0.0021807899843958286, -0.009910827174702682, -0.04311192867770742, -6.6204785675446445, -15.83943938338064, 42.29553970530847]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 1271, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.1576323970800713, -0.06603557269881177, 0.13761147912197996, 0.9756302636465269, 0.8916580904167801, 0.8270807638534617, 0.9804706415644273, 0.000692681109428733, -0.011216006987621064, -0.047305542877896505, -6.464289141084699, -16.094988442164237, 42.55778432572199]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 59, size: fix[45, 46, 43]-mov[37, 39, 32], affine para: [0.15834578859315093, -0.06678184557421622, 0.1377954795749222, 0.9754379540212859, 0.8904227887262536, 0.8277804808803945, 0.9786360477143587, 0.0011186433334580892, -0.010600368507283249, -0.04711912684054488, -6.483355737561026, -16.17727632108764, 42.46745394037105]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 87, size: fix[90, 92, 60]-mov[73, 78, 34], affine para: [0.1573623458457943, -0.06672827270877223, 0.1386088780544687, 0.9754855245751696, 0.8947107523562179, 0.8264510300422105, 0.9757212137434337, 0.0005916382296666501, -0.011276111626394086, -0.04677109700626873, -6.420046542879736, -16.204921411247543, 42.51359477058086]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.523262 v2 -0.533726
 last params [-0.12863003218283606, 0.058036251876756734, -0.14917406249542314, 0.9786895357401917, 1.1152726833727247, 1.1246995073114008, 1.0503796892385862, -0.04186320711993817, -0.0030493681047345836, 0.11058833061206388, 2.8174384524039584, -1.5861854454640376, -46.45949453756918]
 my params [0.1573623458457943, -0.06672827270877223, 0.1386088780544687, 0.9754855245751696, 0.8947107523562179, 0.8264510300422105, 0.9757212137434337, 0.0005916382296666501, -0.011276111626394086, -0.04677109700626873, -6.420046542879736, -16.204921411247543, 42.51359477058086]
A=1.06399 0.274367 0.20491 
-0.356769 1.08797 0.39423 
-0.0887152 -0.333607 0.964998 

rotation R0.94517 0.282542 0.163778 
-0.316927 0.914575 0.251218 
-0.078808 -0.289349 0.953974 

upper R1.12571 -0.0591927 -0.00731661 
0 1.16908 0.139228 
0 0 1.05318 

s=0.256033 u=-0.138403 v=0.0621101 w-0.153484 r=0.976437
m_Rotation from vnl-0.138403 0.0621101 -0.153484 0.976437
 new params [-0.13840282018826458, 0.06211007708007735, -0.15348385804204065, 0.9764372499088576, 1.1257131548838324, 1.1690793228706953, 1.0531803564771336, -0.05258242488546669, -0.006499534992411834, 0.11909183933837661, 2.5654851261208065, -1.4201563024152364, -47.00116138667915]
outputput affine center: [12.939, -14.353, 24.8575]
output affine para: [-0.13840282018826458, 0.06211007708007735, -0.15348385804204065, 0.9764372499088576, 1.1257131548838324, 1.1690793228706953, 1.0531803564771336, -0.05258242488546669, -0.006499534992411834, 0.11909183933837661, 2.5654851261208065, -1.4201563024152364, -47.00116138667915]
initial measure value (MMI): rval = -0.18657
final measure value (MMI): rval = -0.525066
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -5727.26
 iteration 2 energy 0 : -6093.04
 iteration 3 energy 0 : -6457.55
 iteration 4 energy 0 : -6752.83
 iteration 5 energy 0 : -6995.99
 iteration 6 energy 0 : -7188.94
 iteration 7 energy 0 : -7354
 iteration 8 energy 0 : -7487.35
 iteration 9 energy 0 : -7593.16
 iteration 10 energy 0 : -7680.9
 iteration 11 energy 0 : -7759.58
 iteration 12 energy 0 : -7830.36
 E-Slope 0.0120891 iteration 13 energy 0 : -7894.74
 E-Slope 0.00982064 iteration 14 energy 0 : -7952.95
 E-Slope 0.00809518 iteration 15 energy 0 : -8004.98
 E-Slope 0.00678311 iteration 16 energy 0 : -8054.17
 E-Slope 0.00577511 iteration 17 energy 0 : -8092.47
 E-Slope 0.00498751 iteration 18 energy 0 : -8130.76
 E-Slope 0.00437121 iteration 19 energy 0 : -8161.84
 E-Slope 0.0038786 iteration 20 energy 0 : -8192.6
 E-Slope 0.00347099 iteration 21 energy 0 : -8224.59
 E-Slope 0.00312883 iteration 22 energy 0 : -8257.5
 E-Slope 0.0028543 iteration 23 energy 0 : -8292.22
 E-Slope 0.00264415 iteration 24 energy 0 : -8326.94
 E-Slope 0.00249357 iteration 25 energy 0 : -8361.04
 E-Slope 0.00240151 iteration 26 energy 0 : -8397.38
 E-Slope 0.00235908 iteration 27 energy 0 : -8434.46
 E-Slope 0.00227848 iteration 28 energy 0 : -8436.75
 E-Slope 0.00212931 iteration 29 energy 0 : -8434.05
 E-Slope 0.00194841 iteration 30 energy 0 : -8442.2
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -12921.4
 iteration 2 energy 0 : -12995.8
 iteration 3 energy 0 : -13054.9
 iteration 4 energy 0 : -13115.5
 iteration 5 energy 0 : -13180.4
 iteration 6 energy 0 : -13245.9
 iteration 7 energy 0 : -13310.4
 iteration 8 energy 0 : -13376.1
 iteration 9 energy 0 : -13443.4
 iteration 10 energy 0 : -13509.9
 iteration 11 energy 0 : -13579.3
 iteration 12 energy 0 : -13660.4
 E-Slope 0.00290688 iteration 13 energy 0 : -13755
 E-Slope 0.00299975 iteration 14 energy 0 : -13840.5
 E-Slope 0.00300816 iteration 15 energy 0 : -13864.6
 E-Slope 0.00284097 iteration 16 energy 0 : -13822.6
 E-Slope 0.00256249 iteration 17 energy 0 : -13809.9
 E-Slope 0.00219537 iteration 18 energy 0 : -13801.1
 E-Slope 0.00175184 iteration 19 energy 0 : -13786.8
 E-Slope 0.00136103 iteration 20 energy 0 : -13839.6
 E-Slope 0.000948988 iteration 21 energy 0 : -13822
 E-Slope 0.000573471 iteration 22 energy 0 : -13823
 E-Slope 0.00023929 iteration 23 energy 0 : -13808.2
 E-Slope 8.6315e-05 iteration 24 energy 0 : -13865.3
 Converged due to oscillation in optimization  metric 0 bad 6  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -69386.7
 iteration 2 energy 0 : -70519.4
 iteration 3 energy 0 : -71603.3
 iteration 4 energy 0 : -72594.8
 iteration 5 energy 0 : -73501.6
 iteration 6 energy 0 : -74530.6
 iteration 7 energy 0 : -75457
 iteration 8 energy 0 : -76257
 iteration 9 energy 0 : -76969.1
 iteration 10 energy 0 : -77554.9
 iteration 11 energy 0 : -78072.2
 iteration 12 energy 0 : -78519.8
 E-Slope 0.0058345 iteration 13 energy 0 : -78621.8
 E-Slope 0.00504267 iteration 14 energy 0 : -78487.5
 E-Slope 0.00430898 iteration 15 energy 0 : -78878.9
 E-Slope 0.003506 iteration 16 energy 0 : -78713.3
 E-Slope 0.00282554 iteration 17 energy 0 : -79182.1
 E-Slope 0.00218911 iteration 18 energy 0 : -79064.7
 E-Slope 0.00166378 iteration 19 energy 0 : -79137.2
 E-Slope 0.00120252 iteration 20 energy 0 : -79022.3
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1623_05292015_Aug1_Ref_vimp2_1875_01262016/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1623_05292015_Aug1_Ref_vimp2_1875_01262016/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1623_05292015_Aug1_Ref_vimp2_1875_01262016/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1623_05292015_Aug1_Ref_vimp2_1875_01262016/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1623_05292015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_969_07142014/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1623_05292015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_969_07142014/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547776380
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [12.939, -14.353, 24.8575]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -4.586024683297255, -0.742289678658226, 2.762049741298462]
level 0, iter 1130, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.06836895032127306, 0.00886810637848179, -0.015306962083553114, 0.997503253244319, 1.1020877557498654, 1.0172641920801468, 1.0678979518347371, -0.003921604877073875, 0.06227545676092283, 0.0014809541217679493, -3.1594604926546936, 0.005626043537200652, -0.3953591730361978]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 48, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.0683689592649882, 0.007206570812276443, -0.013774658661750865, 0.9975389764439795, 1.1036619939732897, 1.013754274480291, 1.0716720958093802, -0.0036238002199894437, 0.06494926513701446, -0.0005512361856975259, -3.121352586013575, 0.13084705900867166, -0.43813132443837494]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 82, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.06979126622590788, 0.005174393861290417, -0.011127216904680484, 0.9974861351671555, 1.1185238269657392, 1.0153340253118408, 1.0829147435112891, -0.005516101790526589, 0.07209167712208833, -0.005538748941584969, -3.2316077555393887, 0.10530462758172322, -0.3947609902575052]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 254, size: fix[37, 39, 32]-mov[38, 42, 32], affine para: [-0.07059048890857696, 0.0073846188360973345, -0.009740809358741597, 0.9974304822459208, 1.0986748061223923, 0.9995830392193548, 1.0917494081296242, -0.014299443229789691, 0.0823096031940006, -0.004303115407938659, -2.9926886440996405, 0.18997419193964743, -0.13578705002034952]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 418, size: fix[73, 78, 34]-mov[75, 84, 39], affine para: [-0.06677320614891591, 0.0071942745475357785, -0.009494592385645081, 0.9976970652807192, 1.0944588399026236, 0.9994975510799511, 1.0911404457577074, -0.020084936585212584, 0.08524282695272768, -0.006351491158905601, -2.933227336294656, 0.09274526685669686, -0.2606637129554769]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 510, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.05405869614956156, -0.027041388040553078, 0.008033606462971167, 0.9981392096649885, 0.8956606249832418, 0.9388949462418895, 0.8563755946375112, 0.0095440573299075, -0.020071618882703507, -0.014579654181756429, 3.0644911028130006, 0.28268691995045636, -0.826565062483727]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 37, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.05692698778383483, -0.026936651233961877, 0.00835028415896074, 0.9979799635446713, 0.8939060498799256, 0.9402376676536044, 0.8540974274672806, 0.011810351638761693, -0.02141659378056126, -0.013267642762746864, 3.104882199534772, 0.2823598407983304, -0.7436461774444872]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 214, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.06205542993341549, -0.024238177800564562, 0.010154578739131842, 0.99772667543938, 0.8966394331064566, 0.9541224280228682, 0.8624629627662292, 0.018051164859228863, -0.033513152739043935, -0.005906511067562888, 3.008011443037063, 0.09215138957742981, -0.6534114541499793]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 62, size: fix[38, 42, 32]-mov[37, 39, 32], affine para: [0.06060659832042018, -0.02318350912125297, 0.01252006703072575, 0.9978139170538755, 0.8993684835494933, 0.9546324033162841, 0.8556912121840397, 0.020021425996838392, -0.03496703777893827, -0.006249853162652605, 3.048940957523823, 0.2013694451560217, -0.6222179201767724]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 27, size: fix[75, 84, 39]-mov[73, 78, 34], affine para: [0.062495358952250134, -0.02130382511696618, 0.010755455512615393, 0.9977598896134939, 0.9043780841700251, 0.960925071928283, 0.8614344972528224, 0.0192617104671011, -0.033422960691120926, -0.009006303308801629, 3.0675758868442644, 0.12186699098905114, -0.746449132636268]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.479365 v2 -0.508882
 last params [-0.06677320614891591, 0.0071942745475357785, -0.009494592385645081, 0.9976970652807192, 1.0944588399026236, 0.9994975510799511, 1.0911404457577074, -0.020084936585212584, 0.08524282695272768, -0.006351491158905601, -2.933227336294656, 0.09274526685669686, -0.2606637129554769]
 my params [0.062495358952250134, -0.02130382511696618, 0.010755455512615393, 0.9977598896134939, 0.9043780841700251, 0.960925071928283, 0.8614344972528224, 0.0192617104671011, -0.033422960691120926, -0.009006303308801629, 3.0675758868442644, 0.12186699098905114, -0.746449132636268]
A=1.10337 -0.0039273 0.0842642 
-0.025537 1.03099 0.139669 
-0.0477899 -0.145303 1.15073 

rotation R0.998796 0.0168273 0.0460729 
-0.0231167 0.989941 0.139581 
-0.0432606 -0.140478 0.989138 

upper R1.1047 -0.0214697 0.0311527 
0 1.04096 -0.0219705 
0 0 1.16161 

s=0.250694 u=-0.070209 v=0.0223954 w-0.0100137 r=0.997231
m_Rotation from vnl-0.070209 0.0223954 -0.0100137 0.997231
 new params [-0.0702090458167997, 0.02239539793015555, -0.010013723332331425, 0.997230595891476, 1.1046970147166713, 1.0409603656847115, 1.1616112551162947, -0.019434878044645863, 0.028200193573498858, -0.021105961175239198, -3.3212854783133867, 0.05694916324839161, 1.0232703145849449]
outputput affine center: [12.939, -14.353, 24.8575]
output affine para: [-0.0702090458167997, 0.02239539793015555, -0.010013723332331425, 0.997230595891476, 1.1046970147166713, 1.0409603656847115, 1.1616112551162947, -0.019434878044645863, 0.028200193573498858, -0.021105961175239198, -3.3212854783133867, 0.05694916324839161, 1.0232703145849449]
initial measure value (MMI): rval = -0.222567
final measure value (MMI): rval = -0.51435
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -5008.84
 iteration 2 energy 0 : -5290.16
 iteration 3 energy 0 : -5523.43
 iteration 4 energy 0 : -5731.47
 iteration 5 energy 0 : -5883.73
 iteration 6 energy 0 : -6011.91
 iteration 7 energy 0 : -6122.55
 iteration 8 energy 0 : -6215.76
 iteration 9 energy 0 : -6295.61
 iteration 10 energy 0 : -6366.56
 iteration 11 energy 0 : -6434.25
 iteration 12 energy 0 : -6494.85
 E-Slope 0.010129 iteration 13 energy 0 : -6547.77
 E-Slope 0.00850094 iteration 14 energy 0 : -6594.96
 E-Slope 0.00723577 iteration 15 energy 0 : -6637.92
 E-Slope 0.00631249 iteration 16 energy 0 : -6682.25
 E-Slope 0.0055931 iteration 17 energy 0 : -6726.74
 E-Slope 0.00503785 iteration 18 energy 0 : -6771.43
 E-Slope 0.00463693 iteration 19 energy 0 : -6821.38
 E-Slope 0.00435176 iteration 20 energy 0 : -6869.68
 E-Slope 0.00415912 iteration 21 energy 0 : -6919.12
 E-Slope 0.0040394 iteration 22 energy 0 : -6968.22
 E-Slope 0.00397972 iteration 23 energy 0 : -7014.64
 E-Slope 0.00394141 iteration 24 energy 0 : -7054.46
 E-Slope 0.00388523 iteration 25 energy 0 : -7088.05
 E-Slope 0.00377581 iteration 26 energy 0 : -7114
 E-Slope 0.00349205 iteration 27 energy 0 : -7099.09
 E-Slope 0.00320894 iteration 28 energy 0 : -7136.36
 E-Slope 0.00279898 iteration 29 energy 0 : -7123.68
 E-Slope 0.00238027 iteration 30 energy 0 : -7141.99
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -10899.3
 iteration 2 energy 0 : -10913.9
 iteration 3 energy 0 : -10938.8
 iteration 4 energy 0 : -10981.7
 iteration 5 energy 0 : -11074.8
 iteration 6 energy 0 : -11239.7
 iteration 7 energy 0 : -11355.2
 iteration 8 energy 0 : -11406
 iteration 9 energy 0 : -11383.3
 iteration 10 energy 0 : -11488.8
 iteration 11 energy 0 : -11489.4
 iteration 12 energy 0 : -11488.5
 E-Slope 0.00310841 iteration 13 energy 0 : -11471.8
 E-Slope 0.0027607 iteration 14 energy 0 : -11546.5
 E-Slope 0.00221762 iteration 15 energy 0 : -11515.2
 E-Slope 0.00173675 iteration 16 energy 0 : -11592.7
 E-Slope 0.00124101 iteration 17 energy 0 : -11562.6
 E-Slope 0.00105882 iteration 18 energy 0 : -11626.4
 E-Slope 0.000945166 iteration 19 energy 0 : -11592.4
 E-Slope 0.000990622 iteration 20 energy 0 : -11669
 E-Slope 0.000864312 iteration 21 energy 0 : -11637.1
 E-Slope 0.0009185 iteration 22 energy 0 : -11668.9
 E-Slope 0.000860043 iteration 23 energy 0 : -11638.9
 E-Slope 0.000858285 iteration 24 energy 0 : -11705.1
 E-Slope 0.000721015 iteration 25 energy 0 : -11680.7
 E-Slope 0.000725769 iteration 26 energy 0 : -11715.7
 E-Slope 0.000577472 iteration 27 energy 0 : -11688.9
 E-Slope 0.000642762 iteration 28 energy 0 : -11756.7
 E-Slope 0.000567682 iteration 29 energy 0 : -11733.6
 E-Slope 0.000590995 iteration 30 energy 0 : -11748.7
 E-Slope 0.000474446 iteration 31 energy 0 : -11726.4
 E-Slope 0.000551276 iteration 32 energy 0 : -11780
 E-Slope 0.000497326 iteration 33 energy 0 : -11759.5
 E-Slope 0.000513397 iteration 34 energy 0 : -11787.7
 E-Slope 0.000406571 iteration 35 energy 0 : -11768.2
 E-Slope 0.000466079 iteration 36 energy 0 : -11814.1
 E-Slope 0.000416003 iteration 37 energy 0 : -11794.3
 E-Slope 0.000441387 iteration 38 energy 0 : -11819.5
 E-Slope 0.000360928 iteration 39 energy 0 : -11804.2
 E-Slope 0.000416607 iteration 40 energy 0 : -11829.7
 E-Slope 0.000379093 iteration 41 energy 0 : -11815.1
 E-Slope 0.000370435 iteration 42 energy 0 : -11831.5
 E-Slope 0.000279427 iteration 43 energy 0 : -11821.8
 E-Slope 0.00029818 iteration 44 energy 0 : -11843.2
 E-Slope 0.000237785 iteration 45 energy 0 : -11829.9
 E-Slope 0.000222884 iteration 46 energy 0 : -11837.3
 E-Slope 0.000152439 iteration 47 energy 0 : -11834
 E-Slope 0.000176653 iteration 48 energy 0 : -11849.6
 E-Slope 0.000143901 iteration 49 energy 0 : -11843.9
 E-Slope 0.000175133 iteration 50 energy 0 : -11861.9
 E-Slope 0.000152595 iteration 51 energy 0 : -11853.3
 E-Slope 0.000179611 iteration 52 energy 0 : -11862.4
 E-Slope 0.000164546 iteration 53 energy 0 : -11859.7
 E-Slope 0.000186488 iteration 54 energy 0 : -11871.7
 E-Slope 0.000166684 iteration 55 energy 0 : -11865.2
 E-Slope 0.000184894 iteration 56 energy 0 : -11872.3
 E-Slope 0.000169009 iteration 57 energy 0 : -11872.9
 E-Slope 0.000174619 iteration 58 energy 0 : -11885
 E-Slope 0.000157326 iteration 59 energy 0 : -11882.4
 E-Slope 0.000172511 iteration 60 energy 0 : -11892.2
 E-Slope 0.000157326 iteration 61 energy 0 : -11887.4
 E-Slope 0.00018017 iteration 62 energy 0 : -11897.8
 E-Slope 0.000169449 iteration 63 energy 0 : -11894.1
 E-Slope 0.000179812 iteration 64 energy 0 : -11904.3
 E-Slope 0.000165969 iteration 65 energy 0 : -11900.3
 E-Slope 0.000177734 iteration 66 energy 0 : -11909.8
 E-Slope 0.000160195 iteration 67 energy 0 : -11906.3
 E-Slope 0.000158206 iteration 68 energy 0 : -11914.8
 E-Slope 0.000139698 iteration 69 energy 0 : -11911.2
 E-Slope 0.000144631 iteration 70 energy 0 : -11918.5
 E-Slope 0.000130162 iteration 71 energy 0 : -11915.8
 E-Slope 0.000132211 iteration 72 energy 0 : -11920.8
 E-Slope 0.000115044 iteration 73 energy 0 : -11919.8
 E-Slope 0.00011804 iteration 74 energy 0 : -11925.9
 E-Slope 0.000100091 iteration 75 energy 0 : -11922.1
 E-Slope 0.000101775 iteration 76 energy 0 : -11927.4
 E-Slope 8.69483e-05 iteration 77 energy 0 : -11925.9
 Converged due to oscillation in optimization  metric 0 bad 34  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -61219.5
 iteration 2 energy 0 : -62464.1
 iteration 3 energy 0 : -63609.6
 iteration 4 energy 0 : -64668.8
 iteration 5 energy 0 : -65362.7
 iteration 6 energy 0 : -66034.8
 iteration 7 energy 0 : -66563.2
 iteration 8 energy 0 : -67130.5
 iteration 9 energy 0 : -67735.3
 iteration 10 energy 0 : -68077.2
 iteration 11 energy 0 : -68580.1
 iteration 12 energy 0 : -68751.6
 E-Slope 0.0050021 iteration 13 energy 0 : -69132.4
 E-Slope 0.00429681 iteration 14 energy 0 : -69228
 E-Slope 0.00370932 iteration 15 energy 0 : -69439.1
 E-Slope 0.00320619 iteration 16 energy 0 : -69500.1
 E-Slope 0.00276949 iteration 17 energy 0 : -69766.1
 E-Slope 0.00234486 iteration 18 energy 0 : -69775
 E-Slope 0.00199235 iteration 19 energy 0 : -70041.5
 E-Slope 0.00166039 iteration 20 energy 0 : -70018.9
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1623_05292015_Aug2_Ref_vimp2_969_07142014/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1623_05292015_Aug2_Ref_vimp2_969_07142014/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1623_05292015_Aug2_Ref_vimp2_969_07142014/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1623_05292015_Aug2_Ref_vimp2_969_07142014/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1632_10232015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2553_09232016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1632_10232015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2553_09232016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547776487
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [14.6886, 0.499362, 21.8576]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0.8420118016578719, 4.79842106157239, -3.8976877209741154]
level 0, iter 351, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.055840482547052796, 0.007104567686497937, -0.06598880654336083, 0.9962313200446384, 1.0155349214850682, 1.0069698362086295, 0.9235368703250981, 0.0010072843775266425, 0.0016458373380839398, 0.004244527519173602, -0.9314724598031371, 3.603099611128416, -5.2840979099625205]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 82, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.05449566857077841, 0.0051054355818576196, -0.0661175953665375, 0.9963095002144114, 1.0138179982352882, 1.0142130568859067, 0.9255641552270107, 0.0044141018754529126, 0.009795559144133957, 0.0005144040371388826, -1.0117188191259563, 3.520298868817041, -5.222977045034659]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 104, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.050170926350014605, 0.0050821913203168865, -0.0636507345442697, 0.9966973630307949, 1.0161533762931534, 1.015135657258256, 0.9276211263753548, -0.00041658255962410056, 0.0027571434995827837, 0.0023607411881297153, -0.9939931426287498, 3.541724879059898, -5.206017736539517]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 306, size: fix[35, 36, 32]-mov[42, 40, 32], affine para: [-0.04999403607031015, 0.0002135696950736334, -0.06053170064924925, 0.996913468643039, 0.9979740903373805, 1.0054845425451016, 0.9176827052461259, -0.0019144281571547748, 0.021935888784653513, 0.020534418599111967, -1.3325186070812682, 3.658417956782595, -4.985340483559383]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 38, size: fix[70, 72, 34]-mov[84, 79, 41], affine para: [-0.04690846401308002, 0.003835467191467425, -0.06239339414203304, 0.9969412969492205, 1.0029969466968605, 1.0102294883752798, 0.9197357031679908, -0.0015283012182231413, 0.022379172955206954, 0.015742339158655274, -1.2504589677304105, 3.4963918934517784, -5.322653259344139]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 544, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.029212260681903135, -0.008780256283956343, 0.04566821052726597, 0.9984908439603631, 0.9662040800652375, 0.9986387540548703, 1.0430743383614631, -0.006533169874268439, 0.013950012666183904, -0.008382608092143013, 1.0913781886819676, -3.533359939661135, 5.320205308113469]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 209, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.04158999687983688, -0.014124792591595332, 0.05211513429385227, 0.9976746840384964, 0.96185034762463, 0.9997085273603352, 1.0583567177671822, -0.0034541999520619907, 0.02208313944115122, -0.011580346425858801, 1.0403039455485898, -3.9797938996545037, 5.484292785947525]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 92, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.041557959970139155, -0.015768817836699887, 0.05050047396725142, 0.997734424822676, 0.9560911627599281, 0.9954115830760379, 1.0524597034201424, -0.0014903815210514533, 0.0298876475349442, -0.009577101168844318, 1.07062366034541, -3.834802826911824, 5.325880121105024]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 338, size: fix[42, 40, 32]-mov[35, 36, 32], affine para: [0.03189185201930599, -0.01686646545372899, 0.05059167489340075, 0.9980675901708047, 0.9628447296546466, 1.0001857331002064, 1.052507528156935, 0.007066964893221835, 0.0382887065451053, -0.004858207506696444, 1.2282369465715457, -3.418649984467044, 5.379023477668091]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 260, size: fix[84, 79, 41]-mov[70, 72, 34], affine para: [0.03991877945483977, -0.02007689909233282, 0.056250752268042825, 0.9974162932491886, 0.9537845394964181, 0.994810360826386, 1.0479745535379767, 0.005538306219369601, 0.037913631449153704, -0.007605988423015631, 1.0906067793506462, -3.665280850185899, 5.410891549615836]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.32714 v2 -0.326373
final [-0.04690846401308002, 0.003835467191467425, -0.06239339414203304, 0.9969412969492205, 1.0029969466968605, 1.0102294883752798, 0.9197357031679908, -0.0015283012182231413, 0.022379172955206954, 0.015742339158655274, -1.2504589677304105, 3.4963918934517784, -5.322653259344139]
outputput affine center: [14.6886, 0.499362, 21.8576]
output affine para: [-0.04690846401308002, 0.003835467191467425, -0.06239339414203304, 0.9969412969492205, 1.0029969466968605, 1.0102294883752798, 0.9197357031679908, -0.0015283012182231413, 0.022379172955206954, 0.015742339158655274, -1.2504589677304105, 3.4963918934517784, -5.322653259344139]
initial measure value (MMI): rval = -0.216635
final measure value (MMI): rval = -0.330967
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -5096.95
 iteration 2 energy 0 : -5460.41
 iteration 3 energy 0 : -5750.41
 iteration 4 energy 0 : -6015.71
 iteration 5 energy 0 : -6256.08
 iteration 6 energy 0 : -6453.15
 iteration 7 energy 0 : -6621.43
 iteration 8 energy 0 : -6782.26
 iteration 9 energy 0 : -6911.64
 iteration 10 energy 0 : -7020.21
 iteration 11 energy 0 : -7108.74
 iteration 12 energy 0 : -7184.77
 E-Slope 0.0139126 iteration 13 energy 0 : -7250.28
 E-Slope 0.0116875 iteration 14 energy 0 : -7296.14
 E-Slope 0.0097498 iteration 15 energy 0 : -7335.63
 E-Slope 0.00809832 iteration 16 energy 0 : -7371.16
 E-Slope 0.00673831 iteration 17 energy 0 : -7407.13
 E-Slope 0.0056137 iteration 18 energy 0 : -7444.59
 E-Slope 0.00469305 iteration 19 energy 0 : -7479.75
 E-Slope 0.00397498 iteration 20 energy 0 : -7503.25
 E-Slope 0.00339628 iteration 21 energy 0 : -7520.48
 E-Slope 0.0029266 iteration 22 energy 0 : -7535.09
 E-Slope 0.00253885 iteration 23 energy 0 : -7549.85
 E-Slope 0.002209 iteration 24 energy 0 : -7559.61
 E-Slope 0.00193907 iteration 25 energy 0 : -7572.44
 E-Slope 0.00167993 iteration 26 energy 0 : -7580.07
 E-Slope 0.00143479 iteration 27 energy 0 : -7588.58
 E-Slope 0.00119475 iteration 28 energy 0 : -7591.79
 E-Slope 0.000997327 iteration 29 energy 0 : -7602.94
 E-Slope 0.000831626 iteration 30 energy 0 : -7603.88
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -9772.18
 iteration 2 energy 0 : -9834.23
 iteration 3 energy 0 : -9911.96
 iteration 4 energy 0 : -9976.62
 iteration 5 energy 0 : -10030.4
 iteration 6 energy 0 : -10080.4
 iteration 7 energy 0 : -10127.4
 iteration 8 energy 0 : -10174.1
 iteration 9 energy 0 : -10217.3
 iteration 10 energy 0 : -10260.8
 iteration 11 energy 0 : -10296.1
 iteration 12 energy 0 : -10324.4
 E-Slope 0.00255173 iteration 13 energy 0 : -10314.1
 E-Slope 0.00226436 iteration 14 energy 0 : -10348.4
 E-Slope 0.0019421 iteration 15 energy 0 : -10331.7
 E-Slope 0.0016833 iteration 16 energy 0 : -10366.8
 E-Slope 0.00138281 iteration 17 energy 0 : -10351.1
 E-Slope 0.00114448 iteration 18 energy 0 : -10381.1
 E-Slope 0.000887237 iteration 19 energy 0 : -10365
 E-Slope 0.000710048 iteration 20 energy 0 : -10390.6
 E-Slope 0.000529662 iteration 21 energy 0 : -10372.1
 E-Slope 0.000452779 iteration 22 energy 0 : -10401.2
 E-Slope 0.000370607 iteration 23 energy 0 : -10380.5
 E-Slope 0.000369079 iteration 24 energy 0 : -10406.2
 E-Slope 0.000294939 iteration 25 energy 0 : -10393.1
 E-Slope 0.000310265 iteration 26 energy 0 : -10414.8
 E-Slope 0.000246271 iteration 27 energy 0 : -10402.6
 E-Slope 0.000277728 iteration 28 energy 0 : -10425
 E-Slope 0.00023447 iteration 29 energy 0 : -10412.9
 E-Slope 0.000275895 iteration 30 energy 0 : -10434.5
 E-Slope 0.00024271 iteration 31 energy 0 : -10422.6
 E-Slope 0.000283711 iteration 32 energy 0 : -10443.5
 E-Slope 0.000244342 iteration 33 energy 0 : -10431.3
 E-Slope 0.000285499 iteration 34 energy 0 : -10451.8
 E-Slope 0.000234798 iteration 35 energy 0 : -10435.8
 E-Slope 0.000264838 iteration 36 energy 0 : -10459.8
 E-Slope 0.000226848 iteration 37 energy 0 : -10447.8
 E-Slope 0.000253364 iteration 38 energy 0 : -10467.2
 E-Slope 0.000207484 iteration 39 energy 0 : -10451.5
 E-Slope 0.000237703 iteration 40 energy 0 : -10475.3
 E-Slope 0.000203796 iteration 41 energy 0 : -10463.4
 E-Slope 0.000234328 iteration 42 energy 0 : -10482.2
 E-Slope 0.000195026 iteration 43 energy 0 : -10466.8
 E-Slope 0.00022766 iteration 44 energy 0 : -10489.7
 E-Slope 0.000197262 iteration 45 energy 0 : -10477.9
 E-Slope 0.000228167 iteration 46 energy 0 : -10495.8
 E-Slope 0.000181764 iteration 47 energy 0 : -10480.4
 E-Slope 0.000213407 iteration 48 energy 0 : -10503
 E-Slope 0.000183001 iteration 49 energy 0 : -10491
 E-Slope 0.000211947 iteration 50 energy 0 : -10508.6
 E-Slope 0.00016471 iteration 51 energy 0 : -10492.8
 E-Slope 0.000195205 iteration 52 energy 0 : -10514.8
 E-Slope 0.00016544 iteration 53 energy 0 : -10502.9
 E-Slope 0.000192523 iteration 54 energy 0 : -10519.2
 E-Slope 0.000145897 iteration 55 energy 0 : -10503.7
 E-Slope 0.000170887 iteration 56 energy 0 : -10522.8
 E-Slope 0.00013867 iteration 57 energy 0 : -10511.4
 E-Slope 0.000164956 iteration 58 energy 0 : -10528.5
 E-Slope 0.000122786 iteration 59 energy 0 : -10514.8
 E-Slope 0.000149347 iteration 60 energy 0 : -10532
 E-Slope 0.000109695 iteration 61 energy 0 : -10515.1
 E-Slope 0.000138305 iteration 62 energy 0 : -10536.5
 E-Slope 0.000101976 iteration 63 energy 0 : -10524.2
 E-Slope 0.000130035 iteration 64 energy 0 : -10539.1
 E-Slope 0.000107132 iteration 65 energy 0 : -10529.5
 E-Slope 0.00014212 iteration 66 energy 0 : -10546.7
 E-Slope 0.00011681 iteration 67 energy 0 : -10536.4
 E-Slope 0.000151031 iteration 68 energy 0 : -10552.3
 E-Slope 0.000132158 iteration 69 energy 0 : -10541.9
 E-Slope 0.000162974 iteration 70 energy 0 : -10555
 E-Slope 0.000137672 iteration 71 energy 0 : -10545.5
 E-Slope 0.000164844 iteration 72 energy 0 : -10560.3
 E-Slope 0.00013037 iteration 73 energy 0 : -10551.4
 E-Slope 0.000153527 iteration 74 energy 0 : -10564.4
 E-Slope 0.000126697 iteration 75 energy 0 : -10556.5
 E-Slope 0.000143431 iteration 76 energy 0 : -10568.5
 E-Slope 0.00011725 iteration 77 energy 0 : -10561.3
 E-Slope 0.000137471 iteration 78 energy 0 : -10572.4
 E-Slope 0.000115246 iteration 79 energy 0 : -10565.8
 E-Slope 0.000136532 iteration 80 energy 0 : -10576.5
 E-Slope 0.000115372 iteration 81 energy 0 : -10569.9
 E-Slope 0.000131987 iteration 82 energy 0 : -10580.4
 E-Slope 0.00010775 iteration 83 energy 0 : -10573.6
 E-Slope 0.00012476 iteration 84 energy 0 : -10584
 E-Slope 0.000102349 iteration 85 energy 0 : -10577
 E-Slope 0.00011795 iteration 86 energy 0 : -10587.3
 E-Slope 9.66713e-05 iteration 87 energy 0 : -10580.5
 Converged due to oscillation in optimization  metric 0 bad 38  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -54679.5
 iteration 2 energy 0 : -56199.2
 iteration 3 energy 0 : -57529.6
 iteration 4 energy 0 : -58557.6
 iteration 5 energy 0 : -59439
 iteration 6 energy 0 : -60121.2
 iteration 7 energy 0 : -60689.5
 iteration 8 energy 0 : -61202.3
 iteration 9 energy 0 : -61696.9
 iteration 10 energy 0 : -62132.2
 iteration 11 energy 0 : -62564.6
 iteration 12 energy 0 : -62957.6
 E-Slope 0.00572487 iteration 13 energy 0 : -63301.2
 E-Slope 0.00494254 iteration 14 energy 0 : -63605.5
 E-Slope 0.00435816 iteration 15 energy 0 : -63881.3
 E-Slope 0.00389583 iteration 16 energy 0 : -64133.8
 E-Slope 0.00352915 iteration 17 energy 0 : -64368
 E-Slope 0.00321302 iteration 18 energy 0 : -64594.2
 E-Slope 0.00292816 iteration 19 energy 0 : -64814.1
 E-Slope 0.00266653 iteration 20 energy 0 : -65008.4
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1632_10232015_Aug1_Ref_vimp2_2553_09232016_Test_NewCases/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1632_10232015_Aug1_Ref_vimp2_2553_09232016_Test_NewCases/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1632_10232015_Aug1_Ref_vimp2_2553_09232016_Test_NewCases/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1632_10232015_Aug1_Ref_vimp2_2553_09232016_Test_NewCases/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1632_10232015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2554_09282016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1632_10232015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2554_09282016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547776587
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [14.6886, 0.499362, 21.8576]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -2.367924525334768, 9.187806894504876, -13.140028808159375]
level 0, iter 295, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.04971602139341265, 0.03333020650631898, -0.017689114004101912, 0.9980503543393017, 0.943299422769329, 0.9442013661077138, 0.91783915033541, -0.009426467463391262, -0.00962924085485076, 0.0007519218576427213, -2.3667123905051684, 7.791002624568727, -14.468454439733007]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 37, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.047843497124394216, 0.033370885409869176, -0.01601086897851653, 0.998168841361231, 0.9410375993972111, 0.9429651479025967, 0.9158213713054677, -0.009752919483468703, -0.01115515345397397, -0.0005703096252951353, -2.3226225145049026, 7.820872276894122, -14.388376826245063]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 20, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.04827219939184338, 0.03366795673676418, -0.015545653538882938, 0.9981455786162129, 0.9411647810987104, 0.9419614547225376, 0.9140673344734449, -0.010792112182318755, -0.011959288718739707, -0.0012220239516644651, -2.3575131022767186, 7.830291803324232, -14.37617287171543]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 19, size: fix[35, 36, 32]-mov[36, 39, 32], affine para: [-0.04867906825653399, 0.03463083347927743, -0.014872138891199298, 0.9981031375419112, 0.9430333271698882, 0.9438766038603961, 0.9166288852664923, -0.01132203931496884, -0.011258228328072504, -0.0019584662900071267, -2.3263112681960454, 7.896071749521899, -14.458900888715617]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 111, size: fix[70, 72, 34]-mov[72, 78, 38], affine para: [-0.044859096778647224, 0.03410936092894569, -0.01583332286224453, 0.9982852892937786, 0.9437887459185592, 0.9439467442105517, 0.9177243584235473, -0.01333880893331044, -0.013032475011821622, -0.0009784426496704086, -2.258175004562048, 7.810215062156151, -14.35215050083151]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 196, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.04529829345736765, -0.03441688468440963, 0.013757763826026918, 0.9982856638222236, 1.0578588131844773, 1.0524103836378733, 1.0843812800731856, 0.0011774797042446365, 0.012981456903124156, -0.0024276911287113316, 1.8507439998886164, -9.563089753018572, 14.979562906683377]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 85, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.042978640957128646, -0.03673743359468225, 0.012264697131171147, 0.9983249844607893, 1.0575852559468455, 1.0524866100323287, 1.0841479019145688, 0.00004732386066010101, 0.019743454309802802, 0.002287660459595132, 1.8987115787532893, -9.354110596447587, 14.990381323950102]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 62, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.04610344354250301, -0.03697289611440925, 0.014379026753531523, 0.9981486467636258, 1.0529337910381493, 1.0487202293147166, 1.0831620786535794, 0.0005521178564245919, 0.019066923896611347, 0.001528936381053249, 1.814731598306451, -9.46577791169139, 15.018412339429275]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 36, size: fix[36, 39, 32]-mov[35, 36, 32], affine para: [0.044282030212202894, -0.03628065326596397, 0.013631768512817216, 0.9982669937877808, 1.052539246537837, 1.0512354205733225, 1.084392672427361, 0.0026701453087429007, 0.020566284952161073, 0.004483697024044079, 1.893446241664617, -9.35527486932038, 15.011366815642246]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 48, size: fix[72, 78, 38]-mov[70, 72, 34], affine para: [0.0444849380044202, -0.03617796365224691, 0.013483043193180881, 0.9982637190557265, 1.0526000121854746, 1.0487602495928052, 1.0831861587850047, 0.004056968380675606, 0.018972769008621188, 0.0017277529523509604, 1.7491405756582254, -9.52712011339688, 14.990796749806155]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.593436 v2 -0.61298
 last params [-0.044859096778647224, 0.03410936092894569, -0.01583332286224453, 0.9982852892937786, 0.9437887459185592, 0.9439467442105517, 0.9177243584235473, -0.01333880893331044, -0.013032475011821622, -0.0009784426496704086, -2.258175004562048, 7.810215062156151, -14.35215050083151]
 my params [0.0444849380044202, -0.03617796365224691, 0.013483043193180881, 0.9982637190557265, 1.0526000121854746, 1.0487602495928052, 1.0831861587850047, 0.004056968380675606, 0.018972769008621188, 0.0017277529523509604, 1.7491405756582254, -9.52712011339688, 14.990796749806155]
A=0.948556 0.0202367 0.0520266 
-0.0286235 0.94953 0.0821713 
-0.0655757 -0.0828952 0.917132 

rotation R0.997167 0.0240278 0.0712763 
-0.0300904 0.995906 0.0852417 
-0.0689363 -0.087145 0.993808 

upper R0.951251 -0.00267783 -0.013817 
0 0.953352 0.00316152 
0 0 0.922165 

s=0.250411 u=-0.0431675 v=0.0351108 w-0.0135518 r=0.998359
m_Rotation from vnl-0.0431675 0.0351108 -0.0135518 0.998359
 new params [-0.04316752045045702, 0.035110763519394746, -0.01355178341043861, 0.998358727426991, 0.9512512071943321, 0.9533521161235009, 0.9221652515369629, -0.002815056817999247, -0.014525101424659065, 0.003316219085727131, -2.246281007086108, 7.864535120104816, -14.423588431105753]
outputput affine center: [14.6886, 0.499362, 21.8576]
output affine para: [-0.04316752045045702, 0.035110763519394746, -0.01355178341043861, 0.998358727426991, 0.9512512071943321, 0.9533521161235009, 0.9221652515369629, -0.002815056817999247, -0.014525101424659065, 0.003316219085727131, -2.246281007086108, 7.864535120104816, -14.423588431105753]
initial measure value (MMI): rval = -0.303271
final measure value (MMI): rval = -0.601959
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -7127.2
 iteration 2 energy 0 : -7545.17
 iteration 3 energy 0 : -7804.02
 iteration 4 energy 0 : -7984.17
 iteration 5 energy 0 : -8123.23
 iteration 6 energy 0 : -8240.13
 iteration 7 energy 0 : -8339.05
 iteration 8 energy 0 : -8419.04
 iteration 9 energy 0 : -8488.1
 iteration 10 energy 0 : -8549.17
 iteration 11 energy 0 : -8604.5
 iteration 12 energy 0 : -8654.92
 E-Slope 0.00663972 iteration 13 energy 0 : -8697.26
 E-Slope 0.00542328 iteration 14 energy 0 : -8722.63
 E-Slope 0.00443515 iteration 15 energy 0 : -8703.37
 E-Slope 0.00356435 iteration 16 energy 0 : -8693.22
 E-Slope 0.00277998 iteration 17 energy 0 : -8690.34
 E-Slope 0.00207088 iteration 18 energy 0 : -8685.17
 E-Slope 0.00145923 iteration 19 energy 0 : -8688.32
 E-Slope 0.000925861 iteration 20 energy 0 : -8684.81
 E-Slope 0.000501886 iteration 21 energy 0 : -8690
 E-Slope 0.000176959 iteration 22 energy 0 : -8687
 E-Slope -9.24617e-06 iteration 23 energy 0 : -8698.21
 Converged due to oscillation in optimization  metric 0 bad 6  
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -11334.4
 iteration 2 energy 0 : -11455.2
 iteration 3 energy 0 : -11505.8
 iteration 4 energy 0 : -11545.1
 iteration 5 energy 0 : -11563.9
 iteration 6 energy 0 : -11590.1
 iteration 7 energy 0 : -11598.1
 iteration 8 energy 0 : -11618.5
 iteration 9 energy 0 : -11618.3
 iteration 10 energy 0 : -11637.9
 iteration 11 energy 0 : -11631.1
 iteration 12 energy 0 : -11651.6
 E-Slope 0.000756182 iteration 13 energy 0 : -11637.9
 E-Slope 0.000602141 iteration 14 energy 0 : -11664
 E-Slope 0.000463478 iteration 15 energy 0 : -11647.4
 E-Slope 0.000404477 iteration 16 energy 0 : -11672.6
 E-Slope 0.00031919 iteration 17 energy 0 : -11655.6
 E-Slope 0.000304699 iteration 18 energy 0 : -11683
 E-Slope 0.00025636 iteration 19 energy 0 : -11668.4
 E-Slope 0.0002672 iteration 20 energy 0 : -11692.2
 E-Slope 0.000238165 iteration 21 energy 0 : -11680.7
 E-Slope 0.000268392 iteration 22 energy 0 : -11704.6
 E-Slope 0.00024619 iteration 23 energy 0 : -11692.4
 E-Slope 0.000280939 iteration 24 energy 0 : -11714.3
 E-Slope 0.000246063 iteration 25 energy 0 : -11699.6
 E-Slope 0.000277855 iteration 26 energy 0 : -11721.3
 E-Slope 0.000233665 iteration 27 energy 0 : -11705.6
 E-Slope 0.000254951 iteration 28 energy 0 : -11727
 E-Slope 0.000198498 iteration 29 energy 0 : -11709.9
 E-Slope 0.000214309 iteration 30 energy 0 : -11731.7
 E-Slope 0.000158235 iteration 31 energy 0 : -11713.7
 E-Slope 0.00017193 iteration 32 energy 0 : -11736.2
 E-Slope 0.00012099 iteration 33 energy 0 : -11717.8
 E-Slope 0.000140563 iteration 34 energy 0 : -11739.2
 E-Slope 9.68426e-05 iteration 35 energy 0 : -11720.9
 Converged due to oscillation in optimization  metric 0 bad 14  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -63155.7
 iteration 2 energy 0 : -64302.3
 iteration 3 energy 0 : -65260.1
 iteration 4 energy 0 : -66097.4
 iteration 5 energy 0 : -66832.5
 iteration 6 energy 0 : -67438.8
 iteration 7 energy 0 : -67967.2
 iteration 8 energy 0 : -68475.5
 iteration 9 energy 0 : -69020.8
 iteration 10 energy 0 : -69458.6
 iteration 11 energy 0 : -69847.9
 iteration 12 energy 0 : -70160.9
 E-Slope 0.00459496 iteration 13 energy 0 : -70389.3
 E-Slope 0.00403129 iteration 14 energy 0 : -70565.3
 E-Slope 0.00352053 iteration 15 energy 0 : -70713.5
 E-Slope 0.00304852 iteration 16 energy 0 : -70826.5
 E-Slope 0.00260865 iteration 17 energy 0 : -70913.7
 E-Slope 0.00218693 iteration 18 energy 0 : -70982.2
 E-Slope 0.00178654 iteration 19 energy 0 : -71045.6
 E-Slope 0.00142737 iteration 20 energy 0 : -71110.5
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1632_10232015_Aug2_Ref_vimp2_2554_09282016/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1632_10232015_Aug2_Ref_vimp2_2554_09282016/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1632_10232015_Aug2_Ref_vimp2_2554_09282016/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1632_10232015_Aug2_Ref_vimp2_2554_09282016/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1648_10282015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1761_12042015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1648_10282015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1761_12042015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547776650
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [12.571, 9.88094, 24.131]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -5.807885816798216, -33.113139961771765, -5.134261116619843]
level 0, iter 379, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.05654176693891666, -0.04610854257341702, 0.0023367124360069574, 0.9973322268272353, 0.917818986071093, 0.9169438414156166, 0.9774034015066019, -0.009579147442170689, -0.022976828781412335, 0.06770979788174725, -4.51682205696058, -32.89387515250819, -6.676789517230902]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 121, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.05592687745508861, -0.04335410197163978, -0.00015600190332957467, 0.9974931487903875, 0.9213013121289824, 0.918381725154331, 0.9784227012797063, -0.011506312789535764, -0.02243387341238242, 0.08307020159296277, -4.442305545075116, -32.79043106932849, -6.712380348927735]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 102, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.054753676936576255, -0.04291693153304636, 0.0021437705572702986, 0.9975748473661065, 0.9240753692258304, 0.9125376128718612, 0.97549495974036, -0.01584492159550954, -0.02307055969090485, 0.0853247560031069, -4.459324099110453, -32.84325939017227, -6.6940632150648955]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 46, size: fix[40, 42, 32]-mov[39, 43, 32], affine para: [-0.052592448784843274, -0.04591886852685047, 0.0011007595700491565, 0.9975591612392704, 0.9215692655959986, 0.9099158991053371, 0.9788237731879657, -0.016110953703655572, -0.02367912656602664, 0.08789129158027392, -4.4747421091005295, -32.8709473709322, -6.665645201513237]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 124, size: fix[79, 83, 38]-mov[77, 85, 44], affine para: [-0.050993262147902056, -0.0496696531075942, -0.00043747218402070503, 0.997462992493343, 0.9244296934329123, 0.910157960649936, 0.9830909414636881, -0.011435358674950847, -0.020930169400218527, 0.08815027143329245, -4.520362677186132, -32.93062663911797, -6.690909429641512]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 956, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.05671861398143694, 0.03593347501466693, -0.0032658758967714753, 0.9977380008078385, 1.0602931041555785, 1.0680760491086394, 1.0314530508481488, 0.013071590497895639, 0.05058009572166153, -0.06796899645273322, 6.270841524765733, 33.54049026759885, 10.496605123738565]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 420, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.05249926063797341, 0.03813339314665914, 0.006401911179085214, 0.9978720797240713, 1.064283318028066, 1.0741033890555127, 1.0308899139837473, 0.028743820159964954, 0.03661040929779239, -0.09048577994409156, 6.11500581683123, 33.83895222849305, 10.096917425490178]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 362, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.05213229260289039, 0.03802097016087158, 0.0030489502615705633, 0.9979114859536866, 1.0626122849820887, 1.07788875310581, 1.0272681294632073, 0.028437776298550557, 0.03962378003301915, -0.09022774764308006, 6.348365386828984, 33.97821489637862, 10.119037966304433]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 73, size: fix[39, 43, 32]-mov[40, 42, 32], affine para: [0.052981084001979824, 0.039026012469605825, 0.005749646148540193, 0.9978160735615877, 1.0653066446647612, 1.0784697012239686, 1.0299579836678796, 0.02854776262364579, 0.04240171532605713, -0.08969100583540106, 6.21296880152071, 34.00317339861239, 10.175352406217169]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 101, size: fix[77, 85, 44]-mov[79, 83, 38], affine para: [0.054389811804350124, 0.039825242376106545, 0.006190271683770973, 0.9977060584050058, 1.0706157727704042, 1.0809101242432666, 1.0288106149132605, 0.028000454059620233, 0.04209874290125617, -0.09387644249830471, 6.2224132185519805, 33.982446524104084, 10.308219748991556]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.496954 v2 -0.514214
 last params [-0.050993262147902056, -0.0496696531075942, -0.00043747218402070503, 0.997462992493343, 0.9244296934329123, 0.910157960649936, 0.9830909414636881, -0.011435358674950847, -0.020930169400218527, 0.08815027143329245, -4.520362677186132, -32.93062663911797, -6.690909429641512]
 my params [0.054389811804350124, 0.039825242376106545, 0.006190271683770973, 0.9977060584050058, 1.0706157727704042, 1.0809101242432666, 1.0288106149132605, 0.028000454059620233, 0.04209874290125617, -0.09387644249830471, 6.2224132185519805, 33.982446524104084, 10.308219748991556]
A=0.927731 -0.00546853 -0.119501 
-0.000106961 0.909744 0.191281 
0.0778969 -0.105012 0.963162 

rotation R0.996493 0.00963366 -0.0831141 
-0.000114889 0.993506 0.113779 
0.0836705 -0.11337 0.990023 

upper R0.930996 -0.0143402 -0.0385158 
0 0.915688 0.0796934 
0 0 0.985249 

s=0.250627 u=-0.0569295 v=-0.0418007 w-0.00244325 r=0.9975
m_Rotation from vnl-0.0569295 -0.0418007 -0.00244325 0.9975
 new params [-0.056929541407714127, -0.04180067855092999, -0.0024432466348806537, 0.9974997549541906, 0.9309956508524281, 0.9156883777581764, 0.9852489651248898, -0.015403127800762329, -0.04137054058580491, 0.08703110898783738, -4.3550483644140705, -32.88641180249683, -6.844642753333666]
outputput affine center: [12.571, 9.88094, 24.131]
output affine para: [-0.056929541407714127, -0.04180067855092999, -0.0024432466348806537, 0.9974997549541906, 0.9309956508524281, 0.9156883777581764, 0.9852489651248898, -0.015403127800762329, -0.04137054058580491, 0.08703110898783738, -4.3550483644140705, -32.88641180249683, -6.844642753333666]
initial measure value (MMI): rval = -0.270689
final measure value (MMI): rval = -0.51643
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -6894.96
 iteration 2 energy 0 : -7247.65
 iteration 3 energy 0 : -7537.88
 iteration 4 energy 0 : -7792.9
 iteration 5 energy 0 : -8009.38
 iteration 6 energy 0 : -8178.55
 iteration 7 energy 0 : -8299.8
 iteration 8 energy 0 : -8395.38
 iteration 9 energy 0 : -8467.09
 iteration 10 energy 0 : -8529.03
 iteration 11 energy 0 : -8584.32
 iteration 12 energy 0 : -8629.9
 E-Slope 0.00838529 iteration 13 energy 0 : -8663.37
 E-Slope 0.00661166 iteration 14 energy 0 : -8690.29
 E-Slope 0.0051442 iteration 15 energy 0 : -8695.76
 E-Slope 0.00396232 iteration 16 energy 0 : -8696.89
 E-Slope 0.00301772 iteration 17 energy 0 : -8689.33
 E-Slope 0.00229193 iteration 18 energy 0 : -8698.38
 E-Slope 0.00168192 iteration 19 energy 0 : -8693.06
 E-Slope 0.00120792 iteration 20 energy 0 : -8705.06
 E-Slope 0.000806458 iteration 21 energy 0 : -8700.58
 E-Slope 0.000517882 iteration 22 energy 0 : -8711.61
 E-Slope 0.000308022 iteration 23 energy 0 : -8706.66
 E-Slope 0.000205651 iteration 24 energy 0 : -8717.64
 E-Slope 0.00015109 iteration 25 energy 0 : -8712.21
 E-Slope 0.000170104 iteration 26 energy 0 : -8721.93
 E-Slope 0.000174813 iteration 27 energy 0 : -8715.43
 E-Slope 0.000195466 iteration 28 energy 0 : -8725.96
 E-Slope 0.000170127 iteration 29 energy 0 : -8719.66
 E-Slope 0.000179023 iteration 30 energy 0 : -8730.23
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -16287.4
 iteration 2 energy 0 : -16453
 iteration 3 energy 0 : -16571.9
 iteration 4 energy 0 : -16682.3
 iteration 5 energy 0 : -16790.6
 iteration 6 energy 0 : -16895.8
 iteration 7 energy 0 : -16985.9
 iteration 8 energy 0 : -16984.8
 iteration 9 energy 0 : -17013.1
 iteration 10 energy 0 : -17012
 iteration 11 energy 0 : -17041.8
 iteration 12 energy 0 : -17038.4
 E-Slope 0.00175957 iteration 13 energy 0 : -17065.6
 E-Slope 0.00132885 iteration 14 energy 0 : -17061.2
 E-Slope 0.000973895 iteration 15 energy 0 : -17082
 E-Slope 0.00067734 iteration 16 energy 0 : -17078.7
 E-Slope 0.000479326 iteration 17 energy 0 : -17095.8
 E-Slope 0.000366703 iteration 18 energy 0 : -17093.9
 E-Slope 0.000352122 iteration 19 energy 0 : -17108.4
 E-Slope 0.00030981 iteration 20 energy 0 : -17107.2
 E-Slope 0.000295579 iteration 21 energy 0 : -17120.6
 E-Slope 0.000256971 iteration 22 energy 0 : -17119
 E-Slope 0.000252686 iteration 23 energy 0 : -17133.1
 E-Slope 0.00022231 iteration 24 energy 0 : -17129.8
 E-Slope 0.000226244 iteration 25 energy 0 : -17144.6
 E-Slope 0.000202686 iteration 26 energy 0 : -17139.4
 E-Slope 0.000208855 iteration 27 energy 0 : -17155.4
 E-Slope 0.000188403 iteration 28 energy 0 : -17148.7
 E-Slope 0.000194892 iteration 29 energy 0 : -17165.4
 E-Slope 0.000176154 iteration 30 energy 0 : -17157.6
 E-Slope 0.00018236 iteration 31 energy 0 : -17174.4
 E-Slope 0.000164159 iteration 32 energy 0 : -17166
 E-Slope 0.00017035 iteration 33 energy 0 : -17182.7
 E-Slope 0.000152141 iteration 34 energy 0 : -17173.9
 E-Slope 0.000159606 iteration 35 energy 0 : -17190.3
 E-Slope 0.000141367 iteration 36 energy 0 : -17181.5
 E-Slope 0.000149772 iteration 37 energy 0 : -17197.4
 E-Slope 0.000130951 iteration 38 energy 0 : -17188.6
 E-Slope 0.000140339 iteration 39 energy 0 : -17203.9
 E-Slope 0.000121474 iteration 40 energy 0 : -17195.2
 E-Slope 0.000131525 iteration 41 energy 0 : -17209.9
 E-Slope 0.000113264 iteration 42 energy 0 : -17201.6
 E-Slope 0.000123866 iteration 43 energy 0 : -17215.8
 E-Slope 0.000105888 iteration 44 energy 0 : -17207.5
 E-Slope 0.000116341 iteration 45 energy 0 : -17220.9
 E-Slope 9.84967e-05 iteration 46 energy 0 : -17212.7
 Converged due to oscillation in optimization  metric 0 bad 20  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -98930.6
 iteration 2 energy 0 : -100650
 iteration 3 energy 0 : -102096
 iteration 4 energy 0 : -103238
 iteration 5 energy 0 : -104218
 iteration 6 energy 0 : -105130
 iteration 7 energy 0 : -105971
 iteration 8 energy 0 : -106765
 iteration 9 energy 0 : -107431
 iteration 10 energy 0 : -108030
 iteration 11 energy 0 : -108588
 iteration 12 energy 0 : -109082
 E-Slope 0.0042492 iteration 13 energy 0 : -109504
 E-Slope 0.00376729 iteration 14 energy 0 : -109882
 E-Slope 0.00336586 iteration 15 energy 0 : -110219
 E-Slope 0.00301182 iteration 16 energy 0 : -110555
 E-Slope 0.0026897 iteration 17 energy 0 : -110855
 E-Slope 0.00240202 iteration 18 energy 0 : -111127
 E-Slope 0.00214899 iteration 19 energy 0 : -111372
 E-Slope 0.00193431 iteration 20 energy 0 : -111593
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1648_10282015_Aug1_Ref_vimp2_1761_12042015/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1648_10282015_Aug1_Ref_vimp2_1761_12042015/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1648_10282015_Aug1_Ref_vimp2_1761_12042015/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1648_10282015_Aug1_Ref_vimp2_1761_12042015/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1648_10282015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2475_08242016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1648_10282015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2475_08242016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547776751
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [12.571, 9.88094, 24.131]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -0.5881868869174642, -10.181275748030624, -20.963614082864332]
level 0, iter 558, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.0636230796802233, -0.0503226168893043, 0.008682645104288593, 0.9966666191036043, 0.9690038311008641, 0.9748625347821092, 0.9342090822046957, -0.03676734133462024, -0.021228024702299203, -0.020413757867138487, -0.5690503583196737, -11.202079997540295, -23.111583957830973]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 43, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.06113031676533776, -0.049819623023922295, 0.010686990266645257, 0.996828409392993, 0.9669386110822751, 0.9747699174426414, 0.9357860678905666, -0.037669681359776594, -0.020976101586911, -0.02513923809660477, -0.5923213125634476, -11.294753942040018, -23.07027697861527]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 62, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.06127610132395457, -0.049864852121038014, 0.008008716869103873, 0.996842312697246, 0.9687737168923858, 0.9766540995893136, 0.939362599684835, -0.03754379177330931, -0.02285344644293845, -0.023737734699840588, -0.5154315335454404, -11.301935412306527, -23.144387595732596]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 157, size: fix[40, 42, 32]-mov[40, 44, 32], affine para: [-0.059007961750069275, -0.05031573218823458, 0.011541877869997113, 0.9969218487924209, 0.9656957337734614, 0.9647564921409, 0.9389438347109629, -0.03549378524718742, -0.02121067876867005, -0.024219919941798382, -0.5676084377748055, -11.292223486347282, -23.145405399987876]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 42, size: fix[79, 83, 38]-mov[79, 88, 40], affine para: [-0.0650274436973553, -0.0513097687807745, 0.007904505407131545, 0.9965321158839384, 0.9683127343916645, 0.9619041623618502, 0.9346988452259213, -0.035610726292977804, -0.022170480689768842, -0.02430847553275256, -0.489468463224967, -11.245618411620494, -23.217839587488207]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 241, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.06068872586128299, 0.05346249609764505, -0.015227483318468288, 0.9966076278135388, 1.0230775206894813, 1.0255794870628094, 1.0708730539347198, 0.010186523363260992, 0.009238016389159059, 0.014476869247386028, 3.8518318067273394, 8.50030792085235, 25.77015136631419]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 457, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.0636991604784258, 0.05245211600588903, -0.014287061406328147, 0.9964873668829026, 1.0222772982721358, 1.027788421618641, 1.0644257634275345, 0.024887947933770624, 0.012642726907486683, 0.0299017509035065, 4.067546999437231, 8.866405901374945, 25.76556147333088]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 59, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.06492269271385868, 0.05227704164355476, -0.013824992810199587, 0.9964241187674945, 1.0216313205838057, 1.0292550267770557, 1.0638863617784537, 0.025116398693212194, 0.011607128921360968, 0.029907434745059865, 3.9905782319379672, 8.850407775036958, 25.80014400064821]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 156, size: fix[40, 44, 32]-mov[40, 42, 32], affine para: [0.05963190680072501, 0.05372962693517349, -0.01745888945920621, 0.996620464399346, 1.0237395104272866, 1.026870222881682, 1.0622317624006987, 0.027752651758017784, 0.013422281220325842, 0.032038161047662765, 4.166148983145494, 9.204206891398135, 25.547550336056275]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 140, size: fix[79, 88, 40]-mov[79, 83, 38], affine para: [0.06426961095551349, 0.052544922680541575, -0.012348986148339835, 0.9964717511044812, 1.0155870017209168, 1.029315532281955, 1.0608980327036157, 0.02245561058834622, 0.01741320063061726, 0.03269054245125046, 3.9830861494213843, 9.084580215113412, 25.731823160281262]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.494198 v2 -0.53172
 last params [-0.0650274436973553, -0.0513097687807745, 0.007904505407131545, 0.9965321158839384, 0.9683127343916645, 0.9619041623618502, 0.9346988452259213, -0.035610726292977804, -0.022170480689768842, -0.02430847553275256, -0.489468463224967, -11.245618411620494, -23.217839587488207]
 my params [0.06426961095551349, 0.052544922680541575, -0.012348986148339835, 0.9964717511044812, 1.0155870017209168, 1.029315532281955, 1.0608980327036157, 0.02245561058834622, 0.01741320063061726, 0.03269054245125046, 3.9830861494213843, 9.084580215113412, 25.731823160281262]
A=0.976609 -0.0371777 -0.122946 
0.0272937 0.967184 0.0927876 
0.0972117 -0.121957 0.929606 

rotation R0.994698 -0.0155096 -0.101665 
0.0277993 0.992311 0.120608 
0.0990123 -0.122795 0.987481 

upper R0.981815 -0.0221688 -0.0276721 
0 0.975299 -0.0201696 
0 0 0.941658 

s=0.250801 u=-0.0610456 v=-0.05033 w0.0108619 r=0.996806
m_Rotation from vnl-0.0610456 -0.05033 0.0108619 0.996806
 new params [-0.06104562134977388, -0.05032996511730515, 0.010861895056804178, 0.9968060723937658, 0.9818148086299228, 0.9752994754388864, 0.9416578408521176, -0.022579431452023232, -0.028184685328395638, -0.02068040840601671, -0.38855325597062373, -11.282769165086137, -23.199729102684625]
outputput affine center: [12.571, 9.88094, 24.131]
output affine para: [-0.06104562134977388, -0.05032996511730515, 0.010861895056804178, 0.9968060723937658, 0.9818148086299228, 0.9752994754388864, 0.9416578408521176, -0.022579431452023232, -0.028184685328395638, -0.02068040840601671, -0.38855325597062373, -11.282769165086137, -23.199729102684625]
initial measure value (MMI): rval = -0.233452
final measure value (MMI): rval = -0.53604
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -6815.16
 iteration 2 energy 0 : -7178.67
 iteration 3 energy 0 : -7486.24
 iteration 4 energy 0 : -7726.39
 iteration 5 energy 0 : -7902.06
 iteration 6 energy 0 : -8026.24
 iteration 7 energy 0 : -8125.33
 iteration 8 energy 0 : -8205.37
 iteration 9 energy 0 : -8270.24
 iteration 10 energy 0 : -8325.28
 iteration 11 energy 0 : -8372.75
 iteration 12 energy 0 : -8418.09
 E-Slope 0.00739249 iteration 13 energy 0 : -8462.99
 E-Slope 0.00576127 iteration 14 energy 0 : -8485.42
 E-Slope 0.00452479 iteration 15 energy 0 : -8484.14
 E-Slope 0.00364587 iteration 16 energy 0 : -8510.41
 E-Slope 0.00294198 iteration 17 energy 0 : -8506.96
 E-Slope 0.00239338 iteration 18 energy 0 : -8529.92
 E-Slope 0.00190612 iteration 19 energy 0 : -8524.79
 E-Slope 0.00152777 iteration 20 energy 0 : -8544.83
 E-Slope 0.00118396 iteration 21 energy 0 : -8538.56
 E-Slope 0.000931688 iteration 22 energy 0 : -8556.44
 E-Slope 0.000709116 iteration 23 energy 0 : -8549.64
 E-Slope 0.000580944 iteration 24 energy 0 : -8565.97
 E-Slope 0.000499517 iteration 25 energy 0 : -8558.56
 E-Slope 0.000474311 iteration 26 energy 0 : -8574.26
 E-Slope 0.000393815 iteration 27 energy 0 : -8566.62
 E-Slope 0.000381872 iteration 28 energy 0 : -8580.71
 E-Slope 0.000316948 iteration 29 energy 0 : -8573.42
 E-Slope 0.000314504 iteration 30 energy 0 : -8586.06
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -16045.5
 iteration 2 energy 0 : -16264.1
 iteration 3 energy 0 : -16453.2
 iteration 4 energy 0 : -16544.3
 iteration 5 energy 0 : -16581.3
 iteration 6 energy 0 : -16647.8
 iteration 7 energy 0 : -16665.1
 iteration 8 energy 0 : -16713.5
 iteration 9 energy 0 : -16720.8
 iteration 10 energy 0 : -16760.6
 iteration 11 energy 0 : -16761.5
 iteration 12 energy 0 : -16795.9
 E-Slope 0.00137612 iteration 13 energy 0 : -16792.5
 E-Slope 0.0010351 iteration 14 energy 0 : -16822.7
 E-Slope 0.000840582 iteration 15 energy 0 : -16816
 E-Slope 0.000732608 iteration 16 energy 0 : -16845.2
 E-Slope 0.000605822 iteration 17 energy 0 : -16836.1
 E-Slope 0.000550851 iteration 18 energy 0 : -16864.3
 E-Slope 0.00046403 iteration 19 energy 0 : -16853.3
 E-Slope 0.000436336 iteration 20 energy 0 : -16880.7
 E-Slope 0.000371195 iteration 21 energy 0 : -16868.3
 E-Slope 0.000360481 iteration 22 energy 0 : -16895.2
 E-Slope 0.000308409 iteration 23 energy 0 : -16881.3
 E-Slope 0.000309102 iteration 24 energy 0 : -16908.5
 E-Slope 0.000265054 iteration 25 energy 0 : -16893.2
 E-Slope 0.000271291 iteration 26 energy 0 : -16920
 E-Slope 0.000230521 iteration 27 energy 0 : -16903.7
 E-Slope 0.000236198 iteration 28 energy 0 : -16926.2
 E-Slope 0.000194065 iteration 29 energy 0 : -16909.6
 E-Slope 0.000201382 iteration 30 energy 0 : -16933.5
 E-Slope 0.000160173 iteration 31 energy 0 : -16916.2
 E-Slope 0.000170141 iteration 32 energy 0 : -16940.5
 E-Slope 0.00013122 iteration 33 energy 0 : -16922.4
 E-Slope 0.000149578 iteration 34 energy 0 : -16950.6
 E-Slope 0.000117473 iteration 35 energy 0 : -16931.6
 E-Slope 0.000136726 iteration 36 energy 0 : -16953.6
 E-Slope 0.000104427 iteration 37 energy 0 : -16934.2
 E-Slope 0.000126608 iteration 38 energy 0 : -16958.6
 E-Slope 9.59858e-05 iteration 39 energy 0 : -16938.5
 Converged due to oscillation in optimization  metric 0 bad 14  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -98053.3
 iteration 2 energy 0 : -99617.2
 iteration 3 energy 0 : -100926
 iteration 4 energy 0 : -102015
 iteration 5 energy 0 : -102873
 iteration 6 energy 0 : -103632
 iteration 7 energy 0 : -104375
 iteration 8 energy 0 : -105182
 iteration 9 energy 0 : -105742
 iteration 10 energy 0 : -106170
 iteration 11 energy 0 : -106525
 iteration 12 energy 0 : -106842
 E-Slope 0.00368079 iteration 13 energy 0 : -107142
 E-Slope 0.00317539 iteration 14 energy 0 : -107438
 E-Slope 0.00276331 iteration 15 energy 0 : -107747
 E-Slope 0.00242685 iteration 16 energy 0 : -108045
 E-Slope 0.00214799 iteration 17 energy 0 : -108369
 E-Slope 0.00193075 iteration 18 energy 0 : -108726
 E-Slope 0.0018004 iteration 19 energy 0 : -109171
 E-Slope 0.0017749 iteration 20 energy 0 : -109604
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1648_10282015_Aug2_Ref_vimp2_2475_08242016/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1648_10282015_Aug2_Ref_vimp2_2475_08242016/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1648_10282015_Aug2_Ref_vimp2_2475_08242016/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1648_10282015_Aug2_Ref_vimp2_2475_08242016/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1662_10302015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_3187_06092017/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1662_10302015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_3187_06092017/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547776844
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [10.2752, -13.7784, 20.2951]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 4.968074324478954, 28.233505256735356, -30.624949273712197]
level 0, iter 553, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.10699972867094586, 0.046340944468908137, -0.012210975975456975, 0.9931034523129, 0.9291171600557427, 0.9594558450975367, 1.0558774927618388, -0.05917173529571067, -0.021697568977086214, -0.11356665239889405, 2.609440402605122, 26.424849100247286, -32.82153274588448]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 175, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.11353020659917708, 0.045544086357881416, -0.017657594754070662, 0.9923330276348132, 0.9205076840237416, 0.9510568891567461, 1.053023739228534, -0.07328417372979776, -0.024518399261328025, -0.13734671102541218, 2.5347414775798973, 26.34644105721916, -32.909773580285254]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 144, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.11128682631387929, 0.04808866257861949, -0.01890634131254575, 0.9924440906562736, 0.9249182090046364, 0.9629008686182294, 1.0564133532392923, -0.07859068833461108, -0.03105002558686168, -0.14130305369109555, 2.565783580271971, 26.24485451378806, -32.92007482262515]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 192, size: fix[37, 37, 32]-mov[37, 43, 33], affine para: [-0.11384591363502236, 0.04487076890756746, -0.00949892136884353, 0.9924391631425472, 0.9320639429541092, 0.9551730623035074, 1.055768877448511, -0.06803739537420157, -0.022732090217746248, -0.15193562655688567, 2.631825838852642, 26.43909357564732, -32.96268615803941]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 84, size: fix[74, 74, 36]-mov[73, 86, 46], affine para: [-0.10793988476718111, 0.04377754745752007, -0.009407465665585618, 0.9931485322975628, 0.9388717175822692, 0.9513223658204883, 1.0582874968526215, -0.06257796000669853, -0.023114586452978363, -0.15452280666576457, 2.5999841800445105, 26.48955135508993, -32.844938695465714]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 1739, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.09296935543821053, -0.03646027471696511, 0.020301862080870235, 0.9947940398459454, 1.063890399721999, 1.0160748077250095, 0.9245409355227492, 0.07738446340162777, -0.006789745488779791, 0.05423712670509872, -6.204662090082584, -30.439925222540612, 24.896496949418964]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 347, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.09161778375252976, -0.03867862827674675, 0.01558319376146506, 0.9949207553805964, 1.062289400890645, 1.0201130647453276, 0.915244947906265, 0.07583751067297549, -0.0015729108593896689, 0.05976169101936616, -6.408568886778366, -30.307629639734174, 24.68998093648554]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 546, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.09185310941973499, -0.0383477434281576, 0.016235991950664917, 0.9949014269912735, 1.0711419803286661, 1.032675553631023, 0.9154319054908414, 0.07141058789109063, -0.006448502049920814, 0.07040362391975835, -6.3362116770698576, -30.061214905212857, 24.63779232446831]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 133, size: fix[37, 43, 33]-mov[37, 37, 32], affine para: [0.09054628054560691, -0.038399695323784476, 0.01334059418312785, 0.9950622407795594, 1.0661567111830057, 1.0292380911022347, 0.9194213336268089, 0.07194691314489439, -0.00028029063699378307, 0.06910869623869856, -6.251373940770345, -29.984895539484395, 24.822710150268858]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 369, size: fix[73, 86, 46]-mov[74, 74, 36], affine para: [0.09248329948398801, -0.039966542624268776, 0.0162726957966856, 0.9947787262294696, 1.059730670662169, 1.0444000523063424, 0.9120079353292727, 0.07440770077771905, -0.0014025045194010813, 0.07589087944211026, -6.294455557920328, -30.204516957672876, 24.59387971701197]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.469898 v2 -0.463738
final [-0.10793988476718111, 0.04377754745752007, -0.009407465665585618, 0.9931485322975628, 0.9388717175822692, 0.9513223658204883, 1.0582874968526215, -0.06257796000669853, -0.023114586452978363, -0.15452280666576457, 2.5999841800445105, 26.48955135508993, -32.844938695465714]
outputput affine center: [10.2752, -13.7784, 20.2951]
output affine para: [-0.10793988476718111, 0.04377754745752007, -0.009407465665585618, 0.9931485322975628, 0.9388717175822692, 0.9513223658204883, 1.0582874968526215, -0.06257796000669853, -0.023114586452978363, -0.15452280666576457, 2.5999841800445105, 26.48955135508993, -32.844938695465714]
initial measure value (MMI): rval = -0.208272
final measure value (MMI): rval = -0.467021
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -6936.72
 iteration 2 energy 0 : -7286.96
 iteration 3 energy 0 : -7525.49
 iteration 4 energy 0 : -7713.76
 iteration 5 energy 0 : -7857.52
 iteration 6 energy 0 : -7968.62
 iteration 7 energy 0 : -8058.68
 iteration 8 energy 0 : -8129.95
 iteration 9 energy 0 : -8190.27
 iteration 10 energy 0 : -8244.19
 iteration 11 energy 0 : -8286.13
 iteration 12 energy 0 : -8309.46
 E-Slope 0.00623727 iteration 13 energy 0 : -8311.02
 E-Slope 0.00482914 iteration 14 energy 0 : -8323.99
 E-Slope 0.00372159 iteration 15 energy 0 : -8330.59
 E-Slope 0.00286442 iteration 16 energy 0 : -8343.16
 E-Slope 0.00217561 iteration 17 energy 0 : -8346.51
 E-Slope 0.00163452 iteration 18 energy 0 : -8356.3
 E-Slope 0.00121085 iteration 19 energy 0 : -8360.44
 E-Slope 0.000899456 iteration 20 energy 0 : -8370.25
 E-Slope 0.000674888 iteration 21 energy 0 : -8372.64
 E-Slope 0.000550419 iteration 22 energy 0 : -8380.68
 E-Slope 0.000493363 iteration 23 energy 0 : -8383.13
 E-Slope 0.000474423 iteration 24 energy 0 : -8389.66
 E-Slope 0.000434779 iteration 25 energy 0 : -8393.31
 E-Slope 0.000408113 iteration 26 energy 0 : -8398.32
 E-Slope 0.000369839 iteration 27 energy 0 : -8398.83
 E-Slope 0.000354573 iteration 28 energy 0 : -8406.39
 E-Slope 0.000320204 iteration 29 energy 0 : -8405.48
 E-Slope 0.000310749 iteration 30 energy 0 : -8415.31
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -12121.9
 iteration 2 energy 0 : -12214.9
 iteration 3 energy 0 : -12317.3
 iteration 4 energy 0 : -12453.3
 iteration 5 energy 0 : -12563.4
 iteration 6 energy 0 : -12630.2
 iteration 7 energy 0 : -12637.2
 iteration 8 energy 0 : -12642.1
 iteration 9 energy 0 : -12653.2
 iteration 10 energy 0 : -12656.5
 iteration 11 energy 0 : -12667.1
 iteration 12 energy 0 : -12675.1
 E-Slope 0.00161684 iteration 13 energy 0 : -12680.7
 E-Slope 0.00109766 iteration 14 energy 0 : -12688.4
 E-Slope 0.000676155 iteration 15 energy 0 : -12696.4
 E-Slope 0.000425674 iteration 16 energy 0 : -12700.2
 E-Slope 0.000327446 iteration 17 energy 0 : -12706.8
 E-Slope 0.000324264 iteration 18 energy 0 : -12714.7
 E-Slope 0.000313245 iteration 19 energy 0 : -12716.8
 E-Slope 0.000300467 iteration 20 energy 0 : -12724.5
 E-Slope 0.000292107 iteration 21 energy 0 : -12729.3
 E-Slope 0.000278726 iteration 22 energy 0 : -12735.8
 E-Slope 0.000262924 iteration 23 energy 0 : -12735.9
 E-Slope 0.000251405 iteration 24 energy 0 : -12741.9
 E-Slope 0.000235416 iteration 25 energy 0 : -12744.6
 E-Slope 0.000221886 iteration 26 energy 0 : -12748.8
 E-Slope 0.00020913 iteration 27 energy 0 : -12751.1
 E-Slope 0.000194095 iteration 28 energy 0 : -12755
 E-Slope 0.00017488 iteration 29 energy 0 : -12754.3
 E-Slope 0.000163078 iteration 30 energy 0 : -12758.6
 E-Slope 0.000148207 iteration 31 energy 0 : -12761.8
 E-Slope 0.000139743 iteration 32 energy 0 : -12764.8
 E-Slope 0.000133865 iteration 33 energy 0 : -12767.8
 E-Slope 0.000132948 iteration 34 energy 0 : -12770.3
 E-Slope 0.000128008 iteration 35 energy 0 : -12773.4
 E-Slope 0.000126719 iteration 36 energy 0 : -12775.3
 E-Slope 0.000125796 iteration 37 energy 0 : -12778.4
 E-Slope 0.00012549 iteration 38 energy 0 : -12780.2
 E-Slope 0.000124976 iteration 39 energy 0 : -12783.3
 E-Slope 0.000124604 iteration 40 energy 0 : -12784.8
 E-Slope 0.000119217 iteration 41 energy 0 : -12787.8
 E-Slope 0.000114344 iteration 42 energy 0 : -12789
 E-Slope 0.000111312 iteration 43 energy 0 : -12792
 E-Slope 0.000107206 iteration 44 energy 0 : -12793.2
 E-Slope 0.000105023 iteration 45 energy 0 : -12796.1
 E-Slope 0.000101581 iteration 46 energy 0 : -12797.4
 E-Slope 0.000100441 iteration 47 energy 0 : -12800.2
 E-Slope 9.77144e-05 iteration 48 energy 0 : -12801.6
 Converged due to oscillation in optimization  metric 0 bad 1  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -70789.6
 iteration 2 energy 0 : -72218.4
 iteration 3 energy 0 : -73454.3
 iteration 4 energy 0 : -74534.1
 iteration 5 energy 0 : -75577.4
 iteration 6 energy 0 : -76339.1
 iteration 7 energy 0 : -76957.6
 iteration 8 energy 0 : -77466
 iteration 9 energy 0 : -77864.8
 iteration 10 energy 0 : -78255.5
 iteration 11 energy 0 : -78667
 iteration 12 energy 0 : -79075.9
 E-Slope 0.00462825 iteration 13 energy 0 : -79491
 E-Slope 0.00400579 iteration 14 energy 0 : -79862.5
 E-Slope 0.00352418 iteration 15 energy 0 : -80210.7
 E-Slope 0.00316475 iteration 16 energy 0 : -80541
 E-Slope 0.00293012 iteration 17 energy 0 : -80834.5
 E-Slope 0.00275028 iteration 18 energy 0 : -81082.8
 E-Slope 0.00259131 iteration 19 energy 0 : -81295.4
 E-Slope 0.0024334 iteration 20 energy 0 : -81496.6
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1662_10302015_Aug1_Ref_vimp2_3187_06092017/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1662_10302015_Aug1_Ref_vimp2_3187_06092017/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1662_10302015_Aug1_Ref_vimp2_3187_06092017/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1662_10302015_Aug1_Ref_vimp2_3187_06092017/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1662_10302015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2119_04142016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1662_10302015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2119_04142016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547776942
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [10.2752, -13.7784, 20.2951]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 5.956607277342783, 20.267716670150257, -17.362161519260162]
level 0, iter 431, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.07292354023896684, -0.043711190407437574, -0.07885197801324778, 0.9932541742553005, 1.0779055183554962, 0.9594138829016757, 1.1156089842919197, -0.06241428900355481, 0.08339405059155702, -0.0887502890390504, 3.2216982324786287, 19.98354139865922, -16.221646358293814]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 171, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.07403771301174321, -0.04289478908605777, -0.08206767032917735, 0.992946802003005, 1.0739276052678282, 0.9496248925020556, 1.1222091423247593, -0.06643706831575234, 0.08214639341362287, -0.09821524138302883, 3.187065374610931, 19.904630295275037, -16.265483963802676]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 147, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.0753019706823154, -0.04150341820010193, -0.08143510165923853, 0.9929629417590651, 1.0821732232993269, 0.944828457137964, 1.1181091395111349, -0.068606728641281, 0.08046657535561826, -0.09995537717629661, 3.182007662178058, 19.87667819316909, -16.22746123279628]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 151, size: fix[37, 37, 32]-mov[41, 42, 33], affine para: [-0.08007108477274677, -0.04314001805569943, -0.08622391462277115, 0.9921154150463517, 1.0795876109947578, 0.9489531247560452, 1.121709644622291, -0.07920434681214014, 0.08426512086451154, -0.10542546391919964, 3.246368241787653, 20.08634937986692, -16.348514079799788]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 70, size: fix[74, 74, 36]-mov[81, 84, 47], affine para: [-0.07943748589056772, -0.0420974584980351, -0.08232462179486669, 0.9925422643241567, 1.081672949841072, 0.9429506764373535, 1.1197884760203238, -0.07721015748937277, 0.08299814179092661, -0.1152601885249824, 3.1493089300837527, 20.059842024407644, -16.194692225331742]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 1164, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.07045713834076328, 0.037711335834282524, 0.08626888367546608, 0.9930615925086486, 0.9314032382908406, 1.0225161732796397, 0.881753984609588, 0.08693587576015724, -0.05290708197635617, 0.050110262697280146, -0.8778562197554471, -22.034696937628333, 11.677959880290766]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 825, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.06635313630855058, 0.03747735396463592, 0.09036294673040887, 0.9929890468177508, 0.931911239701404, 1.034138809260207, 0.8764420797403341, 0.10022101287366827, -0.053970143399049826, 0.05355599574616239, -0.9528467824801654, -22.105863829093277, 11.738796176313759]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 139, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.06707874969090424, 0.03850054299223334, 0.08751111848822057, 0.9931565605029998, 0.9349189768807026, 1.0365862067990392, 0.877871881882091, 0.099034572025014, -0.05182116688307024, 0.04985764124861361, -0.9890845082869866, -22.169507465513234, 11.721834100115288]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 99, size: fix[41, 42, 33]-mov[37, 37, 32], affine para: [0.06367526668846075, 0.03710458741085924, 0.08828545478874913, 0.9933651838462867, 0.9354375866317849, 1.0363158590894002, 0.8761836820933272, 0.09894860558328065, -0.05380220327432435, 0.053668535551395245, -0.9576521435800853, -21.963865429779396, 11.857634233478965]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 53, size: fix[81, 84, 47]-mov[74, 74, 36], affine para: [0.0655179769369705, 0.03829106854964092, 0.08737723211840306, 0.9932806290644854, 0.9346387930157282, 1.0333778484606702, 0.8734476327227996, 0.09863410745838451, -0.05644581977519933, 0.0530824444121149, -0.9921028492964099, -22.14001272218936, 11.77265433366338]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.518508 v2 -0.504669
final [-0.07943748589056772, -0.0420974584980351, -0.08232462179486669, 0.9925422643241567, 1.081672949841072, 0.9429506764373535, 1.1197884760203238, -0.07721015748937277, 0.08299814179092661, -0.1152601885249824, 3.1493089300837527, 20.059842024407644, -16.194692225331742]
outputput affine center: [10.2752, -13.7784, 20.2951]
output affine para: [-0.07943748589056772, -0.0420974584980351, -0.08232462179486669, 0.9925422643241567, 1.081672949841072, 0.9429506764373535, 1.1197884760203238, -0.07721015748937277, 0.08299814179092661, -0.1152601885249824, 3.1493089300837527, 20.059842024407644, -16.194692225331742]
initial measure value (MMI): rval = -0.146968
final measure value (MMI): rval = -0.523883
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -6748.47
 iteration 2 energy 0 : -7087.92
 iteration 3 energy 0 : -7334.84
 iteration 4 energy 0 : -7491.24
 iteration 5 energy 0 : -7603.21
 iteration 6 energy 0 : -7688.89
 iteration 7 energy 0 : -7761.82
 iteration 8 energy 0 : -7828.93
 iteration 9 energy 0 : -7889.95
 iteration 10 energy 0 : -7948.49
 iteration 11 energy 0 : -8007.4
 iteration 12 energy 0 : -8063.07
 E-Slope 0.00612964 iteration 13 energy 0 : -8117.52
 E-Slope 0.00515752 iteration 14 energy 0 : -8168.08
 E-Slope 0.00459755 iteration 15 energy 0 : -8214.76
 E-Slope 0.00423186 iteration 16 energy 0 : -8257.33
 E-Slope 0.00394452 iteration 17 energy 0 : -8290.93
 E-Slope 0.0036798 iteration 18 energy 0 : -8322.02
 E-Slope 0.00340706 iteration 19 energy 0 : -8347.02
 E-Slope 0.00312308 iteration 20 energy 0 : -8369.47
 E-Slope 0.00283198 iteration 21 energy 0 : -8392.39
 E-Slope 0.00254469 iteration 22 energy 0 : -8414.79
 E-Slope 0.0022813 iteration 23 energy 0 : -8437.52
 E-Slope 0.00205346 iteration 24 energy 0 : -8461.48
 E-Slope 0.00188039 iteration 25 energy 0 : -8488.76
 E-Slope 0.0017682 iteration 26 energy 0 : -8518.21
 E-Slope 0.00171208 iteration 27 energy 0 : -8546.82
 E-Slope 0.00170724 iteration 28 energy 0 : -8576.08
 E-Slope 0.00165433 iteration 29 energy 0 : -8572.14
 E-Slope 0.00154429 iteration 30 energy 0 : -8564.03
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -12570.2
 iteration 2 energy 0 : -12652
 iteration 3 energy 0 : -12734.8
 iteration 4 energy 0 : -12811.8
 iteration 5 energy 0 : -12880.5
 iteration 6 energy 0 : -12911.6
 iteration 7 energy 0 : -12920.6
 iteration 8 energy 0 : -12926.2
 iteration 9 energy 0 : -12938.9
 iteration 10 energy 0 : -12949.7
 iteration 11 energy 0 : -12959.5
 iteration 12 energy 0 : -12958.9
 E-Slope 0.00106159 iteration 13 energy 0 : -12968.5
 E-Slope 0.00074093 iteration 14 energy 0 : -12970.2
 E-Slope 0.000509545 iteration 15 energy 0 : -12979
 E-Slope 0.000361785 iteration 16 energy 0 : -12980.7
 E-Slope 0.000306405 iteration 17 energy 0 : -12988.6
 E-Slope 0.000280298 iteration 18 energy 0 : -12990.2
 E-Slope 0.000259951 iteration 19 energy 0 : -12997.1
 E-Slope 0.000232555 iteration 20 energy 0 : -12998.9
 E-Slope 0.000217967 iteration 21 energy 0 : -13005
 E-Slope 0.000205912 iteration 22 energy 0 : -13005.8
 E-Slope 0.000203691 iteration 23 energy 0 : -13011.3
 E-Slope 0.000187062 iteration 24 energy 0 : -13011.9
 E-Slope 0.000180244 iteration 25 energy 0 : -13016.9
 E-Slope 0.000162989 iteration 26 energy 0 : -13016.5
 E-Slope 0.000155225 iteration 27 energy 0 : -13021
 E-Slope 0.000138983 iteration 28 energy 0 : -13020.9
 E-Slope 0.000132009 iteration 29 energy 0 : -13025.2
 E-Slope 0.000117615 iteration 30 energy 0 : -13024.7
 E-Slope 0.000112258 iteration 31 energy 0 : -13028.8
 E-Slope 0.000100762 iteration 32 energy 0 : -13028.2
 E-Slope 9.82061e-05 iteration 33 energy 0 : -13032.2
 Converged due to oscillation in optimization  metric 0 bad 5  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -74861.7
 iteration 2 energy 0 : -76362.2
 iteration 3 energy 0 : -77458.3
 iteration 4 energy 0 : -78194.8
 iteration 5 energy 0 : -78774.3
 iteration 6 energy 0 : -79346.2
 iteration 7 energy 0 : -80004.6
 iteration 8 energy 0 : -80701
 iteration 9 energy 0 : -81213.2
 iteration 10 energy 0 : -81647.8
 iteration 11 energy 0 : -82010.6
 iteration 12 energy 0 : -82324
 E-Slope 0.00401802 iteration 13 energy 0 : -82619.2
 E-Slope 0.00358073 iteration 14 energy 0 : -82897.1
 E-Slope 0.00323641 iteration 15 energy 0 : -83151.5
 E-Slope 0.00291194 iteration 16 energy 0 : -83382.6
 E-Slope 0.00258632 iteration 17 energy 0 : -83602.6
 E-Slope 0.00227673 iteration 18 energy 0 : -83820.7
 E-Slope 0.00202195 iteration 19 energy 0 : -84034
 E-Slope 0.00184592 iteration 20 energy 0 : -84238.9
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1662_10302015_Aug2_Ref_vimp2_2119_04142016/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1662_10302015_Aug2_Ref_vimp2_2119_04142016/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1662_10302015_Aug2_Ref_vimp2_2119_04142016/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1662_10302015_Aug2_Ref_vimp2_2119_04142016/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1689_06262015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_804_06042014/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1689_06262015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_804_06042014/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547777029
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [10.2032, -4.74571, 0.523094]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0.6089594446719442, -12.434008213463729, 33.819768286646024]
level 0, iter 1976, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.1169170265302196, -0.06475854051883059, 0.0275218030849368, 0.9906458957125683, 0.9780133829238953, 1.0971755497431286, 0.9309878808450299, 0.035497431353963285, -0.0369241007158149, 0.045807642656808936, 0.9707857664009254, -14.08011461449842, 32.39450148176863]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 54, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.12244899385837436, -0.06226360382989911, 0.02385280223985542, 0.990232564283003, 0.978738428975747, 1.1016788498205383, 0.934591720468963, 0.03933570255050225, -0.03329381276267264, 0.04657919433577111, 1.1005232175870612, -14.287453436355332, 32.35153079431041]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 158, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.12280864870600619, -0.061606344785187304, 0.022052488956664076, 0.9902708628532043, 0.9683663402261897, 1.1075829876045233, 0.9294069745679129, 0.041986505303987225, -0.035947829947303785, 0.05092590569878096, 1.1335296082089723, -14.40610718260254, 32.334404499338135]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 193, size: fix[37, 41, 32]-mov[40, 43, 32], affine para: [0.12558357030318693, -0.06123194910756627, 0.026283679767286912, 0.9898427064217241, 0.9783742447715762, 1.1140957726485687, 0.9308043119385341, 0.040057508669658015, -0.0391561419812873, 0.042838718506244336, 1.0412252860919502, -14.50997423132826, 32.3080633620859]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 96, size: fix[74, 81, 37]-mov[80, 85, 36], affine para: [0.12181431713354628, -0.059430823187534836, 0.026584900140507253, 0.9904153131293252, 0.9752412410034011, 1.1235832648014383, 0.9337659479514384, 0.04176671144599106, -0.04418130339649891, 0.044171167643047994, 0.9012730056461659, -14.564615885799576, 32.31199876646834]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 1748, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.1421750218791449, 0.06668562434848116, -0.021538046225489625, 0.9873577888606068, 1.0075251042731004, 0.9210350651879042, 1.0459754068952933, -0.03569194689455563, 0.023244810504461404, -0.1058076016877802, -6.567335593810684, 6.542439860493653, -36.46831529017941]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 95, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.1428711087288242, 0.06461641430999868, -0.0199811048266919, 0.9874276281035587, 1.0096794877848134, 0.924275137410051, 1.0436785338962955, -0.03292873807829625, 0.027774723042137336, -0.11131342368338615, -6.676979034131886, 6.675742300677024, -36.4617829893586]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 177, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.14405499238756486, 0.06356464553129466, -0.022713061545562366, 0.987264813432509, 1.0115706863145708, 0.9259201272777607, 1.0424131169907538, -0.03531215443167185, 0.028638841156517124, -0.1177773404344403, -6.475066812558821, 6.819852940507718, -36.63898580105201]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 105, size: fix[40, 43, 32]-mov[37, 41, 32], affine para: [-0.14757758624431958, 0.0651951072865605, -0.025100928459817623, 0.9865801525545957, 1.010575448507873, 0.9234066258516943, 1.0422639907768898, -0.037243861883356495, 0.025207549412280757, -0.12175005940829665, -6.369031390748029, 6.757390500958314, -36.69417379707104]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 224, size: fix[80, 85, 36]-mov[74, 81, 37], affine para: [-0.14369679870659993, 0.06836796595296925, -0.01950118085369077, 0.9870647168338256, 1.0144003074812016, 0.9230234705554141, 1.0406920202572405, -0.03313302592769184, 0.018395199219193397, -0.12916371316054323, -6.603723890051613, 6.844102565334107, -36.41036483865478]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.528131 v2 -0.527424
final [0.12181431713354628, -0.059430823187534836, 0.026584900140507253, 0.9904153131293252, 0.9752412410034011, 1.1235832648014383, 0.9337659479514384, 0.04176671144599106, -0.04418130339649891, 0.044171167643047994, 0.9012730056461659, -14.564615885799576, 32.31199876646834]
outputput affine center: [10.2032, -4.74571, 0.523094]
output affine para: [0.12181431713354628, -0.059430823187534836, 0.026584900140507253, 0.9904153131293252, 0.9752412410034011, 1.1235832648014383, 0.9337659479514384, 0.04176671144599106, -0.04418130339649891, 0.044171167643047994, 0.9012730056461659, -14.564615885799576, 32.31199876646834]
initial measure value (MMI): rval = -0.195966
final measure value (MMI): rval = -0.518859
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -5881.35
 iteration 2 energy 0 : -6272.79
 iteration 3 energy 0 : -6611.36
 iteration 4 energy 0 : -6933.22
 iteration 5 energy 0 : -7178.42
 iteration 6 energy 0 : -7347.16
 iteration 7 energy 0 : -7457.9
 iteration 8 energy 0 : -7553.6
 iteration 9 energy 0 : -7637.28
 iteration 10 energy 0 : -7703.76
 iteration 11 energy 0 : -7737.2
 iteration 12 energy 0 : -7736.53
 E-Slope 0.00967752 iteration 13 energy 0 : -7755.08
 E-Slope 0.00712483 iteration 14 energy 0 : -7762.4
 E-Slope 0.00508244 iteration 15 energy 0 : -7768.82
 E-Slope 0.00363681 iteration 16 energy 0 : -7789.2
 E-Slope 0.00260607 iteration 17 energy 0 : -7790.06
 E-Slope 0.00190082 iteration 18 energy 0 : -7810.99
 E-Slope 0.00135595 iteration 19 energy 0 : -7811.59
 E-Slope 0.00101618 iteration 20 energy 0 : -7831.87
 E-Slope 0.000798687 iteration 21 energy 0 : -7824.31
 E-Slope 0.000752047 iteration 22 energy 0 : -7845.9
 E-Slope 0.000727959 iteration 23 energy 0 : -7841.5
 E-Slope 0.000689715 iteration 24 energy 0 : -7856.34
 E-Slope 0.000642873 iteration 25 energy 0 : -7853.04
 E-Slope 0.000598982 iteration 26 energy 0 : -7863.9
 E-Slope 0.000526793 iteration 27 energy 0 : -7862.92
 E-Slope 0.000502959 iteration 28 energy 0 : -7875.4
 E-Slope 0.000435017 iteration 29 energy 0 : -7871.43
 E-Slope 0.000419028 iteration 30 energy 0 : -7882.36
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -13044.9
 iteration 2 energy 0 : -13208.9
 iteration 3 energy 0 : -13377.8
 iteration 4 energy 0 : -13517.8
 iteration 5 energy 0 : -13637.7
 iteration 6 energy 0 : -13732.9
 iteration 7 energy 0 : -13759.7
 iteration 8 energy 0 : -13753.8
 iteration 9 energy 0 : -13797.7
 iteration 10 energy 0 : -13783.9
 iteration 11 energy 0 : -13838
 iteration 12 energy 0 : -13818.3
 E-Slope 0.00206473 iteration 13 energy 0 : -13868.6
 E-Slope 0.00146326 iteration 14 energy 0 : -13850.8
 E-Slope 0.00107054 iteration 15 energy 0 : -13893.5
 E-Slope 0.000780024 iteration 16 energy 0 : -13877
 E-Slope 0.000667028 iteration 17 energy 0 : -13918.5
 E-Slope 0.000619434 iteration 18 energy 0 : -13901.1
 E-Slope 0.000614762 iteration 19 energy 0 : -13932.4
 E-Slope 0.000534616 iteration 20 energy 0 : -13916.5
 E-Slope 0.000532083 iteration 21 energy 0 : -13950.7
 E-Slope 0.000442363 iteration 22 energy 0 : -13931.1
 E-Slope 0.000447109 iteration 23 energy 0 : -13962.4
 E-Slope 0.000357494 iteration 24 energy 0 : -13939.5
 E-Slope 0.000363939 iteration 25 energy 0 : -13971.6
 E-Slope 0.000290565 iteration 26 energy 0 : -13952.7
 E-Slope 0.000297338 iteration 27 energy 0 : -13978.8
 E-Slope 0.000235848 iteration 28 energy 0 : -13963.3
 E-Slope 0.000258587 iteration 29 energy 0 : -13990.9
 E-Slope 0.000210933 iteration 30 energy 0 : -13972.7
 E-Slope 0.000238381 iteration 31 energy 0 : -14002.9
 E-Slope 0.000193641 iteration 32 energy 0 : -13981.2
 E-Slope 0.000227384 iteration 33 energy 0 : -14009.9
 E-Slope 0.000188932 iteration 34 energy 0 : -13991.1
 E-Slope 0.000227787 iteration 35 energy 0 : -14021.8
 E-Slope 0.000184126 iteration 36 energy 0 : -13999.3
 E-Slope 0.000220843 iteration 37 energy 0 : -14031.1
 E-Slope 0.000183366 iteration 38 energy 0 : -14009.7
 E-Slope 0.000219859 iteration 39 energy 0 : -14043.2
 E-Slope 0.000180505 iteration 40 energy 0 : -14017.4
 E-Slope 0.000211857 iteration 41 energy 0 : -14046.8
 E-Slope 0.00016772 iteration 42 energy 0 : -14023.5
 E-Slope 0.000197403 iteration 43 energy 0 : -14051.8
 E-Slope 0.000154339 iteration 44 energy 0 : -14033.3
 E-Slope 0.000184596 iteration 45 energy 0 : -14062.5
 E-Slope 0.000137359 iteration 46 energy 0 : -14036.9
 E-Slope 0.000168502 iteration 47 energy 0 : -14066.4
 E-Slope 0.000120945 iteration 48 energy 0 : -14043
 E-Slope 0.000149958 iteration 49 energy 0 : -14069.7
 E-Slope 0.000106521 iteration 50 energy 0 : -14048.8
 E-Slope 0.000150241 iteration 51 energy 0 : -14080.4
 E-Slope 0.000106081 iteration 52 energy 0 : -14053
 E-Slope 0.000150509 iteration 53 energy 0 : -14089.5
 E-Slope 9.91225e-05 iteration 54 energy 0 : -14054
 Converged due to oscillation in optimization  metric 0 bad 24  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -80342.8
 iteration 2 energy 0 : -81523.3
 iteration 3 energy 0 : -82908.9
 iteration 4 energy 0 : -84016.2
 iteration 5 energy 0 : -84864.4
 iteration 6 energy 0 : -85495
 iteration 7 energy 0 : -85980.1
 iteration 8 energy 0 : -86392.1
 iteration 9 energy 0 : -86727.1
 iteration 10 energy 0 : -87028.1
 iteration 11 energy 0 : -87294
 iteration 12 energy 0 : -87534.7
 E-Slope 0.00344589 iteration 13 energy 0 : -87791.1
 E-Slope 0.00281223 iteration 14 energy 0 : -88066.9
 E-Slope 0.00237207 iteration 15 energy 0 : -88337.1
 E-Slope 0.00209092 iteration 16 energy 0 : -88624.3
 E-Slope 0.0019334 iteration 17 energy 0 : -88944
 E-Slope 0.00184764 iteration 18 energy 0 : -89214.3
 E-Slope 0.00180409 iteration 19 energy 0 : -89477.8
 E-Slope 0.00178767 iteration 20 energy 0 : -89736.7
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1689_06262015_Aug1_Ref_vimp2_804_06042014/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1689_06262015_Aug1_Ref_vimp2_804_06042014/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1689_06262015_Aug1_Ref_vimp2_804_06042014/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1689_06262015_Aug1_Ref_vimp2_804_06042014/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1689_06262015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2530_09142016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1689_06262015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2530_09142016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547777142
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [10.2032, -4.74571, 0.523094]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 2.6974742826246434, -4.17831076109583, 14.632963050081097]
level 0, iter 562, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.09375015569789921, 0.020238855547116182, 0.022346002983826097, 0.995139162722184, 0.9226693749865564, 1.0478323234293225, 1.066201361901211, -0.0014815801822427833, -0.12624747090743507, 0.053823967747831505, 1.3902870972344388, -4.378003081145651, 14.738260238597299]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 21, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.09463277724658956, 0.02056617143175798, 0.019935921326053145, 0.9951001100915016, 0.9194442590581734, 1.046462126919635, 1.0615040138901473, 0.0007749925632064568, -0.12754779532297159, 0.055475427943451276, 1.4311073205584492, -4.398251381382131, 14.74194265004599]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 17, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.09576750192376454, 0.021281121426354042, 0.020755448760528965, 0.9949597533533041, 0.920228212980497, 1.047004487814768, 1.0642779326040888, 0.0006322725398809385, -0.12812452028626675, 0.05545864079653252, 1.4171965227449557, -4.475193906357586, 14.733321880248038]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 25, size: fix[37, 41, 32]-mov[38, 37, 32], affine para: [0.0949358882658979, 0.019196114102351853, 0.02284919241783996, 0.9950359796150021, 0.9207780147123672, 1.047617915536041, 1.0638157997582445, -0.00034871340969607297, -0.12945113346676707, 0.058201595174767265, 1.4263442661301409, -4.402911549935844, 14.720241736476199]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 33, size: fix[74, 81, 37]-mov[75, 74, 37], affine para: [0.09224856887326686, 0.02032806629973474, 0.02085941971696654, 0.9953099295548191, 0.9201295382987817, 1.0484335170780186, 1.0585303339061536, -0.0008808917843156341, -0.12947798768163069, 0.05991492299357147, 1.4201680671531782, -4.247220892427077, 14.666279306565755]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 1189, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.09391319631353895, -0.021448274725314343, -0.019735484076533957, 0.9951536533308547, 1.0796255196738027, 0.9700774237119588, 0.9215844051298449, -0.014539905231406063, 0.11479513697137776, -0.051386569955152256, -2.7031140566752345, 2.5541326416075765, -14.302305094583604]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 202, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.09362614008047392, -0.017801669358091247, -0.01876636316139928, 0.9952713549959082, 1.0854822321380486, 0.9667215930651955, 0.9242242086943272, -0.013524831535387732, 0.10683561486953852, -0.058520754891214076, -2.6869036314338755, 2.464317992103027, -14.322424072946628]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 61, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.09469956359614815, -0.02002184215230721, -0.020960167336116827, 0.9950838104786798, 1.0870188564941605, 0.9682974573717129, 0.924589700603884, -0.012098798526012634, 0.10728458612985374, -0.05669647724690562, -2.5986771037943854, 2.6423392482869232, -14.425771066734482]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 235, size: fix[38, 37, 32]-mov[37, 41, 32], affine para: [-0.09710987414514033, -0.019059899767411216, -0.02381291182902146, 0.9948061810194962, 1.0837371537231626, 0.9637856021613594, 0.9194599604010972, -0.014801711961483319, 0.10199009389904803, -0.055624344998947646, -2.5334056574353667, 2.4532918671815107, -14.33472508932086]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 87, size: fix[75, 74, 37]-mov[74, 81, 37], affine para: [-0.0952924792770593, -0.017151521606872753, -0.019218401531286955, 0.9951159840653663, 1.086029544435382, 0.9638015257527514, 0.9185667373424289, -0.014675746520341546, 0.10408195516344934, -0.053736381120101866, -2.742774791415439, 2.437053824975285, -14.204202564374993]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.556555 v2 -0.568847
 last params [0.09224856887326686, 0.02032806629973474, 0.02085941971696654, 0.9953099295548191, 0.9201295382987817, 1.0484335170780186, 1.0585303339061536, -0.0008808917843156341, -0.12947798768163069, 0.05991492299357147, 1.4201680671531782, -4.247220892427077, 14.666279306565755]
 my params [-0.0952924792770593, -0.017151521606872753, -0.019218401531286955, 0.9951159840653663, 1.086029544435382, 0.9638015257527514, 0.9185667373424289, -0.014675746520341546, 0.10408195516344934, -0.053736381120101866, -2.742774791415439, 2.437053824975285, -14.204202564374993]
A=0.923622 -0.038671 -0.0784159 
0.0412946 1.02908 -0.13869 
-0.0331743 0.207185 1.06824 

rotation R0.99836 -0.0367163 0.0439333 
0.044636 0.979669 -0.195592 
-0.0358586 0.197233 0.979701 

upper R0.92514 -0.000102831 -0.122783 
0 1.05044 0.0777009 
0 0 1.07024 

s=0.251332 u=0.0987293 v=0.0200542 w0.0204464 r=0.994702
m_Rotation from vnl0.0987293 0.0200542 0.0204464 0.994702
 new params [0.0987292773409312, 0.02005422225396283, 0.020446395514558253, 0.9947021176593465, 0.925139860614642, 1.0504427378762768, 1.070237734405984, -0.00011115141617950559, -0.13271881299645086, 0.07396963422322649, 1.513695901483804, -4.364643078443746, 14.577595837986102]
outputput affine center: [10.2032, -4.74571, 0.523094]
output affine para: [0.0987292773409312, 0.02005422225396283, 0.020446395514558253, 0.9947021176593465, 0.925139860614642, 1.0504427378762768, 1.070237734405984, -0.00011115141617950559, -0.13271881299645086, 0.07396963422322649, 1.513695901483804, -4.364643078443746, 14.577595837986102]
initial measure value (MMI): rval = -0.296854
final measure value (MMI): rval = -0.569647
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -6500.07
 iteration 2 energy 0 : -6828.37
 iteration 3 energy 0 : -7135.62
 iteration 4 energy 0 : -7385.9
 iteration 5 energy 0 : -7564.82
 iteration 6 energy 0 : -7686.16
 iteration 7 energy 0 : -7773.66
 iteration 8 energy 0 : -7843.85
 iteration 9 energy 0 : -7903.11
 iteration 10 energy 0 : -7948.16
 iteration 11 energy 0 : -7989.61
 iteration 12 energy 0 : -8026.94
 E-Slope 0.00733641 iteration 13 energy 0 : -8061.92
 E-Slope 0.00558715 iteration 14 energy 0 : -8093.74
 E-Slope 0.00435953 iteration 15 energy 0 : -8124.8
 E-Slope 0.00355167 iteration 16 energy 0 : -8150.58
 E-Slope 0.00293478 iteration 17 energy 0 : -8140.2
 E-Slope 0.00242676 iteration 18 energy 0 : -8139.69
 E-Slope 0.00196254 iteration 19 energy 0 : -8134.92
 E-Slope 0.00155613 iteration 20 energy 0 : -8141.68
 E-Slope 0.00117482 iteration 21 energy 0 : -8135.7
 E-Slope 0.000846349 iteration 22 energy 0 : -8144.52
 E-Slope 0.0005491 iteration 23 energy 0 : -8139.19
 E-Slope 0.000337146 iteration 24 energy 0 : -8151.61
 E-Slope 0.000170991 iteration 25 energy 0 : -8145.43
 E-Slope 0.000104457 iteration 26 energy 0 : -8159.84
 E-Slope 9.01818e-05 iteration 27 energy 0 : -8154.21
 Converged due to oscillation in optimization  metric 0 bad 7  
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -13430
 iteration 2 energy 0 : -13566.7
 iteration 3 energy 0 : -13730.2
 iteration 4 energy 0 : -13834
 iteration 5 energy 0 : -13912.7
 iteration 6 energy 0 : -13928.2
 iteration 7 energy 0 : -13979.5
 iteration 8 energy 0 : -13986
 iteration 9 energy 0 : -14031.6
 iteration 10 energy 0 : -14030
 iteration 11 energy 0 : -14069.5
 iteration 12 energy 0 : -14067.8
 E-Slope 0.00161905 iteration 13 energy 0 : -14100.3
 E-Slope 0.00119267 iteration 14 energy 0 : -14095.2
 E-Slope 0.000965215 iteration 15 energy 0 : -14128.8
 E-Slope 0.000809968 iteration 16 energy 0 : -14123.7
 E-Slope 0.000757962 iteration 17 energy 0 : -14156.1
 E-Slope 0.000670694 iteration 18 energy 0 : -14153.7
 E-Slope 0.000653833 iteration 19 energy 0 : -14184.1
 E-Slope 0.000591107 iteration 20 energy 0 : -14178.1
 E-Slope 0.000599243 iteration 21 energy 0 : -14210.6
 E-Slope 0.000551261 iteration 22 energy 0 : -14203
 E-Slope 0.000565305 iteration 23 energy 0 : -14233.5
 E-Slope 0.000527643 iteration 24 energy 0 : -14227.2
 E-Slope 0.000536129 iteration 25 energy 0 : -14252.4
 E-Slope 0.000484772 iteration 26 energy 0 : -14242
 E-Slope 0.00049115 iteration 27 energy 0 : -14272.3
 E-Slope 0.000443839 iteration 28 energy 0 : -14264.5
 E-Slope 0.000456072 iteration 29 energy 0 : -14295.6
 E-Slope 0.000426464 iteration 30 energy 0 : -14291.6
 E-Slope 0.000449143 iteration 31 energy 0 : -14318.7
 E-Slope 0.000437006 iteration 32 energy 0 : -14322.9
 E-Slope 0.000468582 iteration 33 energy 0 : -14342.6
 E-Slope 0.000478901 iteration 34 energy 0 : -14359.1
 E-Slope 0.000527091 iteration 35 energy 0 : -14379.2
 E-Slope 0.000513949 iteration 36 energy 0 : -14368.1
 E-Slope 0.00053972 iteration 37 energy 0 : -14395
 E-Slope 0.000488855 iteration 38 energy 0 : -14377.8
 E-Slope 0.000492245 iteration 39 energy 0 : -14409.6
 E-Slope 0.000421785 iteration 40 energy 0 : -14390
 E-Slope 0.000410788 iteration 41 energy 0 : -14421.5
 E-Slope 0.000335671 iteration 42 energy 0 : -14400.6
 E-Slope 0.000320762 iteration 43 energy 0 : -14432.3
 E-Slope 0.000257351 iteration 44 energy 0 : -14410
 E-Slope 0.000247627 iteration 45 energy 0 : -14441.5
 E-Slope 0.000210725 iteration 46 energy 0 : -14418.7
 E-Slope 0.000230722 iteration 47 energy 0 : -14449.1
 E-Slope 0.000185758 iteration 48 energy 0 : -14425.9
 E-Slope 0.000204012 iteration 49 energy 0 : -14452.6
 E-Slope 0.000150897 iteration 50 energy 0 : -14429.5
 E-Slope 0.000171803 iteration 51 energy 0 : -14457.4
 E-Slope 0.000119455 iteration 52 energy 0 : -14433.9
 E-Slope 0.000143342 iteration 53 energy 0 : -14462.2
 E-Slope 9.3773e-05 iteration 54 energy 0 : -14438.4
 Converged due to oscillation in optimization  metric 0 bad 21  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -80489.7
 iteration 2 energy 0 : -81798.1
 iteration 3 energy 0 : -83195.7
 iteration 4 energy 0 : -84307.8
 iteration 5 energy 0 : -85184.5
 iteration 6 energy 0 : -85843.9
 iteration 7 energy 0 : -86362.7
 iteration 8 energy 0 : -86760.5
 iteration 9 energy 0 : -87093.3
 iteration 10 energy 0 : -87395.2
 iteration 11 energy 0 : -87643.2
 iteration 12 energy 0 : -87840
 E-Slope 0.00344319 iteration 13 energy 0 : -88015.9
 E-Slope 0.00273514 iteration 14 energy 0 : -88140
 E-Slope 0.00219304 iteration 15 energy 0 : -88252.6
 E-Slope 0.00178679 iteration 16 energy 0 : -88378.5
 E-Slope 0.00150089 iteration 17 energy 0 : -88562.6
 E-Slope 0.00132848 iteration 18 energy 0 : -88858.2
 E-Slope 0.00127983 iteration 19 energy 0 : -89295.3
 E-Slope 0.00131959 iteration 20 energy 0 : -89690.4
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1689_06262015_Aug2_Ref_vimp2_2530_09142016/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1689_06262015_Aug2_Ref_vimp2_2530_09142016/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1689_06262015_Aug2_Ref_vimp2_2530_09142016/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1689_06262015_Aug2_Ref_vimp2_2530_09142016/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1709_07072015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2998_03222017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1709_07072015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2998_03222017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547777240
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [13.4662, -16.5909, 14.5714]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -0.14227306308689158, 26.93094076812318, -22.607042426925574]
level 0, iter 597, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.02144576104210783, 0.016163807010749816, 0.03691277645746768, 0.9989575854912185, 1.090758658315237, 0.9438627672908683, 0.9957001146705928, 0.01423650083271904, -0.07160180827567522, -0.058630963385737964, -1.078757501618874, 27.26163107316063, -19.964586329652597]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 146, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.02956228034680806, 0.01829214058069689, 0.039123743571706296, 0.9986294617437481, 1.095224038107393, 0.9328528179690697, 0.9891020975135106, 0.019469908100755138, -0.07599818552856193, -0.06922001358902904, -0.9161972094611261, 27.318746779815374, -20.036152974154053]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 1434, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.028528849303058414, 0.022282438752742564, 0.0529069541218335, 0.9979431105459989, 1.1017469720535837, 0.9098862798202152, 0.978333921215624, 0.034115983052042984, -0.0837591985680964, -0.08217157780318518, -1.0614400079527087, 27.14504055825057, -19.830649455825036]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 50, size: fix[37, 43, 35]-mov[39, 45, 33], affine para: [-0.031195450523808895, 0.024733351325349987, 0.049822974337173156, 0.9979643162092675, 1.1122015540460288, 0.9150739685321634, 0.9877551607034493, 0.036096647763133344, -0.09045404028680265, -0.08660687964864494, -0.9777816134447297, 27.25606729511017, -19.923590774271972]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 158, size: fix[73, 86, 49]-mov[77, 89, 47], affine para: [-0.02562542278709791, 0.023570290291032296, 0.057733956255067366, 0.997724696205179, 1.1053358016325807, 0.9081429179524128, 0.9822700382335167, 0.033172347503986, -0.09079119692011017, -0.0913334492968822, -1.0610119478119018, 27.332786431685417, -19.58868535487197]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 2088, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.04015616313638077, -0.03763751845872146, -0.05427742374098966, 0.9970079543506536, 0.8983757230346973, 1.0654512783619463, 1.0043787490093636, -0.06278764078163648, 0.12801476043310225, 0.06700882468425925, -0.050752706275474256, -29.831280167248806, 17.892107875748426]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 250, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.04209003201648038, -0.03777973345318563, -0.0552236990332193, 0.9968708361719417, 0.9028223628457197, 1.0712269934216423, 1.006924087922997, -0.06601739281119981, 0.12623438567103076, 0.06827289697130587, -0.012334794074077095, -29.963678623286228, 17.786629767205962]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 428, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.03571945080677892, -0.03415450088160435, -0.0536443049438111, 0.997336392322413, 0.9070656951958079, 1.073389918596321, 0.9987727491216739, -0.06684087943118205, 0.1197378544892215, 0.07319228153364588, 0.18315107548335063, -29.541231278513493, 17.97403088964048]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 1802, size: fix[39, 45, 33]-mov[37, 43, 35], affine para: [0.04384426176890361, -0.0387800026829583, -0.05228143369207748, 0.9969154647175209, 0.9045748185653997, 1.0655102391858562, 1.0042952794682714, -0.06625988525353793, 0.12780161083016123, 0.09412649265275436, 0.16863366128481272, -29.15605551047553, 17.78134734765721]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 997, size: fix[77, 89, 47]-mov[73, 86, 49], affine para: [0.044451523548188134, -0.03944123452140863, -0.05288878240439623, 0.996830591309001, 0.8948683066667119, 1.061016891137401, 0.9983612272812724, -0.06670954487769974, 0.13116168048361854, 0.08633677133514844, 0.06519799802626773, -29.43321883307042, 17.76658060802698]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.430303 v2 -0.423869
final [-0.02562542278709791, 0.023570290291032296, 0.057733956255067366, 0.997724696205179, 1.1053358016325807, 0.9081429179524128, 0.9822700382335167, 0.033172347503986, -0.09079119692011017, -0.0913334492968822, -1.0610119478119018, 27.332786431685417, -19.58868535487197]
outputput affine center: [13.4662, -16.5909, 14.5714]
output affine para: [-0.02562542278709791, 0.023570290291032296, 0.057733956255067366, 0.997724696205179, 1.1053358016325807, 0.9081429179524128, 0.9822700382335167, 0.033172347503986, -0.09079119692011017, -0.0913334492968822, -1.0610119478119018, 27.332786431685417, -19.58868535487197]
initial measure value (MMI): rval = -0.22955
final measure value (MMI): rval = -0.421841
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -5766.68
 iteration 2 energy 0 : -6255.68
 iteration 3 energy 0 : -6615.05
 iteration 4 energy 0 : -6883.16
 iteration 5 energy 0 : -7105.4
 iteration 6 energy 0 : -7292.23
 iteration 7 energy 0 : -7430.15
 iteration 8 energy 0 : -7539.4
 iteration 9 energy 0 : -7636.57
 iteration 10 energy 0 : -7711.36
 iteration 11 energy 0 : -7765.47
 iteration 12 energy 0 : -7809.61
 E-Slope 0.0105096 iteration 13 energy 0 : -7848.02
 E-Slope 0.00824324 iteration 14 energy 0 : -7880.72
 E-Slope 0.00652829 iteration 15 energy 0 : -7908.21
 E-Slope 0.00518617 iteration 16 energy 0 : -7934.26
 E-Slope 0.00416071 iteration 17 energy 0 : -7960.17
 E-Slope 0.00341962 iteration 18 energy 0 : -7988.18
 E-Slope 0.00288064 iteration 19 energy 0 : -8018.07
 E-Slope 0.0025148 iteration 20 energy 0 : -8053.87
 E-Slope 0.0023175 iteration 21 energy 0 : -8091.66
 E-Slope 0.00223989 iteration 22 energy 0 : -8128.1
 E-Slope 0.0021583 iteration 23 energy 0 : -8134.06
 E-Slope 0.00200572 iteration 24 energy 0 : -8119.91
 E-Slope 0.00181982 iteration 25 energy 0 : -8121.98
 E-Slope 0.00157654 iteration 26 energy 0 : -8115.95
 E-Slope 0.00128483 iteration 27 energy 0 : -8112.44
 E-Slope 0.000980325 iteration 28 energy 0 : -8116.67
 E-Slope 0.00065431 iteration 29 energy 0 : -8108.89
 E-Slope 0.000390522 iteration 30 energy 0 : -8123.54
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -15769.7
 iteration 2 energy 0 : -16044.2
 iteration 3 energy 0 : -16263.8
 iteration 4 energy 0 : -16463.9
 iteration 5 energy 0 : -16622.4
 iteration 6 energy 0 : -16749.3
 iteration 7 energy 0 : -16838.8
 iteration 8 energy 0 : -16859.4
 iteration 9 energy 0 : -16887.3
 iteration 10 energy 0 : -16899.8
 iteration 11 energy 0 : -16927.1
 iteration 12 energy 0 : -16933.3
 E-Slope 0.00251064 iteration 13 energy 0 : -16963.7
 E-Slope 0.00181322 iteration 14 energy 0 : -16964.9
 E-Slope 0.00129088 iteration 15 energy 0 : -16994.7
 E-Slope 0.000912927 iteration 16 energy 0 : -16991.7
 E-Slope 0.000694707 iteration 17 energy 0 : -17023
 E-Slope 0.000567786 iteration 18 energy 0 : -17016
 E-Slope 0.000546217 iteration 19 energy 0 : -17048.7
 E-Slope 0.00049983 iteration 20 energy 0 : -17039.8
 E-Slope 0.000485793 iteration 21 energy 0 : -17068.1
 E-Slope 0.000441544 iteration 22 energy 0 : -17059
 E-Slope 0.000429332 iteration 23 energy 0 : -17084.3
 E-Slope 0.000383988 iteration 24 energy 0 : -17075.9
 E-Slope 0.000376374 iteration 25 energy 0 : -17099.6
 E-Slope 0.000331849 iteration 26 energy 0 : -17089.9
 E-Slope 0.000321954 iteration 27 energy 0 : -17108.4
 E-Slope 0.00027477 iteration 28 energy 0 : -17099.2
 E-Slope 0.000267044 iteration 29 energy 0 : -17116.9
 E-Slope 0.000221439 iteration 30 energy 0 : -17108.3
 E-Slope 0.000221007 iteration 31 energy 0 : -17126.5
 E-Slope 0.000181533 iteration 32 energy 0 : -17115.8
 E-Slope 0.000187188 iteration 33 energy 0 : -17136
 E-Slope 0.000157528 iteration 34 energy 0 : -17126.7
 E-Slope 0.000160456 iteration 35 energy 0 : -17138
 E-Slope 0.00013528 iteration 36 energy 0 : -17132.4
 E-Slope 0.000138432 iteration 37 energy 0 : -17140.2
 E-Slope 0.000118189 iteration 38 energy 0 : -17138.6
 E-Slope 0.000118688 iteration 39 energy 0 : -17144.4
 E-Slope 9.84147e-05 iteration 40 energy 0 : -17143.2
 Converged due to oscillation in optimization  metric 0 bad 13  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -118292
 iteration 2 energy 0 : -120266
 iteration 3 energy 0 : -122868
 iteration 4 energy 0 : -124897
 iteration 5 energy 0 : -126492
 iteration 6 energy 0 : -127802
 iteration 7 energy 0 : -128865
 iteration 8 energy 0 : -129765
 iteration 9 energy 0 : -130489
 iteration 10 energy 0 : -131132
 iteration 11 energy 0 : -131674
 iteration 12 energy 0 : -132182
 E-Slope 0.00465294 iteration 13 energy 0 : -132626
 E-Slope 0.00383201 iteration 14 energy 0 : -133064
 E-Slope 0.00322781 iteration 15 energy 0 : -133509
 E-Slope 0.00278568 iteration 16 energy 0 : -133954
 E-Slope 0.00246426 iteration 17 energy 0 : -134394
 E-Slope 0.00224323 iteration 18 energy 0 : -134861
 E-Slope 0.0020996 iteration 19 energy 0 : -135337
 E-Slope 0.0020128 iteration 20 energy 0 : -135781
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1709_07072015_Aug1_Ref_vimp2_2998_03222017_Test_NewCases/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1709_07072015_Aug1_Ref_vimp2_2998_03222017_Test_NewCases/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1709_07072015_Aug1_Ref_vimp2_2998_03222017_Test_NewCases/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1709_07072015_Aug1_Ref_vimp2_2998_03222017_Test_NewCases/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1709_07072015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1761_12042015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1709_07072015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1761_12042015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547777388
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [13.4662, -16.5909, 14.5714]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -6.6589935048532105, -6.627829276363951, 4.372037069877816]
level 0, iter 427, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.0024382913096636315, -0.03874520291324829, 0.01872779240512066, 0.9990706350295414, 1.0282186680318963, 0.9608135465040496, 0.9416010408994332, 0.022027325874576984, -0.02481378940172852, 0.043518350251888535, -7.542901146318471, -2.784421062220004, 4.838501451512415]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 186, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.0025643219241068527, -0.0383074915226269, 0.023005799294519888, 0.9989978446148589, 1.03129001908293, 0.9590233191955284, 0.9485670699857619, 0.02515642994126629, -0.029826246703928604, 0.05347212102139428, -7.633067367105746, -2.665519667904718, 5.052280673051465]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 76, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.0033911111626904124, -0.040489260673692254, 0.02183215898845451, 0.9989356720875888, 1.0379698291890047, 0.9603836143876231, 0.9520523029734861, 0.025591622881372983, -0.024501281168331047, 0.062064520410564414, -7.505481536797944, -2.4080229525340533, 4.812638866386437]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 96, size: fix[37, 43, 35]-mov[39, 43, 32], affine para: [0.0029557815260814286, -0.04043691201864801, 0.018504555145449242, 0.9990063568070201, 1.0371385388048053, 0.9550015742186528, 0.9507331609338748, 0.026530030286309406, -0.029516112949988606, 0.07409672156921138, -7.5625759224936395, -2.374521880486147, 4.942513211794663]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 33, size: fix[73, 86, 49]-mov[77, 85, 44], affine para: [0.005341961357667852, -0.04251341968306386, 0.01810839675600888, 0.998917493371015, 1.0425158321768102, 0.959255544433354, 0.9567844407635224, 0.024622425452313523, -0.029189639013885545, 0.07645638179269595, -7.551114561585215, -2.422948140330245, 4.847742112876743]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 1751, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.011294025685057182, 0.04051779937920756, -0.01861107251436055, 0.9989416303754474, 0.9545768843054452, 1.0126131701023595, 1.0326044093870146, -0.02719265332250184, 0.025146095025169193, -0.09159066130567213, 6.625346705521982, 2.1572151251773, -5.977887032829288]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 49, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.009927378576610186, 0.04381602893616831, -0.015384095438863196, 0.9988718298011959, 0.9549539080972099, 1.014381442644281, 1.0399587105599886, -0.026901155088183942, 0.0227447646521665, -0.09340959390912146, 6.58144322657458, 2.089710260302149, -5.918638483133707]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 124, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.0162310756652402, 0.04236154736481613, -0.020488511742293776, 0.9987603678431547, 0.9567235349725703, 1.0163106607619963, 1.0469989013359369, -0.02502853567392239, 0.020987840696837578, -0.09744284456025791, 6.6233960069435325, 2.1130650749550126, -6.108467262516877]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 24, size: fix[39, 43, 32]-mov[37, 43, 35], affine para: [-0.015602649736804412, 0.0434643608151927, -0.017317264952449687, 0.9987830189759355, 0.9530391497074808, 1.0125154784030483, 1.0459668485293172, -0.026238070110063447, 0.01900674088378582, -0.09873157948753894, 6.524497481960552, 2.08626196345219, -5.931699523482523]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 440, size: fix[77, 85, 44]-mov[73, 86, 49], affine para: [-0.013523503388380424, 0.04372210692783756, -0.01788141134629157, 0.998792144217284, 0.9536385372358742, 1.0282581923333718, 1.035744323398777, -0.024578088320555358, 0.017703208131765766, -0.10403848291613997, 6.563665133048811, 2.212784890325888, -5.877088316751387]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.4444 v2 -0.449642
 last params [0.005341961357667852, -0.04251341968306386, 0.01810839675600888, 0.998917493371015, 1.0425158321768102, 0.959255544433354, 0.9567844407635224, 0.024622425452313523, -0.029189639013885545, 0.07645638179269595, -7.551114561585215, -2.422948140330245, 4.847742112876743]
 my params [-0.013523503388380424, 0.04372210692783756, -0.01788141134629157, 0.998792144217284, 0.9536385372358742, 1.0282581923333718, 1.035744323398777, -0.024578088320555358, 0.017703208131765766, -0.10403848291613997, 6.563665133048811, 2.212784890325888, -5.877088316751387]
A=1.04348 -0.0151898 -0.106323 
0.0424095 0.974097 0.0722347 
0.0847914 0.0245724 0.961445 

rotation R0.995898 -0.0424672 -0.0798982 
0.0404758 0.998832 -0.0263823 
0.0809252 0.0230401 0.996454 

upper R1.04777 0.0262884 -0.0251577 
0 0.974171 0.0988173 
0 0 0.964625 

s=0.250276 u=0.0123692 v=-0.0402502 w0.0207586 r=0.998897
m_Rotation from vnl0.0123692 -0.0402502 0.0207586 0.998897
 new params [0.012369227162459352, -0.040250225189459976, 0.020758645016254913, 0.9988973922524227, 1.0477748899511643, 0.9741708576127848, 0.9646246312654135, 0.025089770060865275, -0.0240105747642638, 0.10143735710252054, -7.440289308947148, -2.0092999657877666, 5.039580047116932]
outputput affine center: [13.4662, -16.5909, 14.5714]
output affine para: [0.012369227162459352, -0.040250225189459976, 0.020758645016254913, 0.9988973922524227, 1.0477748899511643, 0.9741708576127848, 0.9646246312654135, 0.025089770060865275, -0.0240105747642638, 0.10143735710252054, -7.440289308947148, -2.0092999657877666, 5.039580047116932]
initial measure value (MMI): rval = -0.206643
final measure value (MMI): rval = -0.460815
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -5078.31
 iteration 2 energy 0 : -5404.16
 iteration 3 energy 0 : -5648.82
 iteration 4 energy 0 : -5838.61
 iteration 5 energy 0 : -5996.02
 iteration 6 energy 0 : -6129.14
 iteration 7 energy 0 : -6242.68
 iteration 8 energy 0 : -6343.73
 iteration 9 energy 0 : -6422.22
 iteration 10 energy 0 : -6488.9
 iteration 11 energy 0 : -6525.2
 iteration 12 energy 0 : -6540.12
 E-Slope 0.00949971 iteration 13 energy 0 : -6593.44
 E-Slope 0.00759164 iteration 14 energy 0 : -6596.52
 E-Slope 0.00619539 iteration 15 energy 0 : -6659.19
 E-Slope 0.0050049 iteration 16 energy 0 : -6659.83
 E-Slope 0.00412181 iteration 17 energy 0 : -6704.85
 E-Slope 0.00336474 iteration 18 energy 0 : -6700.37
 E-Slope 0.00286422 iteration 19 energy 0 : -6744.2
 E-Slope 0.00245362 iteration 20 energy 0 : -6737.41
 E-Slope 0.0022323 iteration 21 energy 0 : -6777.36
 E-Slope 0.00203862 iteration 22 energy 0 : -6770.9
 E-Slope 0.00192933 iteration 23 energy 0 : -6808.68
 E-Slope 0.00170744 iteration 24 energy 0 : -6801.38
 E-Slope 0.00162928 iteration 25 energy 0 : -6834.67
 E-Slope 0.00142185 iteration 26 energy 0 : -6827.37
 E-Slope 0.0013985 iteration 27 energy 0 : -6858.97
 E-Slope 0.00125615 iteration 28 energy 0 : -6851.86
 E-Slope 0.00124913 iteration 29 energy 0 : -6881.25
 E-Slope 0.00111651 iteration 30 energy 0 : -6873.48
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -13809.9
 iteration 2 energy 0 : -14004.2
 iteration 3 energy 0 : -14240.9
 iteration 4 energy 0 : -14428
 iteration 5 energy 0 : -14593.7
 iteration 6 energy 0 : -14716.4
 iteration 7 energy 0 : -14758.1
 iteration 8 energy 0 : -14837.3
 iteration 9 energy 0 : -14848.8
 iteration 10 energy 0 : -14941.7
 iteration 11 energy 0 : -14937.3
 iteration 12 energy 0 : -15004.8
 E-Slope 0.00318097 iteration 13 energy 0 : -14995.7
 E-Slope 0.00252672 iteration 14 energy 0 : -15079.5
 E-Slope 0.00199779 iteration 15 energy 0 : -15062.4
 E-Slope 0.00166327 iteration 16 energy 0 : -15121.6
 E-Slope 0.00139716 iteration 17 energy 0 : -15093
 E-Slope 0.00129566 iteration 18 energy 0 : -15163.6
 E-Slope 0.00111155 iteration 19 energy 0 : -15128.6
 E-Slope 0.00106613 iteration 20 energy 0 : -15209.8
 E-Slope 0.000911169 iteration 21 energy 0 : -15174.3
 E-Slope 0.000889838 iteration 22 energy 0 : -15227.2
 E-Slope 0.000753343 iteration 23 energy 0 : -15192.3
 E-Slope 0.00074444 iteration 24 energy 0 : -15258.6
 E-Slope 0.000617288 iteration 25 energy 0 : -15220.3
 E-Slope 0.000658497 iteration 26 energy 0 : -15294.9
 E-Slope 0.000577196 iteration 27 energy 0 : -15256
 E-Slope 0.000632249 iteration 28 energy 0 : -15328.3
 E-Slope 0.000545092 iteration 29 energy 0 : -15284.3
 E-Slope 0.000615939 iteration 30 energy 0 : -15360.3
 E-Slope 0.000536546 iteration 31 energy 0 : -15316.6
 E-Slope 0.000625573 iteration 32 energy 0 : -15389.9
 E-Slope 0.000560649 iteration 33 energy 0 : -15343.1
 E-Slope 0.000628956 iteration 34 energy 0 : -15419.2
 E-Slope 0.000538893 iteration 35 energy 0 : -15368.7
 E-Slope 0.000603147 iteration 36 energy 0 : -15446.5
 E-Slope 0.000507861 iteration 37 energy 0 : -15397.4
 E-Slope 0.000576906 iteration 38 energy 0 : -15473.3
 E-Slope 0.000488959 iteration 39 energy 0 : -15425
 E-Slope 0.000565581 iteration 40 energy 0 : -15502.6
 E-Slope 0.000473611 iteration 41 energy 0 : -15449.9
 E-Slope 0.000556834 iteration 42 energy 0 : -15531.3
 E-Slope 0.000480473 iteration 43 energy 0 : -15484.8
 E-Slope 0.000580959 iteration 44 energy 0 : -15571
 E-Slope 0.000510931 iteration 45 energy 0 : -15520.4
 E-Slope 0.000613265 iteration 46 energy 0 : -15602
 E-Slope 0.000539124 iteration 47 energy 0 : -15551.6
 E-Slope 0.000637278 iteration 48 energy 0 : -15633.4
 E-Slope 0.00055632 iteration 49 energy 0 : -15580.8
 E-Slope 0.000643864 iteration 50 energy 0 : -15662.8
 E-Slope 0.00055071 iteration 51 energy 0 : -15608.2
 E-Slope 0.000633672 iteration 52 energy 0 : -15694
 E-Slope 0.000537261 iteration 53 energy 0 : -15644.4
 E-Slope 0.000579923 iteration 54 energy 0 : -15697.4
 E-Slope 0.000459917 iteration 55 energy 0 : -15650.7
 E-Slope 0.000511736 iteration 56 energy 0 : -15720.5
 E-Slope 0.000402592 iteration 57 energy 0 : -15676.3
 E-Slope 0.000448033 iteration 58 energy 0 : -15734.9
 E-Slope 0.000340655 iteration 59 energy 0 : -15692.5
 E-Slope 0.000398599 iteration 60 energy 0 : -15755.7
 E-Slope 0.000303626 iteration 61 energy 0 : -15712.8
 E-Slope 0.000378489 iteration 62 energy 0 : -15778.1
 E-Slope 0.00029964 iteration 63 energy 0 : -15736
 E-Slope 0.000395454 iteration 64 energy 0 : -15801.1
 E-Slope 0.000344433 iteration 65 energy 0 : -15758.9
 E-Slope 0.000420146 iteration 66 energy 0 : -15821.8
 E-Slope 0.000346541 iteration 67 energy 0 : -15776.6
 E-Slope 0.000427313 iteration 68 energy 0 : -15844.7
 E-Slope 0.000359721 iteration 69 energy 0 : -15797.8
 E-Slope 0.000435881 iteration 70 energy 0 : -15869.7
 E-Slope 0.000360809 iteration 71 energy 0 : -15819.2
 E-Slope 0.000435576 iteration 72 energy 0 : -15891.2
 E-Slope 0.000363335 iteration 73 energy 0 : -15844.5
 E-Slope 0.000445567 iteration 74 energy 0 : -15918.8
 E-Slope 0.000391029 iteration 75 energy 0 : -15879.9
 E-Slope 0.000443429 iteration 76 energy 0 : -15918.5
 E-Slope 0.000353649 iteration 77 energy 0 : -15873.7
 E-Slope 0.000415258 iteration 78 energy 0 : -15947.7
 E-Slope 0.000340253 iteration 79 energy 0 : -15910.6
 E-Slope 0.000373513 iteration 80 energy 0 : -15945
 E-Slope 0.000265509 iteration 81 energy 0 : -15901.7
 E-Slope 0.000325307 iteration 82 energy 0 : -15974.7
 E-Slope 0.000242814 iteration 83 energy 0 : -15933.3
 E-Slope 0.000286333 iteration 84 energy 0 : -15972.8
 E-Slope 0.000184543 iteration 85 energy 0 : -15922
 E-Slope 0.000262596 iteration 86 energy 0 : -15998.3
 E-Slope 0.000218607 iteration 87 energy 0 : -15956.7
 E-Slope 0.000255704 iteration 88 energy 0 : -15992.8
 E-Slope 0.000153393 iteration 89 energy 0 : -15942.8
 E-Slope 0.000228889 iteration 90 energy 0 : -16016.4
 tired convergence: reached max iterations 
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -112855
 iteration 2 energy 0 : -114971
 iteration 3 energy 0 : -117385
 iteration 4 energy 0 : -119736
 iteration 5 energy 0 : -121553
 iteration 6 energy 0 : -123137
 iteration 7 energy 0 : -124593
 iteration 8 energy 0 : -125826
 iteration 9 energy 0 : -126912
 iteration 10 energy 0 : -127826
 iteration 11 energy 0 : -128526
 iteration 12 energy 0 : -129168
 E-Slope 0.00603522 iteration 13 energy 0 : -129744
 E-Slope 0.00514927 iteration 14 energy 0 : -130236
 E-Slope 0.00438137 iteration 15 energy 0 : -130691
 E-Slope 0.00376062 iteration 16 energy 0 : -131104
 E-Slope 0.00323639 iteration 17 energy 0 : -131507
 E-Slope 0.00279581 iteration 18 energy 0 : -131862
 E-Slope 0.00244312 iteration 19 energy 0 : -132199
 E-Slope 0.00216277 iteration 20 energy 0 : -132520
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1709_07072015_Aug2_Ref_vimp2_1761_12042015/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1709_07072015_Aug2_Ref_vimp2_1761_12042015/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1709_07072015_Aug2_Ref_vimp2_1761_12042015/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1709_07072015_Aug2_Ref_vimp2_1761_12042015/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1712_11162015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2597_10182016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1712_11162015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2597_10182016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547777535
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [12.851, -12.5517, 33.3678]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -6.460013635466544, 4.552769452180264, -29.329372990882636]
level 0, iter 1571, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.12354606831161484, 0.003019202925024984, 0.04360838670410956, 0.991375590796699, 1.0448693776896445, 1.02125521238247, 1.0282401011344997, 0.04024215335762533, 0.005125545762710975, 0.0552239887087967, -6.880670684912823, 6.078071005531924, -27.906229198796897]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 269, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.12291280743451302, 0.005392837357810518, 0.043681744263776474, 0.9914410039391516, 1.0460325970042343, 1.0191671586887476, 1.0204342792184011, 0.0433911534045115, 0.0075306108596800555, 0.05872524686017827, -6.80455151205357, 6.052927185175102, -27.95239206685079]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 261, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.12350471703236611, 0.004273388457009403, 0.04762642968546063, 0.9911912258576882, 1.0464932974109, 1.0119047362409446, 1.0246287541551322, 0.04917346413721655, 0.009355554169446589, 0.05114084168481449, -6.785450545359103, 6.00256427462434, -27.88072693106698]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 60, size: fix[36, 39, 32]-mov[40, 43, 33], affine para: [-0.12162638110115774, 0.00561873970079048, 0.04397047214123107, 0.9915856245247244, 1.0457565478803896, 1.013496361480907, 1.0195566320165084, 0.04637173297467076, 0.0008944122519945584, 0.0514223035287757, -6.7616396333803515, 5.842275075627329, -27.97885993394047]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 52, size: fix[71, 77, 33]-mov[79, 85, 46], affine para: [-0.11886152113870711, 0.008996462496454121, 0.04576853243591738, 0.9918146217382586, 1.0452106055244665, 1.0121060860831668, 1.0157699673507217, 0.046520448574371674, 0.0018023074798885186, 0.051957418484019455, -6.772666468332908, 5.766304921384899, -27.964876004283255]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 759, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.12221791868964832, -0.010070305039728042, -0.044509244842343754, 0.9914536279782034, 0.953219766974337, 0.9411124231581753, 0.9840762891205815, -0.03745586392666914, 0.026912586380411486, -0.04013251124118934, 5.959683941714094, -13.561103239436484, 25.160349059828054]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 1003, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.1286378689380354, -0.008239106824468741, -0.04383864055011282, 0.9906879374397035, 0.9497554675900887, 0.9418708472601467, 0.9753177416453108, -0.0369957157244104, 0.02522420477401012, -0.02914324353092281, 6.045023110425018, -13.515549081410361, 24.727486278302756]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 407, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.12613942534940992, -0.006961468836970261, -0.047997687451568176, 0.9908262235747771, 0.9482657668370961, 0.9426471929130829, 0.9804949178823352, -0.03594930192218629, 0.02321508722824846, -0.036108943193511135, 5.948707538965624, -13.799377369982183, 24.791653638151708]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 239, size: fix[40, 43, 33]-mov[36, 39, 32], affine para: [0.12500979592116784, -0.010237873357063042, -0.045961930087693954, 0.9910374553242106, 0.9536750705112182, 0.9446561929015801, 0.986210136348526, -0.03671398738904833, 0.02532694700362704, -0.03238500701675782, 5.793597690897281, -13.498401571840326, 25.2073401800431]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 174, size: fix[79, 85, 46]-mov[71, 77, 33], affine para: [0.1262395597876583, -0.009484896792454305, -0.04740888732411364, 0.9908208756784165, 0.9553345264718489, 0.9450119288201989, 0.9893299466790467, -0.03606108502304606, 0.02356134491459669, -0.03651160410764087, 5.852825165809277, -13.888964298441298, 25.118072917224612]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.610974 v2 -0.616391
 last params [-0.11886152113870711, 0.008996462496454121, 0.04576853243591738, 0.9918146217382586, 1.0452106055244665, 1.0121060860831668, 1.0157699673507217, 0.046520448574371674, 0.0018023074798885186, 0.051957418484019455, -6.772666468332908, 5.766304921384899, -27.964876004283255]
 my params [0.1262395597876583, -0.009484896792454305, -0.04740888732411364, 0.9908208756784165, 0.9553345264718489, 0.9450119288201989, 0.9893299466790467, -0.03606108502304606, 0.02356134491459669, -0.03651160410764087, 5.852825165809277, -13.888964298441298, 25.118072917224612]
A=1.04605 -0.0584703 -0.00503853 
0.0957445 1.0105 0.301392 
-0.0310972 -0.251951 0.978387 

rotation R0.995401 -0.095562 0.00666581 
0.0911091 0.965918 0.242283 
-0.0295917 -0.240561 0.970183 

upper R1.05088 0.0413203 -0.0065079 
0 1.04226 0.0562396 
0 0 1.0222 

s=0.252168 u=-0.121758 v=0.00914299 w0.0470725 r=0.991401
m_Rotation from vnl-0.121758 0.00914299 0.0470725 0.991401
 new params [-0.12175805279418762, 0.009142990730507011, 0.04707254765180955, 0.9914008057076803, 1.0508782029439818, 1.0422617456975398, 1.0222024046019254, 0.03931976253251185, -0.006192820528245125, 0.05395921052394887, -6.807855152995918, 5.904095562327786, -27.892513265081057]
outputput affine center: [12.851, -12.5517, 33.3678]
output affine para: [-0.12175805279418762, 0.009142990730507011, 0.04707254765180955, 0.9914008057076803, 1.0508782029439818, 1.0422617456975398, 1.0222024046019254, 0.03931976253251185, -0.006192820528245125, 0.05395921052394887, -6.807855152995918, 5.904095562327786, -27.892513265081057]
initial measure value (MMI): rval = -0.311486
final measure value (MMI): rval = -0.612936
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -7378.14
 iteration 2 energy 0 : -7719.95
 iteration 3 energy 0 : -7986.82
 iteration 4 energy 0 : -8166.19
 iteration 5 energy 0 : -8291.19
 iteration 6 energy 0 : -8394.3
 iteration 7 energy 0 : -8484.95
 iteration 8 energy 0 : -8562.07
 iteration 9 energy 0 : -8628.94
 iteration 10 energy 0 : -8692.04
 iteration 11 energy 0 : -8742.92
 iteration 12 energy 0 : -8788.2
 E-Slope 0.00617986 iteration 13 energy 0 : -8827.12
 E-Slope 0.00500664 iteration 14 energy 0 : -8852.23
 E-Slope 0.00412239 iteration 15 energy 0 : -8845.15
 E-Slope 0.00338765 iteration 16 energy 0 : -8845.22
 E-Slope 0.0027884 iteration 17 energy 0 : -8876.44
 E-Slope 0.00222257 iteration 18 energy 0 : -8870.25
 E-Slope 0.00171218 iteration 19 energy 0 : -8869.24
 E-Slope 0.00126214 iteration 20 energy 0 : -8869.04
 E-Slope 0.000925146 iteration 21 energy 0 : -8889.7
 E-Slope 0.000655591 iteration 22 energy 0 : -8885.16
 E-Slope 0.000474058 iteration 23 energy 0 : -8894
 E-Slope 0.00035768 iteration 24 energy 0 : -8893.13
 E-Slope 0.000328049 iteration 25 energy 0 : -8903.82
 E-Slope 0.000321753 iteration 26 energy 0 : -8898.67
 E-Slope 0.000272676 iteration 27 energy 0 : -8896.43
 E-Slope 0.000203386 iteration 28 energy 0 : -8896.46
 E-Slope 0.000206962 iteration 29 energy 0 : -8903.48
 E-Slope 0.000177547 iteration 30 energy 0 : -8901.29
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -13238
 iteration 2 energy 0 : -13331.9
 iteration 3 energy 0 : -13427.1
 iteration 4 energy 0 : -13494.9
 iteration 5 energy 0 : -13516.4
 iteration 6 energy 0 : -13580
 iteration 7 energy 0 : -13581.2
 iteration 8 energy 0 : -13637
 iteration 9 energy 0 : -13627.8
 iteration 10 energy 0 : -13615
 iteration 11 energy 0 : -13621.2
 iteration 12 energy 0 : -13679.8
 E-Slope 0.00108338 iteration 13 energy 0 : -13657.5
 E-Slope 0.000786796 iteration 14 energy 0 : -13653.2
 E-Slope 0.000569679 iteration 15 energy 0 : -13648.1
 E-Slope 0.000401735 iteration 16 energy 0 : -13639.3
 E-Slope 0.00025361 iteration 17 energy 0 : -13651.4
 E-Slope 0.000225082 iteration 18 energy 0 : -13682.6
 E-Slope 0.000150166 iteration 19 energy 0 : -13663.1
 E-Slope 0.000155203 iteration 20 energy 0 : -13667.1
 E-Slope 0.00013601 iteration 21 energy 0 : -13665.1
 E-Slope 7.52956e-05 iteration 22 energy 0 : -13656.1
 Converged due to oscillation in optimization  metric 0 bad 9  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -65598.3
 iteration 2 energy 0 : -66814.3
 iteration 3 energy 0 : -67841.9
 iteration 4 energy 0 : -68705.1
 iteration 5 energy 0 : -69341.9
 iteration 6 energy 0 : -69834.2
 iteration 7 energy 0 : -70089.5
 iteration 8 energy 0 : -70408.9
 iteration 9 energy 0 : -70620.9
 iteration 10 energy 0 : -70793.6
 iteration 11 energy 0 : -70990.2
 iteration 12 energy 0 : -71107
 E-Slope 0.00295939 iteration 13 energy 0 : -71250.1
 E-Slope 0.00231983 iteration 14 energy 0 : -71355
 E-Slope 0.00184784 iteration 15 energy 0 : -71468.1
 E-Slope 0.00152018 iteration 16 energy 0 : -71561.3
 E-Slope 0.00129399 iteration 17 energy 0 : -71655.1
 E-Slope 0.00113645 iteration 18 energy 0 : -71721.4
 E-Slope 0.000988662 iteration 19 energy 0 : -71781.5
 E-Slope 0.000887409 iteration 20 energy 0 : -71871
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1712_11162015_Aug1_Ref_vimp2_2597_10182016_Test_NewCases/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1712_11162015_Aug1_Ref_vimp2_2597_10182016_Test_NewCases/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1712_11162015_Aug1_Ref_vimp2_2597_10182016_Test_NewCases/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1712_11162015_Aug1_Ref_vimp2_2597_10182016_Test_NewCases/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1712_11162015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1632_10232015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1712_11162015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1632_10232015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547777626
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [12.851, -12.5517, 33.3678]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 1.7861831261294938, 12.999710236455849, -11.542859840376934]
level 0, iter 2115, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.004613610644218691, -0.05507020627542341, -0.026311721153457288, 0.9981250824959508, 0.9698142770288201, 0.9735796944675777, 0.8987474110849041, -0.008144177026661622, 0.001191156053849109, -0.015736190323272507, -1.3055676840578956, 12.93876857095048, -9.201491614604823]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 52, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.002936391226900023, -0.055593854112757926, -0.029064783790984115, 0.9980260213715048, 0.9705854785333994, 0.9763484251574044, 0.9006499508731219, -0.011023997246158346, 0.008491194391281933, -0.022366951446480543, -1.2635078011271295, 12.66465625070859, -9.188477032038902]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 277, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.009239553130464137, -0.05145020643054314, -0.0275861673207482, 0.9982517269149879, 0.9506283944822184, 0.9759504793831171, 0.8948495849448379, -0.010900230230200215, 0.005330749110815267, -0.02403517727324357, -1.006414212610379, 12.703495210525084, -9.186281379809468]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 664, size: fix[36, 39, 32]-mov[35, 36, 32], affine para: [-0.004203054079260038, -0.0562928262344885, -0.03203967927792943, 0.9978912320502209, 0.9733495576769896, 0.9958924702552918, 0.9149125237050619, -0.02725647208851755, 0.015327094062780473, -0.01455459088982669, -1.2355137591638634, 12.985887704813052, -9.263380696019492]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 323, size: fix[71, 77, 33]-mov[70, 72, 34], affine para: [-0.005699069817540767, -0.054783506604505865, -0.04337458684702813, 0.9975394394324358, 0.9925907186418097, 1.0321784076007334, 0.9494905154381733, -0.028190932034503104, 0.004052920876820244, -0.007576244832379497, -1.6319701727012639, 13.080670908223308, -9.161820829244352]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 1419, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.014893394282341677, 0.03090120928032318, 0.049916609786560984, 0.9981641318636832, 0.9904379340297935, 0.9576909718037137, 0.9852845273181157, 0.02354666688853693, 0.0591339942093071, 0.010878167315864468, 3.8391976267106207, -12.127226790995106, 7.443306498653264]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 999, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.024860786434950665, 0.01611466767151683, 0.058579763784277886, 0.9978430087236423, 0.9714161695720038, 0.9182096331712762, 0.9037110600121236, 0.04269737470580133, 0.11806339284210136, 0.011047687456803878, 4.258737042552049, -11.84301177343894, 5.950644064001645]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 257, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.03820475457399785, 0.004375171231694959, 0.06303969208825537, 0.9972698991878036, 0.9763706301343441, 0.9032793444630054, 0.9026108520727048, 0.04912537600321515, 0.12641141094440211, 0.011702894311093368, 4.036252769315376, -12.033899485898319, 5.454950600763509]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 194, size: fix[35, 36, 32]-mov[36, 39, 32], affine para: [0.04151723122869004, -0.0010324410689156614, 0.06306513397783994, 0.997144945558518, 0.9917570744367086, 0.9051718361479869, 0.9027041726667754, 0.05045306340775056, 0.1204631714156647, 0.01134478326541896, 3.546763023610428, -12.207350458326884, 5.338119443931388]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 125, size: fix[70, 72, 34]-mov[71, 77, 33], affine para: [0.032515641551360115, 0.005325252508474558, 0.058318392314376855, 0.9977541480034502, 0.9976022650523605, 0.9027371204753202, 0.898011958328167, 0.03927995667752259, 0.11058980096230418, 0.00301274586955981, 3.589985727621476, -12.048250991272285, 5.449918615444748]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.376985 v2 -0.379113
 last params [-0.005699069817540767, -0.054783506604505865, -0.04337458684702813, 0.9975394394324358, 0.9925907186418097, 1.0321784076007334, 0.9494905154381733, -0.028190932034503104, 0.004052920876820244, -0.007576244832379497, -1.6319701727012639, 13.080670908223308, -9.161820829244352]
 my params [0.032515641551360115, 0.005325252508474558, 0.058318392314376855, 0.9977541480034502, 0.9976022650523605, 0.9027371204753202, 0.898011958328167, 0.03927995667752259, 0.11058980096230418, 0.00301274586955981, 3.589985727621476, -12.048250991272285, 5.449918615444748]
A=0.998803 0.0817832 -0.132452 
-0.128578 1.09808 0.0692165 
0.0160567 -0.0715626 1.11115 

rotation R0.99169 0.128429 -0.00759677 
-0.127662 0.989646 0.0655942 
0.0159423 -0.0640793 0.997817 

upper R1.00717 -0.0602208 -0.122473 
0 1.1018 -0.0197127 
0 0 1.11427 

s=0.250654 u=-0.0325032 v=-0.00590017 w-0.0641904 r=0.997391
m_Rotation from vnl-0.0325032 -0.00590017 -0.0641904 0.997391
 new params [-0.032503189821730866, -0.005900171349238881, -0.06419042972903295, 0.9973907556021683, 1.0071731190132773, 1.101800317871824, 1.1142743490909646, -0.059791928300754096, -0.12160048844593244, -0.017891351070394718, -1.8784939290119533, 13.314318432390639, -6.97554186690158]
outputput affine center: [12.851, -12.5517, 33.3678]
output affine para: [-0.032503189821730866, -0.005900171349238881, -0.06419042972903295, 0.9973907556021683, 1.0071731190132773, 1.101800317871824, 1.1142743490909646, -0.059791928300754096, -0.12160048844593244, -0.017891351070394718, -1.8784939290119533, 13.314318432390639, -6.97554186690158]
initial measure value (MMI): rval = -0.134996
final measure value (MMI): rval = -0.388178
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -4936.92
 iteration 2 energy 0 : -5129.21
 iteration 3 energy 0 : -5271.94
 iteration 4 energy 0 : -5388.68
 iteration 5 energy 0 : -5468.4
 iteration 6 energy 0 : -5526.51
 iteration 7 energy 0 : -5576.24
 iteration 8 energy 0 : -5620.12
 iteration 9 energy 0 : -5659.82
 iteration 10 energy 0 : -5698.55
 iteration 11 energy 0 : -5740.13
 iteration 12 energy 0 : -5781.01
 E-Slope 0.00581174 iteration 13 energy 0 : -5823.56
 E-Slope 0.00498433 iteration 14 energy 0 : -5862.34
 E-Slope 0.00436611 iteration 15 energy 0 : -5870.91
 E-Slope 0.00386373 iteration 16 energy 0 : -5868.43
 E-Slope 0.00342505 iteration 17 energy 0 : -5880.11
 E-Slope 0.00295717 iteration 18 energy 0 : -5879.94
 E-Slope 0.00249653 iteration 19 energy 0 : -5890.12
 E-Slope 0.00202791 iteration 20 energy 0 : -5892.96
 E-Slope 0.00159087 iteration 21 energy 0 : -5902.03
 E-Slope 0.00119369 iteration 22 energy 0 : -5906.22
 E-Slope 0.000881299 iteration 23 energy 0 : -5913.43
 E-Slope 0.000665605 iteration 24 energy 0 : -5919.64
 E-Slope 0.000566252 iteration 25 energy 0 : -5925.89
 E-Slope 0.000589587 iteration 26 energy 0 : -5934.95
 E-Slope 0.000617303 iteration 27 energy 0 : -5939.6
 E-Slope 0.000634454 iteration 28 energy 0 : -5951.77
 E-Slope 0.000660211 iteration 29 energy 0 : -5955.6
 E-Slope 0.000688188 iteration 30 energy 0 : -5970.06
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -9117.13
 iteration 2 energy 0 : -9188.04
 iteration 3 energy 0 : -9262.63
 iteration 4 energy 0 : -9342.59
 iteration 5 energy 0 : -9423.42
 iteration 6 energy 0 : -9504.84
 iteration 7 energy 0 : -9568.21
 iteration 8 energy 0 : -9622.28
 iteration 9 energy 0 : -9658.75
 iteration 10 energy 0 : -9650.82
 iteration 11 energy 0 : -9682.09
 iteration 12 energy 0 : -9671.12
 E-Slope 0.00280485 iteration 13 energy 0 : -9693.52
 E-Slope 0.00223643 iteration 14 energy 0 : -9684.17
 E-Slope 0.0017222 iteration 15 energy 0 : -9706.96
 E-Slope 0.00124268 iteration 16 energy 0 : -9699.74
 E-Slope 0.000884451 iteration 17 energy 0 : -9718.28
 E-Slope 0.000618063 iteration 18 energy 0 : -9711.53
 E-Slope 0.00046955 iteration 19 energy 0 : -9726.65
 E-Slope 0.000386931 iteration 20 energy 0 : -9721.08
 E-Slope 0.000378445 iteration 21 energy 0 : -9732.94
 E-Slope 0.000312187 iteration 22 energy 0 : -9726.35
 E-Slope 0.000312373 iteration 23 energy 0 : -9737.09
 E-Slope 0.000258826 iteration 24 energy 0 : -9732.98
 E-Slope 0.000251748 iteration 25 energy 0 : -9741.3
 E-Slope 0.000200048 iteration 26 energy 0 : -9737.95
 E-Slope 0.000198156 iteration 27 energy 0 : -9745.67
 E-Slope 0.000161253 iteration 28 energy 0 : -9742.94
 E-Slope 0.000164576 iteration 29 energy 0 : -9749.01
 E-Slope 0.000138812 iteration 30 energy 0 : -9747.51
 E-Slope 0.000145271 iteration 31 energy 0 : -9752.46
 E-Slope 0.000127248 iteration 32 energy 0 : -9751.26
 E-Slope 0.000134006 iteration 33 energy 0 : -9755.42
 E-Slope 0.000116289 iteration 34 energy 0 : -9754.79
 E-Slope 0.000119828 iteration 35 energy 0 : -9758.11
 E-Slope 0.000106223 iteration 36 energy 0 : -9758.04
 E-Slope 0.0001081 iteration 37 energy 0 : -9760.63
 E-Slope 9.64627e-05 iteration 38 energy 0 : -9761.16
 Converged due to oscillation in optimization  metric 0 bad 14  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -48182.2
 iteration 2 energy 0 : -49162
 iteration 3 energy 0 : -50017.5
 iteration 4 energy 0 : -50746.1
 iteration 5 energy 0 : -51347.8
 iteration 6 energy 0 : -51890.9
 iteration 7 energy 0 : -52350.6
 iteration 8 energy 0 : -52783.7
 iteration 9 energy 0 : -53210.8
 iteration 10 energy 0 : -53586.8
 iteration 11 energy 0 : -53914.6
 iteration 12 energy 0 : -54142
 E-Slope 0.00508999 iteration 13 energy 0 : -54437
 E-Slope 0.00445075 iteration 14 energy 0 : -54557.3
 E-Slope 0.00396227 iteration 15 energy 0 : -54886.1
 E-Slope 0.00354364 iteration 16 energy 0 : -55057.2
 E-Slope 0.00318289 iteration 17 energy 0 : -55254
 E-Slope 0.00284111 iteration 18 energy 0 : -55341.5
 E-Slope 0.00256514 iteration 19 energy 0 : -55581.9
 E-Slope 0.00228569 iteration 20 energy 0 : -55619
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1712_11162015_Aug2_Ref_vimp2_1632_10232015/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1712_11162015_Aug2_Ref_vimp2_1632_10232015/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1712_11162015_Aug2_Ref_vimp2_1632_10232015/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1712_11162015_Aug2_Ref_vimp2_1632_10232015/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1724_11202015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1751_12022015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1724_11202015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1751_12022015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547777735
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [10.4268, -9.43944, 13.4061]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -1.9141558714933264, -4.422042822139511, -8.358922179469701]
level 0, iter 671, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.031349819477666886, 0.012205055864297425, 0.0411314773761833, 0.9985872155194655, 1.1233823968262677, 1.051255796607993, 1.0588591939604102, 0.047049348087060586, -0.005376867226507847, 0.020549082990976686, 0.12213300384661813, -5.691778455640793, -9.246515718266787]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 142, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.026417810559320958, 0.012522313625997351, 0.044888612658430596, 0.998564120825651, 1.126110063753152, 1.0458439046837842, 1.0655447570392116, 0.06038270028400245, -0.006949032760609282, 0.026252625778174898, 0.07596392044243402, -5.785336904048101, -9.208818676394367]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 153, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.025351271309835256, 0.01257230989479195, 0.04985918361279436, 0.9983553034247628, 1.1327998994016117, 1.0469278992983433, 1.0663697027307673, 0.06043083660854059, -0.004147427130219879, 0.023597630639002116, 0.06910133015197001, -5.799400051544477, -9.148463831139123]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 106, size: fix[37, 41, 32]-mov[39, 46, 33], affine para: [-0.02733322634711694, 0.013379475050435316, 0.04677536411150789, 0.9984417607938221, 1.1351510952152164, 1.0467487682136145, 1.06063814588742, 0.05980578291904975, -0.008908849503799082, 0.027219461311139306, 0.1479960052777015, -5.728142804986613, -9.341211181473847]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 113, size: fix[74, 81, 39]-mov[78, 92, 46], affine para: [-0.031060590522483902, 0.01587986823361732, 0.044775288434751, 0.998387821964422, 1.1375692569195945, 1.0435910790434233, 1.053212181195947, 0.05699274198004218, -0.005652634100666239, 0.031635690917129665, 0.02102584647329591, -5.718208807245942, -9.35426689389456]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 619, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.03167138855482442, -0.012578638314262678, -0.04137337488828596, 0.9985624391371436, 0.8764660109329796, 0.9333283170719618, 0.9485690106711664, -0.056332441013456636, 0.011062281452338799, -0.042408117480121056, -0.22405448454163676, 4.115003645775328, 9.189556587834618]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 255, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.028345549343938906, -0.01262986239937381, -0.045635327987648716, 0.9984760554202705, 0.8792236345926562, 0.9416905667458447, 0.9510569111104951, -0.05761556479851773, 0.0164952342027082, -0.044329214236694774, -0.20578731886119608, 4.154277933016849, 9.149635742136097]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 211, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.03355323514259599, -0.013656565367100906, -0.039775261077125416, 0.9985517549131273, 0.8783536612170368, 0.9338673132115655, 0.9550156810896782, -0.05978057594707015, 0.013475872647789879, -0.04964251775960727, -0.1645875573801383, 4.102024348285262, 9.317226705568507]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 91, size: fix[39, 46, 33]-mov[37, 41, 32], affine para: [0.03208051159487062, -0.01099618425279341, -0.039523072289450255, 0.9986430050145513, 0.8774731841678238, 0.9320670749181658, 0.9466213826079098, -0.06049602485795959, 0.013558876039701694, -0.049140151701775346, -0.21390848502479543, 4.120645331406276, 9.263774356613693]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 179, size: fix[78, 92, 46]-mov[74, 81, 39], affine para: [0.031625141852951455, -0.013779840602103289, -0.04125196207489574, 0.9985530742132502, 0.8824530678787202, 0.9393087452398755, 0.9524749755723926, -0.05713184452924489, 0.012407621084988957, -0.047505533039782666, -0.27797067362674177, 4.288839458505652, 9.251667108665936]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.434959 v2 -0.424907
final [-0.031060590522483902, 0.01587986823361732, 0.044775288434751, 0.998387821964422, 1.1375692569195945, 1.0435910790434233, 1.053212181195947, 0.05699274198004218, -0.005652634100666239, 0.031635690917129665, 0.02102584647329591, -5.718208807245942, -9.35426689389456]
outputput affine center: [10.4268, -9.43944, 13.4061]
output affine para: [-0.031060590522483902, 0.01587986823361732, 0.044775288434751, 0.998387821964422, 1.1375692569195945, 1.0435910790434233, 1.053212181195947, 0.05699274198004218, -0.005652634100666239, 0.031635690917129665, 0.02102584647329591, -5.718208807245942, -9.35426689389456]
initial measure value (MMI): rval = -0.247538
final measure value (MMI): rval = -0.45716
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -5730
 iteration 2 energy 0 : -6246.04
 iteration 3 energy 0 : -6692.23
 iteration 4 energy 0 : -7065.69
 iteration 5 energy 0 : -7315.48
 iteration 6 energy 0 : -7501.76
 iteration 7 energy 0 : -7645.66
 iteration 8 energy 0 : -7773.22
 iteration 9 energy 0 : -7897.65
 iteration 10 energy 0 : -8019.24
 iteration 11 energy 0 : -8125.51
 iteration 12 energy 0 : -8216.69
 E-Slope 0.0127043 iteration 13 energy 0 : -8283.37
 E-Slope 0.0101577 iteration 14 energy 0 : -8305.9
 E-Slope 0.00829774 iteration 15 energy 0 : -8351.9
 E-Slope 0.00685424 iteration 16 energy 0 : -8339.27
 E-Slope 0.00565295 iteration 17 energy 0 : -8357.71
 E-Slope 0.00451529 iteration 18 energy 0 : -8342.35
 E-Slope 0.0035675 iteration 19 energy 0 : -8394.68
 E-Slope 0.00265232 iteration 20 energy 0 : -8376.96
 E-Slope 0.00193668 iteration 21 energy 0 : -8406.92
 E-Slope 0.0013513 iteration 22 energy 0 : -8393.54
 E-Slope 0.00105535 iteration 23 energy 0 : -8446.5
 E-Slope 0.000852004 iteration 24 energy 0 : -8426.32
 E-Slope 0.000759557 iteration 25 energy 0 : -8430.47
 E-Slope 0.000637293 iteration 26 energy 0 : -8417.95
 E-Slope 0.000676222 iteration 27 energy 0 : -8456.89
 E-Slope 0.000595666 iteration 28 energy 0 : -8440.16
 E-Slope 0.000541516 iteration 29 energy 0 : -8449.29
 E-Slope 0.000385709 iteration 30 energy 0 : -8438.5
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -13875.2
 iteration 2 energy 0 : -14047.4
 iteration 3 energy 0 : -14198.2
 iteration 4 energy 0 : -14354.8
 iteration 5 energy 0 : -14509.2
 iteration 6 energy 0 : -14621.3
 iteration 7 energy 0 : -14685
 iteration 8 energy 0 : -14679.1
 iteration 9 energy 0 : -14668.2
 iteration 10 energy 0 : -14723.1
 iteration 11 energy 0 : -14700.6
 iteration 12 energy 0 : -14763.8
 E-Slope 0.00221223 iteration 13 energy 0 : -14740
 E-Slope 0.00159226 iteration 14 energy 0 : -14760.6
 E-Slope 0.00104969 iteration 15 energy 0 : -14744.6
 E-Slope 0.00066524 iteration 16 energy 0 : -14758.1
 E-Slope 0.000432223 iteration 17 energy 0 : -14751.8
 E-Slope 0.000332482 iteration 18 energy 0 : -14761.4
 E-Slope 0.00029052 iteration 19 energy 0 : -14756.5
 E-Slope 0.000237256 iteration 20 energy 0 : -14767.7
 E-Slope 0.000137128 iteration 21 energy 0 : -14757.1
 E-Slope 0.000124045 iteration 22 energy 0 : -14772.4
 E-Slope 5.45233e-05 iteration 23 energy 0 : -14761.7
 Converged due to oscillation in optimization  metric 0 bad 9  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -88231.1
 iteration 2 energy 0 : -89838.4
 iteration 3 energy 0 : -91527.2
 iteration 4 energy 0 : -92740.1
 iteration 5 energy 0 : -93707.4
 iteration 6 energy 0 : -94490.4
 iteration 7 energy 0 : -95107
 iteration 8 energy 0 : -95575.8
 iteration 9 energy 0 : -95992.2
 iteration 10 energy 0 : -96475.6
 iteration 11 energy 0 : -96974.2
 iteration 12 energy 0 : -97455.9
 E-Slope 0.00399006 iteration 13 energy 0 : -97895.7
 E-Slope 0.00341991 iteration 14 energy 0 : -98293.2
 E-Slope 0.00304004 iteration 15 energy 0 : -98613.1
 E-Slope 0.00276911 iteration 16 energy 0 : -98920.6
 E-Slope 0.00256801 iteration 17 energy 0 : -99211
 E-Slope 0.00240744 iteration 18 energy 0 : -99483.9
 E-Slope 0.00225235 iteration 19 energy 0 : -99699.1
 E-Slope 0.00208033 iteration 20 energy 0 : -99901
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1724_11202015_Aug1_Ref_vimp2_1751_12022015/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1724_11202015_Aug1_Ref_vimp2_1751_12022015/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1724_11202015_Aug1_Ref_vimp2_1751_12022015/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1724_11202015_Aug1_Ref_vimp2_1751_12022015/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1724_11202015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2476_08242016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1724_11202015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2476_08242016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547777819
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [10.4268, -9.43944, 13.4061]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0.13290897181619776, 9.918392313908015, -17.323476126918163]
level 0, iter 974, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.029402299028521938, 0.04111965144061434, 0.07259514486813147, 0.9960796273485442, 0.999750386388419, 1.0413212164885803, 0.9362744094676856, 0.04531134273388064, 0.0011913957270247863, 0.06801308393870761, -0.5954082135736548, 7.682207130752577, -17.626069114859042]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 377, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.029094961183391332, 0.04356101151692698, 0.07672071623010648, 0.9956755762850158, 1.003457996063413, 1.0533187565780984, 0.9337727908421299, 0.06005258610607293, -0.0001624264805888836, 0.0768481614224796, -0.6023041783073191, 7.662171562891397, -17.638632290816115]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 142, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.0256428233139113, 0.04218708949160849, 0.07615604875601098, 0.9958729594333761, 0.9944469991822622, 1.0539217919564352, 0.9339232844842983, 0.06869691118677385, -0.00011385254396817586, 0.07583086911935061, -0.5703072803927529, 7.582889067088601, -17.56401615410268]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 56, size: fix[37, 41, 32]-mov[38, 41, 32], affine para: [-0.024773202111648563, 0.04076607319858694, 0.07985113819472482, 0.995664708354228, 0.9970749168098441, 1.0556730918532222, 0.9352972554055254, 0.0732239874003564, 0.000790193192175075, 0.07899253407177906, -0.6432586874077404, 7.605280998251876, -17.576361248720733]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 90, size: fix[74, 81, 39]-mov[76, 82, 43], affine para: [-0.022697471265605517, 0.04239407834500514, 0.08244508502786056, 0.995434766759818, 1.0026923516740085, 1.0553101891467591, 0.9355632192819209, 0.07605520487850267, 0.002262174946702425, 0.07968527053702806, -0.5685306023584905, 7.662945603817134, -17.60460660190106]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 1872, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.033355875253356475, -0.04228364347878913, -0.08303841800028593, 0.9950899960386753, 1.0012422282631095, 0.9078551443059207, 1.0738655407529658, -0.06667808273936734, 0.020917527063709744, -0.06889398853088531, -1.52202536538868, -9.35729039087294, 18.3478105186044]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 50, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.03216252702227672, -0.04316468148626265, -0.08181065734248899, 0.9951931463152872, 0.9959832865310086, 0.9045944406618027, 1.0712929256451098, -0.06919877930989407, 0.022143404252665037, -0.06922694907246464, -1.4845177697648304, -9.233491051349645, 18.421812403779075]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 263, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.03127694856205209, -0.04311879360980628, -0.08517952847923367, 0.9949406867016429, 1.0047033760913686, 0.9073010682348179, 1.072338256116596, -0.0748175898917557, 0.02333949952070366, -0.0752652111668215, -1.470115027322053, -9.328506566920312, 18.451047578155716]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 93, size: fix[38, 41, 32]-mov[37, 41, 32], affine para: [0.03495595213835295, -0.044433661892390224, -0.08706693699619496, 0.9945969432805606, 1.0061877394257799, 0.9104952715776569, 1.0738494711783728, -0.07642573492120264, 0.02437120301275963, -0.07522880394855197, -1.594797773435282, -9.435716065863456, 18.320185166238552]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 78, size: fix[76, 82, 43]-mov[74, 81, 39], affine para: [0.032289763078413594, -0.04541873445735369, -0.09003841414186538, 0.994377993390567, 0.9976546766187306, 0.9047895807858601, 1.0694995341710212, -0.07825459616562865, 0.028061362272062507, -0.06763943399811381, -1.580138802502628, -9.333217731186995, 18.246402410646525]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.55551 v2 -0.562421
 last params [-0.022697471265605517, 0.04239407834500514, 0.08244508502786056, 0.995434766759818, 1.0026923516740085, 1.0553101891467591, 0.9355632192819209, 0.07605520487850267, 0.002262174946702425, 0.07968527053702806, -0.5685306023584905, 7.662945603817134, -17.60460660190106]
 my params [0.032289763078413594, -0.04541873445735369, -0.09003841414186538, 0.994377993390567, 0.9976546766187306, 0.9047895807858601, 1.0694995341710212, -0.07825459616562865, 0.028061362272062507, -0.06763943399811381, -1.580138802502628, -9.333217731186995, 18.246402410646525]
A=0.999244 -0.0963258 0.0698157 
0.188585 1.08146 0.142865 
-0.0898938 -0.0523961 0.929209 

rotation R0.978836 -0.188738 0.0791111 
0.184734 0.981233 0.0552697 
-0.0880579 -0.0394855 0.995332 

upper R1.02085 0.110109 0.0129058 
0 1.08141 0.0903164 
0 0 0.938292 

s=0.251405 u=-0.023822 v=0.0420272 w0.0938929 r=0.99441
m_Rotation from vnl-0.023822 0.0420272 0.0938929 0.99441
 new params [-0.023821957172322456, 0.04202718841911171, 0.09389286144944406, 0.9944095536341654, 1.0208492312728727, 1.0814144121432472, 0.9382915550073001, 0.10786001682948892, 0.012642233055950762, 0.08351689276188669, -0.593972526551197, 7.78473252461681, -17.58579751472624]
outputput affine center: [10.4268, -9.43944, 13.4061]
output affine para: [-0.023821957172322456, 0.04202718841911171, 0.09389286144944406, 0.9944095536341654, 1.0208492312728727, 1.0814144121432472, 0.9382915550073001, 0.10786001682948892, 0.012642233055950762, 0.08351689276188669, -0.593972526551197, 7.78473252461681, -17.58579751472624]
initial measure value (MMI): rval = -0.257739
final measure value (MMI): rval = -0.548025
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -7256.44
 iteration 2 energy 0 : -7720.09
 iteration 3 energy 0 : -8038.5
 iteration 4 energy 0 : -8259.61
 iteration 5 energy 0 : -8435.98
 iteration 6 energy 0 : -8531.76
 iteration 7 energy 0 : -8583.5
 iteration 8 energy 0 : -8593.67
 iteration 9 energy 0 : -8611.97
 iteration 10 energy 0 : -8620.44
 iteration 11 energy 0 : -8634.64
 iteration 12 energy 0 : -8640.71
 E-Slope 0.00450267 iteration 13 energy 0 : -8652.29
 E-Slope 0.00282385 iteration 14 energy 0 : -8655.17
 E-Slope 0.0017378 iteration 15 energy 0 : -8664.68
 E-Slope 0.00105213 iteration 16 energy 0 : -8666.23
 E-Slope 0.000722535 iteration 17 energy 0 : -8675.21
 E-Slope 0.000565156 iteration 18 energy 0 : -8676.18
 E-Slope 0.00050839 iteration 19 energy 0 : -8684.62
 E-Slope 0.000438325 iteration 20 energy 0 : -8684.16
 E-Slope 0.000398628 iteration 21 energy 0 : -8691.98
 E-Slope 0.00034786 iteration 22 energy 0 : -8690.89
 E-Slope 0.000322632 iteration 23 energy 0 : -8698.07
 E-Slope 0.000285268 iteration 24 energy 0 : -8696.65
 E-Slope 0.000270329 iteration 25 energy 0 : -8703.19
 E-Slope 0.000237346 iteration 26 energy 0 : -8700.75
 E-Slope 0.00022433 iteration 27 energy 0 : -8706.82
 E-Slope 0.000192516 iteration 28 energy 0 : -8704.02
 E-Slope 0.000181727 iteration 29 energy 0 : -8709.77
 E-Slope 0.000152484 iteration 30 energy 0 : -8706.42
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -14387.3
 iteration 2 energy 0 : -14600.7
 iteration 3 energy 0 : -14729.6
 iteration 4 energy 0 : -14816
 iteration 5 energy 0 : -14862.4
 iteration 6 energy 0 : -14900.6
 iteration 7 energy 0 : -14921.1
 iteration 8 energy 0 : -14954.5
 iteration 9 energy 0 : -14960.9
 iteration 10 energy 0 : -14984.4
 iteration 11 energy 0 : -14987.1
 iteration 12 energy 0 : -15001.9
 E-Slope 0.00118482 iteration 13 energy 0 : -15006.1
 E-Slope 0.000858925 iteration 14 energy 0 : -15015.1
 E-Slope 0.000653014 iteration 15 energy 0 : -15020.9
 E-Slope 0.000524916 iteration 16 energy 0 : -15026.9
 E-Slope 0.00043086 iteration 17 energy 0 : -15033.4
 E-Slope 0.000364564 iteration 18 energy 0 : -15038.5
 E-Slope 0.000307925 iteration 19 energy 0 : -15044.6
 E-Slope 0.000279471 iteration 20 energy 0 : -15048.3
 E-Slope 0.000247099 iteration 21 energy 0 : -15053.7
 E-Slope 0.000233531 iteration 22 energy 0 : -15057
 E-Slope 0.000212885 iteration 23 energy 0 : -15061.3
 E-Slope 0.000201128 iteration 24 energy 0 : -15064.2
 E-Slope 0.000184953 iteration 25 energy 0 : -15067.1
 E-Slope 0.00017222 iteration 26 energy 0 : -15070.2
 E-Slope 0.000158027 iteration 27 energy 0 : -15072.2
 E-Slope 0.000144847 iteration 28 energy 0 : -15075.2
 E-Slope 0.00013186 iteration 29 energy 0 : -15076.3
 E-Slope 0.000120878 iteration 30 energy 0 : -15079.6
 E-Slope 0.0001105 iteration 31 energy 0 : -15080.1
 E-Slope 0.000102505 iteration 32 energy 0 : -15084
 E-Slope 9.46075e-05 iteration 33 energy 0 : -15084
 Converged due to oscillation in optimization  metric 0 bad 1  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -93159.9
 iteration 2 energy 0 : -94853.7
 iteration 3 energy 0 : -96400.9
 iteration 4 energy 0 : -97944.1
 iteration 5 energy 0 : -99129
 iteration 6 energy 0 : -100024
 iteration 7 energy 0 : -100735
 iteration 8 energy 0 : -101345
 iteration 9 energy 0 : -101878
 iteration 10 energy 0 : -102372
 iteration 11 energy 0 : -102864
 iteration 12 energy 0 : -103289
 E-Slope 0.00428257 iteration 13 energy 0 : -103663
 E-Slope 0.00362065 iteration 14 energy 0 : -103990
 E-Slope 0.00307639 iteration 15 energy 0 : -104269
 E-Slope 0.00267833 iteration 16 energy 0 : -104529
 E-Slope 0.00237493 iteration 17 energy 0 : -104763
 E-Slope 0.00212671 iteration 18 energy 0 : -104987
 E-Slope 0.00190885 iteration 19 energy 0 : -105186
 E-Slope 0.00171471 iteration 20 energy 0 : -105376
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1724_11202015_Aug2_Ref_vimp2_2476_08242016/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1724_11202015_Aug2_Ref_vimp2_2476_08242016/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1724_11202015_Aug2_Ref_vimp2_2476_08242016/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1724_11202015_Aug2_Ref_vimp2_2476_08242016/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1739_11242015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2972_03102017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1739_11242015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2972_03102017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547777919
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [10.3923, -12.8837, 14.6322]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 3.2906988244027957, 23.31581190943145, -12.969882239550103]
level 0, iter 1418, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.02826259549791602, 0.002064532707035218, 0.0040987899062131655, 0.9995899976098839, 0.9870557908790875, 0.9612395830722948, 0.8352933294094252, -0.0029048503099079123, 0.03930587804137371, -0.02321176605104838, 2.769197861998654, 24.574687119486033, -12.466137372903368]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 147, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.02515741170704613, 0.00414248543488327, 0.010532813082620511, 0.9996194297327311, 0.9900325867210499, 0.9665372046213797, 0.8326384550071447, 0.005191349458196942, 0.04247366891041442, -0.024520460790614467, 2.720043277439547, 24.4118991295874, -12.395978407343602]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 77, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.030881144354823642, 0.0016025584347142223, 0.012200170717123477, 0.9994473185537459, 0.9951606541712543, 0.9727997499219684, 0.8304707035412493, 0.008258309852896877, 0.04361983462440499, -0.029194711874077107, 2.653759657031976, 24.438641538232247, -12.452984115693532]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 420, size: fix[40, 46, 33]-mov[39, 39, 32], affine para: [0.029674525330417388, 0.004955257822522666, 0.0178831990117685, 0.9993873419047453, 0.9824717282572397, 0.9707044589491215, 0.8226354849192936, 0.0040877474566646385, 0.04484580274077759, -0.037384057992317, 2.7195979276641187, 24.27278891283352, -12.251692795123303]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 105, size: fix[80, 91, 46]-mov[77, 77, 39], affine para: [0.02759445774108045, 0.009997927509969643, 0.016963990386534275, 0.9994252400143028, 0.9785248069624662, 0.9754723513210243, 0.8375289341858908, 0.0067822758847639894, 0.04137366329925952, -0.03545623827651611, 2.5667301057735337, 24.52313692067908, -11.999389559408678]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 364, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.03961175409405813, -0.028944702498970364, -0.01720739806762693, 0.9986475947933686, 0.9977678302082322, 1.009410194617624, 1.1016855193453419, 0.009071852232556394, 0.004335713502555679, -0.005654810483570561, -4.676480448865967, -23.564984542769757, 14.144025921689156]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 194, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.040734862809112746, -0.034575450075709765, -0.017302972703765962, 0.9984216625953173, 0.9826519304450472, 1.0006514034497942, 1.0841265128795134, 0.008575094059361524, 0.021084217615734237, -0.0021987712937401216, -4.427652085006512, -23.23784158385404, 13.698124286433478]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 1440, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.03476931242701226, -0.038168644645598174, -0.004471760734972294, 0.9986562235500263, 0.9819754080687443, 0.9954610678269884, 1.075108730578975, 0.028512301406141537, 0.026780523479339156, -0.030490692334670815, -4.3380039413342475, -24.0168081319488, 13.47431592290539]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 205, size: fix[39, 39, 32]-mov[40, 46, 33], affine para: [-0.028884392867158697, -0.03173388559409846, -0.007236570337571122, 0.9990526935069769, 1.0071731860149864, 0.9948456695789284, 1.0818971791500671, 0.021619966841729964, 0.0024642250939801756, -0.020032695143711626, -4.701499375597632, -24.183139651341676, 13.527779256014842]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 2024, size: fix[77, 77, 39]-mov[80, 91, 46], affine para: [-0.0380285648141914, -0.02381448206392064, -0.013625308389337903, 0.9988999197484678, 1.0087571465093226, 0.9797641769491201, 1.1048081481577658, -0.012799041186153002, -0.023546821785086415, -0.012088310698199038, -4.429150017104813, -23.26671876550874, 14.281160906739235]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.348453 v2 -0.331987
final [0.02759445774108045, 0.009997927509969643, 0.016963990386534275, 0.9994252400143028, 0.9785248069624662, 0.9754723513210243, 0.8375289341858908, 0.0067822758847639894, 0.04137366329925952, -0.03545623827651611, 2.5667301057735337, 24.52313692067908, -11.999389559408678]
outputput affine center: [10.3923, -12.8837, 14.6322]
output affine para: [0.02759445774108045, 0.009997927509969643, 0.016963990386534275, 0.9994252400143028, 0.9785248069624662, 0.9754723513210243, 0.8375289341858908, 0.0067822758847639894, 0.04137366329925952, -0.03545623827651611, 2.5667301057735337, 24.52313692067908, -11.999389559408678]
initial measure value (MMI): rval = -0.253323
final measure value (MMI): rval = -0.38356
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -4292.83
 iteration 2 energy 0 : -4619.93
 iteration 3 energy 0 : -4865.25
 iteration 4 energy 0 : -5074.61
 iteration 5 energy 0 : -5291.49
 iteration 6 energy 0 : -5459.11
 iteration 7 energy 0 : -5609.8
 iteration 8 energy 0 : -5711.7
 iteration 9 energy 0 : -5791.66
 iteration 10 energy 0 : -5860.28
 iteration 11 energy 0 : -5921.11
 iteration 12 energy 0 : -5976.31
 E-Slope 0.0128296 iteration 13 energy 0 : -6032.87
 E-Slope 0.0105816 iteration 14 energy 0 : -6081.98
 E-Slope 0.00873629 iteration 15 energy 0 : -6126.92
 E-Slope 0.00723036 iteration 16 energy 0 : -6169.5
 E-Slope 0.00614136 iteration 17 energy 0 : -6206.94
 E-Slope 0.00537113 iteration 18 energy 0 : -6252.4
 E-Slope 0.00488222 iteration 19 energy 0 : -6292.66
 E-Slope 0.0044558 iteration 20 energy 0 : -6308.7
 E-Slope 0.0039804 iteration 21 energy 0 : -6304.04
 E-Slope 0.00351355 iteration 22 energy 0 : -6318.96
 E-Slope 0.00301151 iteration 23 energy 0 : -6320.02
 E-Slope 0.00251013 iteration 24 energy 0 : -6328.24
 E-Slope 0.00205375 iteration 25 energy 0 : -6338.81
 E-Slope 0.00161377 iteration 26 energy 0 : -6338.22
 E-Slope 0.00126623 iteration 27 energy 0 : -6356.22
 E-Slope 0.000957109 iteration 28 energy 0 : -6353.1
 E-Slope 0.000764146 iteration 29 energy 0 : -6373.75
 E-Slope 0.000649251 iteration 30 energy 0 : -6371
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -13729.4
 iteration 2 energy 0 : -13988
 iteration 3 energy 0 : -14207.9
 iteration 4 energy 0 : -14412
 iteration 5 energy 0 : -14589.4
 iteration 6 energy 0 : -14725.8
 iteration 7 energy 0 : -14829.2
 iteration 8 energy 0 : -14921.7
 iteration 9 energy 0 : -14996.7
 iteration 10 energy 0 : -15062.2
 iteration 11 energy 0 : -15115.8
 iteration 12 energy 0 : -15177
 E-Slope 0.00412022 iteration 13 energy 0 : -15222.6
 E-Slope 0.00348821 iteration 14 energy 0 : -15292.3
 E-Slope 0.00293538 iteration 15 energy 0 : -15306
 E-Slope 0.00246694 iteration 16 energy 0 : -15312.4
 E-Slope 0.00209394 iteration 17 energy 0 : -15331.5
 E-Slope 0.00177581 iteration 18 energy 0 : -15344.3
 E-Slope 0.00147544 iteration 19 energy 0 : -15346.9
 E-Slope 0.00123344 iteration 20 energy 0 : -15375.9
 E-Slope 0.000996321 iteration 21 energy 0 : -15369.4
 E-Slope 0.000833586 iteration 22 energy 0 : -15412.4
 E-Slope 0.000668444 iteration 23 energy 0 : -15401.8
 E-Slope 0.000599451 iteration 24 energy 0 : -15450
 E-Slope 0.000527851 iteration 25 energy 0 : -15436.7
 E-Slope 0.000578269 iteration 26 energy 0 : -15488.2
 E-Slope 0.000579529 iteration 27 energy 0 : -15468.2
 E-Slope 0.000619739 iteration 28 energy 0 : -15522.2
 E-Slope 0.000609443 iteration 29 energy 0 : -15498
 E-Slope 0.000637271 iteration 30 energy 0 : -15546
 E-Slope 0.000584491 iteration 31 energy 0 : -15516.1
 E-Slope 0.000614442 iteration 32 energy 0 : -15580.9
 E-Slope 0.000548705 iteration 33 energy 0 : -15548.1
 E-Slope 0.000583753 iteration 34 energy 0 : -15611.1
 E-Slope 0.00051944 iteration 35 energy 0 : -15577.8
 E-Slope 0.000568926 iteration 36 energy 0 : -15644
 E-Slope 0.000516817 iteration 37 energy 0 : -15611.1
 E-Slope 0.000580803 iteration 38 energy 0 : -15676
 E-Slope 0.000532709 iteration 39 energy 0 : -15642.3
 E-Slope 0.000585496 iteration 40 energy 0 : -15693.6
 E-Slope 0.000528269 iteration 41 energy 0 : -15665.1
 E-Slope 0.000556633 iteration 42 energy 0 : -15710.4
 E-Slope 0.000477925 iteration 43 energy 0 : -15688.8
 E-Slope 0.000503309 iteration 44 energy 0 : -15729.4
 E-Slope 0.000425614 iteration 45 energy 0 : -15710.5
 E-Slope 0.000448354 iteration 46 energy 0 : -15747.4
 E-Slope 0.00037203 iteration 47 energy 0 : -15729.2
 E-Slope 0.000402018 iteration 48 energy 0 : -15764.8
 E-Slope 0.000343911 iteration 49 energy 0 : -15752.5
 E-Slope 0.000393569 iteration 50 energy 0 : -15789.5
 E-Slope 0.000342228 iteration 51 energy 0 : -15766.8
 E-Slope 0.000385851 iteration 52 energy 0 : -15807.1
 E-Slope 0.000346191 iteration 53 energy 0 : -15792.6
 E-Slope 0.000388958 iteration 54 energy 0 : -15829.9
 E-Slope 0.00034418 iteration 55 energy 0 : -15805.1
 E-Slope 0.000377111 iteration 56 energy 0 : -15842.9
 E-Slope 0.000329509 iteration 57 energy 0 : -15820.1
 E-Slope 0.000350364 iteration 58 energy 0 : -15853.8
 E-Slope 0.00030452 iteration 59 energy 0 : -15839.8
 E-Slope 0.000328712 iteration 60 energy 0 : -15875.3
 E-Slope 0.00027889 iteration 61 energy 0 : -15848.2
 E-Slope 0.000306688 iteration 62 energy 0 : -15886.2
 E-Slope 0.000249051 iteration 63 energy 0 : -15859.4
 E-Slope 0.000267364 iteration 64 energy 0 : -15891.7
 E-Slope 0.000219151 iteration 65 energy 0 : -15869.5
 E-Slope 0.000245288 iteration 66 energy 0 : -15901.8
 E-Slope 0.000194527 iteration 67 energy 0 : -15880.3
 E-Slope 0.000216894 iteration 68 energy 0 : -15909.7
 E-Slope 0.000175603 iteration 69 energy 0 : -15895.2
 E-Slope 0.000205249 iteration 70 energy 0 : -15926.5
 E-Slope 0.000169151 iteration 71 energy 0 : -15900.9
 E-Slope 0.000207528 iteration 72 energy 0 : -15932.2
 E-Slope 0.00017754 iteration 73 energy 0 : -15917.8
 E-Slope 0.000232786 iteration 74 energy 0 : -15956.2
 E-Slope 0.000224009 iteration 75 energy 0 : -15946.5
 E-Slope 0.000258781 iteration 76 energy 0 : -15960
 E-Slope 0.000227019 iteration 77 energy 0 : -15943.8
 E-Slope 0.000273742 iteration 78 energy 0 : -15985.2
 E-Slope 0.000248872 iteration 79 energy 0 : -15966.4
 E-Slope 0.000272885 iteration 80 energy 0 : -15988.9
 E-Slope 0.000229545 iteration 81 energy 0 : -15965.5
 E-Slope 0.000257671 iteration 82 energy 0 : -16001.8
 E-Slope 0.000214793 iteration 83 energy 0 : -15986.2
 E-Slope 0.000225097 iteration 84 energy 0 : -16008.5
 E-Slope 0.000166565 iteration 85 energy 0 : -15981.7
 E-Slope 0.000185512 iteration 86 energy 0 : -16012.9
 E-Slope 0.000145733 iteration 87 energy 0 : -15986.5
 E-Slope 0.000155061 iteration 88 energy 0 : -16019.2
 E-Slope 8.80137e-05 iteration 89 energy 0 : -15984.7
 Converged due to oscillation in optimization  metric 0 bad 35  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -107453
 iteration 2 energy 0 : -109549
 iteration 3 energy 0 : -111819
 iteration 4 energy 0 : -113703
 iteration 5 energy 0 : -115373
 iteration 6 energy 0 : -116948
 iteration 7 energy 0 : -118284
 iteration 8 energy 0 : -119565
 iteration 9 energy 0 : -120598
 iteration 10 energy 0 : -121523
 iteration 11 energy 0 : -122350
 iteration 12 energy 0 : -123085
 E-Slope 0.00613045 iteration 13 energy 0 : -123741
 E-Slope 0.00537465 iteration 14 energy 0 : -124337
 E-Slope 0.00474364 iteration 15 energy 0 : -124933
 E-Slope 0.004197 iteration 16 energy 0 : -125466
 E-Slope 0.00373151 iteration 17 energy 0 : -126003
 E-Slope 0.00335769 iteration 18 energy 0 : -126535
 E-Slope 0.00304764 iteration 19 energy 0 : -127003
 E-Slope 0.00280514 iteration 20 energy 0 : -127428
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1739_11242015_Aug1_Ref_vimp2_2972_03102017_Test_NewCases/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1739_11242015_Aug1_Ref_vimp2_2972_03102017_Test_NewCases/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1739_11242015_Aug1_Ref_vimp2_2972_03102017_Test_NewCases/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1739_11242015_Aug1_Ref_vimp2_2972_03102017_Test_NewCases/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1739_11242015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2462_08192016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1739_11242015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2462_08192016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547778093
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [10.3923, -12.8837, 14.6322]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 3.9899498067822368, 12.956662543140997, -18.767274578281764]
level 0, iter 927, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.035357846880987635, 0.024288010006390498, 0.05054492313029977, 0.997800143305072, 1.0688575103493048, 1.011897301053584, 0.9752729428797324, 0.012164764547118533, -0.01109399442539154, 0.04611478929753733, 2.514897619954262, 16.680888942557424, -17.123563685451476]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 92, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.03659091807170757, 0.026165068569929523, 0.05115066685577153, 0.9976773542491633, 1.0676769506482775, 1.0086249758342878, 0.9763608932983202, 0.014017088415536314, -0.012181371783202123, 0.052002966642321666, 2.504222084445544, 16.64605238974478, -17.177916547321143]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 25, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.039723690777553076, 0.022063677781189173, 0.05373878117153445, 0.9975206092667837, 1.0692295667555474, 1.0067080281469896, 0.9752049691173994, 0.01578683304395642, -0.014280118491738436, 0.05761061338937394, 2.435086324461248, 16.886834951164143, -17.166787170905117]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 632, size: fix[40, 46, 33]-mov[43, 41, 32], affine para: [0.04139220432024231, 0.02931479282498006, 0.06612597267617396, 0.9965212913333913, 1.0715226390396893, 1.007978879058708, 0.9905168473983592, 0.02718759836292058, -0.01399839646430572, 0.07293900718126062, 2.299070662943064, 16.847217960699727, -16.778570875291294]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 159, size: fix[80, 91, 46]-mov[85, 82, 39], affine para: [0.048848703868318875, 0.027402536601734903, 0.06649775388924503, 0.9962133074025168, 1.0696021625163377, 1.0022961480674644, 0.9962951652873208, 0.026448096830182063, -0.014474784868411701, 0.07452801220721778, 2.405737337513459, 17.0756558597996, -16.814261715250463]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 883, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.028345874347177506, -0.03691854216364963, -0.06665697554580748, 0.9966897111253283, 0.9276807113899265, 0.9521517911430195, 0.9917127046973552, -0.05556069357409898, 0.03847086373491051, -0.07645624413840901, -4.4104355905281025, -15.984172022991833, 17.373791371646398]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 663, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.03421900708460548, -0.036284381924419316, -0.0702151002073132, 0.9962842681109563, 0.9258258018464514, 0.9618577727277128, 0.9861843405344312, -0.06555670092787592, 0.036714636709832514, -0.11058209794300015, -4.424316359359726, -16.86360632797264, 17.30859686283322]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 38, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.036830648036350375, -0.033709720141101684, -0.06902394189470351, 0.9963648195207153, 0.9263734160475077, 0.9657472447750431, 0.9894136729469448, -0.06506848277433368, 0.03689185069988743, -0.10732998265839551, -4.337019401782549, -16.69960793441602, 17.55417610075254]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 1455, size: fix[43, 41, 32]-mov[40, 46, 33], affine para: [-0.04208040121454329, -0.037152405883635956, -0.07932599620855188, 0.9952669616219567, 0.9216180014927814, 0.9745057146395795, 0.9891676742254826, -0.0776615811379166, 0.041250116748403017, -0.09635442083713304, -4.521771994945239, -16.313851867792067, 17.72261923933531]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 899, size: fix[85, 82, 39]-mov[80, 91, 46], affine para: [-0.045639884545454056, -0.03730125717315842, -0.07252837900597074, 0.9956230468358723, 0.9391010656421727, 0.9817502980137007, 0.9744403783954675, -0.058672386938866804, 0.03514262329454351, -0.10233939110226625, -4.5892994552874935, -16.3203624619638, 17.589582005804765]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.395555 v2 -0.40478
 last params [0.048848703868318875, 0.027402536601734903, 0.06649775388924503, 0.9962133074025168, 1.0696021625163377, 1.0022961480674644, 0.9962951652873208, 0.026448096830182063, -0.014474784868411701, 0.07452801220721778, 2.405737337513459, 17.0756558597996, -16.814261715250463]
 my params [-0.045639884545454056, -0.03730125717315842, -0.07252837900597074, 0.9956230468358723, 0.9391010656421727, 0.9817502980137007, 0.9744403783954675, -0.058672386938866804, 0.03514262329454351, -0.10233939110226625, -4.5892994552874935, -16.3203624619638, 17.589582005804765]
A=1.06154 -0.0941557 0.0513398 
0.143469 1.01374 0.0172357 
-0.0694302 0.0988168 1.0191 

rotation R0.988915 -0.126919 0.0770612 
0.133654 0.986966 -0.0896364 
-0.0646802 0.0989423 0.992989 

upper R1.07344 0.0359871 -0.0128412 
0 1.02226 0.111327 
0 0 1.01437 

s=0.250979 u=0.0473292 v=0.035574 w0.0653982 r=0.996101
m_Rotation from vnl0.0473292 0.035574 0.0653982 0.996101
 new params [0.04732921071993506, 0.03557404520424826, 0.06539821641516225, 0.9961011526999403, 1.073438485366017, 1.022256292233445, 1.0143653344811154, 0.03352502570949278, -0.011962698593571857, 0.10890333320653504, 2.432022384926258, 16.899891297596206, -16.6314364996391]
outputput affine center: [10.3923, -12.8837, 14.6322]
output affine para: [0.04732921071993506, 0.03557404520424826, 0.06539821641516225, 0.9961011526999403, 1.073438485366017, 1.022256292233445, 1.0143653344811154, 0.03352502570949278, -0.011962698593571857, 0.10890333320653504, 2.432022384926258, 16.899891297596206, -16.6314364996391]
initial measure value (MMI): rval = -0.206685
final measure value (MMI): rval = -0.401485
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -4528.94
 iteration 2 energy 0 : -4771.43
 iteration 3 energy 0 : -4970.53
 iteration 4 energy 0 : -5194.64
 iteration 5 energy 0 : -5379.02
 iteration 6 energy 0 : -5520.15
 iteration 7 energy 0 : -5638.5
 iteration 8 energy 0 : -5732.02
 iteration 9 energy 0 : -5818.8
 iteration 10 energy 0 : -5902.01
 iteration 11 energy 0 : -5973.81
 iteration 12 energy 0 : -6009.52
 E-Slope 0.0117814 iteration 13 energy 0 : -6091.69
 E-Slope 0.00986687 iteration 14 energy 0 : -6108.28
 E-Slope 0.00828299 iteration 15 energy 0 : -6176.73
 E-Slope 0.00698858 iteration 16 energy 0 : -6185.79
 E-Slope 0.00607698 iteration 17 energy 0 : -6245.33
 E-Slope 0.00524229 iteration 18 energy 0 : -6244.97
 E-Slope 0.00464308 iteration 19 energy 0 : -6301.24
 E-Slope 0.00402727 iteration 20 energy 0 : -6297.05
 E-Slope 0.00357218 iteration 21 energy 0 : -6342.1
 E-Slope 0.00309153 iteration 22 energy 0 : -6325.1
 E-Slope 0.00285099 iteration 23 energy 0 : -6391.85
 E-Slope 0.00249477 iteration 24 energy 0 : -6382.85
 E-Slope 0.0023075 iteration 25 energy 0 : -6405.52
 E-Slope 0.00192111 iteration 26 energy 0 : -6376.27
 E-Slope 0.00186653 iteration 27 energy 0 : -6452.45
 E-Slope 0.0016482 iteration 28 energy 0 : -6435
 E-Slope 0.00163256 iteration 29 energy 0 : -6475.2
 E-Slope 0.00142108 iteration 30 energy 0 : -6450.27
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -13859.7
 iteration 2 energy 0 : -14069.9
 iteration 3 energy 0 : -14315.8
 iteration 4 energy 0 : -14514.1
 iteration 5 energy 0 : -14685.6
 iteration 6 energy 0 : -14823.3
 iteration 7 energy 0 : -14945.8
 iteration 8 energy 0 : -15057
 iteration 9 energy 0 : -15150.1
 iteration 10 energy 0 : -15243.4
 iteration 11 energy 0 : -15253.3
 iteration 12 energy 0 : -15361
 E-Slope 0.0043314 iteration 13 energy 0 : -15316.4
 E-Slope 0.00369474 iteration 14 energy 0 : -15466.7
 E-Slope 0.00310723 iteration 15 energy 0 : -15445.2
 E-Slope 0.00265887 iteration 16 energy 0 : -15509.3
 E-Slope 0.00216245 iteration 17 energy 0 : -15436.3
 E-Slope 0.00191563 iteration 18 energy 0 : -15599.3
 E-Slope 0.00167727 iteration 19 energy 0 : -15588.4
 E-Slope 0.00149014 iteration 20 energy 0 : -15606.3
 E-Slope 0.00124971 iteration 21 energy 0 : -15550.1
 E-Slope 0.00123593 iteration 22 energy 0 : -15694.8
 E-Slope 0.0010733 iteration 23 energy 0 : -15640.4
 E-Slope 0.00106412 iteration 24 energy 0 : -15706.9
 E-Slope 0.000822149 iteration 25 energy 0 : -15631.9
 E-Slope 0.000903577 iteration 26 energy 0 : -15773.4
 E-Slope 0.000850439 iteration 27 energy 0 : -15741.8
 E-Slope 0.000843808 iteration 28 energy 0 : -15757.2
 E-Slope 0.00060679 iteration 29 energy 0 : -15699.2
 E-Slope 0.000708021 iteration 30 energy 0 : -15830.8
 E-Slope 0.000666074 iteration 31 energy 0 : -15770.4
 E-Slope 0.000666723 iteration 32 energy 0 : -15819.7
 E-Slope 0.000453442 iteration 33 energy 0 : -15747.8
 E-Slope 0.000556014 iteration 34 energy 0 : -15871.6
 E-Slope 0.000481047 iteration 35 energy 0 : -15820
 E-Slope 0.000472665 iteration 36 energy 0 : -15829.3
 E-Slope 0.000276603 iteration 37 energy 0 : -15785.4
 E-Slope 0.000387713 iteration 38 energy 0 : -15898.7
 E-Slope 0.000340074 iteration 39 energy 0 : -15828.5
 E-Slope 0.000423968 iteration 40 energy 0 : -15933.2
 E-Slope 0.000321686 iteration 41 energy 0 : -15872.8
 E-Slope 0.000393815 iteration 42 energy 0 : -15892.3
 E-Slope 0.00030607 iteration 43 energy 0 : -15847.1
 E-Slope 0.000386506 iteration 44 energy 0 : -15945.5
 E-Slope 0.000250742 iteration 45 energy 0 : -15874.3
 E-Slope 0.0004014 iteration 46 energy 0 : -15988.7
 E-Slope 0.000378348 iteration 47 energy 0 : -15925.6
 E-Slope 0.000364393 iteration 48 energy 0 : -15940
 E-Slope 0.000206694 iteration 49 energy 0 : -15891.3
 E-Slope 0.000307128 iteration 50 energy 0 : -15992.3
 E-Slope 0.000185728 iteration 51 energy 0 : -15909.5
 E-Slope 0.000348009 iteration 52 energy 0 : -16037.6
 E-Slope 0.000326358 iteration 53 energy 0 : -15972.9
 E-Slope 0.000311688 iteration 54 energy 0 : -15972.7
 E-Slope 0.000162423 iteration 55 energy 0 : -15928.1
 E-Slope 0.00024002 iteration 56 energy 0 : -16017.2
 E-Slope 0.000110716 iteration 57 energy 0 : -15943.5
 E-Slope 0.000253931 iteration 58 energy 0 : -16050
 E-Slope 0.000191748 iteration 59 energy 0 : -15964.6
 E-Slope 0.000201009 iteration 60 energy 0 : -16012.9
 E-Slope 5.56484e-05 iteration 61 energy 0 : -15951.3
 Converged due to oscillation in optimization  metric 0 bad 26  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -107248
 iteration 2 energy 0 : -108428
 iteration 3 energy 0 : -111064
 iteration 4 energy 0 : -112894
 iteration 5 energy 0 : -114327
 iteration 6 energy 0 : -115524
 iteration 7 energy 0 : -116565
 iteration 8 energy 0 : -117502
 iteration 9 energy 0 : -118253
 iteration 10 energy 0 : -118967
 iteration 11 energy 0 : -119757
 iteration 12 energy 0 : -120498
 E-Slope 0.00524934 iteration 13 energy 0 : -121271
 E-Slope 0.00457853 iteration 14 energy 0 : -122139
 E-Slope 0.00421206 iteration 15 energy 0 : -123100
 E-Slope 0.00400092 iteration 16 energy 0 : -123900
 E-Slope 0.00387931 iteration 17 energy 0 : -124647
 E-Slope 0.00378975 iteration 18 energy 0 : -125251
 E-Slope 0.00369776 iteration 19 energy 0 : -125774
 E-Slope 0.00347427 iteration 20 energy 0 : -125565
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1739_11242015_Aug2_Ref_vimp2_2462_08192016_Test_NewCases/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1739_11242015_Aug2_Ref_vimp2_2462_08192016_Test_NewCases/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1739_11242015_Aug2_Ref_vimp2_2462_08192016_Test_NewCases/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1739_11242015_Aug2_Ref_vimp2_2462_08192016_Test_NewCases/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1751_12022015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2628_10282016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1751_12022015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2628_10282016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547778246
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [8.43969, -13.8996, 5.03423]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 5.947131261306824, 18.250036353322713, -18.994999737997382]
level 0, iter 616, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.01203962394035762, 0.025142241791370524, -0.0008105949347506003, 0.9996110533947344, 0.8738304642003565, 1.0186816156166056, 0.9032006280972381, 0.026410450412245764, -0.010989693969822656, 0.05440776388261614, 2.1592886775268543, 17.195257771782817, -16.975511153425373]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 174, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.018476179486451163, 0.021654014066590833, -0.007228192154610483, 0.9995686508212251, 0.8716865666629803, 1.033904327247737, 0.89050190524333, 0.017254834097334436, -0.00672851131842313, 0.08188519635420148, 2.3022902264351166, 17.869535842050492, -16.97770561922404]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 1100, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.007202013336646119, 0.01519843129258858, -0.014099697037712525, 0.9997591396099302, 0.8656688458460684, 1.0336918117223104, 0.898864269252936, 0.003650458636975478, 0.0023205425146758637, 0.09771671425351441, 2.2059464955758252, 17.658319021586056, -17.429459866283405]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 99, size: fix[39, 46, 33]-mov[36, 41, 35], affine para: [-0.008715349148462673, 0.018625479024503268, -0.013890291301727488, 0.9996920495972154, 0.8723178947469782, 1.0258717375491535, 0.8979811488127202, 0.0005943917256373512, 0.003668038680221951, 0.10403677961014086, 2.217527345206941, 17.850222623823555, -17.10850008428006]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 100, size: fix[78, 92, 46]-mov[72, 81, 49], affine para: [-0.004119878321010631, 0.01809569581998158, -0.012486645798015932, 0.999749796735226, 0.8676382554636577, 1.0218882067127109, 0.8884316698101091, -0.002987692849397997, 0.010671085973321703, 0.10057765432062876, 2.218457882978872, 17.921009692977243, -17.170166009130075]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 3166, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.00976518805512131, -0.023692547735967927, 0.00262489980521119, 0.9996681520309826, 1.1286868879890244, 0.9793498091602657, 1.0913285424326429, -0.015413088434791332, 0.013516176653766858, -0.07867621218441981, -2.7424487653742236, -18.713795076281627, 18.07528271604079]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 3048, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.010052453189133599, -0.02047312656316999, 0.020976083141306147, 0.999519786302231, 1.1360285100746057, 0.9608941662602051, 1.1230584553019511, 0.010281177466795832, 0.004386795302047075, -0.10934786025175335, -2.8380470349165745, -19.063115425639804, 18.911265917635397]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 607, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.008957992186520776, -0.01894885273889855, 0.015443912855444103, 0.9996610330064782, 1.1295772456519417, 0.9535704655978763, 1.112540366953136, 0.003928014673068648, -0.003498311514788203, -0.1275621135217662, -3.057908643661785, -19.53888552938778, 18.87517894939017]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 445, size: fix[36, 41, 35]-mov[39, 46, 33], affine para: [0.007516901224213515, -0.016979542229984153, 0.02151084815747963, 0.9995961558315396, 1.1302733785740409, 0.9532278165729473, 1.1104758738027658, 0.005784633390076062, -0.00693246478009449, -0.12499737183971192, -2.7482924413285232, -19.226590205852816, 18.836748777037073]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 198, size: fix[72, 81, 49]-mov[78, 92, 46], affine para: [0.006753982785045581, -0.014404448594582654, 0.01837357559995994, 0.9997046100208291, 1.1413555305675303, 0.9602851648194112, 1.1051744999222657, 0.007611833308639483, -0.011520921992167166, -0.12192939549088004, -2.887759395190073, -19.43712605766645, 18.8840420756124]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.358704 v2 -0.343762
final [-0.004119878321010631, 0.01809569581998158, -0.012486645798015932, 0.999749796735226, 0.8676382554636577, 1.0218882067127109, 0.8884316698101091, -0.002987692849397997, 0.010671085973321703, 0.10057765432062876, 2.218457882978872, 17.921009692977243, -17.170166009130075]
outputput affine center: [8.43969, -13.8996, 5.03423]
output affine para: [-0.004119878321010631, 0.01809569581998158, -0.012486645798015932, 0.999749796735226, 0.8676382554636577, 1.0218882067127109, 0.8884316698101091, -0.002987692849397997, 0.010671085973321703, 0.10057765432062876, 2.218457882978872, 17.921009692977243, -17.170166009130075]
initial measure value (MMI): rval = -0.168239
final measure value (MMI): rval = -0.338514
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -5038.76
 iteration 2 energy 0 : -5399.43
 iteration 3 energy 0 : -5733.72
 iteration 4 energy 0 : -6061.99
 iteration 5 energy 0 : -6312.96
 iteration 6 energy 0 : -6518.69
 iteration 7 energy 0 : -6670.52
 iteration 8 energy 0 : -6808.25
 iteration 9 energy 0 : -6934.33
 iteration 10 energy 0 : -7066.63
 iteration 11 energy 0 : -7199.18
 iteration 12 energy 0 : -7307.49
 E-Slope 0.0148395 iteration 13 energy 0 : -7398.62
 E-Slope 0.0126183 iteration 14 energy 0 : -7481.77
 E-Slope 0.0108462 iteration 15 energy 0 : -7555.5
 E-Slope 0.00932179 iteration 16 energy 0 : -7539.62
 E-Slope 0.00807369 iteration 17 energy 0 : -7591.37
 E-Slope 0.00684571 iteration 18 energy 0 : -7575.2
 E-Slope 0.00574781 iteration 19 energy 0 : -7630.23
 E-Slope 0.0046203 iteration 20 energy 0 : -7617.95
 E-Slope 0.00362572 iteration 21 energy 0 : -7651.93
 E-Slope 0.00271265 iteration 22 energy 0 : -7638.24
 E-Slope 0.00210234 iteration 23 energy 0 : -7686.31
 E-Slope 0.00160144 iteration 24 energy 0 : -7674.13
 E-Slope 0.00131357 iteration 25 energy 0 : -7706.4
 E-Slope 0.00111889 iteration 26 energy 0 : -7694.5
 E-Slope 0.00114655 iteration 27 energy 0 : -7733.45
 E-Slope 0.00102542 iteration 28 energy 0 : -7724.3
 E-Slope 0.00101662 iteration 29 energy 0 : -7741.55
 E-Slope 0.000870451 iteration 30 energy 0 : -7733.15
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -15992.2
 iteration 2 energy 0 : -16199.2
 iteration 3 energy 0 : -16467
 iteration 4 energy 0 : -16740.9
 iteration 5 energy 0 : -16944.9
 iteration 6 energy 0 : -17106.3
 iteration 7 energy 0 : -17151.3
 iteration 8 energy 0 : -17268.7
 iteration 9 energy 0 : -17281.9
 iteration 10 energy 0 : -17381.7
 iteration 11 energy 0 : -17374.8
 iteration 12 energy 0 : -17457.4
 E-Slope 0.00346604 iteration 13 energy 0 : -17438.4
 E-Slope 0.00269799 iteration 14 energy 0 : -17514.5
 E-Slope 0.00204019 iteration 15 energy 0 : -17498.4
 E-Slope 0.00162021 iteration 16 energy 0 : -17549.4
 E-Slope 0.0013065 iteration 17 energy 0 : -17535
 E-Slope 0.00115062 iteration 18 energy 0 : -17587.1
 E-Slope 0.000947371 iteration 19 energy 0 : -17572.2
 E-Slope 0.000865668 iteration 20 energy 0 : -17616.6
 E-Slope 0.000719212 iteration 21 energy 0 : -17601.2
 E-Slope 0.000691622 iteration 22 energy 0 : -17647.3
 E-Slope 0.000592522 iteration 23 energy 0 : -17635.5
 E-Slope 0.000599973 iteration 24 energy 0 : -17681
 E-Slope 0.000509471 iteration 25 energy 0 : -17652.5
 E-Slope 0.00052616 iteration 26 energy 0 : -17699.7
 E-Slope 0.000461288 iteration 27 energy 0 : -17677.7
 E-Slope 0.000475176 iteration 28 energy 0 : -17722.8
 E-Slope 0.00040599 iteration 29 energy 0 : -17694.7
 E-Slope 0.000421695 iteration 30 energy 0 : -17740.6
 E-Slope 0.000363983 iteration 31 energy 0 : -17717.8
 E-Slope 0.000385895 iteration 32 energy 0 : -17764.7
 E-Slope 0.000334263 iteration 33 energy 0 : -17740.4
 E-Slope 0.000365548 iteration 34 energy 0 : -17786.9
 E-Slope 0.000327729 iteration 35 energy 0 : -17761.5
 E-Slope 0.000371389 iteration 36 energy 0 : -17806.5
 E-Slope 0.000325777 iteration 37 energy 0 : -17780.3
 E-Slope 0.00035613 iteration 38 energy 0 : -17818.9
 E-Slope 0.000306889 iteration 39 energy 0 : -17793.6
 E-Slope 0.000341348 iteration 40 energy 0 : -17840
 E-Slope 0.000288002 iteration 41 energy 0 : -17812.7
 E-Slope 0.000309229 iteration 42 energy 0 : -17849.2
 E-Slope 0.00025256 iteration 43 energy 0 : -17823.1
 E-Slope 0.000279866 iteration 44 energy 0 : -17864.9
 E-Slope 0.000227802 iteration 45 energy 0 : -17837.5
 E-Slope 0.000254147 iteration 46 energy 0 : -17873.4
 E-Slope 0.00020308 iteration 47 energy 0 : -17846.9
 E-Slope 0.000238031 iteration 48 energy 0 : -17889.5
 E-Slope 0.000193655 iteration 49 energy 0 : -17861.2
 E-Slope 0.000220157 iteration 50 energy 0 : -17896.2
 E-Slope 0.000170223 iteration 51 energy 0 : -17868.4
 E-Slope 0.000211254 iteration 52 energy 0 : -17912.1
 E-Slope 0.000173256 iteration 53 energy 0 : -17883.5
 E-Slope 0.000216961 iteration 54 energy 0 : -17929.2
 E-Slope 0.000179023 iteration 55 energy 0 : -17897.5
 E-Slope 0.000202149 iteration 56 energy 0 : -17919.5
 E-Slope 0.000150241 iteration 57 energy 0 : -17893
 E-Slope 0.000194617 iteration 58 energy 0 : -17951.2
 E-Slope 0.000154778 iteration 59 energy 0 : -17916.9
 E-Slope 0.000169419 iteration 60 energy 0 : -17930.9
 E-Slope 0.000103898 iteration 61 energy 0 : -17898.1
 E-Slope 0.000122271 iteration 62 energy 0 : -17942.6
 E-Slope 6.07669e-05 iteration 63 energy 0 : -17908.7
 Converged due to oscillation in optimization  metric 0 bad 27  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -115860
 iteration 2 energy 0 : -119083
 iteration 3 energy 0 : -121615
 iteration 4 energy 0 : -123710
 iteration 5 energy 0 : -125726
 iteration 6 energy 0 : -127326
 iteration 7 energy 0 : -128719
 iteration 8 energy 0 : -129881
 iteration 9 energy 0 : -130914
 iteration 10 energy 0 : -131882
 iteration 11 energy 0 : -132840
 iteration 12 energy 0 : -133753
 E-Slope 0.00601059 iteration 13 energy 0 : -134548
 E-Slope 0.00527072 iteration 14 energy 0 : -135262
 E-Slope 0.00465976 iteration 15 energy 0 : -135828
 E-Slope 0.0041213 iteration 16 energy 0 : -136246
 E-Slope 0.0036665 iteration 17 energy 0 : -136605
 E-Slope 0.00325313 iteration 18 energy 0 : -136923
 E-Slope 0.0028706 iteration 19 energy 0 : -137208
 E-Slope 0.00250466 iteration 20 energy 0 : -137463
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1751_12022015_Aug1_Ref_vimp2_2628_10282016/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1751_12022015_Aug1_Ref_vimp2_2628_10282016/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1751_12022015_Aug1_Ref_vimp2_2628_10282016/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1751_12022015_Aug1_Ref_vimp2_2628_10282016/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1751_12022015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2972_03102017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1751_12022015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2972_03102017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547778420
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [8.43969, -13.8996, 5.03423]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 4.94656566140865, 24.53346271908457, -3.4145058442880747]
level 0, iter 474, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.09046696863350927, -0.013677288787286097, -0.014528911349733602, 0.9956995380598931, 0.9646036527641645, 0.9868225590494695, 0.9075977827231784, -0.00857714169149783, 0.01740368454512219, 0.018775583272904763, 3.442880611129799, 24.689016351962184, -2.760706730078705]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 201, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.09341411640635773, -0.0156730237948107, -0.00979978446567153, 0.9954557365375787, 0.953342278349302, 0.9855269284493554, 0.8984054600717863, -0.004459806416291033, 0.026157004762677866, 0.028761455843615457, 3.4976256512387445, 24.765352060915333, -2.6608450274535707]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 188, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.09928839126296597, -0.016808314850174543, -0.0091462719547276, 0.9948746863910246, 0.9522751368640776, 1.001104525731039, 0.8917306371477945, -0.005563841104057549, 0.035460680646991954, 0.0427528758106906, 3.4018646012065124, 24.61206189095792, -2.6215460419325343]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 1167, size: fix[39, 46, 33]-mov[39, 39, 32], affine para: [0.0881279111318313, -0.019637333634169567, -0.02418155638618006, 0.9956219657771831, 0.9508136564175034, 1.003829884688376, 0.8829984030479154, -0.014168535553374483, 0.04047158891916632, 0.05098603014050382, 3.441460549864212, 24.962995142547147, -2.735860543729596]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 98, size: fix[78, 92, 46]-mov[77, 77, 39], affine para: [0.09272374697221189, -0.01978565611858218, -0.02168434575751298, 0.9952590736629628, 0.9526837786372666, 1.0097437556707938, 0.8809307728271621, -0.016447515778084336, 0.04183846599546865, 0.055013949036658225, 3.611352211069971, 24.978483031525627, -2.6837205801835258]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 1197, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.10037878541545069, 0.02120756036886019, 0.033683078087649865, 0.9941527996602239, 1.0452431415140246, 0.986774848439127, 1.0999442070139036, 0.03574007465665109, -0.05026576036090479, -0.10943206573053003, -2.9593606801083046, -23.99586034222029, 8.28041321494806]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 579, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.09640101396988139, 0.021966385551977413, 0.0345188570766465, 0.9945012674287965, 1.0434924017733997, 0.9746597759146293, 1.1055934903707387, 0.04964833771115462, -0.05052675617358713, -0.1389603902449863, -3.2504509160855855, -24.236767864083735, 8.21083137795486]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 220, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.10373958764866582, 0.021029812590211878, 0.03339673800984527, 0.9938211623965386, 1.0432537031133877, 0.973233877677473, 1.1037912886501033, 0.05267945527029968, -0.04374812525344478, -0.13736261895631682, -3.3547963931042526, -23.845838074262, 8.391641859190058]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 733, size: fix[39, 39, 32]-mov[39, 46, 33], affine para: [-0.09720910482326342, 0.02142576992087423, 0.04089646793139094, 0.9941925393169544, 1.0424569224526774, 0.9743278820253225, 1.1110006327203499, 0.05791524946460798, -0.04759073446031593, -0.15263743472283664, -3.105691224547799, -24.407939461921938, 8.39828060220681]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 205, size: fix[77, 77, 39]-mov[78, 92, 46], affine para: [-0.09245296631349292, 0.023786749930724757, 0.04481418736517012, 0.9944236160502067, 1.047130969800226, 0.9816363925700263, 1.1238316922709066, 0.056190788350012344, -0.05278319256103366, -0.15548202263653185, -2.8502487979582836, -24.861116116731175, 8.235207770009136]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.392795 v2 -0.391847
final [0.09272374697221189, -0.01978565611858218, -0.02168434575751298, 0.9952590736629628, 0.9526837786372666, 1.0097437556707938, 0.8809307728271621, -0.016447515778084336, 0.04183846599546865, 0.055013949036658225, 3.611352211069971, 24.978483031525627, -2.6837205801835258]
outputput affine center: [8.43969, -13.8996, 5.03423]
output affine para: [0.09272374697221189, -0.01978565611858218, -0.02168434575751298, 0.9952590736629628, 0.9526837786372666, 1.0097437556707938, 0.8809307728271621, -0.016447515778084336, 0.04183846599546865, 0.055013949036658225, 3.611352211069971, 24.978483031525627, -2.6837205801835258]
initial measure value (MMI): rval = -0.214526
final measure value (MMI): rval = -0.421361
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -4757.13
 iteration 2 energy 0 : -5124.55
 iteration 3 energy 0 : -5439.11
 iteration 4 energy 0 : -5687.64
 iteration 5 energy 0 : -5873.55
 iteration 6 energy 0 : -6029.89
 iteration 7 energy 0 : -6158.71
 iteration 8 energy 0 : -6262.73
 iteration 9 energy 0 : -6343.07
 iteration 10 energy 0 : -6413.71
 iteration 11 energy 0 : -6478.34
 iteration 12 energy 0 : -6527.36
 E-Slope 0.0114618 iteration 13 energy 0 : -6567.56
 E-Slope 0.00911408 iteration 14 energy 0 : -6596.63
 E-Slope 0.00733763 iteration 15 energy 0 : -6624.46
 E-Slope 0.00598536 iteration 16 energy 0 : -6651.23
 E-Slope 0.00494022 iteration 17 energy 0 : -6685.34
 E-Slope 0.00417804 iteration 18 energy 0 : -6724.9
 E-Slope 0.00366753 iteration 19 energy 0 : -6769.17
 E-Slope 0.00337581 iteration 20 energy 0 : -6818.88
 E-Slope 0.00322616 iteration 21 energy 0 : -6862.6
 E-Slope 0.00312582 iteration 22 energy 0 : -6882.59
 E-Slope 0.00297824 iteration 23 energy 0 : -6873.12
 E-Slope 0.00276813 iteration 24 energy 0 : -6870.21
 E-Slope 0.00247306 iteration 25 energy 0 : -6864.24
 E-Slope 0.00210675 iteration 26 energy 0 : -6867.92
 E-Slope 0.00167393 iteration 27 energy 0 : -6866.16
 E-Slope 0.00121368 iteration 28 energy 0 : -6868.33
 E-Slope 0.000772446 iteration 29 energy 0 : -6868.24
 E-Slope 0.000391997 iteration 30 energy 0 : -6867.31
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -14377.5
 iteration 2 energy 0 : -14549.4
 iteration 3 energy 0 : -14683.1
 iteration 4 energy 0 : -14814.1
 iteration 5 energy 0 : -14960.6
 iteration 6 energy 0 : -15084.9
 iteration 7 energy 0 : -15182.8
 iteration 8 energy 0 : -15259.3
 iteration 9 energy 0 : -15332.2
 iteration 10 energy 0 : -15333.3
 iteration 11 energy 0 : -15339.4
 iteration 12 energy 0 : -15334.1
 E-Slope 0.00281927 iteration 13 energy 0 : -15362.1
 E-Slope 0.00219653 iteration 14 energy 0 : -15350.6
 E-Slope 0.00164571 iteration 15 energy 0 : -15383
 E-Slope 0.00113191 iteration 16 energy 0 : -15365.6
 E-Slope 0.000767894 iteration 17 energy 0 : -15392
 E-Slope 0.00048589 iteration 18 energy 0 : -15371.9
 E-Slope 0.000345841 iteration 19 energy 0 : -15409.9
 E-Slope 0.000248678 iteration 20 energy 0 : -15387.7
 E-Slope 0.000266612 iteration 21 energy 0 : -15415.8
 E-Slope 0.000256076 iteration 22 energy 0 : -15407.1
 E-Slope 0.000270069 iteration 23 energy 0 : -15432.9
 E-Slope 0.000232823 iteration 24 energy 0 : -15413.9
 E-Slope 0.000254042 iteration 25 energy 0 : -15442.3
 E-Slope 0.000217848 iteration 26 energy 0 : -15424.3
 E-Slope 0.000245653 iteration 27 energy 0 : -15451.8
 E-Slope 0.000209428 iteration 28 energy 0 : -15433.8
 E-Slope 0.000227511 iteration 29 energy 0 : -15459.2
 E-Slope 0.000179738 iteration 30 energy 0 : -15441.8
 E-Slope 0.000198245 iteration 31 energy 0 : -15463.2
 E-Slope 0.000152335 iteration 32 energy 0 : -15447.2
 E-Slope 0.000166439 iteration 33 energy 0 : -15472.8
 E-Slope 0.000132799 iteration 34 energy 0 : -15454.5
 E-Slope 0.0001553 iteration 35 energy 0 : -15478.1
 E-Slope 0.000116214 iteration 36 energy 0 : -15458.6
 E-Slope 0.000142105 iteration 37 energy 0 : -15485.6
 E-Slope 0.000112072 iteration 38 energy 0 : -15469
 E-Slope 0.000145093 iteration 39 energy 0 : -15495.4
 E-Slope 0.000118263 iteration 40 energy 0 : -15475.9
 E-Slope 0.000147253 iteration 41 energy 0 : -15498.7
 E-Slope 0.000114992 iteration 42 energy 0 : -15477.3
 E-Slope 0.000130199 iteration 43 energy 0 : -15497.7
 E-Slope 8.69855e-05 iteration 44 energy 0 : -15476.5
 Converged due to oscillation in optimization  metric 0 bad 17  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -105689
 iteration 2 energy 0 : -107648
 iteration 3 energy 0 : -109512
 iteration 4 energy 0 : -111231
 iteration 5 energy 0 : -112796
 iteration 6 energy 0 : -114205
 iteration 7 energy 0 : -115417
 iteration 8 energy 0 : -116508
 iteration 9 energy 0 : -117446
 iteration 10 energy 0 : -118241
 iteration 11 energy 0 : -118940
 iteration 12 energy 0 : -119589
 E-Slope 0.00559557 iteration 13 energy 0 : -120262
 E-Slope 0.0049338 iteration 14 energy 0 : -120833
 E-Slope 0.0043586 iteration 15 energy 0 : -121387
 E-Slope 0.00386105 iteration 16 energy 0 : -121838
 E-Slope 0.0034475 iteration 17 energy 0 : -122307
 E-Slope 0.00310575 iteration 18 energy 0 : -122717
 E-Slope 0.00279455 iteration 19 energy 0 : -122954
 E-Slope 0.00253329 iteration 20 energy 0 : -123310
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1751_12022015_Aug2_Ref_vimp2_2972_03102017_Test_NewCases/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1751_12022015_Aug2_Ref_vimp2_2972_03102017_Test_NewCases/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1751_12022015_Aug2_Ref_vimp2_2972_03102017_Test_NewCases/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1751_12022015_Aug2_Ref_vimp2_2972_03102017_Test_NewCases/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1756_12032015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2551_09232016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1756_12032015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2551_09232016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547778552
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [10.1944, 2.22075, 15.3273]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 6.451553906130405, 7.858410445843311, -33.2381296249444]
level 0, iter 240, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.15473022246097362, 0.060374433814638986, 0.041753851525875865, 0.9852259141341616, 1.1113354247412983, 1.0375531671961271, 1.0418310443111802, -0.021278897695823615, 0.011036118500396267, -0.010528322687686182, 4.4284615061360055, 9.970733008105114, -35.09959170829339]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 560, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.16099872063385115, 0.05870009624646242, 0.04421155409475716, 0.9842149405183024, 1.119133098849996, 1.029881500308626, 1.0431384340820544, -0.015489662912585567, 0.019752231587329205, -0.044091716391122616, 4.623347539512768, 9.916576476516592, -35.00368482060674]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 87, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.1621508856557829, 0.05842232437051486, 0.04935242003569125, 0.983797876056262, 1.1263915618393783, 1.0252246704199404, 1.0413880600497434, -0.015740680076320814, 0.020899928316929054, -0.04590707977373739, 4.610586579510292, 10.081450579679265, -35.04486897960781]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 320, size: fix[39, 38, 32]-mov[42, 46, 34], affine para: [-0.1659248414741054, 0.05696436860354236, 0.04613596238689816, 0.9834101284133835, 1.1297233709037442, 1.021883377946933, 1.0478779700285672, -0.019446656947376198, 0.026375295788467108, -0.0547515693990064, 4.631041312908305, 10.108154439026384, -35.010952847045075]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 50, size: fix[77, 75, 39]-mov[83, 92, 48], affine para: [-0.16576066776825762, 0.06007702744072387, 0.049489447661487114, 0.9830894905170479, 1.1241288715792495, 1.0075172322772392, 1.0365433907838497, -0.022276355079644566, 0.020538463597919953, -0.05623785759868067, 4.64153120638613, 10.242482697141144, -35.070787786276135]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 802, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.15905267275723778, -0.06801046191805314, -0.04861204584624154, 0.9837243990860016, 0.8791693759045687, 0.9737910361031692, 0.9338342628694978, -0.004470690090304843, 0.002163658093646468, 0.01987291505663538, -9.596917487942193, -18.054485012449096, 27.502573171535253]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 225, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.15733489056588285, -0.06577618230636566, -0.0547535252975979, 0.9838299027369044, 0.8749402706724443, 0.9929100679933637, 0.9272678970070878, -0.009260940204760437, 0.004774740187976578, 0.027647890001816035, -9.423391330816319, -17.778813290857855, 27.19791041683931]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 182, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.1585918726068215, -0.07060707591848077, -0.05281018247226488, 0.9833993814318522, 0.8756714918561141, 0.9936390492328309, 0.920823799436899, -0.011615154740429273, 0.0040686692307304335, 0.031068541578925343, -9.56057951428518, -17.702179622791686, 26.813859972082074]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 564, size: fix[42, 46, 34]-mov[39, 38, 32], affine para: [0.16083277429202336, -0.06674601844103538, -0.05280050946244091, 0.9833055953956057, 0.8740892653521946, 0.9869957084351775, 0.9188866844208502, -0.019563547459791115, 0.009651576695802995, 0.033914166856088626, -9.073790913013367, -17.738173639720742, 27.05721689547025]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 195, size: fix[83, 92, 48]-mov[77, 75, 39], affine para: [0.15202212201085696, -0.06868888312252582, -0.04743966820475376, 0.984845464849851, 0.8752188721519761, 0.9932850813624998, 0.9232453480106934, -0.008358221139241137, 0.007791754825255319, 0.0307044538564234, -9.197009715923794, -17.199292543777894, 27.375344993803267]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.382799 v2 -0.358836
final [-0.16576066776825762, 0.06007702744072387, 0.049489447661487114, 0.9830894905170479, 1.1241288715792495, 1.0075172322772392, 1.0365433907838497, -0.022276355079644566, 0.020538463597919953, -0.05623785759868067, 4.64153120638613, 10.242482697141144, -35.070787786276135]
outputput affine center: [10.1944, 2.22075, 15.3273]
output affine para: [-0.16576066776825762, 0.06007702744072387, 0.049489447661487114, 0.9830894905170479, 1.1241288715792495, 1.0075172322772392, 1.0365433907838497, -0.022276355079644566, 0.020538463597919953, -0.05623785759868067, 4.64153120638613, 10.242482697141144, -35.070787786276135]
initial measure value (MMI): rval = -0.10725
final measure value (MMI): rval = -0.403281
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -5909.03
 iteration 2 energy 0 : -6298.76
 iteration 3 energy 0 : -6601.79
 iteration 4 energy 0 : -6824.09
 iteration 5 energy 0 : -7001.88
 iteration 6 energy 0 : -7164.21
 iteration 7 energy 0 : -7303.51
 iteration 8 energy 0 : -7423.4
 iteration 9 energy 0 : -7524.97
 iteration 10 energy 0 : -7604.56
 iteration 11 energy 0 : -7673.04
 iteration 12 energy 0 : -7730.89
 E-Slope 0.0100966 iteration 13 energy 0 : -7777.34
 E-Slope 0.00818476 iteration 14 energy 0 : -7768.76
 E-Slope 0.00658579 iteration 15 energy 0 : -7761.07
 E-Slope 0.00517587 iteration 16 energy 0 : -7760.93
 E-Slope 0.00391883 iteration 17 energy 0 : -7764.73
 E-Slope 0.0028334 iteration 18 energy 0 : -7764.06
 E-Slope 0.00195749 iteration 19 energy 0 : -7776.22
 E-Slope 0.00125773 iteration 20 energy 0 : -7774.11
 E-Slope 0.000777021 iteration 21 energy 0 : -7789.56
 E-Slope 0.000435881 iteration 22 energy 0 : -7785.54
 E-Slope 0.000281885 iteration 23 energy 0 : -7802.86
 E-Slope 0.000238404 iteration 24 energy 0 : -7797.44
 E-Slope 0.000346728 iteration 25 energy 0 : -7816.06
 E-Slope 0.000391394 iteration 26 energy 0 : -7809.17
 E-Slope 0.000438586 iteration 27 energy 0 : -7828.01
 E-Slope 0.000432819 iteration 28 energy 0 : -7819.53
 E-Slope 0.000460714 iteration 29 energy 0 : -7840.08
 E-Slope 0.000429109 iteration 30 energy 0 : -7830.44
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -12366.1
 iteration 2 energy 0 : -12550.3
 iteration 3 energy 0 : -12719.1
 iteration 4 energy 0 : -12853.4
 iteration 5 energy 0 : -12960
 iteration 6 energy 0 : -13038.1
 iteration 7 energy 0 : -13062
 iteration 8 energy 0 : -13066.5
 iteration 9 energy 0 : -13090.7
 iteration 10 energy 0 : -13102.8
 iteration 11 energy 0 : -13117.7
 iteration 12 energy 0 : -13127.8
 E-Slope 0.00195009 iteration 13 energy 0 : -13141.1
 E-Slope 0.0013567 iteration 14 energy 0 : -13149.9
 E-Slope 0.000945583 iteration 15 energy 0 : -13160.9
 E-Slope 0.000683866 iteration 16 energy 0 : -13168.5
 E-Slope 0.000548266 iteration 17 energy 0 : -13177.1
 E-Slope 0.000504479 iteration 18 energy 0 : -13184.2
 E-Slope 0.000474617 iteration 19 energy 0 : -13192
 E-Slope 0.000426769 iteration 20 energy 0 : -13197.6
 E-Slope 0.000397339 iteration 21 energy 0 : -13204.9
 E-Slope 0.000365235 iteration 22 energy 0 : -13209.2
 E-Slope 0.000340544 iteration 23 energy 0 : -13215.8
 E-Slope 0.000313714 iteration 24 energy 0 : -13219.8
 E-Slope 0.000294626 iteration 25 energy 0 : -13225.9
 E-Slope 0.000273228 iteration 26 energy 0 : -13229.1
 E-Slope 0.000257105 iteration 27 energy 0 : -13234.1
 E-Slope 0.000238881 iteration 28 energy 0 : -13236.8
 E-Slope 0.000225209 iteration 29 energy 0 : -13242.1
 E-Slope 0.000209615 iteration 30 energy 0 : -13244.1
 E-Slope 0.000196911 iteration 31 energy 0 : -13247.6
 E-Slope 0.00018084 iteration 32 energy 0 : -13248.8
 E-Slope 0.000170656 iteration 33 energy 0 : -13253.6
 E-Slope 0.000156961 iteration 34 energy 0 : -13254.8
 E-Slope 0.000149548 iteration 35 energy 0 : -13259.5
 E-Slope 0.000138022 iteration 36 energy 0 : -13259.7
 E-Slope 0.000129543 iteration 37 energy 0 : -13261.8
 E-Slope 0.000119634 iteration 38 energy 0 : -13263.5
 E-Slope 0.000112966 iteration 39 energy 0 : -13266.1
 E-Slope 0.000104196 iteration 40 energy 0 : -13267.2
 E-Slope 0.000100888 iteration 41 energy 0 : -13270.3
 E-Slope 9.49502e-05 iteration 42 energy 0 : -13271.1
 Converged due to oscillation in optimization  metric 0 bad 0  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -80344.6
 iteration 2 energy 0 : -81934.5
 iteration 3 energy 0 : -83425.9
 iteration 4 energy 0 : -84758.5
 iteration 5 energy 0 : -85935
 iteration 6 energy 0 : -87045.9
 iteration 7 energy 0 : -87988.1
 iteration 8 energy 0 : -88830.2
 iteration 9 energy 0 : -89630.5
 iteration 10 energy 0 : -90329.3
 iteration 11 energy 0 : -90964.2
 iteration 12 energy 0 : -91500.4
 E-Slope 0.00586367 iteration 13 energy 0 : -91955.1
 E-Slope 0.00518449 iteration 14 energy 0 : -92349
 E-Slope 0.00457641 iteration 15 energy 0 : -92701.1
 E-Slope 0.00403397 iteration 16 energy 0 : -93031.6
 E-Slope 0.00355238 iteration 17 energy 0 : -93355.1
 E-Slope 0.00313795 iteration 18 energy 0 : -93638.4
 E-Slope 0.00277664 iteration 19 energy 0 : -93911.1
 E-Slope 0.00246437 iteration 20 energy 0 : -94163.8
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1756_12032015_Aug1_Ref_vimp2_2551_09232016_Test_NewCases/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1756_12032015_Aug1_Ref_vimp2_2551_09232016_Test_NewCases/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1756_12032015_Aug1_Ref_vimp2_2551_09232016_Test_NewCases/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1756_12032015_Aug1_Ref_vimp2_2551_09232016_Test_NewCases/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1756_12032015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2398_07292016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1756_12032015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2398_07292016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547778647
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [10.1944, 2.22075, 15.3273]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 2.4951539795688618, 2.959017117916514, 0.9340124958532172]
level 0, iter 362, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.03988380686729781, 0.026495302347613596, -0.015519972911132503, 0.9987324022700568, 1.058776482828388, 1.054915927515383, 1.0457283756749778, 0.004127109494083947, 0.008730595462893828, -0.011483323835265994, 2.739727000425505, 3.4453371884451034, 1.1337544753126751]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 206, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.03202191565395975, 0.027624272481230942, -0.014450014392701454, 0.999000847633166, 1.0569525803862174, 1.0566957816491154, 1.0469428224549937, -0.00024023966935584468, 0.0008399859290989276, -0.026937604312131103, 2.6404721005130893, 3.375854471187766, 1.2256992701263671]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 100, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.03956225719896345, 0.02879972335175206, -0.016399512684259394, 0.9986673418731106, 1.0507404143518628, 1.0521149791013056, 1.0475955727797512, -0.0038570822623240067, -0.002444226900463283, -0.03133204898168605, 2.6172536864052125, 3.23492154717342, 1.1628913277140296]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 49, size: fix[39, 38, 32]-mov[39, 37, 32], affine para: [-0.03567009627736989, 0.030437231661441366, -0.015160872228220719, 0.9987849453779479, 1.0519227364489105, 1.0484940550513098, 1.043826304895009, -0.004670465229851311, -0.001380481472242622, -0.03428244417278915, 2.552670591220533, 3.1327442566842607, 1.0959493698156044]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 116, size: fix[77, 75, 39]-mov[77, 74, 41], affine para: [-0.038264133636258905, 0.030165525314513882, -0.010654730904064554, 0.9987554124353609, 1.0480226689264747, 1.0428451481890941, 1.0364182636895456, -0.0035335000779913943, -0.00048171330895292654, -0.03534788391219927, 2.5698393689461305, 3.1021772735216877, 1.1844715371459371]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 96, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.02847056183340911, -0.02755164023725357, 0.011061227991274564, 0.9991536335641542, 0.9413027361351638, 0.9442249296671841, 0.9471904059504939, -0.0065948083210774925, -0.004533252516682822, 0.011715723957285332, -2.2936530171761156, -3.073925247426175, -1.451028518745462]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 43, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.03306156011697733, -0.026709763794039734, 0.011477904465175123, 0.9990304196919062, 0.9356011097144993, 0.9425226960671835, 0.949087356075099, -0.006539165683024875, -0.0028642175698184477, 0.015790383006572633, -2.3311639085262432, -3.1250905168633976, -1.4567557296534606]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 36, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.030960001216637997, -0.029760801938177723, 0.013153387602320253, 0.9989908715234816, 0.9364816279349395, 0.9419597212450195, 0.9496254242238776, -0.006558063797045428, -0.0022895002190637787, 0.01805362861498622, -2.3156429015800617, -3.091281009643062, -1.4928820698721097]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 40, size: fix[39, 37, 32]-mov[39, 38, 32], affine para: [0.030965335354640397, -0.028608252505856246, 0.0131349512568898, 0.9990246187909558, 0.9368204425663222, 0.9427534126586973, 0.9463771206164772, -0.005036134651005874, -0.000722589315437477, 0.02275696996999215, -2.3619402230675623, -3.166003947161792, -1.480364483334323]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 109, size: fix[77, 74, 41]-mov[77, 75, 39], affine para: [0.03373600290301129, -0.029938251070564394, 0.012778883568375927, 0.9989005372737116, 0.9461027685328359, 0.9431293033085529, 0.9517341858581155, -0.004737993687447565, -0.003180545186690214, 0.0253301649574893, -2.1995409237398174, -2.876914396076784, -1.428641308540776]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.549059 v2 -0.550906
 last params [-0.038264133636258905, 0.030165525314513882, -0.010654730904064554, 0.9987554124353609, 1.0480226689264747, 1.0428451481890941, 1.0364182636895456, -0.0035335000779913943, -0.00048171330895292654, -0.03534788391219927, 2.5698393689461305, 3.1021772735216877, 1.1844715371459371]
 my params [0.03373600290301129, -0.029938251070564394, 0.012778883568375927, 0.9989005372737116, 0.9461027685328359, 0.9431293033085529, 0.9517341858581155, -0.004737993687447565, -0.003180545186690214, 0.0253301649574893, -2.1995409237398174, -2.876914396076784, -1.428641308540776]
A=1.0544 0.0296404 0.0676667 
-0.027642 1.05935 0.0441442 
-0.0619379 -0.0716198 1.04644 

rotation R0.997937 0.0222091 0.0602299 
-0.0261618 0.9975 0.0656529 
-0.0586212 -0.0670932 0.996023 

upper R1.05658 0.00606307 0.00502874 
0 1.06217 -0.0246723 
0 0 1.04925 

s=0.250267 u=-0.033222 v=0.0297445 w-0.0121057 r=0.998932
m_Rotation from vnl-0.033222 0.0297445 -0.0121057 0.998932
 new params [-0.03322201869095648, 0.029744547556846752, -0.012105655133341203, 0.9989319358587594, 1.056579009900451, 1.0621689267078562, 1.049250555510437, 0.005738401311147143, 0.00475945233970499, -0.023228254271988918, 2.501139651144375, 3.0499382362313003, 1.1527061169260495]
outputput affine center: [10.1944, 2.22075, 15.3273]
output affine para: [-0.03322201869095648, 0.029744547556846752, -0.012105655133341203, 0.9989319358587594, 1.056579009900451, 1.0621689267078562, 1.049250555510437, 0.005738401311147143, 0.00475945233970499, -0.023228254271988918, 2.501139651144375, 3.0499382362313003, 1.1527061169260495]
initial measure value (MMI): rval = -0.423029
final measure value (MMI): rval = -0.540821
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -6597.42
 iteration 2 energy 0 : -7006.96
 iteration 3 energy 0 : -7312.03
 iteration 4 energy 0 : -7551.2
 iteration 5 energy 0 : -7774.64
 iteration 6 energy 0 : -7942.11
 iteration 7 energy 0 : -8072.69
 iteration 8 energy 0 : -8166.4
 iteration 9 energy 0 : -8238.23
 iteration 10 energy 0 : -8295
 iteration 11 energy 0 : -8290.16
 iteration 12 energy 0 : -8303.34
 E-Slope 0.00803436 iteration 13 energy 0 : -8302.79
 E-Slope 0.00591549 iteration 14 energy 0 : -8309.57
 E-Slope 0.0041995 iteration 15 energy 0 : -8309.13
 E-Slope 0.00282697 iteration 16 energy 0 : -8316.31
 E-Slope 0.00181963 iteration 17 energy 0 : -8316.5
 E-Slope 0.00111595 iteration 18 energy 0 : -8323.76
 E-Slope 0.000651538 iteration 19 energy 0 : -8324.17
 E-Slope 0.000382446 iteration 20 energy 0 : -8331.46
 E-Slope 0.00025662 iteration 21 energy 0 : -8331.66
 E-Slope 0.000267468 iteration 22 energy 0 : -8338.81
 E-Slope 0.000247076 iteration 23 energy 0 : -8338.69
 E-Slope 0.000258341 iteration 24 energy 0 : -8345.62
 E-Slope 0.000248089 iteration 25 energy 0 : -8344.79
 E-Slope 0.000252418 iteration 26 energy 0 : -8350.98
 E-Slope 0.000234753 iteration 27 energy 0 : -8349.68
 E-Slope 0.000233419 iteration 28 energy 0 : -8355.84
 E-Slope 0.000213899 iteration 29 energy 0 : -8354.96
 E-Slope 0.000211045 iteration 30 energy 0 : -8360.66
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -13286.9
 iteration 2 energy 0 : -13457.9
 iteration 3 energy 0 : -13621.5
 iteration 4 energy 0 : -13741.3
 iteration 5 energy 0 : -13775.5
 iteration 6 energy 0 : -13804.7
 iteration 7 energy 0 : -13826.7
 iteration 8 energy 0 : -13849.7
 iteration 9 energy 0 : -13865.4
 iteration 10 energy 0 : -13883.6
 iteration 11 energy 0 : -13895.2
 iteration 12 energy 0 : -13910.9
 E-Slope 0.00135032 iteration 13 energy 0 : -13920.3
 E-Slope 0.000948302 iteration 14 energy 0 : -13934.1
 E-Slope 0.00072483 iteration 15 energy 0 : -13941.3
 E-Slope 0.000641078 iteration 16 energy 0 : -13953
 E-Slope 0.000568695 iteration 17 energy 0 : -13957.7
 E-Slope 0.000514336 iteration 18 energy 0 : -13968.3
 E-Slope 0.000460342 iteration 19 energy 0 : -13971.5
 E-Slope 0.000421606 iteration 20 energy 0 : -13981.3
 E-Slope 0.000380144 iteration 21 energy 0 : -13984.2
 E-Slope 0.000351481 iteration 22 energy 0 : -13993.1
 E-Slope 0.000317462 iteration 23 energy 0 : -13995
 E-Slope 0.000297055 iteration 24 energy 0 : -14004
 E-Slope 0.000269853 iteration 25 energy 0 : -14004.3
 E-Slope 0.000254832 iteration 26 energy 0 : -14011.9
 E-Slope 0.000232138 iteration 27 energy 0 : -14011.9
 E-Slope 0.000221364 iteration 28 energy 0 : -14019.5
 E-Slope 0.000200972 iteration 29 energy 0 : -14018.9
 E-Slope 0.000192143 iteration 30 energy 0 : -14026
 E-Slope 0.000173263 iteration 31 energy 0 : -14025.1
 E-Slope 0.000167005 iteration 32 energy 0 : -14032.5
 E-Slope 0.000150889 iteration 33 energy 0 : -14030.9
 E-Slope 0.000147536 iteration 34 energy 0 : -14038
 E-Slope 0.00013458 iteration 35 energy 0 : -14036.7
 E-Slope 0.000135817 iteration 36 energy 0 : -14044
 E-Slope 0.000125557 iteration 37 energy 0 : -14042.3
 E-Slope 0.000127897 iteration 38 energy 0 : -14049.4
 E-Slope 0.000118643 iteration 39 energy 0 : -14047.7
 E-Slope 0.000122413 iteration 40 energy 0 : -14054.6
 E-Slope 0.000114851 iteration 41 energy 0 : -14053.4
 E-Slope 0.00011941 iteration 42 energy 0 : -14060.2
 E-Slope 0.00011228 iteration 43 energy 0 : -14058.8
 E-Slope 0.000117056 iteration 44 energy 0 : -14065
 E-Slope 0.000108749 iteration 45 energy 0 : -14063.2
 E-Slope 0.000113145 iteration 46 energy 0 : -14070
 E-Slope 0.000104874 iteration 47 energy 0 : -14068
 E-Slope 0.00011 iteration 48 energy 0 : -14075
 E-Slope 9.98452e-05 iteration 49 energy 0 : -14071.4
 Converged due to oscillation in optimization  metric 0 bad 12  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -87106.1
 iteration 2 energy 0 : -88376.2
 iteration 3 energy 0 : -89712.1
 iteration 4 energy 0 : -90933.5
 iteration 5 energy 0 : -91877.1
 iteration 6 energy 0 : -92706.5
 iteration 7 energy 0 : -93411.2
 iteration 8 energy 0 : -94021.1
 iteration 9 energy 0 : -94583.4
 iteration 10 energy 0 : -95081.4
 iteration 11 energy 0 : -95546.3
 iteration 12 energy 0 : -95999.9
 E-Slope 0.00427476 iteration 13 energy 0 : -96402.6
 E-Slope 0.00373543 iteration 14 energy 0 : -96767.8
 E-Slope 0.00330809 iteration 15 energy 0 : -97144
 E-Slope 0.00299267 iteration 16 energy 0 : -97514.8
 E-Slope 0.00274592 iteration 17 energy 0 : -97873.8
 E-Slope 0.00255853 iteration 18 energy 0 : -98231.4
 E-Slope 0.00241092 iteration 19 energy 0 : -98565.1
 E-Slope 0.00229304 iteration 20 energy 0 : -98902
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1756_12032015_Aug2_Ref_vimp2_2398_07292016/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1756_12032015_Aug2_Ref_vimp2_2398_07292016/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1756_12032015_Aug2_Ref_vimp2_2398_07292016/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1756_12032015_Aug2_Ref_vimp2_2398_07292016/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1761_12042015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_676_04252014/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1761_12042015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_676_04252014/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547778735
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [6.6839, -23.2153, 19.038]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 10.175084589235329, 6.750942380556207, -24.678156982395244]
level 0, iter 162, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.025254408542516163, 0.07658624729447003, -0.0121284903651452, 0.9966692838128304, 1.042708586897795, 1.0439310384418319, 1.0546015698575384, 0.004408312504435924, 0.017769500680725997, -0.04052368484638557, 10.798745860350587, 6.246294902473668, -23.801929630080362]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 200, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.028602992460183784, 0.07776674023234216, -0.009785350905300399, 0.996513145845863, 1.0392479639718943, 1.045781710795095, 1.051436335341133, 0.009666609594088667, 0.010823175656313976, -0.07850888634470429, 10.783290070715351, 6.142806818601468, -23.66120127451534]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 119, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.027902548517151637, 0.07639884950242186, -0.007336259659494311, 0.9966598431135684, 1.0364373972440624, 1.0445393362987565, 1.052382432204673, 0.014723791839724665, 0.013172640464638658, -0.0886805671368595, 10.829891097026216, 6.289826239055908, -23.63529884767045]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 205, size: fix[39, 43, 32]-mov[40, 45, 32], affine para: [-0.028826928850692237, 0.07583966464284998, -0.0015831166615886535, 0.9967019851397573, 1.0358012104184153, 1.0401771171139522, 1.0498979068089072, 0.021461358164268952, 0.012733151511598697, -0.10528822125846585, 10.837035206606151, 6.34306466169352, -23.570775364342477]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 168, size: fix[77, 85, 44]-mov[79, 89, 45], affine para: [-0.03386620660543052, 0.07551644956473581, -0.000018515733728066038, 0.9965692878834179, 1.0424692326558562, 1.0397873706386422, 1.0534298450503718, 0.026160653997419098, 0.010064606504309098, -0.1155977681394924, 10.825525408198294, 5.998366611086077, -23.67110253679059]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 1023, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.03875627133445512, -0.07808221092147455, 0.004250064338368195, 0.9961842483812842, 0.9590128645888947, 0.952316491816105, 0.9455165121542133, -0.02192420959231068, -0.015864617798757013, 0.10942013209999113, -13.871633374231948, -5.099490545296638, 20.06908021337445]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 186, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.03274202231197371, -0.07658316738928214, 0.005106763072567233, 0.9965123679204729, 0.9525735037593148, 0.9451964490003874, 0.9395896809898229, -0.02088888082376666, -0.014549692566488606, 0.11117056078436141, -13.711914181984117, -4.922828720320652, 20.04108269471139]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 143, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.035913616409996935, -0.07672837377970654, 0.0053047765359268235, 0.9963909012829157, 0.9526691322468644, 0.9459286796823204, 0.9408471376311714, -0.020431653818746058, -0.01630549059249888, 0.1108858832598205, -13.786568645873333, -5.254638269007969, 20.032821431793938]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 366, size: fix[40, 45, 32]-mov[39, 43, 32], affine para: [0.03147720287917472, -0.07506541454931506, 0.005092664109672753, 0.9966686681188032, 0.9577853330860934, 0.9492456851586174, 0.9389613829269339, -0.017962251297473038, -0.013573591167714632, 0.12373154590760327, -13.73288282412738, -4.521074427128169, 20.069319636224964]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 546, size: fix[79, 89, 45]-mov[77, 85, 44], affine para: [0.0361276189618962, -0.07794444864086261, 0.005630468845788382, 0.99628698470611, 0.9509171072129403, 0.9378103397719011, 0.9440972375564847, -0.023337793856906656, -0.010263360555133985, 0.12187806186745048, -13.666099845949278, -4.799249448922984, 20.11652384620209]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.535365 v2 -0.542647
 last params [-0.03386620660543052, 0.07551644956473581, -0.000018515733728066038, 0.9965692878834179, 1.0424692326558562, 1.0397873706386422, 1.0534298450503718, 0.026160653997419098, 0.010064606504309098, -0.1155977681394924, 10.825525408198294, 5.998366611086077, -23.67110253679059]
 my params [0.0361276189618962, -0.07794444864086261, 0.005630468845788382, 0.99628698470611, 0.9509171072129403, 0.9378103397719011, 0.9440972375564847, -0.023337793856906656, -0.010263360555133985, 0.12187806186745048, -13.666099845949278, -4.799249448922984, 20.11652384620209]
A=1.03714 0.0301219 0.173266 
0.00202873 1.07287 -0.0513645 
-0.164076 -0.0771792 1.04358 

rotation R0.987715 -0.012299 0.155784 
0.00193206 0.997783 0.0665238 
-0.156257 -0.0654055 0.985548 

upper R1.05004 0.0438845 0.00797196 
0 1.07517 -0.121637 
0 0 1.05207 

s=0.25091 u=-0.0331024 v=0.0782942 w0.0035707 r=0.996374
m_Rotation from vnl-0.0331024 0.0782942 0.0035707 0.996374
 new params [-0.033102363261859565, 0.07829424908707999, 0.0035707022674594494, 0.9963741737879837, 1.0500354164305403, 1.0751679089529538, 1.0520717399283845, 0.041793343542882125, 0.0075920865816583765, -0.11313339580465306, 10.832639775036858, 6.209966064571786, -23.60583243364741]
outputput affine center: [6.6839, -23.2153, 19.038]
output affine para: [-0.033102363261859565, 0.07829424908707999, 0.0035707022674594494, 0.9963741737879837, 1.0500354164305403, 1.0751679089529538, 1.0520717399283845, 0.041793343542882125, 0.0075920865816583765, -0.11313339580465306, 10.832639775036858, 6.209966064571786, -23.60583243364741]
initial measure value (MMI): rval = -0.204848
final measure value (MMI): rval = -0.558616
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -6823.12
 iteration 2 energy 0 : -7219.53
 iteration 3 energy 0 : -7513.17
 iteration 4 energy 0 : -7705.62
 iteration 5 energy 0 : -7846.17
 iteration 6 energy 0 : -7974.05
 iteration 7 energy 0 : -8096.82
 iteration 8 energy 0 : -8201.37
 iteration 9 energy 0 : -8278.59
 iteration 10 energy 0 : -8344.57
 iteration 11 energy 0 : -8394.02
 iteration 12 energy 0 : -8431.33
 E-Slope 0.00742549 iteration 13 energy 0 : -8422.49
 E-Slope 0.00576808 iteration 14 energy 0 : -8410.35
 E-Slope 0.00446815 iteration 15 energy 0 : -8406.18
 E-Slope 0.00333306 iteration 16 energy 0 : -8397.84
 E-Slope 0.00231856 iteration 17 energy 0 : -8396.73
 E-Slope 0.001445 iteration 18 energy 0 : -8391.26
 E-Slope 0.000774488 iteration 19 energy 0 : -8393.52
 E-Slope 0.000293367 iteration 20 energy 0 : -8390.41
 E-Slope -9.52929e-06 iteration 21 energy 0 : -8397.41
 Converged due to oscillation in optimization  metric 0 bad 7  
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -15561.1
 iteration 2 energy 0 : -15786.1
 iteration 3 energy 0 : -15967.6
 iteration 4 energy 0 : -16106.7
 iteration 5 energy 0 : -16238.6
 iteration 6 energy 0 : -16357.2
 iteration 7 energy 0 : -16459.1
 iteration 8 energy 0 : -16547.9
 iteration 9 energy 0 : -16577.6
 iteration 10 energy 0 : -16555.5
 iteration 11 energy 0 : -16562.5
 iteration 12 energy 0 : -16562.1
 E-Slope 0.00237426 iteration 13 energy 0 : -16557.6
 E-Slope 0.00174928 iteration 14 energy 0 : -16586.9
 E-Slope 0.00121275 iteration 15 energy 0 : -16574.8
 E-Slope 0.000823036 iteration 16 energy 0 : -16624
 E-Slope 0.00051263 iteration 17 energy 0 : -16605.7
 E-Slope 0.000373691 iteration 18 energy 0 : -16659.9
 E-Slope 0.000299878 iteration 19 energy 0 : -16637.1
 E-Slope 0.00037761 iteration 20 energy 0 : -16691.5
 E-Slope 0.000429772 iteration 21 energy 0 : -16662.5
 E-Slope 0.00046593 iteration 22 energy 0 : -16694.9
 E-Slope 0.00044778 iteration 23 energy 0 : -16669.4
 E-Slope 0.000456989 iteration 24 energy 0 : -16717.1
 E-Slope 0.000391126 iteration 25 energy 0 : -16686.8
 E-Slope 0.000375099 iteration 26 energy 0 : -16720
 E-Slope 0.000281796 iteration 27 energy 0 : -16690.4
 E-Slope 0.000266209 iteration 28 energy 0 : -16720.4
 E-Slope 0.000177331 iteration 29 energy 0 : -16694.5
 E-Slope 0.000199817 iteration 30 energy 0 : -16742.5
 E-Slope 0.000140637 iteration 31 energy 0 : -16711.1
 E-Slope 0.000179373 iteration 32 energy 0 : -16744.8
 E-Slope 0.000132926 iteration 33 energy 0 : -16713.8
 E-Slope 0.000155114 iteration 34 energy 0 : -16744.6
 E-Slope 9.75877e-05 iteration 35 energy 0 : -16714.3
 Converged due to oscillation in optimization  metric 0 bad 14  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -115276
 iteration 2 energy 0 : -117406
 iteration 3 energy 0 : -119498
 iteration 4 energy 0 : -121076
 iteration 5 energy 0 : -122289
 iteration 6 energy 0 : -123260
 iteration 7 energy 0 : -124039
 iteration 8 energy 0 : -124691
 iteration 9 energy 0 : -125257
 iteration 10 energy 0 : -125745
 iteration 11 energy 0 : -126167
 iteration 12 energy 0 : -126539
 E-Slope 0.00366584 iteration 13 energy 0 : -126914
 E-Slope 0.00300579 iteration 14 energy 0 : -127223
 E-Slope 0.00252873 iteration 15 energy 0 : -127526
 E-Slope 0.00217715 iteration 16 energy 0 : -127808
 E-Slope 0.00191691 iteration 17 energy 0 : -128108
 E-Slope 0.00171652 iteration 18 energy 0 : -128346
 E-Slope 0.00156727 iteration 19 energy 0 : -128641
 E-Slope 0.00144657 iteration 20 energy 0 : -128860
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1761_12042015_Aug1_Ref_vimp2_676_04252014/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1761_12042015_Aug1_Ref_vimp2_676_04252014/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1761_12042015_Aug1_Ref_vimp2_676_04252014/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1761_12042015_Aug1_Ref_vimp2_676_04252014/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1761_12042015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2039_03182016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1761_12042015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2039_03182016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547778838
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [6.6839, -23.2153, 19.038]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 6.668775187592762, 30.716310646553524, -13.688506580951998]
level 0, iter 129, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.06349606331752478, 0.052447586479406866, 0.03854445498906649, 0.9958573319533566, 1.0040079133314197, 1.033990803744213, 1.0575544246084554, -0.01475002131119856, 0.021247579701683766, -0.02970398239208447, 5.59573514110055, 28.238965374439005, -13.417802779138334]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 41, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.06301006496074975, 0.05208837373331147, 0.036337819374700424, 0.9959900079411201, 0.9968990347751484, 1.028276381160623, 1.0527254841665268, -0.013813461497525738, 0.020840021312656647, -0.03061330714688398, 5.607857889585077, 28.29975258804977, -13.59506149382509]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 171, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.061974341661156146, 0.05504690439421879, 0.045218048996985165, 0.9955321930189833, 0.99143499519001, 1.0292035508774853, 1.0626848986172908, -0.007800046240009051, 0.021961760870489535, -0.03684320742869355, 5.812722484645416, 28.345826460979687, -13.246730828545193]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 116, size: fix[39, 43, 32]-mov[38, 40, 32], affine para: [0.06126491941497344, 0.05363240833644329, 0.04741744006179349, 0.995550983527763, 0.990881310202129, 1.025796913849165, 1.0587190129619495, -0.003869831854647608, 0.02174591445125929, -0.04194644134070363, 5.748853792489166, 28.348991637987684, -13.495316332989212]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 50, size: fix[77, 85, 44]-mov[75, 80, 41], affine para: [0.06400711185991571, 0.055568369020436825, 0.04600033133335123, 0.9953387441032236, 0.9977235052253698, 1.0285125111630364, 1.060178409006134, -0.0032471205585561207, 0.01749490113792631, -0.044012752044456906, 5.744364526226692, 28.08122355231081, -13.285416674689857]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 1303, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.061135301489510345, -0.05098979507944387, -0.04098785283335852, 0.9959831884272213, 0.9970550404244874, 0.9220305775493134, 0.9558730366172434, 0.011953527407269652, -0.03383490301088359, 0.05234332162860107, -9.868020128716193, -23.156109195486493, 14.862212734004064]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 114, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.05975346358013643, -0.05062641426378359, -0.039001182197134894, 0.9961653464943432, 0.991267260911187, 0.9177369790040881, 0.9564822686362918, 0.01355971472327708, -0.033491091165445505, 0.05223011887499516, -9.75685756476587, -23.13785232697732, 14.84689474747707]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 329, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.06206933989994755, -0.04903402163150596, -0.04266969656150761, 0.9959529902371771, 0.9904460128606078, 0.9193866799176382, 0.9536254440660868, 0.015370637746213613, -0.0403117942585561, 0.05585340101997052, -9.992554489228628, -22.966874946529057, 14.917955250499787]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 1154, size: fix[38, 40, 32]-mov[39, 43, 32], affine para: [-0.06359059967630247, -0.04954711717143477, -0.03966377132633374, 0.9959558745531755, 0.9951933803465399, 0.9201968012466379, 0.9536048555169646, 0.008635264975405822, -0.0377389033505943, 0.03535517755497278, -9.78702058433999, -23.372080634149548, 15.140383374182184]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 2649, size: fix[75, 80, 41]-mov[77, 85, 44], affine para: [-0.06013413394524147, -0.04743481946613713, -0.04002506658407542, 0.9962589110677059, 0.9968536814140088, 0.9169639307944514, 0.9619703300647817, 0.005331474026429658, -0.04525445444341044, 0.06525848116925172, -9.79196323049975, -22.82852641605444, 15.084947379498448]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.47806 v2 -0.489294
 last params [0.06400711185991571, 0.055568369020436825, 0.04600033133335123, 0.9953387441032236, 0.9977235052253698, 1.0285125111630364, 1.060178409006134, -0.0032471205585561207, 0.01749490113792631, -0.044012752044456906, 5.744364526226692, 28.08122355231081, -13.285416674689857]
 my params [-0.06013413394524147, -0.04743481946613713, -0.04002506658407542, 0.9962589110677059, 0.9968536814140088, 0.9169639307944514, 0.9619703300647817, 0.005331474026429658, -0.04525445444341044, 0.06525848116925172, -9.79196323049975, -22.82852641605444, 15.084947379498448]
A=0.990679 -0.074173 0.147166 
0.0992792 1.07079 -0.19357 
-0.0932471 0.128502 1.02734 

rotation R0.990681 -0.0877314 0.104186 
0.0992794 0.988806 -0.111386 
-0.0932473 0.120692 0.988301 

upper R0.999998 0.0208429 0.0307801 
0 1.08082 -0.0803229 
0 0 1.05221 

s=0.251013 u=0.0582546 v=0.0495582 w0.0469421 r=0.995965
m_Rotation from vnl0.0582546 0.0495582 0.0469421 0.995965
 new params [0.058254609117049105, 0.04955821952041938, 0.04694211123916857, 0.9959652712755576, 0.9999977813635664, 1.0808180195964099, 1.0522114891731704, 0.020842965732464313, 0.03078021731315428, -0.07431677652856127, 5.787443032384914, 28.336649200613973, -13.476875625946107]
outputput affine center: [6.6839, -23.2153, 19.038]
output affine para: [0.058254609117049105, 0.04955821952041938, 0.04694211123916857, 0.9959652712755576, 0.9999977813635664, 1.0808180195964099, 1.0522114891731704, 0.020842965732464313, 0.03078021731315428, -0.07431677652856127, 5.787443032384914, 28.336649200613973, -13.476875625946107]
initial measure value (MMI): rval = -0.27955
final measure value (MMI): rval = -0.511534
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -5453.68
 iteration 2 energy 0 : -5892.59
 iteration 3 energy 0 : -6171.84
 iteration 4 energy 0 : -6380.09
 iteration 5 energy 0 : -6546.59
 iteration 6 energy 0 : -6683.89
 iteration 7 energy 0 : -6813.21
 iteration 8 energy 0 : -6928.95
 iteration 9 energy 0 : -7034.85
 iteration 10 energy 0 : -7124.02
 iteration 11 energy 0 : -7206.12
 iteration 12 energy 0 : -7270.1
 E-Slope 0.0103406 iteration 13 energy 0 : -7283.08
 E-Slope 0.00850758 iteration 14 energy 0 : -7293.7
 E-Slope 0.007017 iteration 15 energy 0 : -7310.52
 E-Slope 0.00571992 iteration 16 energy 0 : -7323.89
 E-Slope 0.00457088 iteration 17 energy 0 : -7339.05
 E-Slope 0.00355703 iteration 18 energy 0 : -7355.68
 E-Slope 0.00269588 iteration 19 energy 0 : -7364.48
 E-Slope 0.00202636 iteration 20 energy 0 : -7382.35
 E-Slope 0.00153612 iteration 21 energy 0 : -7391.66
 E-Slope 0.00123622 iteration 22 energy 0 : -7411.65
 E-Slope 0.00107709 iteration 23 energy 0 : -7413.71
 E-Slope 0.00107441 iteration 24 energy 0 : -7434.16
 E-Slope 0.00102922 iteration 25 energy 0 : -7432.91
 E-Slope 0.00100505 iteration 26 energy 0 : -7456.14
 E-Slope 0.000953466 iteration 27 energy 0 : -7455.18
 E-Slope 0.000930957 iteration 28 energy 0 : -7476.9
 E-Slope 0.000880264 iteration 29 energy 0 : -7475.47
 E-Slope 0.000872396 iteration 30 energy 0 : -7496.97
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -13887.6
 iteration 2 energy 0 : -14082.5
 iteration 3 energy 0 : -14337.7
 iteration 4 energy 0 : -14530.7
 iteration 5 energy 0 : -14680.6
 iteration 6 energy 0 : -14798.8
 iteration 7 energy 0 : -14873.6
 iteration 8 energy 0 : -14873.6
 iteration 9 energy 0 : -14943.6
 iteration 10 energy 0 : -14934.6
 iteration 11 energy 0 : -14996.6
 iteration 12 energy 0 : -14983.5
 E-Slope 0.0028438 iteration 13 energy 0 : -15036.8
 E-Slope 0.00205229 iteration 14 energy 0 : -15022.5
 E-Slope 0.00152958 iteration 15 energy 0 : -15068.4
 E-Slope 0.00114095 iteration 16 energy 0 : -15054.7
 E-Slope 0.00092648 iteration 17 energy 0 : -15094.7
 E-Slope 0.000786044 iteration 18 energy 0 : -15081.1
 E-Slope 0.000754066 iteration 19 energy 0 : -15127.1
 E-Slope 0.000644796 iteration 20 energy 0 : -15110.1
 E-Slope 0.00063125 iteration 21 energy 0 : -15144.1
 E-Slope 0.000548564 iteration 22 energy 0 : -15135.4
 E-Slope 0.00057739 iteration 23 energy 0 : -15185
 E-Slope 0.00051076 iteration 24 energy 0 : -15158.3
 E-Slope 0.000548638 iteration 25 energy 0 : -15208.9
 E-Slope 0.000490338 iteration 26 energy 0 : -15180.8
 E-Slope 0.000528112 iteration 27 energy 0 : -15231.6
 E-Slope 0.000464842 iteration 28 energy 0 : -15198
 E-Slope 0.000482067 iteration 29 energy 0 : -15241.8
 E-Slope 0.000409201 iteration 30 energy 0 : -15213.9
 E-Slope 0.000422597 iteration 31 energy 0 : -15253.2
 E-Slope 0.000349261 iteration 32 energy 0 : -15227.7
 E-Slope 0.000372216 iteration 33 energy 0 : -15284.1
 E-Slope 0.000303872 iteration 34 energy 0 : -15245.1
 E-Slope 0.000346728 iteration 35 energy 0 : -15294
 E-Slope 0.000274427 iteration 36 energy 0 : -15253.1
 E-Slope 0.000315942 iteration 37 energy 0 : -15301.6
 E-Slope 0.00024347 iteration 38 energy 0 : -15261.6
 E-Slope 0.000283048 iteration 39 energy 0 : -15307.2
 E-Slope 0.000202648 iteration 40 energy 0 : -15265.9
 E-Slope 0.000222199 iteration 41 energy 0 : -15307
 E-Slope 0.000135034 iteration 42 energy 0 : -15266.4
 E-Slope 0.00014782 iteration 43 energy 0 : -15308.9
 E-Slope 5.87329e-05 iteration 44 energy 0 : -15266.7
 Converged due to oscillation in optimization  metric 0 bad 19  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -102464
 iteration 2 energy 0 : -104302
 iteration 3 energy 0 : -106423
 iteration 4 energy 0 : -108498
 iteration 5 energy 0 : -110141
 iteration 6 energy 0 : -111555
 iteration 7 energy 0 : -112845
 iteration 8 energy 0 : -113867
 iteration 9 energy 0 : -114707
 iteration 10 energy 0 : -115462
 iteration 11 energy 0 : -116164
 iteration 12 energy 0 : -116831
 E-Slope 0.00585163 iteration 13 energy 0 : -117428
 E-Slope 0.00502955 iteration 14 energy 0 : -117947
 E-Slope 0.00433718 iteration 15 energy 0 : -118450
 E-Slope 0.00380426 iteration 16 energy 0 : -118942
 E-Slope 0.00337593 iteration 17 energy 0 : -119385
 E-Slope 0.00303403 iteration 18 energy 0 : -119810
 E-Slope 0.00277698 iteration 19 energy 0 : -120226
 E-Slope 0.00256496 iteration 20 energy 0 : -120586
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1761_12042015_Aug2_Ref_vimp2_2039_03182016_Test_NewCases/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1761_12042015_Aug2_Ref_vimp2_2039_03182016_Test_NewCases/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1761_12042015_Aug2_Ref_vimp2_2039_03182016_Test_NewCases/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1761_12042015_Aug2_Ref_vimp2_2039_03182016_Test_NewCases/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1844_01142016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2520_09092016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1844_01142016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2520_09092016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547778973
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [14.1384, -0.565869, 29.3055]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -3.0871144388045213, -12.13434191831697, -33.029180797158396]
level 0, iter 397, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.11992361729636922, -0.006227983485820822, 0.02112691593847537, 0.9925387607842744, 1.184374067812108, 1.0354970610454577, 1.0124918311678233, 0.017584695148714018, 0.010646472097324541, 0.017301268774357354, -1.8478304523625562, -10.981923755477101, -32.04711414649186]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 137, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.12404745196458342, -0.007246684466125381, 0.019617664648856198, 0.9920558766818872, 1.195041825563688, 1.0311663958170194, 1.0161147563604986, 0.01985443306974377, 0.01246143282920921, 0.016487646823413322, -1.8210407160291882, -10.968103575093215, -31.973692039907412]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 741, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.1175604248532609, -0.009207329354355209, 0.019957800520032504, 0.9928224704310855, 1.1734644813202022, 1.0314505943770778, 1.0157903031344644, 0.01770620050118885, 0.01337646997646885, 0.01107955032810415, -1.7802738104059297, -11.17859729924826, -31.85951148077872]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 35, size: fix[37, 36, 32]-mov[41, 46, 33], affine para: [-0.12402451018218373, -0.004722707008779692, 0.020522002666017315, 0.9920556760178103, 1.1850530178253649, 1.0374597970168307, 1.0217046080119305, 0.02198033902781974, 0.012735640764287553, 0.011289697800145094, -1.8613575615221307, -11.11387983800829, -32.00012429434449]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 68, size: fix[73, 72, 37]-mov[82, 91, 47], affine para: [-0.12363777158427035, -0.004603286331469134, 0.012753524046208792, 0.9922347800883766, 1.186728816904771, 1.0380301464269321, 1.0169618083970287, 0.021576065436547266, 0.007057964777380441, 0.006173966112963385, -1.9137129282024348, -11.402843746282525, -32.051863008181506]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 930, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.12671142947270744, 0.009181300668481225, -0.029120542894908473, 0.9914695715656249, 0.8427298523568313, 0.9618404687719522, 0.980823522687522, -0.050857893897531654, -0.013025361227365657, 0.007327882817244261, 1.667051832585501, 2.6682079779743275, 33.0396910410376]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 336, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.12793985667451765, 0.005272386175728302, -0.03157541023857975, 0.9912651454007567, 0.8425334673962106, 0.9538766459038822, 0.9852866538815619, -0.05449263188249359, -0.007422641989804364, 0.008696939145262091, 1.5432373476666792, 2.3385619887829128, 33.088458195320854]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 597, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.12010967597156269, 0.009203833277532462, -0.03823806461136969, 0.9919812526483464, 0.8422448575955309, 0.9464609289436884, 0.9762745977265624, -0.06282850218120353, -0.015286356102359849, 0.0049260140817384305, 1.6154577926230411, 2.8396010092042157, 32.63267208616112]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 493, size: fix[41, 46, 33]-mov[37, 36, 32], affine para: [0.1251409549192566, 0.009732996510081606, -0.02807138723324298, 0.9916940089562065, 0.8487041076752165, 0.9573521136376761, 0.9888888054546884, -0.05428187708976045, -0.007001727264739738, 0.0026142689358595633, 1.761042628937145, 2.342729439984496, 33.327430320566776]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 470, size: fix[82, 91, 47]-mov[73, 72, 37], affine para: [0.12367577016200483, 0.004868084992319863, -0.0358651254636844, 0.9916623913403274, 0.8452457240024304, 0.9616573257547099, 1.0000021553967766, -0.05556723913920364, -0.008949285036712953, 0.00712805104415736, 1.53303545169233, 2.6969174088031727, 33.68580025748688]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.447263 v2 -0.44745
 last params [-0.12363777158427035, -0.004603286331469134, 0.012753524046208792, 0.9922347800883766, 1.186728816904771, 1.0380301464269321, 1.0169618083970287, 0.021576065436547266, 0.007057964777380441, 0.006173966112963385, -1.9137129282024348, -11.402843746282525, -32.051863008181506]
 my params [0.12367577016200483, 0.004868084992319863, -0.0358651254636844, 0.9916623913403274, 0.8452457240024304, 0.9616573257547099, 1.0000021553967766, -0.05556723913920364, -0.008949285036712953, 0.00712805104415736, 1.53303545169233, 2.6969174088031727, 33.68580025748688]
A=1.18417 -0.0289656 0.000526212 
0.0752149 1.00714 0.247797 
0.000783698 -0.245638 0.969359 

rotation R0.997989 -0.0614265 -0.0156645 
0.063389 0.969562 0.236497 
0.000660478 -0.237015 0.971506 

upper R1.18656 0.0347718 0.016873 
0 1.03648 0.0104696 
0 0 1.00033 

s=0.251927 u=-0.11929 v=-0.00411269 w0.0314443 r=0.992353
m_Rotation from vnl-0.11929 -0.00411269 0.0314443 0.992353
 new params [-0.1192901764115374, -0.004112690012962557, 0.031444337487276194, 0.9923528572199245, 1.1865612632046565, 1.0364800792114532, 1.000333035787573, 0.029304658012206598, 0.014220047466624232, 0.010101112099764133, -1.7549899479513302, -11.178693439923588, -31.992374121060028]
outputput affine center: [14.1384, -0.565869, 29.3055]
output affine para: [-0.1192901764115374, -0.004112690012962557, 0.031444337487276194, 0.9923528572199245, 1.1865612632046565, 1.0364800792114532, 1.000333035787573, 0.029304658012206598, 0.014220047466624232, 0.010101112099764133, -1.7549899479513302, -11.178693439923588, -31.992374121060028]
initial measure value (MMI): rval = -0.207476
final measure value (MMI): rval = -0.46171
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -6224.29
 iteration 2 energy 0 : -6612.7
 iteration 3 energy 0 : -6896.24
 iteration 4 energy 0 : -7121.58
 iteration 5 energy 0 : -7292.48
 iteration 6 energy 0 : -7409.26
 iteration 7 energy 0 : -7498.93
 iteration 8 energy 0 : -7571.51
 iteration 9 energy 0 : -7634.44
 iteration 10 energy 0 : -7689.56
 iteration 11 energy 0 : -7740.08
 iteration 12 energy 0 : -7786.8
 E-Slope 0.00760854 iteration 13 energy 0 : -7831.12
 E-Slope 0.00603577 iteration 14 energy 0 : -7873.91
 E-Slope 0.00494679 iteration 15 energy 0 : -7915.58
 E-Slope 0.00423349 iteration 16 energy 0 : -7956.43
 E-Slope 0.00378387 iteration 17 energy 0 : -7995.6
 E-Slope 0.00347312 iteration 18 energy 0 : -8032.12
 E-Slope 0.00324024 iteration 19 energy 0 : -8065.35
 E-Slope 0.00304537 iteration 20 energy 0 : -8094.81
 E-Slope 0.00286689 iteration 21 energy 0 : -8120.71
 E-Slope 0.00268525 iteration 22 energy 0 : -8142.26
 E-Slope 0.00242197 iteration 23 energy 0 : -8131.95
 E-Slope 0.00209469 iteration 24 energy 0 : -8124.44
 E-Slope 0.00174221 iteration 25 energy 0 : -8126.42
 E-Slope 0.00136935 iteration 26 energy 0 : -8123.2
 E-Slope 0.00101993 iteration 27 energy 0 : -8128.93
 E-Slope 0.000692956 iteration 28 energy 0 : -8125.66
 E-Slope 0.000438437 iteration 29 energy 0 : -8134.93
 E-Slope 0.000236429 iteration 30 energy 0 : -8132.17
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -11360.4
 iteration 2 energy 0 : -11464.5
 iteration 3 energy 0 : -11547.5
 iteration 4 energy 0 : -11630.1
 iteration 5 energy 0 : -11715.5
 iteration 6 energy 0 : -11787.6
 iteration 7 energy 0 : -11851.8
 iteration 8 energy 0 : -11905.8
 iteration 9 energy 0 : -11954.4
 iteration 10 energy 0 : -11973.3
 iteration 11 energy 0 : -11958.5
 iteration 12 energy 0 : -11972.4
 E-Slope 0.002308 iteration 13 energy 0 : -11967.8
 E-Slope 0.00182109 iteration 14 energy 0 : -11970.5
 E-Slope 0.00136408 iteration 15 energy 0 : -11978.4
 E-Slope 0.000949807 iteration 16 energy 0 : -11976.6
 E-Slope 0.000644878 iteration 17 energy 0 : -11995
 E-Slope 0.000400625 iteration 18 energy 0 : -11986.4
 E-Slope 0.000285983 iteration 19 energy 0 : -12017.2
 E-Slope 0.000212111 iteration 20 energy 0 : -12001.5
 E-Slope 0.000254691 iteration 21 energy 0 : -12031.5
 E-Slope 0.000280827 iteration 22 energy 0 : -12013.2
 E-Slope 0.000323273 iteration 23 energy 0 : -12049.2
 E-Slope 0.000331059 iteration 24 energy 0 : -12028.4
 E-Slope 0.000357538 iteration 25 energy 0 : -12057.3
 E-Slope 0.00033281 iteration 26 energy 0 : -12039.1
 E-Slope 0.000329338 iteration 27 energy 0 : -12056.9
 E-Slope 0.00027892 iteration 28 energy 0 : -12044.5
 E-Slope 0.000261366 iteration 29 energy 0 : -12056.8
 E-Slope 0.000205964 iteration 30 energy 0 : -12054.4
 E-Slope 0.000196517 iteration 31 energy 0 : -12059.1
 E-Slope 0.000147328 iteration 32 energy 0 : -12059.6
 E-Slope 0.000152551 iteration 33 energy 0 : -12067.8
 E-Slope 0.000114061 iteration 34 energy 0 : -12067
 E-Slope 0.000139862 iteration 35 energy 0 : -12073.9
 E-Slope 0.000121318 iteration 36 energy 0 : -12074.5
 E-Slope 0.000151649 iteration 37 energy 0 : -12079.6
 E-Slope 0.000145257 iteration 38 energy 0 : -12082.4
 E-Slope 0.000159644 iteration 39 energy 0 : -12082.7
 E-Slope 0.000151008 iteration 40 energy 0 : -12088
 E-Slope 0.00015974 iteration 41 energy 0 : -12092.3
 E-Slope 0.000160061 iteration 42 energy 0 : -12096.4
 E-Slope 0.00016135 iteration 43 energy 0 : -12098.8
 E-Slope 0.000159822 iteration 44 energy 0 : -12103.5
 E-Slope 0.000163637 iteration 45 energy 0 : -12105
 E-Slope 0.000163086 iteration 46 energy 0 : -12110
 E-Slope 0.000157058 iteration 47 energy 0 : -12106.6
 E-Slope 0.000151157 iteration 48 energy 0 : -12112.4
 E-Slope 0.000145048 iteration 49 energy 0 : -12113.5
 E-Slope 0.000139005 iteration 50 energy 0 : -12116.8
 E-Slope 0.00012555 iteration 51 energy 0 : -12117.7
 E-Slope 0.000118352 iteration 52 energy 0 : -12121.5
 E-Slope 0.000111289 iteration 53 energy 0 : -12122.1
 E-Slope 0.000108853 iteration 54 energy 0 : -12125.4
 E-Slope 0.000103824 iteration 55 energy 0 : -12126.1
 E-Slope 0.000101313 iteration 56 energy 0 : -12127.2
 E-Slope 9.6567e-05 iteration 57 energy 0 : -12128.6
 Converged due to oscillation in optimization  metric 0 bad 12  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -71496.9
 iteration 2 energy 0 : -72806.7
 iteration 3 energy 0 : -74101.4
 iteration 4 energy 0 : -75193.5
 iteration 5 energy 0 : -76101.7
 iteration 6 energy 0 : -76938.9
 iteration 7 energy 0 : -77805.7
 iteration 8 energy 0 : -78498.9
 iteration 9 energy 0 : -79041.9
 iteration 10 energy 0 : -79485.7
 iteration 11 energy 0 : -79861.4
 iteration 12 energy 0 : -80230.6
 E-Slope 0.00509913 iteration 13 energy 0 : -80573.9
 E-Slope 0.00441152 iteration 14 energy 0 : -80894.9
 E-Slope 0.00383356 iteration 15 energy 0 : -81178.3
 E-Slope 0.0033403 iteration 16 energy 0 : -81429.9
 E-Slope 0.00290532 iteration 17 energy 0 : -81646
 E-Slope 0.0025329 iteration 18 energy 0 : -81849
 E-Slope 0.00223093 iteration 19 energy 0 : -81958.2
 E-Slope 0.00197737 iteration 20 energy 0 : -82073.2
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1844_01142016_Aug1_Ref_vimp2_2520_09092016/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1844_01142016_Aug1_Ref_vimp2_2520_09092016/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1844_01142016_Aug1_Ref_vimp2_2520_09092016/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1844_01142016_Aug1_Ref_vimp2_2520_09092016/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1844_01142016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_969_07142014/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1844_01142016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_969_07142014/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547779075
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [14.1384, -0.565869, 29.3055]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -5.631574216188879, -14.498040328569669, -1.9983607519951114]
level 0, iter 788, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.07208123663739652, -0.017070534985089886, 0.046778375532913995, 0.9961549456498463, 1.117132128682698, 0.9679437564890676, 1.0353987323830522, -0.04888957153098988, 0.1227080883789936, -0.01435944206711526, 0.09924201213297376, -16.18570270866046, -6.009495759626109]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 594, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.07473682376456448, -0.02274016469782821, 0.04120572509688026, 0.9960920541307117, 1.103001270514567, 0.9291005644590976, 1.0006846840443373, -0.06237078994015111, 0.14050610515486944, -0.024883334049886536, 0.21389683553196895, -15.842109755797713, -6.429951670171926]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 194, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.07106849472419276, -0.02813086067405018, 0.04750044052999498, 0.9959425846326841, 1.1025082588176105, 0.9318249574106869, 1.009289265034514, -0.07274004715302056, 0.15178606617290338, -0.025322072615907073, 0.20167264396399895, -15.927440821859152, -6.170229273594899]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 226, size: fix[37, 36, 32]-mov[38, 42, 32], affine para: [-0.07040582698070309, -0.029409298967536805, 0.05007110883694425, 0.9958267905219462, 1.096698385794602, 0.9177953389625878, 0.9847850490410129, -0.08060756520429788, 0.15913535879169458, -0.031128388711471427, 0.13448917327909313, -15.958179277733782, -6.44836009963757]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 253, size: fix[73, 72, 37]-mov[75, 84, 39], affine para: [-0.07610253996190197, -0.027146669397627606, 0.04194241623270494, 0.9958475262170036, 1.1018603875063784, 0.9266962092174086, 0.9767375113749353, -0.07733915678597689, 0.1531290495271127, -0.033233370287523184, 0.015572406458139974, -16.099408184814767, -6.583380651154297]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 172, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.050146958708965086, -0.01634529873445447, -0.06242410132334837, 0.9966550784075177, 0.8719731050558647, 0.907891651908911, 0.9029271088588872, 0.007760205220157594, -0.046771054718065815, -0.019399993009081275, 1.7150435560262383, 14.37776173617413, 5.720327124613155]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 974, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.07060754505754795, -0.0019880305824118566, -0.05589016225793039, 0.995935194718076, 0.8742042053989011, 0.9288774839943201, 0.8621780632295882, 0.010356244643357975, -0.08862691808428412, -0.01568710644186887, 1.6637573172392586, 13.978905477309928, 6.001809796172992]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 220, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.06878703653348811, 0.00047375620653787305, -0.049920296239386965, 0.9963814948017498, 0.8720951511282264, 0.9395687522498197, 0.8612565167304144, 0.007196496499269238, -0.10377882822499765, -0.009512999555163161, 1.3775194788062057, 14.411635841944884, 6.061953218300536]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 335, size: fix[38, 42, 32]-mov[37, 36, 32], affine para: [0.07183365697197693, 0.0032094243788360604, -0.05020911113443354, 0.9961469120969452, 0.8832250139534369, 0.9473340139705864, 0.8589471971638897, 0.006321642851121801, -0.11189463955511489, -0.015283225480168559, 1.138652462894207, 14.269372205957884, 6.1622420688291495]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 524, size: fix[75, 84, 39]-mov[73, 72, 37], affine para: [0.07365234522849476, 0.00773967808536422, -0.05773997777619439, 0.9955809984084077, 0.9024183830779676, 0.9705147126394432, 0.8690661881528494, 0.004889776475085631, -0.11591978388130404, -0.0064675966178588595, 1.3871088860682876, 14.825474339548991, 6.485016349608706]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.283225 v2 -0.280087
final [-0.07610253996190197, -0.027146669397627606, 0.04194241623270494, 0.9958475262170036, 1.1018603875063784, 0.9266962092174086, 0.9767375113749353, -0.07733915678597689, 0.1531290495271127, -0.033233370287523184, 0.015572406458139974, -16.099408184814767, -6.583380651154297]
outputput affine center: [14.1384, -0.565869, 29.3055]
output affine para: [-0.07610253996190197, -0.027146669397627606, 0.04194241623270494, 0.9958475262170036, 1.1018603875063784, 0.9266962092174086, 0.9767375113749353, -0.07733915678597689, 0.1531290495271127, -0.033233370287523184, 0.015572406458139974, -16.099408184814767, -6.583380651154297]
initial measure value (MMI): rval = -0.0615728
final measure value (MMI): rval = -0.294367
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -3946.07
 iteration 2 energy 0 : -4140.92
 iteration 3 energy 0 : -4289.21
 iteration 4 energy 0 : -4407.59
 iteration 5 energy 0 : -4518.19
 iteration 6 energy 0 : -4627.06
 iteration 7 energy 0 : -4722.25
 iteration 8 energy 0 : -4794.16
 iteration 9 energy 0 : -4854.29
 iteration 10 energy 0 : -4902.57
 iteration 11 energy 0 : -4945.34
 iteration 12 energy 0 : -4986.67
 E-Slope 0.00959954 iteration 13 energy 0 : -5024.62
 E-Slope 0.00820602 iteration 14 energy 0 : -5062.51
 E-Slope 0.00705802 iteration 15 energy 0 : -5095.98
 E-Slope 0.00607862 iteration 16 energy 0 : -5128.16
 E-Slope 0.00527013 iteration 17 energy 0 : -5156.73
 E-Slope 0.00465968 iteration 18 energy 0 : -5183.2
 E-Slope 0.00421356 iteration 19 energy 0 : -5206.91
 E-Slope 0.00385674 iteration 20 energy 0 : -5229.24
 E-Slope 0.00356028 iteration 21 energy 0 : -5250.78
 E-Slope 0.003291 iteration 22 energy 0 : -5271.37
 E-Slope 0.00303455 iteration 23 energy 0 : -5289.6
 E-Slope 0.00279664 iteration 24 energy 0 : -5306.57
 E-Slope 0.0025523 iteration 25 energy 0 : -5316.54
 E-Slope 0.00231261 iteration 26 energy 0 : -5325.12
 E-Slope 0.00205378 iteration 27 energy 0 : -5327.86
 E-Slope 0.0018066 iteration 28 energy 0 : -5335.46
 E-Slope 0.00157873 iteration 29 energy 0 : -5344.69
 E-Slope 0.00137393 iteration 30 energy 0 : -5353.11
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -7512.08
 iteration 2 energy 0 : -7565.37
 iteration 3 energy 0 : -7636.12
 iteration 4 energy 0 : -7687.55
 iteration 5 energy 0 : -7725.57
 iteration 6 energy 0 : -7755.91
 iteration 7 energy 0 : -7778.41
 iteration 8 energy 0 : -7801.77
 iteration 9 energy 0 : -7816.24
 iteration 10 energy 0 : -7827.44
 iteration 11 energy 0 : -7843.8
 iteration 12 energy 0 : -7859.02
 E-Slope 0.00183561 iteration 13 energy 0 : -7870.6
 E-Slope 0.00149671 iteration 14 energy 0 : -7878.73
 E-Slope 0.00126728 iteration 15 energy 0 : -7890.74
 E-Slope 0.00111338 iteration 16 energy 0 : -7903.12
 E-Slope 0.00100956 iteration 17 energy 0 : -7915.15
 E-Slope 0.000937365 iteration 18 energy 0 : -7924.91
 E-Slope 0.000883661 iteration 19 energy 0 : -7935.39
 E-Slope 0.000855669 iteration 20 energy 0 : -7946.14
 E-Slope 0.000833273 iteration 21 energy 0 : -7957.2
 E-Slope 0.000811592 iteration 22 energy 0 : -7969.34
 E-Slope 0.00079906 iteration 23 energy 0 : -7979.08
 E-Slope 0.000806578 iteration 24 energy 0 : -7993.75
 E-Slope 0.000805952 iteration 25 energy 0 : -8001.11
 E-Slope 0.000808254 iteration 26 energy 0 : -8016.3
 E-Slope 0.000805832 iteration 27 energy 0 : -8024.89
 E-Slope 0.000811376 iteration 28 energy 0 : -8037.97
 E-Slope 0.000809483 iteration 29 energy 0 : -8045.43
 E-Slope 0.000801705 iteration 30 energy 0 : -8055.65
 E-Slope 0.000801548 iteration 31 energy 0 : -8070.44
 E-Slope 0.000802144 iteration 32 energy 0 : -8082.47
 E-Slope 0.000811286 iteration 33 energy 0 : -8097.29
 E-Slope 0.000825159 iteration 34 energy 0 : -8109.75
 E-Slope 0.000831813 iteration 35 energy 0 : -8120.17
 E-Slope 0.000868365 iteration 36 energy 0 : -8140.68
 E-Slope 0.000859059 iteration 37 energy 0 : -8139.49
 E-Slope 0.000873156 iteration 38 energy 0 : -8157.49
 E-Slope 0.000819579 iteration 39 energy 0 : -8146.05
 E-Slope 0.000777468 iteration 40 energy 0 : -8159.83
 E-Slope 0.000688478 iteration 41 energy 0 : -8155.19
 E-Slope 0.000620812 iteration 42 energy 0 : -8172.93
 E-Slope 0.000548445 iteration 43 energy 0 : -8174.07
 E-Slope 0.000517383 iteration 44 energy 0 : -8194.33
 E-Slope 0.000486292 iteration 45 energy 0 : -8194.34
 E-Slope 0.000499241 iteration 46 energy 0 : -8213.46
 E-Slope 0.000489041 iteration 47 energy 0 : -8208.33
 E-Slope 0.000533983 iteration 48 energy 0 : -8223.83
 E-Slope 0.000532962 iteration 49 energy 0 : -8221.92
 E-Slope 0.000581704 iteration 50 energy 0 : -8238.82
 E-Slope 0.00054419 iteration 51 energy 0 : -8231.8
 E-Slope 0.000542641 iteration 52 energy 0 : -8247.46
 E-Slope 0.000477038 iteration 53 energy 0 : -8241.54
 E-Slope 0.000445552 iteration 54 energy 0 : -8250.88
 E-Slope 0.000368148 iteration 55 energy 0 : -8243.92
 E-Slope 0.00034868 iteration 56 energy 0 : -8257.61
 E-Slope 0.000288539 iteration 57 energy 0 : -8251.39
 E-Slope 0.00029514 iteration 58 energy 0 : -8267.51
 E-Slope 0.00025212 iteration 59 energy 0 : -8261.15
 E-Slope 0.000255033 iteration 60 energy 0 : -8271.34
 E-Slope 0.000206016 iteration 61 energy 0 : -8259.45
 E-Slope 0.000210539 iteration 62 energy 0 : -8269.86
 E-Slope 0.000159152 iteration 63 energy 0 : -8260.37
 E-Slope 0.000156775 iteration 64 energy 0 : -8269.11
 E-Slope 0.000111453 iteration 65 energy 0 : -8262.08
 E-Slope 0.000115246 iteration 66 energy 0 : -8275.71
 E-Slope 8.6695e-05 iteration 67 energy 0 : -8273.1
 Converged due to oscillation in optimization  metric 0 bad 14  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -49815.2
 iteration 2 energy 0 : -50726.4
 iteration 3 energy 0 : -51772.2
 iteration 4 energy 0 : -52778.4
 iteration 5 energy 0 : -53595.6
 iteration 6 energy 0 : -54267.1
 iteration 7 energy 0 : -54803.8
 iteration 8 energy 0 : -55285.1
 iteration 9 energy 0 : -55690.9
 iteration 10 energy 0 : -56027
 iteration 11 energy 0 : -56361.8
 iteration 12 energy 0 : -56658.9
 E-Slope 0.00563721 iteration 13 energy 0 : -56911.9
 E-Slope 0.00479619 iteration 14 energy 0 : -57153.6
 E-Slope 0.00409552 iteration 15 energy 0 : -57369.5
 E-Slope 0.00355086 iteration 16 energy 0 : -57556.3
 E-Slope 0.00312125 iteration 17 energy 0 : -57731
 E-Slope 0.0027808 iteration 18 energy 0 : -57907.3
 E-Slope 0.00249579 iteration 19 energy 0 : -58066.3
 E-Slope 0.00226195 iteration 20 energy 0 : -58217
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1844_01142016_Aug2_Ref_vimp2_969_07142014/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1844_01142016_Aug2_Ref_vimp2_969_07142014/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1844_01142016_Aug2_Ref_vimp2_969_07142014/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1844_01142016_Aug2_Ref_vimp2_969_07142014/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1847_01152016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2926_02222017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1847_01152016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2926_02222017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547779187
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [16.2578, -15.0341, 12.1045]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -1.8443428450520614, 26.93893262396001, 0.021193542331014115]
level 0, iter 926, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.15457052509359182, 0.0019303810241137268, -0.05762041609780491, 0.9862981871878854, 0.9453614761881989, 0.8915204604120851, 0.9527213850293932, 0.0499542187370131, 0.03509418817880407, -0.06270440728045838, -3.640017880650732, 24.676150258237936, 3.207804467529996]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 179, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.15734474979071034, 0.0013745252552559632, -0.06006454899500452, 0.9857144568015871, 0.9391034448331963, 0.8853798403179989, 0.9555590904645003, 0.06268059555660652, 0.03504060574439581, -0.06458798978088916, -3.756060656582499, 24.518852253203647, 3.150342983773303]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 167, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.15201209071230953, 0.0019040177341482524, -0.05201978762626195, 0.9870069101526389, 0.9387808048809599, 0.8792931080307536, 0.9582813200278036, 0.06985200287921699, 0.035553728631578206, -0.0652929149896522, -3.717096427308521, 24.540185615431554, 3.298398317227101]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 111, size: fix[42, 45, 34]-mov[37, 42, 32], affine para: [0.15448469454069313, 0.004567640557760948, -0.05462097440182373, 0.9864736007455035, 0.9395028492237074, 0.8806054015515551, 0.9619125051740103, 0.07452581095601472, 0.028079648592315008, -0.0678981402850555, -3.668640368007285, 24.56049987300406, 3.178071489385088]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 57, size: fix[84, 89, 48]-mov[74, 83, 37], affine para: [0.15117855383824935, 0.0071668983081314055, -0.05274996329729294, 0.9870719942335264, 0.9512027041695783, 0.8867363154046661, 0.9604299693461882, 0.0780542344187393, 0.0257855183897027, -0.06698873876709881, -3.5829571167411562, 24.696860070679886, 3.156555947254361]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 2623, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.14134597309946356, -0.0042321341784899375, 0.05208260491298908, 0.9885801976543626, 1.0543537768944597, 1.1156145413473166, 1.0598309675862594, -0.06952831678247126, -0.050895315983979734, 0.13058799723991155, 8.716567517453978, -26.728802053396866, 4.433311089533028]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 597, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.13861064531443582, -0.004316670531412168, 0.05428358656510033, 0.9888486980274931, 1.0549426702007523, 1.1180803194610187, 1.064740712198538, -0.06851387079287197, -0.044589341094841944, 0.12211192315988605, 8.789841341587698, -26.918893307498944, 4.320499948918015]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 270, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.13745670800310866, -0.0041232146674329735, 0.052572243762225204, 0.9891030339209154, 1.0514483288075371, 1.1125305812825064, 1.0704261870058212, -0.07531420084449707, -0.04646642975984579, 0.12216033046580088, 8.798064688657293, -26.71292381931746, 4.221399924866919]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 677, size: fix[37, 42, 32]-mov[42, 45, 34], affine para: [-0.13835597589767365, -0.004308211562137338, 0.05516896605370601, 0.9888354000697502, 1.0524530888512174, 1.1217223708581117, 1.067450479958626, -0.07993270700150298, -0.04787051951079074, 0.11491476174361066, 9.237579975796027, -26.780773990097472, 4.3942457708403255]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 170, size: fix[74, 83, 37]-mov[84, 89, 48], affine para: [-0.141103451365335, -0.004765161959082895, 0.04891338693534761, 0.9887742865906289, 1.0419589729231975, 1.1118655631477063, 1.0670416609741078, -0.07786095263398088, -0.04610107339932478, 0.1144718746327628, 8.624519920014786, -26.94591511069877, 4.293767867228691]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.448218 v2 -0.440568
final [0.15117855383824935, 0.0071668983081314055, -0.05274996329729294, 0.9870719942335264, 0.9512027041695783, 0.8867363154046661, 0.9604299693461882, 0.0780542344187393, 0.0257855183897027, -0.06698873876709881, -3.5829571167411562, 24.696860070679886, 3.156555947254361]
outputput affine center: [16.2578, -15.0341, 12.1045]
output affine para: [0.15117855383824935, 0.0071668983081314055, -0.05274996329729294, 0.9870719942335264, 0.9512027041695783, 0.8867363154046661, 0.9604299693461882, 0.0780542344187393, 0.0257855183897027, -0.06698873876709881, -3.5829571167411562, 24.696860070679886, 3.156555947254361]
initial measure value (MMI): rval = -0.139642
final measure value (MMI): rval = -0.458588
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -4846.01
 iteration 2 energy 0 : -5220.61
 iteration 3 energy 0 : -5541.58
 iteration 4 energy 0 : -5856.76
 iteration 5 energy 0 : -6128.63
 iteration 6 energy 0 : -6309.14
 iteration 7 energy 0 : -6445.37
 iteration 8 energy 0 : -6558.05
 iteration 9 energy 0 : -6657.76
 iteration 10 energy 0 : -6749.88
 iteration 11 energy 0 : -6845.53
 iteration 12 energy 0 : -6945.86
 E-Slope 0.0137003 iteration 13 energy 0 : -7039.55
 E-Slope 0.0114086 iteration 14 energy 0 : -7121.65
 E-Slope 0.00968277 iteration 15 energy 0 : -7206.82
 E-Slope 0.00858112 iteration 16 energy 0 : -7300.79
 E-Slope 0.00800002 iteration 17 energy 0 : -7394.66
 E-Slope 0.00763588 iteration 18 energy 0 : -7474.06
 E-Slope 0.00732976 iteration 19 energy 0 : -7538.45
 E-Slope 0.00702415 iteration 20 energy 0 : -7601.22
 E-Slope 0.0067154 iteration 21 energy 0 : -7671.03
 E-Slope 0.00635946 iteration 22 energy 0 : -7727.58
 E-Slope 0.00579903 iteration 23 energy 0 : -7712.92
 E-Slope 0.00512614 iteration 24 energy 0 : -7711.16
 E-Slope 0.00438002 iteration 25 energy 0 : -7714.8
 E-Slope 0.00357316 iteration 26 energy 0 : -7718.5
 E-Slope 0.00278079 iteration 27 energy 0 : -7729.24
 E-Slope 0.00208242 iteration 28 energy 0 : -7742.17
 E-Slope 0.00148845 iteration 29 energy 0 : -7741.08
 E-Slope 0.00105937 iteration 30 energy 0 : -7762.58
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -17708.3
 iteration 2 energy 0 : -18050.9
 iteration 3 energy 0 : -18424.2
 iteration 4 energy 0 : -18664.5
 iteration 5 energy 0 : -18878.3
 iteration 6 energy 0 : -19054.6
 iteration 7 energy 0 : -19229.5
 iteration 8 energy 0 : -19379.5
 iteration 9 energy 0 : -19501.9
 iteration 10 energy 0 : -19523.6
 iteration 11 energy 0 : -19492.5
 iteration 12 energy 0 : -19635.9
 E-Slope 0.00417563 iteration 13 energy 0 : -19745.1
 E-Slope 0.00343541 iteration 14 energy 0 : -19793.7
 E-Slope 0.00284135 iteration 15 energy 0 : -19779
 E-Slope 0.00226897 iteration 16 energy 0 : -19738.9
 E-Slope 0.00191906 iteration 17 energy 0 : -19888.4
 E-Slope 0.00169215 iteration 18 energy 0 : -19968.3
 E-Slope 0.00149569 iteration 19 energy 0 : -19944.2
 E-Slope 0.00141599 iteration 20 energy 0 : -20010.3
 E-Slope 0.00132039 iteration 21 energy 0 : -19963.3
 E-Slope 0.00125024 iteration 22 energy 0 : -20050.9
 E-Slope 0.0010049 iteration 23 energy 0 : -19999.7
 E-Slope 0.000875033 iteration 24 energy 0 : -20042.5
 E-Slope 0.000761621 iteration 25 energy 0 : -20010.2
 E-Slope 0.000643805 iteration 26 energy 0 : -20004.4
 E-Slope 0.000506714 iteration 27 energy 0 : -20040.8
 E-Slope 0.000276811 iteration 28 energy 0 : -20028.5
 E-Slope 0.000198059 iteration 29 energy 0 : -20051
 E-Slope 0.000176296 iteration 30 energy 0 : -20041
 E-Slope 0.000123985 iteration 31 energy 0 : -20047
 E-Slope 0.00014168 iteration 32 energy 0 : -20058.1
 E-Slope 9.20147e-05 iteration 33 energy 0 : -20050.3
 Converged due to oscillation in optimization  metric 0 bad 11  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -129726
 iteration 2 energy 0 : -132580
 iteration 3 energy 0 : -135458
 iteration 4 energy 0 : -137561
 iteration 5 energy 0 : -139180
 iteration 6 energy 0 : -140525
 iteration 7 energy 0 : -141716
 iteration 8 energy 0 : -142757
 iteration 9 energy 0 : -143772
 iteration 10 energy 0 : -144697
 iteration 11 energy 0 : -145556
 iteration 12 energy 0 : -146378
 E-Slope 0.00497386 iteration 13 energy 0 : -147145
 E-Slope 0.00432238 iteration 14 energy 0 : -147892
 E-Slope 0.00387844 iteration 15 energy 0 : -148564
 E-Slope 0.0035548 iteration 16 energy 0 : -149218
 E-Slope 0.0032937 iteration 17 energy 0 : -149808
 E-Slope 0.00306565 iteration 18 energy 0 : -150346
 E-Slope 0.00285179 iteration 19 energy 0 : -150795
 E-Slope 0.00264366 iteration 20 energy 0 : -151236
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1847_01152016_Aug1_Ref_vimp2_2926_02222017_Test_NewCases/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1847_01152016_Aug1_Ref_vimp2_2926_02222017_Test_NewCases/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1847_01152016_Aug1_Ref_vimp2_2926_02222017_Test_NewCases/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1847_01152016_Aug1_Ref_vimp2_2926_02222017_Test_NewCases/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1847_01152016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2398_07292016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1847_01152016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2398_07292016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547779324
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [16.2578, -15.0341, 12.1045]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -3.478135972893309, 20.283472422474976, 4.035316838416605]
level 0, iter 2836, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.13185091964014645, -0.02569337233003064, -0.08529520776878693, 0.987258787319737, 1.0038293511405934, 0.9564267215417634, 0.8993008333078892, 0.05864349672832538, -0.0030693631502391482, -0.1298205800233361, -4.5610564155785625, 18.014322055426202, 5.847447609966214]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 221, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.12417598788724159, -0.025043546236798348, -0.08645000304224988, 0.988169794012197, 0.9918130989380474, 0.9478159200610786, 0.8920092463380735, 0.06879370410793682, 0.00021951860529241792, -0.14710849607172644, -4.5023303429111055, 18.06184007489111, 5.805863695789233]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 92, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.12532752376160783, -0.026836463003665642, -0.08265769382355176, 0.9883018373417143, 0.9941910561734604, 0.9572133487091954, 0.8952663975493729, 0.07300842887119688, 0.0037965449486094052, -0.1552013305804099, -4.42869138375072, 18.00178815277429, 5.974273708375199]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 434, size: fix[42, 45, 34]-mov[39, 37, 32], affine para: [0.12567909966552945, -0.02884327021721224, -0.08754880900794659, 0.9877793456596108, 0.9888977037803173, 0.9570965283037667, 0.8988758090382816, 0.07893300131704047, 0.00928287653936862, -0.16933728416857702, -4.488147993618461, 17.890928222731183, 5.80489103536505]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 39, size: fix[84, 89, 48]-mov[77, 74, 41], affine para: [0.12503574227058445, -0.02644669814291315, -0.08757026339928253, 0.9879261532525403, 0.9901230341996801, 0.9596271721266731, 0.899693400640691, 0.07938952267833267, 0.007640461117402896, -0.17044453015123792, -4.368361039381147, 17.81596557200399, 5.8917653008971556]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 2851, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.14116806223154318, 0.021758988418068934, 0.08723683552683535, 0.9858944462548095, 0.9826440743606267, 0.9996720743686788, 1.1511614550507347, -0.08463268871431015, -0.0053217908796442176, 0.1375609956127734, 8.9379039381886, -17.98027689973174, -1.5309862663799978]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 816, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.13937438097858995, 0.02464608227978767, 0.08245275966849214, 0.9864932310858208, 0.9893642212308509, 0.9905934543308955, 1.151511933785699, -0.09044138817223729, -0.012109009787994758, 0.15705920452124253, 8.934530747733708, -18.025190032771572, -1.899914348028443]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 228, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.14109172394227804, 0.025152113901026146, 0.07840213902737946, 0.9865665721061286, 0.9811148765476558, 0.9890548417327328, 1.1517864037700012, -0.09017698454496959, -0.0143564003416318, 0.14590668061179293, 8.730431882948103, -18.201158993601183, -1.850403665559194]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 287, size: fix[39, 37, 32]-mov[42, 45, 34], affine para: [-0.13970262199575764, 0.0260705921112482, 0.07602457958358809, 0.9869264232624526, 0.9831361588349149, 0.9930145233638702, 1.1552363647200212, -0.09712177186594537, -0.02396733418347097, 0.14222960922866243, 8.696713916537187, -18.394120114369308, -1.8710489404266792]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 1278, size: fix[77, 74, 41]-mov[84, 89, 48], affine para: [-0.1402054396729009, 0.025159021262493836, 0.07475212071014384, 0.9869759768021601, 0.9880642735325195, 0.9850615424614375, 1.1585102305123778, -0.09960648071933646, -0.023406515725165597, 0.1568856413703372, 8.594583641888631, -18.13615412301077, -2.0039717315784595]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.453702 v2 -0.470363
 last params [0.12503574227058445, -0.02644669814291315, -0.08757026339928253, 0.9879261532525403, 0.9901230341996801, 0.9596271721266731, 0.899693400640691, 0.07938952267833267, 0.007640461117402896, -0.17044453015123792, -4.368361039381147, 17.81596557200399, 5.8917653008971556]
 my params [-0.1402054396729009, 0.025159021262493836, 0.07475212071014384, 0.9869759768021601, 0.9880642735325195, 0.9850615424614375, 1.1585102305123778, -0.09960648071933646, -0.023406515725165597, 0.1568856413703372, 8.594583641888631, -18.13615412301077, -2.0039717315784595]
A=0.984047 0.240095 -0.0926391 
-0.160843 0.92592 -0.407062 
0.0247744 0.242139 0.828149 

rotation R0.986599 0.150439 -0.0631662 
-0.161261 0.957999 -0.237135 
0.0248387 0.244144 0.969421 

upper R0.997413 0.0935773 -0.00518446 
0 0.982267 -0.201714 
0 0 0.905205 

s=0.252731 u=0.121634 v=-0.0222416 w-0.0787762 r=0.989194
m_Rotation from vnl0.121634 -0.0222416 -0.0787762 0.989194
 new params [0.12163417095506657, -0.022241552300220742, -0.0787762258167668, 0.9891939890908232, 0.9974128309242071, 0.9822669747286467, 0.9052052679330347, 0.09381997988947449, -0.005197911088130933, -0.20535575595688435, -4.288722282097757, 17.35927484967552, 5.838126376379852]
outputput affine center: [16.2578, -15.0341, 12.1045]
output affine para: [0.12163417095506657, -0.022241552300220742, -0.0787762258167668, 0.9891939890908232, 0.9974128309242071, 0.9822669747286467, 0.9052052679330347, 0.09381997988947449, -0.005197911088130933, -0.20535575595688435, -4.288722282097757, 17.35927484967552, 5.838126376379852]
initial measure value (MMI): rval = -0.140096
final measure value (MMI): rval = -0.455287
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -4292.09
 iteration 2 energy 0 : -4620.77
 iteration 3 energy 0 : -4920.19
 iteration 4 energy 0 : -5178.21
 iteration 5 energy 0 : -5429.22
 iteration 6 energy 0 : -5625.08
 iteration 7 energy 0 : -5766.79
 iteration 8 energy 0 : -5884.24
 iteration 9 energy 0 : -5987.38
 iteration 10 energy 0 : -6076.34
 iteration 11 energy 0 : -6162.71
 iteration 12 energy 0 : -6252.1
 E-Slope 0.0148341 iteration 13 energy 0 : -6349.12
 E-Slope 0.0125942 iteration 14 energy 0 : -6464.38
 E-Slope 0.0109885 iteration 15 energy 0 : -6571.53
 E-Slope 0.0099022 iteration 16 energy 0 : -6676.89
 E-Slope 0.0092994 iteration 17 energy 0 : -6769.99
 E-Slope 0.00894266 iteration 18 energy 0 : -6842.85
 E-Slope 0.00862225 iteration 19 energy 0 : -6902.84
 E-Slope 0.00825391 iteration 20 energy 0 : -6956.54
 E-Slope 0.00780361 iteration 21 energy 0 : -7007.41
 E-Slope 0.00724949 iteration 22 energy 0 : -7056.82
 E-Slope 0.00664581 iteration 23 energy 0 : -7115.89
 E-Slope 0.00601915 iteration 24 energy 0 : -7168.88
 E-Slope 0.00544159 iteration 25 energy 0 : -7226.55
 E-Slope 0.00479914 iteration 26 energy 0 : -7213.02
 E-Slope 0.0041661 iteration 27 energy 0 : -7218.5
 E-Slope 0.00352192 iteration 28 energy 0 : -7205.43
 E-Slope 0.00297971 iteration 29 energy 0 : -7231.4
 E-Slope 0.00239427 iteration 30 energy 0 : -7215.13
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -16853.5
 iteration 2 energy 0 : -17129.3
 iteration 3 energy 0 : -17357.2
 iteration 4 energy 0 : -17584.6
 iteration 5 energy 0 : -17766.1
 iteration 6 energy 0 : -17914.7
 iteration 7 energy 0 : -18057.7
 iteration 8 energy 0 : -18203.2
 iteration 9 energy 0 : -18345.3
 iteration 10 energy 0 : -18471.9
 iteration 11 energy 0 : -18585.2
 iteration 12 energy 0 : -18696.2
 E-Slope 0.00468734 iteration 13 energy 0 : -18789.5
 E-Slope 0.00420568 iteration 14 energy 0 : -18813.2
 E-Slope 0.00360961 iteration 15 energy 0 : -18735
 E-Slope 0.00308407 iteration 16 energy 0 : -18790.1
 E-Slope 0.00247797 iteration 17 energy 0 : -18724.4
 E-Slope 0.0019083 iteration 18 energy 0 : -18763
 E-Slope 0.00131623 iteration 19 energy 0 : -18719.8
 E-Slope 0.000819325 iteration 20 energy 0 : -18744.7
 E-Slope 0.000392385 iteration 21 energy 0 : -18720
 E-Slope 9.20966e-05 iteration 22 energy 0 : -18737.4
 Converged due to oscillation in optimization  metric 0 bad 4  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -123311
 iteration 2 energy 0 : -125882
 iteration 3 energy 0 : -128701
 iteration 4 energy 0 : -130891
 iteration 5 energy 0 : -132626
 iteration 6 energy 0 : -134040
 iteration 7 energy 0 : -135353
 iteration 8 energy 0 : -136541
 iteration 9 energy 0 : -137615
 iteration 10 energy 0 : -138614
 iteration 11 energy 0 : -139468
 iteration 12 energy 0 : -140272
 E-Slope 0.00551158 iteration 13 energy 0 : -141039
 E-Slope 0.00478203 iteration 14 energy 0 : -141702
 E-Slope 0.00423306 iteration 15 energy 0 : -142286
 E-Slope 0.00379027 iteration 16 energy 0 : -142780
 E-Slope 0.00341105 iteration 17 energy 0 : -143257
 E-Slope 0.00306325 iteration 18 energy 0 : -143677
 E-Slope 0.00274378 iteration 19 energy 0 : -144025
 E-Slope 0.00244982 iteration 20 energy 0 : -144334
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1847_01152016_Aug2_Ref_vimp2_2398_07292016/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1847_01152016_Aug2_Ref_vimp2_2398_07292016/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1847_01152016_Aug2_Ref_vimp2_2398_07292016/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1847_01152016_Aug2_Ref_vimp2_2398_07292016/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1875_01262016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2551_09232016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1875_01262016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2551_09232016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547779475
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [15.5012, -14.9322, -19.1567]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 1.0660236315989842, 24.96862845940631, 1.1314082110686279]
level 0, iter 374, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.0021812276663636544, -0.026124770793107596, 0.11215552580256627, 0.9933447924204489, 0.9705479324220607, 0.9609960337368602, 0.941454188884871, 0.0019508378118726474, -0.0061175891387727456, -0.011002985374290388, -3.795885733995313, 29.130138466827393, 3.057902607633357]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 1406, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.017724080967775134, -0.019756713971021047, 0.1413155134258007, 0.9896087382759499, 0.9774660475108371, 0.9236608397556455, 0.9270487692455269, 0.019106868667202532, -0.014969610414130285, -0.04741678929144901, -3.643746658763787, 28.154252756655627, 3.5578266130287637]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 864, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.004637188777463003, -0.023748311990296936, 0.13968529985725067, 0.9899002632395063, 0.9853257309665692, 0.9267502233622408, 0.92640334535664, 0.05157503488667149, -0.009058713826255385, -0.08127002070819228, -3.5530582742655725, 28.104379244859995, 3.1140750911717787]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 33, size: fix[45, 46, 43]-mov[42, 46, 34], affine para: [0.007614874932938066, -0.024498271607154332, 0.1444991616631346, 0.9891723007882242, 0.9898090489365988, 0.9331986614006799, 0.932807811748857, 0.04952555670574085, -0.007147371303514177, -0.08445114648813598, -3.6562939137574766, 27.920382879650784, 3.4657418214789937]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 878, size: fix[90, 92, 60]-mov[83, 92, 48], affine para: [0.0010198199583622554, -0.022193480267795173, 0.1408413872606959, 0.9897828615587048, 0.9978879765254175, 0.9267614242827537, 0.9429704902357755, 0.05098164697018959, -0.017040991380393868, -0.10560240096929559, -3.572840883603432, 27.821404442291207, 3.3278744664436495]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 3018, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.004096057580074687, 0.012780525881846042, -0.12689542350748997, 0.9918253031473532, 1.0184437539128548, 0.9711086167577907, 0.9814275494774798, -0.031452958685208726, 0.03111301462809207, 0.06974496605988922, -2.5840144823135893, -28.021347265298964, -4.640032309410675]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 707, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.002496762059797134, 0.013045624284417025, -0.13298767051758315, 0.9910286864448239, 1.0272013663622623, 0.958716442380217, 0.9711638010075452, -0.03567816448497109, 0.030124977290193932, 0.08843410805500294, -2.8849447187012527, -27.55536250281024, -3.999079266031637]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 446, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.010819148430370911, 0.007295769004216448, -0.12933167818906444, 0.9915155242348347, 1.0360015419488913, 0.9717860435346091, 0.9630988984512427, -0.03476008513991209, 0.02199556621900291, 0.09873779658557234, -2.7116355663427614, -27.839487727315394, -4.801197200957641]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 846, size: fix[42, 46, 34]-mov[45, 46, 43], affine para: [0.016297317958964826, 0.008109856105610795, -0.13262449603107535, 0.9909991779581828, 1.0211653767760647, 0.9761609150622005, 0.9587408180159307, -0.03614989846668334, 0.03114063610214765, 0.10371764100749466, -2.898206081264063, -27.93905074040851, -5.125222546409867]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 2234, size: fix[83, 92, 48]-mov[90, 92, 60], affine para: [0.004076663415042015, 0.01508381196610093, -0.1337588433035307, 0.990890726200459, 1.0311660518346415, 0.9958805552004365, 0.9746156602375043, -0.021510623618906703, 0.019222246116221434, 0.06549378458608975, -3.3966551522835315, -28.75045426728599, -4.786007553760158]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.285033 v2 -0.277157
final [0.0010198199583622554, -0.022193480267795173, 0.1408413872606959, 0.9897828615587048, 0.9978879765254175, 0.9267614242827537, 0.9429704902357755, 0.05098164697018959, -0.017040991380393868, -0.10560240096929559, -3.572840883603432, 27.821404442291207, 3.3278744664436495]
outputput affine center: [15.5012, -14.9322, -19.1567]
output affine para: [0.0010198199583622554, -0.022193480267795173, 0.1408413872606959, 0.9897828615587048, 0.9978879765254175, 0.9267614242827537, 0.9429704902357755, 0.05098164697018959, -0.017040991380393868, -0.10560240096929559, -3.572840883603432, 27.821404442291207, 3.3278744664436495]
initial measure value (MMI): rval = -0.122623
final measure value (MMI): rval = -0.284111
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -3522.53
 iteration 2 energy 0 : -3812.35
 iteration 3 energy 0 : -4080.35
 iteration 4 energy 0 : -4358.45
 iteration 5 energy 0 : -4577.44
 iteration 6 energy 0 : -4756.34
 iteration 7 energy 0 : -4900.83
 iteration 8 energy 0 : -5041.59
 iteration 9 energy 0 : -5184.04
 iteration 10 energy 0 : -5304.53
 iteration 11 energy 0 : -5411.13
 iteration 12 energy 0 : -5506.54
 E-Slope 0.0183936 iteration 13 energy 0 : -5594.43
 E-Slope 0.0158325 iteration 14 energy 0 : -5678.27
 E-Slope 0.0137303 iteration 15 energy 0 : -5759.51
 E-Slope 0.0121863 iteration 16 energy 0 : -5839.94
 E-Slope 0.0109798 iteration 17 energy 0 : -5912.6
 E-Slope 0.00998043 iteration 18 energy 0 : -5979.62
 E-Slope 0.00909938 iteration 19 energy 0 : -6046.99
 E-Slope 0.00836587 iteration 20 energy 0 : -6116
 E-Slope 0.00781261 iteration 21 energy 0 : -6183.54
 E-Slope 0.00735551 iteration 22 energy 0 : -6242.63
 E-Slope 0.00695579 iteration 23 energy 0 : -6298.08
 E-Slope 0.00659005 iteration 24 energy 0 : -6352.21
 E-Slope 0.00627238 iteration 25 energy 0 : -6413.28
 E-Slope 0.00600778 iteration 26 energy 0 : -6476.1
 E-Slope 0.00579862 iteration 27 energy 0 : -6538.9
 E-Slope 0.00566211 iteration 28 energy 0 : -6605.02
 E-Slope 0.0055711 iteration 29 energy 0 : -6669.22
 E-Slope 0.00550967 iteration 30 energy 0 : -6733.81
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -22710
 iteration 2 energy 0 : -23527.6
 iteration 3 energy 0 : -24167.7
 iteration 4 energy 0 : -24744
 iteration 5 energy 0 : -25243.1
 iteration 6 energy 0 : -25647.4
 iteration 7 energy 0 : -25928.1
 iteration 8 energy 0 : -26136
 iteration 9 energy 0 : -26320.5
 iteration 10 energy 0 : -26501.9
 iteration 11 energy 0 : -26741.2
 iteration 12 energy 0 : -27029.7
 E-Slope 0.00689567 iteration 13 energy 0 : -27278.3
 E-Slope 0.00599879 iteration 14 energy 0 : -27455.7
 E-Slope 0.00530207 iteration 15 energy 0 : -27588
 E-Slope 0.00476833 iteration 16 energy 0 : -27690.3
 E-Slope 0.00435483 iteration 17 energy 0 : -27778.3
 E-Slope 0.00399458 iteration 18 energy 0 : -27840.8
 E-Slope 0.00359645 iteration 19 energy 0 : -27873.1
 E-Slope 0.00313506 iteration 20 energy 0 : -27906.1
 E-Slope 0.00262634 iteration 21 energy 0 : -27942
 E-Slope 0.002115 iteration 22 energy 0 : -27999.9
 E-Slope 0.0016865 iteration 23 energy 0 : -28075.8
 E-Slope 0.00138734 iteration 24 energy 0 : -28129.2
 E-Slope 0.00119866 iteration 25 energy 0 : -28167.7
 E-Slope 0.00107833 iteration 26 energy 0 : -28200.7
 E-Slope 0.000995219 iteration 27 energy 0 : -28224.6
 E-Slope 0.000943758 iteration 28 energy 0 : -28264.1
 E-Slope 0.00093101 iteration 29 energy 0 : -28323.7
 E-Slope 0.000958458 iteration 30 energy 0 : -28409.5
 E-Slope 0.00101551 iteration 31 energy 0 : -28513.8
 E-Slope 0.00111967 iteration 32 energy 0 : -28648.2
 E-Slope 0.00128195 iteration 33 energy 0 : -28807.8
 E-Slope 0.00148112 iteration 34 energy 0 : -28933
 E-Slope 0.00169921 iteration 35 energy 0 : -29032.7
 E-Slope 0.00179689 iteration 36 energy 0 : -28974.8
 E-Slope 0.0017584 iteration 37 energy 0 : -28912.7
 E-Slope 0.00165394 iteration 38 energy 0 : -28953.9
 E-Slope 0.00143348 iteration 39 energy 0 : -28927.2
 E-Slope 0.00118057 iteration 40 energy 0 : -28982.6
 E-Slope 0.000865243 iteration 41 energy 0 : -28949.4
 E-Slope 0.000591859 iteration 42 energy 0 : -29005.8
 E-Slope 0.000332035 iteration 43 energy 0 : -28979.7
 E-Slope 0.000174776 iteration 44 energy 0 : -29029.3
 E-Slope 9.42871e-05 iteration 45 energy 0 : -29004.5
 Converged due to oscillation in optimization  metric 0 bad 6  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -173733
 iteration 2 energy 0 : -177416
 iteration 3 energy 0 : -181629
 iteration 4 energy 0 : -185058
 iteration 5 energy 0 : -187776
 iteration 6 energy 0 : -189956
 iteration 7 energy 0 : -192032
 iteration 8 energy 0 : -193924
 iteration 9 energy 0 : -195637
 iteration 10 energy 0 : -197233
 iteration 11 energy 0 : -198641
 iteration 12 energy 0 : -199909
 E-Slope 0.00610552 iteration 13 energy 0 : -201030
 E-Slope 0.00531422 iteration 14 energy 0 : -202050
 E-Slope 0.00468246 iteration 15 energy 0 : -202787
 E-Slope 0.00415204 iteration 16 energy 0 : -203396
 E-Slope 0.00364625 iteration 17 energy 0 : -203649
 E-Slope 0.00316858 iteration 18 energy 0 : -204174
 E-Slope 0.00272626 iteration 19 energy 0 : -204587
 E-Slope 0.00233742 iteration 20 energy 0 : -205091
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1875_01262016_Aug1_Ref_vimp2_2551_09232016_Test_NewCases/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1875_01262016_Aug1_Ref_vimp2_2551_09232016_Test_NewCases/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1875_01262016_Aug1_Ref_vimp2_2551_09232016_Test_NewCases/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1875_01262016_Aug1_Ref_vimp2_2551_09232016_Test_NewCases/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1875_01262016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2476_08242016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1875_01262016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2476_08242016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547779692
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [15.5012, -14.9322, -19.1567]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -4.943699480573695, 15.258394630535047, 15.142439202189472]
level 0, iter 676, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.006817243872586899, -0.03061349212108874, 0.11489587393107267, 0.9928823079498138, 0.9002185445849277, 0.9355495912545052, 0.877432127415572, 0.0022412984927948233, 0.006420951913667227, 0.031738511713915236, -8.646416540356139, 17.703678681062613, 17.532039284377813]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 2113, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.037439039398430456, -0.03452574758929036, 0.1547523085973884, 0.9866397590134416, 0.8672402402475228, 0.9030682768774704, 0.7994084072703566, 0.043335854685857766, 0.06323575611341398, 0.038116009208941246, -8.381869975097477, 17.49766647089956, 17.38214846072541]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 1555, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.0484366828325286, -0.04731715177446429, 0.1590350689433601, 0.9849481315025244, 0.8779695062147836, 0.8933782291565453, 0.8100227154700178, 0.06725959923260572, 0.08606490182368964, 0.035016466618405066, -8.265101275389833, 16.960700221653436, 17.422871110488515]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 31, size: fix[45, 46, 43]-mov[38, 41, 32], affine para: [0.04630374975505473, -0.04538837449707693, 0.16107375908096153, 0.9848101859519237, 0.8753083213759717, 0.8929438324644177, 0.8096015590874106, 0.06819071590104929, 0.08880008326550419, 0.03420389340166103, -8.137808708452791, 17.10075154966593, 17.210419989003775]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 28, size: fix[90, 92, 60]-mov[76, 82, 43], affine para: [0.04496390613096972, -0.04522481647181356, 0.1613393669540374, 0.9848363172585618, 0.8744938147156328, 0.8902881984597925, 0.8135232134142022, 0.06909719007745745, 0.08930282886558681, 0.034240320144087205, -7.972606930863773, 17.00830919798855, 17.16061949950923]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 1270, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.05082722970113006, 0.002537587145562874, -0.1327918244112574, 0.9898365949700572, 1.0644483632580506, 0.9783029992372229, 0.9804624893091997, 0.007835458006254929, 0.12720379233146592, -0.04430692124330154, 2.9376251700254867, -18.86586258572256, -17.89635304391249]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 67, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.0548938857422199, 0.00040729580860049457, -0.13243756934442102, 0.9896700387727145, 1.063507054058121, 0.9787836801629201, 0.9900520408430195, 0.008990568619776469, 0.12500952241434635, -0.05001740784615919, 2.919438328872281, -18.984458492147642, -18.068564576816573]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 39, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.05454904750015938, -0.0004559411675657075, -0.13337478075264478, 0.9895632174821682, 1.0632848113337212, 0.982623135520896, 0.9911650609405649, 0.008337206497189609, 0.12166202216954865, -0.05051735393774483, 3.082393171042201, -18.745732707489953, -18.06293655342302]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 307, size: fix[38, 41, 32]-mov[45, 46, 43], affine para: [-0.06388456850583873, -0.0026448066809111577, -0.12972768269241672, 0.9894859752657937, 1.0550441031587405, 0.9837600637643268, 0.9788243344019233, 0.013573854989303748, 0.13265994253954272, -0.042651882966038904, 2.983131983147591, -18.927199855756363, -17.63995108505672]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 434, size: fix[76, 82, 43]-mov[90, 92, 60], affine para: [-0.06655530250008854, -0.000035194061513946, -0.13827832483584981, 0.9881545908161793, 1.05098124010714, 0.998273406099308, 0.9839472683030875, 0.010703187439142734, 0.11953149141069988, -0.044837669107200974, 2.7226866435192867, -19.402807260091663, -17.8178783007443]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.25609 v2 -0.264229
 last params [0.04496390613096972, -0.04522481647181356, 0.1613393669540374, 0.9848363172585618, 0.8744938147156328, 0.8902881984597925, 0.8135232134142022, 0.06909719007745745, 0.08930282886558681, 0.034240320144087205, -7.972606930863773, 17.00830919798855, 17.16061949950923]
 my params [-0.06655530250008854, -0.000035194061513946, -0.13827832483584981, 0.9881545908161793, 1.05098124010714, 0.998273406099308, 0.9839472683030875, 0.010703187439142734, 0.11953149141069988, -0.044837669107200974, 2.7226866435192867, -19.402807260091663, -17.8178783007443]
A=0.909938 -0.286281 -0.101899 
0.274594 0.960541 -0.0865861 
0.0186359 0.13369 1.00731 

rotation R0.957174 -0.28885 0.0195679 
0.288848 0.948217 -0.132103 
0.0196033 0.132098 0.991043 

upper R0.950651 0.00605065 -0.102799 
0 1.01115 0.0803945 
0 0 1.00773 

s=0.253301 u=0.0669222 v=-8.96322e-06 w0.146331 r=0.986969
m_Rotation from vnl0.0669222 -8.96322e-06 0.146331 0.986969
 new params [0.0669221545284363, -0.000008963222412663828, 0.14633143973723056, 0.9869693687736018, 0.9506507740054317, 1.0111542529064952, 1.0077325601708231, 0.006364745288643518, -0.10813506593268356, 0.07950763551878676, -9.847753729585731, 16.34678678130894, 20.491357733086495]
outputput affine center: [15.5012, -14.9322, -19.1567]
output affine para: [0.0669221545284363, -0.000008963222412663828, 0.14633143973723056, 0.9869693687736018, 0.9506507740054317, 1.0111542529064952, 1.0077325601708231, 0.006364745288643518, -0.10813506593268356, 0.07950763551878676, -9.847753729585731, 16.34678678130894, 20.491357733086495]
initial measure value (MMI): rval = -0.109286
final measure value (MMI): rval = -0.306368
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -2617.24
 iteration 2 energy 0 : -2824.21
 iteration 3 energy 0 : -2983.81
 iteration 4 energy 0 : -3105.15
 iteration 5 energy 0 : -3189.45
 iteration 6 energy 0 : -3277.35
 iteration 7 energy 0 : -3380.39
 iteration 8 energy 0 : -3467.51
 iteration 9 energy 0 : -3540.89
 iteration 10 energy 0 : -3596.77
 iteration 11 energy 0 : -3650.54
 iteration 12 energy 0 : -3662.74
 E-Slope 0.0133812 iteration 13 energy 0 : -3691.15
 E-Slope 0.0111422 iteration 14 energy 0 : -3693.28
 E-Slope 0.00935039 iteration 15 energy 0 : -3724.6
 E-Slope 0.00768209 iteration 16 energy 0 : -3724.23
 E-Slope 0.00617734 iteration 17 energy 0 : -3754.06
 E-Slope 0.00476184 iteration 18 energy 0 : -3752.22
 E-Slope 0.00378936 iteration 19 energy 0 : -3784.81
 E-Slope 0.00302082 iteration 20 energy 0 : -3781.04
 E-Slope 0.00265205 iteration 21 energy 0 : -3819.38
 E-Slope 0.00233023 iteration 22 energy 0 : -3806.88
 E-Slope 0.00234939 iteration 23 energy 0 : -3846.08
 E-Slope 0.00218809 iteration 24 energy 0 : -3831.16
 E-Slope 0.00222699 iteration 25 energy 0 : -3868.18
 E-Slope 0.00203688 iteration 26 energy 0 : -3852.76
 E-Slope 0.00207171 iteration 27 energy 0 : -3890
 E-Slope 0.00187927 iteration 28 energy 0 : -3875.25
 E-Slope 0.00192071 iteration 29 energy 0 : -3914.08
 E-Slope 0.00172193 iteration 30 energy 0 : -3896.31
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -14948.9
 iteration 2 energy 0 : -15419.1
 iteration 3 energy 0 : -15817.5
 iteration 4 energy 0 : -16172.3
 iteration 5 energy 0 : -16498.9
 iteration 6 energy 0 : -16764
 iteration 7 energy 0 : -17028.2
 iteration 8 energy 0 : -17271.3
 iteration 9 energy 0 : -17494.9
 iteration 10 energy 0 : -17691
 iteration 11 energy 0 : -17862.7
 iteration 12 energy 0 : -17849.5
 E-Slope 0.00796653 iteration 13 energy 0 : -18041.7
 E-Slope 0.00681403 iteration 14 energy 0 : -18025.5
 E-Slope 0.00587662 iteration 15 energy 0 : -18192.7
 E-Slope 0.0049431 iteration 16 energy 0 : -18175.9
 E-Slope 0.00423525 iteration 17 energy 0 : -18331.8
 E-Slope 0.00352639 iteration 18 energy 0 : -18314.9
 E-Slope 0.00304036 iteration 19 energy 0 : -18459.7
 E-Slope 0.0025964 iteration 20 energy 0 : -18441.6
 E-Slope 0.00237103 iteration 21 energy 0 : -18576.9
 E-Slope 0.0021402 iteration 22 energy 0 : -18525.5
 E-Slope 0.00211204 iteration 23 energy 0 : -18668.2
 E-Slope 0.00190452 iteration 24 energy 0 : -18656.1
 E-Slope 0.00182998 iteration 25 energy 0 : -18702.4
 E-Slope 0.00160858 iteration 26 energy 0 : -18701.6
 E-Slope 0.00153592 iteration 27 energy 0 : -18770.6
 E-Slope 0.00133676 iteration 28 energy 0 : -18772
 E-Slope 0.00128457 iteration 29 energy 0 : -18836
 E-Slope 0.00111012 iteration 30 energy 0 : -18824.9
 E-Slope 0.00109627 iteration 31 energy 0 : -18898.6
 E-Slope 0.000952244 iteration 32 energy 0 : -18868.7
 E-Slope 0.000985794 iteration 33 energy 0 : -18958
 E-Slope 0.000857159 iteration 34 energy 0 : -18926.4
 E-Slope 0.000911601 iteration 35 energy 0 : -19009.2
 E-Slope 0.000896603 iteration 36 energy 0 : -19017.1
 E-Slope 0.000928476 iteration 37 energy 0 : -19072.7
 E-Slope 0.000869282 iteration 38 energy 0 : -19049.5
 E-Slope 0.000898167 iteration 39 energy 0 : -19118.8
 E-Slope 0.00085514 iteration 40 energy 0 : -19110.1
 E-Slope 0.000893064 iteration 41 energy 0 : -19178
 E-Slope 0.000831433 iteration 42 energy 0 : -19155.7
 E-Slope 0.000862494 iteration 43 energy 0 : -19222.2
 E-Slope 0.00078211 iteration 44 energy 0 : -19204.9
 E-Slope 0.000814646 iteration 45 energy 0 : -19272.5
 E-Slope 0.000713527 iteration 46 energy 0 : -19233
 E-Slope 0.00071431 iteration 47 energy 0 : -19293.2
 E-Slope 0.000639193 iteration 48 energy 0 : -19261.2
 E-Slope 0.00063242 iteration 49 energy 0 : -19311.3
 E-Slope 0.000526458 iteration 50 energy 0 : -19283.2
 E-Slope 0.000522293 iteration 51 energy 0 : -19345.3
 E-Slope 0.000427812 iteration 52 energy 0 : -19304
 E-Slope 0.000423394 iteration 53 energy 0 : -19348.7
 E-Slope 0.000328682 iteration 54 energy 0 : -19314
 E-Slope 0.000344202 iteration 55 energy 0 : -19374.1
 E-Slope 0.000279717 iteration 56 energy 0 : -19340.1
 E-Slope 0.000313073 iteration 57 energy 0 : -19383.6
 E-Slope 0.000241578 iteration 58 energy 0 : -19344.4
 E-Slope 0.000277348 iteration 59 energy 0 : -19401.5
 E-Slope 0.00022988 iteration 60 energy 0 : -19373.8
 E-Slope 0.000289313 iteration 61 energy 0 : -19441.4
 E-Slope 0.000284642 iteration 62 energy 0 : -19429.9
 E-Slope 0.000413947 iteration 63 energy 0 : -19514.9
 E-Slope 0.000423536 iteration 64 energy 0 : -19470.2
 E-Slope 0.000528373 iteration 65 energy 0 : -19543.5
 E-Slope 0.000515826 iteration 66 energy 0 : -19502.1
 E-Slope 0.000597604 iteration 67 energy 0 : -19566.1
 E-Slope 0.000562675 iteration 68 energy 0 : -19528.8
 E-Slope 0.000602826 iteration 69 energy 0 : -19593.9
 E-Slope 0.000516281 iteration 70 energy 0 : -19552
 E-Slope 0.000530064 iteration 71 energy 0 : -19624.6
 E-Slope 0.000428535 iteration 72 energy 0 : -19577.9
 E-Slope 0.000441328 iteration 73 energy 0 : -19649.1
 E-Slope 0.000339359 iteration 74 energy 0 : -19581.2
 E-Slope 0.000367723 iteration 75 energy 0 : -19643.2
 E-Slope 0.000262782 iteration 76 energy 0 : -19584.9
 E-Slope 0.000332899 iteration 77 energy 0 : -19698.4
 E-Slope 0.000240132 iteration 78 energy 0 : -19606.9
 E-Slope 0.000287801 iteration 79 energy 0 : -19693.1
 E-Slope 0.000211723 iteration 80 energy 0 : -19630.9
 E-Slope 0.000292912 iteration 81 energy 0 : -19731.7
 E-Slope 0.000235453 iteration 82 energy 0 : -19661.5
 E-Slope 0.000313245 iteration 83 energy 0 : -19735.1
 E-Slope 0.000275023 iteration 84 energy 0 : -19691.8
 E-Slope 0.000368647 iteration 85 energy 0 : -19765.5
 E-Slope 0.00030531 iteration 86 energy 0 : -19706.6
 E-Slope 0.000390083 iteration 87 energy 0 : -19808.4
 E-Slope 0.000302427 iteration 88 energy 0 : -19728.2
 E-Slope 0.000404023 iteration 89 energy 0 : -19816.7
 E-Slope 0.00031253 iteration 90 energy 0 : -19748.6
 tired convergence: reached max iterations 
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -129976
 iteration 2 energy 0 : -132691
 iteration 3 energy 0 : -135910
 iteration 4 energy 0 : -139072
 iteration 5 energy 0 : -141709
 iteration 6 energy 0 : -143824
 iteration 7 energy 0 : -145565
 iteration 8 energy 0 : -147155
 iteration 9 energy 0 : -148514
 iteration 10 energy 0 : -149820
 iteration 11 energy 0 : -150913
 iteration 12 energy 0 : -151840
 E-Slope 0.00694984 iteration 13 energy 0 : -152841
 E-Slope 0.00599248 iteration 14 energy 0 : -153701
 E-Slope 0.00520392 iteration 15 energy 0 : -154613
 E-Slope 0.00458378 iteration 16 energy 0 : -155259
 E-Slope 0.00413016 iteration 17 energy 0 : -156168
 E-Slope 0.00373396 iteration 18 energy 0 : -156590
 E-Slope 0.00340782 iteration 19 energy 0 : -157304
 E-Slope 0.00309995 iteration 20 energy 0 : -157629
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1875_01262016_Aug2_Ref_vimp2_2476_08242016/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1875_01262016_Aug2_Ref_vimp2_2476_08242016/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1875_01262016_Aug2_Ref_vimp2_2476_08242016/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1875_01262016_Aug2_Ref_vimp2_2476_08242016/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1876_01262016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2460_08192016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1876_01262016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2460_08192016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547779911
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [10.3049, -21.1182, 27.8087]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 2.293051285154693, 28.240920228590447, -22.915354762565688]
level 0, iter 773, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.1453197798215314, 0.03492943469428721, 0.0009542730110717812, 0.9887675083393364, 0.9180061042772903, 0.9442159473276296, 1.053823301763063, 0.007359161136945999, -0.0030344321422261103, -0.06570964830601282, 1.0450079607287137, 28.745081454128037, -23.26203166606066]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 128, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.14932671584131169, 0.03704367615885723, 0.002056679653751682, 0.9880916293853964, 0.9185533301495468, 0.9437459856982208, 1.0576061554971237, 0.005226731061727847, -0.003886158066342738, -0.08161730158538216, 0.9981015617181839, 28.817574211735884, -23.270298039534747]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 77, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.15472925167275853, 0.03333920212512043, 0.0010954486117596572, 0.987393617698022, 0.9185847472434426, 0.9388443949647509, 1.0566869982183593, 0.005067500589459242, -0.003230310649353699, -0.09142514628015327, 1.0663142180906098, 28.830796749539896, -23.351699940163577]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 278, size: fix[39, 41, 32]-mov[35, 44, 32], affine para: [-0.15324393455442634, 0.03361744177959566, 0.0033533389047668513, 0.9876107124007233, 0.9202589794083624, 0.9366999880579309, 1.0572950365300426, 0.0008265135798630884, -0.001225683144080727, -0.1078311803992697, 0.970711058223098, 28.606516012477822, -23.25617790771068]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 175, size: fix[78, 82, 39]-mov[70, 87, 43], affine para: [-0.1466243466851013, 0.033519604866521696, 0.007790211179815655, 0.9885934703701685, 0.9198947744268167, 0.9217775875457632, 1.0537163980637554, -0.00122355722770451, -0.0024912779023798814, -0.11532873378701337, 0.937836384880954, 28.677651117867274, -23.082965367444906]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 961, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.1360431488133741, -0.027406503401756935, -0.008343614139937856, 0.9902886091111599, 1.078459763637394, 1.087266858938933, 0.9222493191899479, -0.014133961411068015, -0.01944513889378077, 0.021079683895011928, -2.728831519512797, -35.42410448471417, 12.244926722118237]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 167, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.13806569529468066, -0.028832653131424683, -0.0073439703024991, 0.989976064355293, 1.0711746189759899, 1.0873404239352782, 0.9151481127131559, -0.014181698101753652, -0.013683917449629662, 0.02526999814412062, -2.693525378943476, -35.306622419613774, 12.057530613617443]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 187, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.13379582768016274, -0.02741853873055281, -0.009523592943428276, 0.9905837679907284, 1.074578874437795, 1.090855300220367, 0.9161683119317172, -0.01179933369458464, -0.015280056142143164, 0.025699025729953886, -2.848010870150077, -35.29848797614304, 12.207417276106806]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 651, size: fix[35, 44, 32]-mov[39, 41, 32], affine para: [0.13652308281158565, -0.02754479495184907, -0.0036292233881759033, 0.990247222095715, 1.0722820555746868, 1.0888631487641087, 0.9186121904876867, -0.005166105756459484, -0.020096577979526457, 0.02242034704789858, -2.7190860189360118, -35.38051758209399, 12.140897988484635]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 375, size: fix[70, 87, 43]-mov[78, 82, 39], affine para: [0.1346167086343404, -0.028161958015453365, -0.0017374423965372681, 0.9904959501033368, 1.0653816544974313, 1.0830624179548003, 0.9180556439062172, -0.004345625245997822, -0.019226699727311978, 0.025929477666226376, -2.569645356422054, -35.06663777794663, 12.340870250139382]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.61963 v2 -0.618333
final [-0.1466243466851013, 0.033519604866521696, 0.007790211179815655, 0.9885934703701685, 0.9198947744268167, 0.9217775875457632, 1.0537163980637554, -0.00122355722770451, -0.0024912779023798814, -0.11532873378701337, 0.937836384880954, 28.677651117867274, -23.082965367444906]
outputput affine center: [10.3049, -21.1182, 27.8087]
output affine para: [-0.1466243466851013, 0.033519604866521696, 0.007790211179815655, 0.9885934703701685, 0.9198947744268167, 0.9217775875457632, 1.0537163980637554, -0.00122355722770451, -0.0024912779023798814, -0.11532873378701337, 0.937836384880954, 28.677651117867274, -23.082965367444906]
initial measure value (MMI): rval = -0.232051
final measure value (MMI): rval = -0.634578
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -7646.47
 iteration 2 energy 0 : -7990.93
 iteration 3 energy 0 : -8236.46
 iteration 4 energy 0 : -8403.49
 iteration 5 energy 0 : -8506.66
 iteration 6 energy 0 : -8582.01
 iteration 7 energy 0 : -8641.15
 iteration 8 energy 0 : -8648.59
 iteration 9 energy 0 : -8670.06
 iteration 10 energy 0 : -8703.06
 iteration 11 energy 0 : -8706.65
 iteration 12 energy 0 : -8698.59
 E-Slope 0.0035556 iteration 13 energy 0 : -8710.78
 E-Slope 0.00230815 iteration 14 energy 0 : -8705.14
 E-Slope 0.00151689 iteration 15 energy 0 : -8720.79
 E-Slope 0.00104474 iteration 16 energy 0 : -8736.95
 E-Slope 0.000743091 iteration 17 energy 0 : -8740.19
 E-Slope 0.000532746 iteration 18 energy 0 : -8727.14
 E-Slope 0.000445426 iteration 19 energy 0 : -8736.19
 E-Slope 0.000326946 iteration 20 energy 0 : -8729.11
 E-Slope 0.000264041 iteration 21 energy 0 : -8742.78
 E-Slope 0.000262707 iteration 22 energy 0 : -8745.24
 E-Slope 0.000290111 iteration 23 energy 0 : -8761.81
 E-Slope 0.000292264 iteration 24 energy 0 : -8767.76
 E-Slope 0.0003139 iteration 25 energy 0 : -8772.33
 E-Slope 0.000262119 iteration 26 energy 0 : -8755.51
 E-Slope 0.000249997 iteration 27 energy 0 : -8765.02
 E-Slope 0.000243835 iteration 28 energy 0 : -8759.29
 E-Slope 0.000260562 iteration 29 energy 0 : -8773.16
 E-Slope 0.000238284 iteration 30 energy 0 : -8777.55
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -15675.9
 iteration 2 energy 0 : -15820.6
 iteration 3 energy 0 : -15965.7
 iteration 4 energy 0 : -16084.8
 iteration 5 energy 0 : -16137.2
 iteration 6 energy 0 : -16139.7
 iteration 7 energy 0 : -16161.6
 iteration 8 energy 0 : -16166.1
 iteration 9 energy 0 : -16184.3
 iteration 10 energy 0 : -16199.7
 iteration 11 energy 0 : -16214
 iteration 12 energy 0 : -16225.7
 E-Slope 0.000995748 iteration 13 energy 0 : -16235.7
 E-Slope 0.000662453 iteration 14 energy 0 : -16235.3
 E-Slope 0.000474103 iteration 15 energy 0 : -16246.6
 E-Slope 0.000396244 iteration 16 energy 0 : -16244.7
 E-Slope 0.000373006 iteration 17 energy 0 : -16258.3
 E-Slope 0.000318818 iteration 18 energy 0 : -16252
 E-Slope 0.000290439 iteration 19 energy 0 : -16268.3
 E-Slope 0.000233226 iteration 20 energy 0 : -16256.9
 E-Slope 0.000207864 iteration 21 energy 0 : -16277.5
 E-Slope 0.000172496 iteration 22 energy 0 : -16266.1
 E-Slope 0.000156574 iteration 23 energy 0 : -16277.2
 E-Slope 0.000135474 iteration 24 energy 0 : -16270.3
 E-Slope 0.000120744 iteration 25 energy 0 : -16272.6
 E-Slope 9.39891e-05 iteration 26 energy 0 : -16270.1
 Converged due to oscillation in optimization  metric 0 bad 7  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -99034.6
 iteration 2 energy 0 : -100535
 iteration 3 energy 0 : -101732
 iteration 4 energy 0 : -102680
 iteration 5 energy 0 : -103447
 iteration 6 energy 0 : -104138
 iteration 7 energy 0 : -104763
 iteration 8 energy 0 : -105317
 iteration 9 energy 0 : -105890
 iteration 10 energy 0 : -106401
 iteration 11 energy 0 : -106826
 iteration 12 energy 0 : -107208
 E-Slope 0.00337242 iteration 13 energy 0 : -107581
 E-Slope 0.00300661 iteration 14 energy 0 : -107965
 E-Slope 0.00273485 iteration 15 energy 0 : -108347
 E-Slope 0.00252753 iteration 16 energy 0 : -108735
 E-Slope 0.00235262 iteration 17 energy 0 : -109067
 E-Slope 0.00219972 iteration 18 energy 0 : -109358
 E-Slope 0.00206216 iteration 19 energy 0 : -109626
 E-Slope 0.00193188 iteration 20 energy 0 : -109879
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1876_01262016_Aug1_Ref_vimp2_2460_08192016/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1876_01262016_Aug1_Ref_vimp2_2460_08192016/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1876_01262016_Aug1_Ref_vimp2_2460_08192016/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1876_01262016_Aug1_Ref_vimp2_2460_08192016/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1876_01262016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2972_03102017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1876_01262016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2972_03102017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547780007
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [10.3049, -21.1182, 27.8087]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 3.0126468029940767, 31.7884907725974, -26.149277418372343]
level 0, iter 628, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.06234315234510913, -0.016021328745054176, -0.03724179508385856, 0.9972310149006844, 1.0052460710717188, 0.9709275337203896, 0.8993831376161454, -0.054011519665884196, 0.059827326467321, 0.009550188382928612, 2.5567616714287515, 32.01834396086938, -26.025813334271298]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 156, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.06350045984499575, -0.01497835755412673, -0.04335422771666413, 0.9969271544819844, 1.0067875994690434, 0.9709781702513209, 0.906994949915442, -0.06730232494301937, 0.056276693964664254, 0.00606314073312394, 2.6220000223602162, 32.01847059003306, -26.129276780220675]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 107, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.062406029454445844, -0.014002842429919796, -0.045920293407279815, 0.9968955484628282, 1.0062922268328955, 0.9712311474011159, 0.9040884222400281, -0.0751874115469623, 0.05424200726128749, 0.003971274525815293, 2.5563186145415884, 31.944135911146525, -26.185864468565995]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 43, size: fix[39, 41, 32]-mov[39, 39, 32], affine para: [-0.061279240351385454, -0.013457723349506803, -0.046853069425935534, 0.9969295533133592, 1.0065300175377159, 0.9695746477988895, 0.9057600219202596, -0.07588423665745038, 0.05442603684737435, 0.0027735600198448367, 2.5509383459726895, 31.985242010123418, -26.100420043919]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 69, size: fix[78, 82, 39]-mov[77, 77, 39], affine para: [-0.063245745277722, -0.011470048326630565, -0.04576907350436587, 0.9968819416591927, 1.0052924227452775, 0.970674831294829, 0.9063356598303872, -0.07878670088111475, 0.051535909890599384, 0.005172579471225696, 2.5927315515436455, 31.88375692379382, -26.086785520534388]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 890, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.06722317434938938, 0.01330524873731093, 0.04264521629142732, 0.9967373780058052, 0.9849127093096763, 1.0151848559556709, 1.0939119808584612, 0.061465680157199956, -0.07529906050941508, 0.019179918506994183, -2.9271063493037537, -35.868758227362825, 24.19587350248289]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 192, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.06804585786474737, 0.015185561051556653, 0.04215840304601806, 0.9966753879852805, 0.9874330757081631, 1.0190000846222051, 1.09541969397935, 0.0626420046782765, -0.07555416001282873, 0.024658105427124984, -2.95894294825482, -35.948543843343266, 24.171090171842913]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 128, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.06814518923557922, 0.014161303785181148, 0.04253925490533748, 0.9966674984423088, 0.9886334918417231, 1.0202725998696716, 1.0968744873586065, 0.06502659598828878, -0.07658475550758939, 0.023448032538916645, -3.0129797508358513, -35.99476277995573, 24.206373307550905]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 149, size: fix[39, 39, 32]-mov[39, 41, 32], affine para: [0.06734283861085757, 0.015716064857439253, 0.04099922672764933, 0.9967632671808103, 0.9863079336032298, 1.0211959072324677, 1.0924796171900633, 0.0648129645365338, -0.07475373260245596, 0.02536363085374903, -2.974797301203805, -35.94861378095814, 24.150979614288353]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 1394, size: fix[77, 77, 39]-mov[78, 82, 39], affine para: [0.06270990067022403, 0.009283398692798851, 0.04615939893186089, 0.9969205568935222, 0.9887494362808145, 1.0315762490611466, 1.0920904641997025, 0.07817774505031855, -0.06191796136866388, 0.015777939510850422, -3.076164994504706, -36.22808846680591, 24.331803262979108]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.604507 v2 -0.587071
final [-0.063245745277722, -0.011470048326630565, -0.04576907350436587, 0.9968819416591927, 1.0052924227452775, 0.970674831294829, 0.9063356598303872, -0.07878670088111475, 0.051535909890599384, 0.005172579471225696, 2.5927315515436455, 31.88375692379382, -26.086785520534388]
outputput affine center: [10.3049, -21.1182, 27.8087]
output affine para: [-0.063245745277722, -0.011470048326630565, -0.04576907350436587, 0.9968819416591927, 1.0052924227452775, 0.970674831294829, 0.9063356598303872, -0.07878670088111475, 0.051535909890599384, 0.005172579471225696, 2.5927315515436455, 31.88375692379382, -26.086785520534388]
initial measure value (MMI): rval = -0.388573
final measure value (MMI): rval = -0.606711
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -7272.63
 iteration 2 energy 0 : -7574.43
 iteration 3 energy 0 : -7765.96
 iteration 4 energy 0 : -7860.75
 iteration 5 energy 0 : -7926.6
 iteration 6 energy 0 : -7985.58
 iteration 7 energy 0 : -8051.55
 iteration 8 energy 0 : -8139.67
 iteration 9 energy 0 : -8206.68
 iteration 10 energy 0 : -8259.39
 iteration 11 energy 0 : -8294.41
 iteration 12 energy 0 : -8306.19
 E-Slope 0.00458107 iteration 13 energy 0 : -8306.26
 E-Slope 0.00368468 iteration 14 energy 0 : -8295.88
 E-Slope 0.0030371 iteration 15 energy 0 : -8303.09
 E-Slope 0.00243228 iteration 16 energy 0 : -8308.34
 E-Slope 0.00183329 iteration 17 energy 0 : -8311.25
 E-Slope 0.00123745 iteration 18 energy 0 : -8303.8
 E-Slope 0.000732593 iteration 19 energy 0 : -8310.06
 E-Slope 0.000381239 iteration 20 energy 0 : -8306.83
 E-Slope 0.000171751 iteration 21 energy 0 : -8310.71
 E-Slope 6.7614e-05 iteration 22 energy 0 : -8308
 Converged due to oscillation in optimization  metric 0 bad 4  
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -14742.2
 iteration 2 energy 0 : -14939.1
 iteration 3 energy 0 : -15099.5
 iteration 4 energy 0 : -15216.5
 iteration 5 energy 0 : -15318.2
 iteration 6 energy 0 : -15367.7
 iteration 7 energy 0 : -15384.1
 iteration 8 energy 0 : -15404.9
 iteration 9 energy 0 : -15419
 iteration 10 energy 0 : -15429.1
 iteration 11 energy 0 : -15442.4
 iteration 12 energy 0 : -15448.4
 E-Slope 0.00143255 iteration 13 energy 0 : -15461.6
 E-Slope 0.000976533 iteration 14 energy 0 : -15465.8
 E-Slope 0.000676095 iteration 15 energy 0 : -15477.5
 E-Slope 0.000482492 iteration 16 energy 0 : -15480.8
 E-Slope 0.000399761 iteration 17 energy 0 : -15491.1
 E-Slope 0.000356697 iteration 18 energy 0 : -15493.7
 E-Slope 0.000321656 iteration 19 energy 0 : -15502.7
 E-Slope 0.000292644 iteration 20 energy 0 : -15503.9
 E-Slope 0.000272162 iteration 21 energy 0 : -15511.9
 E-Slope 0.000247143 iteration 22 energy 0 : -15513
 E-Slope 0.000232063 iteration 23 energy 0 : -15520.5
 E-Slope 0.000209503 iteration 24 energy 0 : -15521.3
 E-Slope 0.000198685 iteration 25 energy 0 : -15528.2
 E-Slope 0.000180051 iteration 26 energy 0 : -15528.8
 E-Slope 0.000171259 iteration 27 energy 0 : -15534.1
 E-Slope 0.000155255 iteration 28 energy 0 : -15534.5
 E-Slope 0.000149593 iteration 29 energy 0 : -15540.4
 E-Slope 0.000137188 iteration 30 energy 0 : -15540.8
 E-Slope 0.000134587 iteration 31 energy 0 : -15546.5
 E-Slope 0.000123739 iteration 32 energy 0 : -15546.2
 E-Slope 0.000121921 iteration 33 energy 0 : -15551.7
 E-Slope 0.000112087 iteration 34 energy 0 : -15551
 E-Slope 0.000111118 iteration 35 energy 0 : -15556.2
 E-Slope 0.000101849 iteration 36 energy 0 : -15555
 E-Slope 0.000101306 iteration 37 energy 0 : -15560.2
 E-Slope 9.18508e-05 iteration 38 energy 0 : -15558.1
 Converged due to oscillation in optimization  metric 0 bad 4  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -91595.9
 iteration 2 energy 0 : -93433.2
 iteration 3 energy 0 : -95018.4
 iteration 4 energy 0 : -96424.2
 iteration 5 energy 0 : -97528.4
 iteration 6 energy 0 : -98469.3
 iteration 7 energy 0 : -99276.2
 iteration 8 energy 0 : -99930.5
 iteration 9 energy 0 : -100488
 iteration 10 energy 0 : -100941
 iteration 11 energy 0 : -101305
 iteration 12 energy 0 : -101667
 E-Slope 0.00430296 iteration 13 energy 0 : -102095
 E-Slope 0.00365056 iteration 14 energy 0 : -102533
 E-Slope 0.00315996 iteration 15 energy 0 : -102981
 E-Slope 0.0028131 iteration 16 energy 0 : -103374
 E-Slope 0.00255944 iteration 17 energy 0 : -103710
 E-Slope 0.00237643 iteration 18 energy 0 : -104019
 E-Slope 0.00224436 iteration 19 energy 0 : -104307
 E-Slope 0.00213829 iteration 20 energy 0 : -104580
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1876_01262016_Aug2_Ref_vimp2_2972_03102017_Test_NewCases/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1876_01262016_Aug2_Ref_vimp2_2972_03102017_Test_NewCases/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1876_01262016_Aug2_Ref_vimp2_2972_03102017_Test_NewCases/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1876_01262016_Aug2_Ref_vimp2_2972_03102017_Test_NewCases/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1888_01292016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_702_04302014/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1888_01292016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_702_04302014/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547780108
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [8.5642, -15.1329, 26.1372]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0.792379763684659, -2.5930927522186185, -0.7196004666449305]
level 0, iter 199, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.021424118811638852, 0.004278194663840902, -0.014209370473057618, 0.999660341303146, 1.0727663437097292, 1.0505375793541132, 1.0832762783353818, 0.01297550865810588, 0.031602153062965065, -0.021463496219758717, 1.0604717698260653, -3.7190178107429155, -3.638589098770685]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 459, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.020992141289271547, -0.0018508164635480354, -0.008623893927679305, 0.9997407328582915, 1.074613008722955, 1.0403536815814916, 1.083192295579495, 0.01788875351429708, 0.05566203027141866, -0.04830112076755269, 1.1138139141463135, -3.619124852312783, -3.4295315263887454]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 186, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.018522343139950673, -0.004444888248793554, -0.008463660633377324, 0.999782742510464, 1.0691317514111809, 1.0350232882488737, 1.0804723527652265, 0.015507357262277609, 0.06485998365202106, -0.05385677889784225, 1.0658701859440844, -3.6345829184022813, -3.424342321689108]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 168, size: fix[37, 39, 32]-mov[39, 42, 32], affine para: [0.020642896522730728, -0.00609333453541507, -0.0049819311016650715, 0.999755931445215, 1.0672113236260405, 1.0368204808030435, 1.0782877202268346, 0.020173379617990747, 0.06629555883485307, -0.06304103101555732, 1.042074425983626, -3.645838968594662, -3.5059010023009076]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 158, size: fix[73, 77, 39]-mov[77, 84, 37], affine para: [0.02595060608459021, -0.004226572569317081, -0.006495860243096852, 0.9996331856875605, 1.0675132859712793, 1.0329171920181, 1.073214364875847, 0.023249184266659142, 0.07050241454293743, -0.06502807595160784, 0.9253393023799321, -3.5678998135720255, -3.5216237710180702]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 389, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.028404702042855525, -0.00007631935915123368, 0.012555201282714337, 0.9995176506685425, 0.9216918643824227, 0.9443818134082625, 0.9199317421952127, -0.02140211750716872, -0.04878181670693778, 0.034473798724283106, -1.4068287948684748, 3.6950078312046166, 3.1304450994487976]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 125, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.026339743912173624, 0.0021459303041083725, 0.010990632218109371, 0.9995903255220197, 0.9294019150177, 0.9416381217089402, 0.9177242072958304, -0.0168735566731186, -0.057358175214405886, 0.04793468379077656, -1.3380574659442321, 3.7364629197273995, 3.0777444244379275]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 138, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.023620395914108888, 0.0034269933713226763, 0.011468325318244712, 0.9996493435838832, 0.9195015316453412, 0.9398797509628236, 0.912442611554554, -0.018594450643119074, -0.06495840954155094, 0.05519721809186501, -1.3117438084252384, 3.6105517896335773, 3.0924560696011554]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 148, size: fix[39, 42, 32]-mov[37, 39, 32], affine para: [-0.025180750105939887, 0.003892533055698281, 0.009486140973414884, 0.9996303272409982, 0.9250235279878503, 0.9470979683070306, 0.9134078176060437, -0.016698243342150986, -0.05948276051066685, 0.06645973639712086, -1.2179306870671294, 3.844167392502417, 3.061677349694012]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 70, size: fix[77, 84, 37]-mov[73, 77, 39], affine para: [-0.0239977262223033, 0.004550049535386489, 0.008970906650457145, 0.9996614071870803, 0.9355854820155783, 0.963622483935909, 0.9246883527329128, -0.017391803546930523, -0.06226774599973604, 0.06642617074490949, -1.129257800316512, 3.9241986011881003, 3.1908669226854864]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.535432 v2 -0.536315
 last params [0.02595060608459021, -0.004226572569317081, -0.006495860243096852, 0.9996331856875605, 1.0675132859712793, 1.0329171920181, 1.073214364875847, 0.023249184266659142, 0.07050241454293743, -0.06502807595160784, 0.9253393023799321, -3.5678998135720255, -3.5216237710180702]
 my params [-0.0239977262223033, 0.004550049535386489, 0.008970906650457145, 0.9996614071870803, 0.9355854820155783, 0.963622483935909, 0.9246883527329128, -0.017391803546930523, -0.06226774599973604, 0.06642617074490949, -1.129257800316512, 3.9241986011881003, 3.1908669226854864]
A=1.06888 0.0401382 0.0549629 
-0.019462 1.03294 -0.121456 
0.0093723 0.0519752 1.08016 

rotation R0.999796 0.0177434 -0.00966519 
-0.0182042 0.998589 -0.0498773 
0.00876656 0.0500431 0.998709 

upper R1.0691 0.0217819 0.066632 
0 1.03479 -0.0662554 
0 0 1.08429 

s=0.250091 u=0.0249892 v=-0.00460961 w-0.00899016 r=0.999637
m_Rotation from vnl0.0249892 -0.00460961 -0.00899016 0.999637
 new params [0.02498919501796072, -0.004609611673673677, -0.00899016287667934, 0.9996366682870447, 1.0690964885416574, 1.0347921552749002, 1.084286830953722, 0.02037410699607479, 0.062325491242106984, -0.06402776297884188, 0.8741494975556323, -3.687872713735664, -3.6400082467847845]
outputput affine center: [8.5642, -15.1329, 26.1372]
output affine para: [0.02498919501796072, -0.004609611673673677, -0.00899016287667934, 0.9996366682870447, 1.0690964885416574, 1.0347921552749002, 1.084286830953722, 0.02037410699607479, 0.062325491242106984, -0.06402776297884188, 0.8741494975556323, -3.687872713735664, -3.6400082467847845]
initial measure value (MMI): rval = -0.286899
final measure value (MMI): rval = -0.551284
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -6222.02
 iteration 2 energy 0 : -6678.99
 iteration 3 energy 0 : -7045.63
 iteration 4 energy 0 : -7280.41
 iteration 5 energy 0 : -7438.06
 iteration 6 energy 0 : -7563.3
 iteration 7 energy 0 : -7676.91
 iteration 8 energy 0 : -7749.32
 iteration 9 energy 0 : -7804.53
 iteration 10 energy 0 : -7840.23
 iteration 11 energy 0 : -7842.27
 iteration 12 energy 0 : -7836.1
 E-Slope 0.00700344 iteration 13 energy 0 : -7840.59
 E-Slope 0.00481027 iteration 14 energy 0 : -7840.23
 E-Slope 0.00329603 iteration 15 energy 0 : -7842.6
 E-Slope 0.00219037 iteration 16 energy 0 : -7845.39
 E-Slope 0.00135083 iteration 17 energy 0 : -7846.54
 E-Slope 0.000759713 iteration 18 energy 0 : -7853.99
 E-Slope 0.00040549 iteration 19 energy 0 : -7854.19
 E-Slope 0.000233486 iteration 20 energy 0 : -7865.53
 E-Slope 0.000181556 iteration 21 energy 0 : -7865.13
 E-Slope 0.0002537 iteration 22 energy 0 : -7883.07
 E-Slope 0.000309967 iteration 23 energy 0 : -7881.79
 E-Slope 0.000386499 iteration 24 energy 0 : -7904.31
 E-Slope 0.000443019 iteration 25 energy 0 : -7902.79
 E-Slope 0.000530794 iteration 26 energy 0 : -7927.33
 E-Slope 0.000572979 iteration 27 energy 0 : -7921.81
 E-Slope 0.000612028 iteration 28 energy 0 : -7932.95
 E-Slope 0.000601515 iteration 29 energy 0 : -7928.91
 E-Slope 0.00061658 iteration 30 energy 0 : -7947.61
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -12112.2
 iteration 2 energy 0 : -12190
 iteration 3 energy 0 : -12275.5
 iteration 4 energy 0 : -12391.5
 iteration 5 energy 0 : -12515.6
 iteration 6 energy 0 : -12613
 iteration 7 energy 0 : -12697.3
 iteration 8 energy 0 : -12784.1
 iteration 9 energy 0 : -12839.2
 iteration 10 energy 0 : -12839.6
 iteration 11 energy 0 : -12822.1
 iteration 12 energy 0 : -12828.2
 E-Slope 0.00276744 iteration 13 energy 0 : -12818.7
 E-Slope 0.00214095 iteration 14 energy 0 : -12822.9
 E-Slope 0.00150301 iteration 15 energy 0 : -12821.8
 E-Slope 0.000949442 iteration 16 energy 0 : -12823.9
 E-Slope 0.000548489 iteration 17 energy 0 : -12838.2
 E-Slope 0.000252105 iteration 18 energy 0 : -12833
 E-Slope 0.000104763 iteration 19 energy 0 : -12857.7
 E-Slope 6.96704e-05 iteration 20 energy 0 : -12850.2
 Converged due to oscillation in optimization  metric 0 bad 5  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -76960.2
 iteration 2 energy 0 : -78526.6
 iteration 3 energy 0 : -80143.6
 iteration 4 energy 0 : -81532.9
 iteration 5 energy 0 : -82565.1
 iteration 6 energy 0 : -83412.3
 iteration 7 energy 0 : -84169.6
 iteration 8 energy 0 : -84852.7
 iteration 9 energy 0 : -85439.9
 iteration 10 energy 0 : -85933.7
 iteration 11 energy 0 : -86316.3
 iteration 12 energy 0 : -86643.7
 E-Slope 0.00495562 iteration 13 energy 0 : -86923.4
 E-Slope 0.00413107 iteration 14 energy 0 : -87156.7
 E-Slope 0.00345995 iteration 15 energy 0 : -87346.9
 E-Slope 0.00292487 iteration 16 energy 0 : -87519.8
 E-Slope 0.00246973 iteration 17 energy 0 : -87673
 E-Slope 0.00207701 iteration 18 energy 0 : -87815.4
 E-Slope 0.00174785 iteration 19 energy 0 : -87946.6
 E-Slope 0.00148485 iteration 20 energy 0 : -88072.3
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1888_01292016_Aug1_Ref_vimp2_702_04302014/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1888_01292016_Aug1_Ref_vimp2_702_04302014/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1888_01292016_Aug1_Ref_vimp2_702_04302014/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1888_01292016_Aug1_Ref_vimp2_702_04302014/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1888_01292016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2914_02162017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1888_01292016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2914_02162017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547780186
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [8.5642, -15.1329, 26.1372]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 2.3389122090400107, 25.68876678891875, -12.901756018895421]
level 0, iter 2444, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.05253034441027503, -0.012505920569084242, 0.01018051988376607, 0.9984891195610264, 0.9599049936992317, 0.9395443459478002, 0.8985313746039847, 0.024736918310047075, 0.05414201667354603, -0.08746046113911864, 1.5144553027277772, 24.389743774469544, -14.051669612664206]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 152, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.04300552862541842, -0.015222103758108022, 0.008026644235635119, 0.9989266164474447, 0.9628623708160363, 0.947679062327976, 0.9005671517466991, 0.028533642053810607, 0.05875565981411397, -0.1025630325146381, 1.5551432571238322, 24.524258024701524, -14.140490641972773]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 106, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.03963173988965303, -0.018444030097773647, 0.007941853730432493, 0.9990125474219009, 0.9620146363177989, 0.9551588504305626, 0.895606370980244, 0.031739610421598716, 0.06832062629371181, -0.12449335166939585, 1.517783071384977, 24.399554057072685, -14.160506238792024]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 372, size: fix[37, 39, 32]-mov[36, 38, 32], affine para: [0.03648501423194228, -0.01712966383735716, 0.015125954461552921, 0.99907288215372, 0.9547171490085827, 0.9644180121310405, 0.8921296516223197, 0.047322348090841244, 0.07294592353425547, -0.14124073460225192, 1.5240604157640552, 24.308869842932637, -13.936411053936549]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 236, size: fix[73, 77, 39]-mov[72, 76, 37], affine para: [0.03664647690396212, -0.017523406787895386, 0.01615318514752085, 0.9990440633699113, 0.9579094614773269, 0.9703250263024868, 0.902854988423392, 0.04404654186818995, 0.06783676180560029, -0.14598904469654114, 1.50304277085246, 24.27617729438346, -13.899143572613056]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 1821, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.04459455847176555, 0.008811360311836432, -0.014555863211486506, 0.9988602565576088, 1.0358669294784308, 1.0244634301992241, 1.1090977018751913, -0.042152172361161165, -0.05172531644758211, 0.12123574173165982, -1.7087877107924705, -21.456093443411767, 17.591479546733883]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 59, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.04291535012607471, 0.00971034872556528, -0.016874004945880032, 0.9988890077522481, 1.0345502545343208, 1.0220833815867432, 1.1106995372892687, -0.04071140684466725, -0.05781252464261007, 0.12372786503056488, -1.903914928244751, -21.471507182651926, 17.514806638270535]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 1094, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.039251713665456885, 0.014328027398325388, -0.02287655659471438, 0.9988646924201329, 1.033029216138521, 1.0171027597777813, 1.122862099601406, -0.047204175925016946, -0.07169042603128455, 0.14772671091392373, -2.0217845955984384, -21.161528504439477, 17.506769803291725]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 937, size: fix[36, 38, 32]-mov[37, 39, 32], affine para: [-0.03805133538475066, 0.012565462694646163, -0.018147370004992613, 0.9990319704517011, 1.0332104686955905, 1.0120810606681705, 1.1247942178015709, -0.03458972971983241, -0.06911087924008104, 0.16566931608942737, -2.0968923984729004, -20.685898160123692, 17.62779066193523]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 607, size: fix[72, 76, 37]-mov[73, 77, 39], affine para: [-0.034751488978096656, 0.012868211098955485, -0.01804497844432214, 0.9991501998748045, 1.0421248669013796, 1.0278545491125695, 1.1302000898626043, -0.04132369528252314, -0.08309098639674084, 0.1726986412161352, -2.1311510655381536, -21.105192788689084, 17.371183967724367]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.52288 v2 -0.509307
final [0.03664647690396212, -0.017523406787895386, 0.01615318514752085, 0.9990440633699113, 0.9579094614773269, 0.9703250263024868, 0.902854988423392, 0.04404654186818995, 0.06783676180560029, -0.14598904469654114, 1.50304277085246, 24.27617729438346, -13.899143572613056]
outputput affine center: [8.5642, -15.1329, 26.1372]
output affine para: [0.03664647690396212, -0.017523406787895386, 0.01615318514752085, 0.9990440633699113, 0.9579094614773269, 0.9703250263024868, 0.902854988423392, 0.04404654186818995, 0.06783676180560029, -0.14598904469654114, 1.50304277085246, 24.27617729438346, -13.899143572613056]
initial measure value (MMI): rval = -0.280184
final measure value (MMI): rval = -0.541649
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -6355.72
 iteration 2 energy 0 : -6688.2
 iteration 3 energy 0 : -6977.76
 iteration 4 energy 0 : -7210.97
 iteration 5 energy 0 : -7401.91
 iteration 6 energy 0 : -7551.39
 iteration 7 energy 0 : -7676.1
 iteration 8 energy 0 : -7777.29
 iteration 9 energy 0 : -7856.25
 iteration 10 energy 0 : -7868.07
 iteration 11 energy 0 : -7888.88
 iteration 12 energy 0 : -7896.99
 E-Slope 0.00790437 iteration 13 energy 0 : -7922.47
 E-Slope 0.00587871 iteration 14 energy 0 : -7926.56
 E-Slope 0.00433195 iteration 15 energy 0 : -7957.25
 E-Slope 0.00311927 iteration 16 energy 0 : -7958.64
 E-Slope 0.0022874 iteration 17 energy 0 : -7994.75
 E-Slope 0.00167987 iteration 18 energy 0 : -7994.16
 E-Slope 0.00137269 iteration 19 energy 0 : -8034.35
 E-Slope 0.00121747 iteration 20 energy 0 : -8032.76
 E-Slope 0.00127704 iteration 21 energy 0 : -8072.11
 E-Slope 0.00126404 iteration 22 energy 0 : -8067.25
 E-Slope 0.00131664 iteration 23 energy 0 : -8107.04
 E-Slope 0.00128313 iteration 24 energy 0 : -8101.74
 E-Slope 0.00128756 iteration 25 energy 0 : -8126.28
 E-Slope 0.0011952 iteration 26 energy 0 : -8119.47
 E-Slope 0.00117408 iteration 27 energy 0 : -8149.82
 E-Slope 0.00105084 iteration 28 energy 0 : -8140.87
 E-Slope 0.000985079 iteration 29 energy 0 : -8156.37
 E-Slope 0.000839904 iteration 30 energy 0 : -8152.91
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -12608.9
 iteration 2 energy 0 : -12747.4
 iteration 3 energy 0 : -12879.1
 iteration 4 energy 0 : -12933.9
 iteration 5 energy 0 : -12989.1
 iteration 6 energy 0 : -13010.2
 iteration 7 energy 0 : -13061.3
 iteration 8 energy 0 : -13064.6
 iteration 9 energy 0 : -13115.4
 iteration 10 energy 0 : -13110.6
 iteration 11 energy 0 : -13152.3
 iteration 12 energy 0 : -13143.4
 E-Slope 0.0014601 iteration 13 energy 0 : -13180.1
 E-Slope 0.00113519 iteration 14 energy 0 : -13169.9
 E-Slope 0.000979461 iteration 15 energy 0 : -13199.4
 E-Slope 0.000821427 iteration 16 energy 0 : -13188.1
 E-Slope 0.000734724 iteration 17 energy 0 : -13216.2
 E-Slope 0.000609502 iteration 18 energy 0 : -13204.2
 E-Slope 0.000561655 iteration 19 energy 0 : -13230.8
 E-Slope 0.000458203 iteration 20 energy 0 : -13217.7
 E-Slope 0.000440776 iteration 21 energy 0 : -13243.6
 E-Slope 0.000362836 iteration 22 energy 0 : -13229.7
 E-Slope 0.000363529 iteration 23 energy 0 : -13255.5
 E-Slope 0.000301994 iteration 24 energy 0 : -13241
 E-Slope 0.000312448 iteration 25 energy 0 : -13264.8
 E-Slope 0.000261933 iteration 26 energy 0 : -13249.8
 E-Slope 0.000275455 iteration 27 energy 0 : -13273.7
 E-Slope 0.000226371 iteration 28 energy 0 : -13257.1
 E-Slope 0.000241026 iteration 29 energy 0 : -13280.7
 E-Slope 0.000192881 iteration 30 energy 0 : -13263
 E-Slope 0.000208199 iteration 31 energy 0 : -13286.4
 E-Slope 0.000162862 iteration 32 energy 0 : -13269.6
 E-Slope 0.000179596 iteration 33 energy 0 : -13291.5
 E-Slope 0.000137419 iteration 34 energy 0 : -13275.4
 E-Slope 0.000157125 iteration 35 energy 0 : -13296.1
 E-Slope 0.000115611 iteration 36 energy 0 : -13277.9
 E-Slope 0.000136025 iteration 37 energy 0 : -13299.6
 E-Slope 9.76473e-05 iteration 38 energy 0 : -13282.7
 Converged due to oscillation in optimization  metric 0 bad 15  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -79523.8
 iteration 2 energy 0 : -81212.1
 iteration 3 energy 0 : -82898.9
 iteration 4 energy 0 : -84127.3
 iteration 5 energy 0 : -85064.7
 iteration 6 energy 0 : -85815.6
 iteration 7 energy 0 : -86558.3
 iteration 8 energy 0 : -87289.6
 iteration 9 energy 0 : -87891.1
 iteration 10 energy 0 : -88402.7
 iteration 11 energy 0 : -88865.1
 iteration 12 energy 0 : -89293
 E-Slope 0.00479205 iteration 13 energy 0 : -89657.5
 E-Slope 0.00410789 iteration 14 energy 0 : -89979.4
 E-Slope 0.00361071 iteration 15 energy 0 : -90303.8
 E-Slope 0.00321061 iteration 16 energy 0 : -90569.5
 E-Slope 0.00286327 iteration 17 energy 0 : -90823.6
 E-Slope 0.00253826 iteration 18 energy 0 : -91038.2
 E-Slope 0.00225851 iteration 19 energy 0 : -91272.9
 E-Slope 0.00203867 iteration 20 energy 0 : -91504.9
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1888_01292016_Aug2_Ref_vimp2_2914_02162017_Test_NewCases/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1888_01292016_Aug2_Ref_vimp2_2914_02162017_Test_NewCases/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1888_01292016_Aug2_Ref_vimp2_2914_02162017_Test_NewCases/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1888_01292016_Aug2_Ref_vimp2_2914_02162017_Test_NewCases/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1907_02052016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1622_05292015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1907_02052016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1622_05292015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547780311
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [9.76494, -12.6725, 4.80572]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -2.3896089035942722, -12.967363874141826, 21.60236115867299]
level 0, iter 1031, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.11984564602459963, 0.03935220427388511, -0.019933862251358493, 0.9918120115644279, 0.9361019083399007, 1.057711672593815, 0.9107211035308399, 0.021354675197434426, 0.018931084873457245, -0.031494788846841135, -4.497977941245243, -11.22690130942238, 23.448560016116037]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 276, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.11822624850914301, 0.041753277925526217, -0.018648863324367087, 0.9919331821461751, 0.9312809121063784, 1.0663328227690763, 0.9125670944060241, 0.023613810860821812, 0.015117528202844979, -0.038056377281372164, -4.50277379667216, -11.24686613382037, 23.277462572990018]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 50, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.11745798090715415, 0.04329069741355988, -0.01768882659365345, 0.9919761305860146, 0.9343097426254076, 1.0781164732235116, 0.9174384223489163, 0.025863850922933262, 0.015918795360735788, -0.041470080987222935, -4.502254695792145, -11.256739652510623, 23.366928758003024]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 968, size: fix[43, 46, 35]-mov[37, 38, 32], affine para: [0.1132732424553922, 0.04094556719319905, -0.01858435055597992, 0.9925458452813561, 0.9270662023187525, 1.093530766847922, 0.9129901372160338, 0.02902750841636838, 0.01476133302285292, -0.0454577696387065, -4.403638428506566, -11.368139839621488, 23.282649295769644]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 99, size: fix[85, 91, 49]-mov[74, 75, 35], affine para: [0.11953374362820655, 0.04224357999015305, -0.014072858214682918, 0.9918311946825988, 0.9217725933577167, 1.093107914445457, 0.9085603393265621, 0.028203847323597802, 0.016984096856222885, -0.04630466411703497, -4.494958882989928, -11.22044914622783, 23.50829575233082]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 2678, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.14284662415091698, -0.03636217832327022, 0.01109031930961466, 0.9890144785461354, 1.0833057719665142, 0.8659907291660541, 1.0992718013964649, -0.03287517258971509, -0.04800200052336021, -0.02330485036573077, 7.4188720057266595, 2.796511029858404, -26.98889578229524]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 153, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.14270732995670707, -0.03651998535468275, 0.009497913061596752, 0.9890453469350107, 1.0863698952224756, 0.8569754332496111, 1.1055661044532417, -0.03171597440451578, -0.04587131276420479, -0.025679456663382266, 7.4525477122039465, 2.833176362317873, -27.29101635365073]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 370, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.1418444906661297, -0.039097248086772084, 0.005099311216468556, 0.9891034034340521, 1.0814482118257804, 0.8429442348815932, 1.1118963867403735, -0.04611194910336031, -0.03840940130869337, -0.028435133743122787, 7.269075238258059, 2.651240023797682, -27.36817121756967]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 42, size: fix[37, 38, 32]-mov[43, 46, 35], affine para: [-0.14309888321512815, -0.04073477811034703, 0.005210138898480938, 0.9888560268954942, 1.0797432322409686, 0.8430700103243124, 1.1094131970173715, -0.04588912714709972, -0.03695483313830012, -0.027634741510058732, 7.329452908617595, 2.5932254851567897, -27.295030324434876]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 382, size: fix[74, 75, 35]-mov[85, 91, 49], affine para: [-0.13896396189743146, -0.0416302011729465, 0.0012852890065942451, 0.9894211902300448, 1.0728230814059763, 0.8554107538277448, 1.108602939558402, -0.0476467279160751, -0.031090691241271826, -0.03450902683079633, 7.1761967652129215, 3.017334379468748, -27.397952377433462]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.447905 v2 -0.458534
 last params [0.11953374362820655, 0.04224357999015305, -0.014072858214682918, 0.9918311946825988, 0.9217725933577167, 1.093107914445457, 0.9085603393265621, 0.028203847323597802, 0.016984096856222885, -0.04630466411703497, -4.494958882989928, -11.22044914622783, 23.50829575233082]
 my params [-0.13896396189743146, -0.0416302011729465, 0.0012852890065942451, 0.9894211902300448, 1.0728230814059763, 0.8554107538277448, 1.108602939558402, -0.0476467279160751, -0.031090691241271826, -0.03450902683079633, 7.1761967652129215, 3.017334379468748, -27.397952377433462]
A=0.926946 0.0748212 0.0894171 
0.00797714 1.13243 -0.291776 
-0.0746316 0.247952 0.864071 

rotation R0.996738 0.00917229 0.080185 
0.00857776 0.975855 -0.218253 
-0.0802508 0.218228 0.972592 

upper R0.92998 0.0643925 0.0172803 
0 1.15989 -0.0953454 
0 0 0.91124 

s=0.251731 u=0.109876 v=0.0403866 w-0.000149661 r=0.993124
m_Rotation from vnl0.109876 0.0403866 -0.000149661 0.993124
 new params [0.10987573269476508, 0.04038663281525943, -0.00014966148254994457, 0.9931244739991432, 0.929979714558155, 1.1598851052245818, 0.911239868925222, 0.06924074120810728, 0.01858133353678721, -0.08220245541108039, -4.42786043290225, -11.468222516320768, 23.461197777067575]
outputput affine center: [9.76494, -12.6725, 4.80572]
output affine para: [0.10987573269476508, 0.04038663281525943, -0.00014966148254994457, 0.9931244739991432, 0.929979714558155, 1.1598851052245818, 0.911239868925222, 0.06924074120810728, 0.01858133353678721, -0.08220245541108039, -4.42786043290225, -11.468222516320768, 23.461197777067575]
initial measure value (MMI): rval = -0.194063
final measure value (MMI): rval = -0.490825
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -3684.47
 iteration 2 energy 0 : -4037.21
 iteration 3 energy 0 : -4311.75
 iteration 4 energy 0 : -4559.53
 iteration 5 energy 0 : -4757.96
 iteration 6 energy 0 : -4934.5
 iteration 7 energy 0 : -5097.05
 iteration 8 energy 0 : -5226.93
 iteration 9 energy 0 : -5356.33
 iteration 10 energy 0 : -5467.36
 iteration 11 energy 0 : -5596.82
 iteration 12 energy 0 : -5708.53
 E-Slope 0.0174419 iteration 13 energy 0 : -5809.45
 E-Slope 0.015239 iteration 14 energy 0 : -5888.81
 E-Slope 0.013445 iteration 15 energy 0 : -5957.34
 E-Slope 0.0120027 iteration 16 energy 0 : -6024.27
 E-Slope 0.0107188 iteration 17 energy 0 : -6076.33
 E-Slope 0.00959188 iteration 18 energy 0 : -6135.45
 E-Slope 0.00866314 iteration 19 energy 0 : -6206.28
 E-Slope 0.00779476 iteration 20 energy 0 : -6258.22
 E-Slope 0.00699029 iteration 21 energy 0 : -6296.96
 E-Slope 0.00625294 iteration 22 energy 0 : -6343.3
 E-Slope 0.00568323 iteration 23 energy 0 : -6389.54
 E-Slope 0.00518735 iteration 24 energy 0 : -6416.62
 E-Slope 0.00460664 iteration 25 energy 0 : -6395.24
 E-Slope 0.00412772 iteration 26 energy 0 : -6442.13
 E-Slope 0.00353257 iteration 27 energy 0 : -6423.77
 E-Slope 0.00307008 iteration 28 energy 0 : -6472.72
 E-Slope 0.00250018 iteration 29 energy 0 : -6452.98
 E-Slope 0.00208052 iteration 30 energy 0 : -6495.14
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -16099.4
 iteration 2 energy 0 : -16468.8
 iteration 3 energy 0 : -16819.9
 iteration 4 energy 0 : -17123.9
 iteration 5 energy 0 : -17366.6
 iteration 6 energy 0 : -17565.9
 iteration 7 energy 0 : -17737
 iteration 8 energy 0 : -17854.4
 iteration 9 energy 0 : -17923.2
 iteration 10 energy 0 : -17987.2
 iteration 11 energy 0 : -18012.7
 iteration 12 energy 0 : -18068
 E-Slope 0.00457851 iteration 13 energy 0 : -18170.8
 E-Slope 0.00365764 iteration 14 energy 0 : -18214.5
 E-Slope 0.00304434 iteration 15 energy 0 : -18351.9
 E-Slope 0.00264405 iteration 16 energy 0 : -18423.4
 E-Slope 0.00243438 iteration 17 energy 0 : -18515.4
 E-Slope 0.0022241 iteration 18 energy 0 : -18467.1
 E-Slope 0.00217644 iteration 19 energy 0 : -18580.7
 E-Slope 0.00210585 iteration 20 energy 0 : -18581
 E-Slope 0.00206543 iteration 21 energy 0 : -18673.5
 E-Slope 0.00191011 iteration 22 energy 0 : -18634.3
 E-Slope 0.00176261 iteration 23 energy 0 : -18734.3
 E-Slope 0.00159717 iteration 24 energy 0 : -18775.3
 E-Slope 0.00148369 iteration 25 energy 0 : -18821.9
 E-Slope 0.00127356 iteration 26 energy 0 : -18785.9
 E-Slope 0.00121672 iteration 27 energy 0 : -18871.7
 E-Slope 0.00120903 iteration 28 energy 0 : -18927.1
 E-Slope 0.00122225 iteration 29 energy 0 : -18931.8
 E-Slope 0.00115398 iteration 30 energy 0 : -18985.2
 E-Slope 0.00109056 iteration 31 energy 0 : -18949.4
 E-Slope 0.00106501 iteration 32 energy 0 : -19054.7
 E-Slope 0.00106292 iteration 33 energy 0 : -19053.9
 E-Slope 0.000914097 iteration 34 energy 0 : -19026.1
 E-Slope 0.000844061 iteration 35 energy 0 : -19058.8
 E-Slope 0.000753 iteration 36 energy 0 : -19052.3
 E-Slope 0.000701234 iteration 37 energy 0 : -19089.9
 E-Slope 0.000563793 iteration 38 energy 0 : -19093.9
 E-Slope 0.000449046 iteration 39 energy 0 : -19067.3
 E-Slope 0.000421479 iteration 40 energy 0 : -19122.2
 E-Slope 0.000392467 iteration 41 energy 0 : -19145.2
 E-Slope 0.000394225 iteration 42 energy 0 : -19146.9
 E-Slope 0.00030525 iteration 43 energy 0 : -19124.9
 E-Slope 0.000375122 iteration 44 energy 0 : -19189.5
 E-Slope 0.000378616 iteration 45 energy 0 : -19151.8
 E-Slope 0.000377849 iteration 46 energy 0 : -19200.2
 E-Slope 0.000352785 iteration 47 energy 0 : -19170.1
 E-Slope 0.000344582 iteration 48 energy 0 : -19215.8
 E-Slope 0.000313155 iteration 49 energy 0 : -19178.5
 E-Slope 0.000320509 iteration 50 energy 0 : -19230.2
 E-Slope 0.000248626 iteration 51 energy 0 : -19204.7
 E-Slope 0.000248171 iteration 52 energy 0 : -19234.7
 E-Slope 0.00027135 iteration 53 energy 0 : -19250.7
 E-Slope 0.000289373 iteration 54 energy 0 : -19261.7
 E-Slope 0.000257805 iteration 55 energy 0 : -19256.7
 E-Slope 0.000323251 iteration 56 energy 0 : -19300.7
 E-Slope 0.000311911 iteration 57 energy 0 : -19288.1
 E-Slope 0.000350669 iteration 58 energy 0 : -19307.2
 E-Slope 0.000334978 iteration 59 energy 0 : -19309.1
 E-Slope 0.000334285 iteration 60 energy 0 : -19298.6
 E-Slope 0.000289671 iteration 61 energy 0 : -19316.2
 E-Slope 0.000293814 iteration 62 energy 0 : -19330.2
 E-Slope 0.000225678 iteration 63 energy 0 : -19306.5
 E-Slope 0.000185154 iteration 64 energy 0 : -19317.3
 E-Slope 0.000134394 iteration 65 energy 0 : -19303.4
 E-Slope 9.98899e-05 iteration 66 energy 0 : -19316.3
 Converged due to oscillation in optimization  metric 0 bad 18  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -124469
 iteration 2 energy 0 : -125509
 iteration 3 energy 0 : -127067
 iteration 4 energy 0 : -128525
 iteration 5 energy 0 : -130037
 iteration 6 energy 0 : -131304
 iteration 7 energy 0 : -132701
 iteration 8 energy 0 : -133771
 iteration 9 energy 0 : -134756
 iteration 10 energy 0 : -135655
 iteration 11 energy 0 : -136549
 iteration 12 energy 0 : -137251
 E-Slope 0.00492529 iteration 13 energy 0 : -138038
 E-Slope 0.00451343 iteration 14 energy 0 : -138765
 E-Slope 0.00414211 iteration 15 energy 0 : -139524
 E-Slope 0.00379793 iteration 16 energy 0 : -140149
 E-Slope 0.00350713 iteration 17 energy 0 : -140752
 E-Slope 0.00322042 iteration 18 energy 0 : -141153
 E-Slope 0.00297372 iteration 19 energy 0 : -141533
 E-Slope 0.00273055 iteration 20 energy 0 : -141890
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1907_02052016_Aug1_Ref_vimp2_1622_05292015/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1907_02052016_Aug1_Ref_vimp2_1622_05292015/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1907_02052016_Aug1_Ref_vimp2_1622_05292015/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1907_02052016_Aug1_Ref_vimp2_1622_05292015/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1907_02052016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2462_08192016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1907_02052016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2462_08192016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547780476
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [9.76494, -12.6725, 4.80572]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 4.4831083225733455, 12.852327100385596, -8.82786142018613]
level 0, iter 871, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.1096259535373983, 0.030215589597061724, 0.002405191780050935, 0.9935106358307491, 1.0484187101840248, 1.060206787786193, 0.9763512613217402, -0.0368165661467946, 0.021067725203513746, -0.011768212506192224, 1.2051912267998188, 14.248792878040877, -7.7505774338605296]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 68, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.11469663580936204, 0.030306188547264523, -0.0008301799637850425, 0.9929378265888453, 1.0552838646748985, 1.0680353022154345, 0.9789402927235311, -0.0349793428345214, 0.02284948685292017, -0.010296832958131573, 1.1468930174874263, 14.324600741741943, -7.766910572002908]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 245, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.11580227225635699, 0.028051116746376753, 0.00373598540916741, 0.9928690804947892, 1.0550554951102715, 1.0725098081354933, 0.9836026205418563, -0.03800809359646083, 0.015893314364977804, -0.02272543378905431, 1.2828088493994285, 14.452649667284822, -7.722745197304667]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 164, size: fix[43, 46, 35]-mov[43, 41, 32], affine para: [0.1155590082036227, 0.03115461163548819, -0.002707230266549141, 0.992808227555111, 1.0481088776845127, 1.0657831105704134, 0.9799628767336704, -0.03597213365238612, 0.014155242028643576, -0.01624639858335377, 1.299733787050853, 14.170356453349969, -7.75918748841132]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 119, size: fix[85, 91, 49]-mov[85, 82, 39], affine para: [0.10865809400044059, 0.02963212170966967, -0.0016579426806529283, 0.9936360536923177, 1.0510451793349305, 1.0614941927315387, 0.9742997971994396, -0.03458863133655861, 0.015975593613549895, -0.012684372582805152, 1.3726153643797283, 14.434571117523125, -7.916381822031168]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 617, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.1221432548013834, -0.030567089052720153, -0.0019457681527258778, 0.9920397634972418, 0.9374669394675154, 0.9219146092815889, 1.0104703091222138, 0.034620344015500404, 0.0015010279545474175, -0.02469300342617262, -2.3432501054996515, -11.254630323819374, 11.086326481410588]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 307, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.11940968525819579, -0.0335365773709981, 0.0005618552489422167, 0.9922783426858902, 0.9437475689950513, 0.917319299626541, 1.012763952898027, 0.03843682915191155, 0.005763003437307836, -0.043673746201355036, -2.3635829038069094, -11.15780148178636, 10.855394125750838]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 407, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.12356373658683939, -0.02889432672213143, -0.0038484384424266305, 0.9919084183560132, 0.9409374769277842, 0.9282320196948046, 1.0149967926649004, 0.03525399404988893, -0.0005297997573363892, -0.036813028248780806, -2.373864564696508, -11.253041420468943, 11.164384806134521]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 264, size: fix[43, 41, 32]-mov[43, 46, 35], affine para: [-0.1252089211282228, -0.034828311459046406, -0.001001411296111208, 0.9915183871044623, 0.9426614411708281, 0.9262967236542656, 1.0155678182050265, 0.04035285546077633, 0.004452541880750074, -0.03828395148826334, -2.403375959024664, -11.104265842336854, 10.92229393521694]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 609, size: fix[85, 82, 39]-mov[85, 91, 49], affine para: [-0.11368462482916558, -0.03394869119806242, 0.009882327395239948, 0.992887522355198, 0.9393128475365742, 0.9172570932849364, 1.014201777213702, 0.04266509462387784, 0.007697111744340615, -0.045097833113247894, -2.2044448855797096, -11.50683505454357, 11.039808941455131]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.493553 v2 -0.48387
final [0.10865809400044059, 0.02963212170966967, -0.0016579426806529283, 0.9936360536923177, 1.0510451793349305, 1.0614941927315387, 0.9742997971994396, -0.03458863133655861, 0.015975593613549895, -0.012684372582805152, 1.3726153643797283, 14.434571117523125, -7.916381822031168]
outputput affine center: [9.76494, -12.6725, 4.80572]
output affine para: [0.10865809400044059, 0.02963212170966967, -0.0016579426806529283, 0.9936360536923177, 1.0510451793349305, 1.0614941927315387, 0.9742997971994396, -0.03458863133655861, 0.015975593613549895, -0.012684372582805152, 1.3726153643797283, 14.434571117523125, -7.916381822031168]
initial measure value (MMI): rval = -0.206772
final measure value (MMI): rval = -0.502272
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -5446.53
 iteration 2 energy 0 : -5851.7
 iteration 3 energy 0 : -6278.04
 iteration 4 energy 0 : -6590.88
 iteration 5 energy 0 : -6785.13
 iteration 6 energy 0 : -6923.01
 iteration 7 energy 0 : -7037.28
 iteration 8 energy 0 : -7146.16
 iteration 9 energy 0 : -7216.76
 iteration 10 energy 0 : -7273.84
 iteration 11 energy 0 : -7332.59
 iteration 12 energy 0 : -7392.98
 E-Slope 0.0102647 iteration 13 energy 0 : -7425.6
 E-Slope 0.00760299 iteration 14 energy 0 : -7405.13
 E-Slope 0.00583369 iteration 15 energy 0 : -7447.18
 E-Slope 0.00453717 iteration 16 energy 0 : -7431.11
 E-Slope 0.00350769 iteration 17 energy 0 : -7437.86
 E-Slope 0.00258124 iteration 18 energy 0 : -7421.05
 E-Slope 0.00194756 iteration 19 energy 0 : -7477.37
 E-Slope 0.00143743 iteration 20 energy 0 : -7463.14
 E-Slope 0.000998288 iteration 21 energy 0 : -7454.15
 E-Slope 0.000619754 iteration 22 energy 0 : -7444.53
 E-Slope 0.000484787 iteration 23 energy 0 : -7493.01
 E-Slope 0.000441313 iteration 24 energy 0 : -7481.4
 E-Slope 0.000421986 iteration 25 energy 0 : -7468.66
 E-Slope 0.000304431 iteration 26 energy 0 : -7463.57
 E-Slope 0.000394262 iteration 27 energy 0 : -7505.37
 E-Slope 0.000365533 iteration 28 energy 0 : -7488.34
 E-Slope 0.000319779 iteration 29 energy 0 : -7484.21
 E-Slope 0.000173844 iteration 30 energy 0 : -7472.98
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -18745.9
 iteration 2 energy 0 : -19055.1
 iteration 3 energy 0 : -19381.2
 iteration 4 energy 0 : -19677
 iteration 5 energy 0 : -19895.6
 iteration 6 energy 0 : -20089.4
 iteration 7 energy 0 : -20262.5
 iteration 8 energy 0 : -20363.1
 iteration 9 energy 0 : -20437.8
 iteration 10 energy 0 : -20471.9
 iteration 11 energy 0 : -20437.2
 iteration 12 energy 0 : -20560.4
 E-Slope 0.00363184 iteration 13 energy 0 : -20572.1
 E-Slope 0.00279471 iteration 14 energy 0 : -20596.6
 E-Slope 0.00204878 iteration 15 energy 0 : -20548.6
 E-Slope 0.00158871 iteration 16 energy 0 : -20680.7
 E-Slope 0.00118925 iteration 17 energy 0 : -20638.2
 E-Slope 0.000965022 iteration 18 energy 0 : -20709.4
 E-Slope 0.000764482 iteration 19 energy 0 : -20631.2
 E-Slope 0.00074213 iteration 20 energy 0 : -20766.4
 E-Slope 0.000719398 iteration 21 energy 0 : -20746.3
 E-Slope 0.000682741 iteration 22 energy 0 : -20747.3
 E-Slope 0.000507578 iteration 23 energy 0 : -20689.6
 E-Slope 0.000532761 iteration 24 energy 0 : -20807
 E-Slope 0.000489973 iteration 25 energy 0 : -20765.6
 E-Slope 0.000477314 iteration 26 energy 0 : -20805.5
 E-Slope 0.000314377 iteration 27 energy 0 : -20735.5
 E-Slope 0.000381336 iteration 28 energy 0 : -20859.8
 E-Slope 0.000334196 iteration 29 energy 0 : -20814.9
 E-Slope 0.000345953 iteration 30 energy 0 : -20826
 E-Slope 0.000205956 iteration 31 energy 0 : -20774.9
 E-Slope 0.000295766 iteration 32 energy 0 : -20890.6
 E-Slope 0.000301249 iteration 33 energy 0 : -20846.5
 E-Slope 0.000301398 iteration 34 energy 0 : -20859.5
 E-Slope 0.000155859 iteration 35 energy 0 : -20789.5
 E-Slope 0.000234239 iteration 36 energy 0 : -20912.4
 E-Slope 0.000214674 iteration 37 energy 0 : -20872.3
 E-Slope 0.000232108 iteration 38 energy 0 : -20884.6
 E-Slope 9.82955e-05 iteration 39 energy 0 : -20816.7
 Converged due to oscillation in optimization  metric 0 bad 14  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -136935
 iteration 2 energy 0 : -139491
 iteration 3 energy 0 : -141765
 iteration 4 energy 0 : -143648
 iteration 5 energy 0 : -145357
 iteration 6 energy 0 : -146709
 iteration 7 energy 0 : -147868
 iteration 8 energy 0 : -148871
 iteration 9 energy 0 : -149883
 iteration 10 energy 0 : -150973
 iteration 11 energy 0 : -151873
 iteration 12 energy 0 : -152789
 E-Slope 0.00473725 iteration 13 energy 0 : -153574
 E-Slope 0.00422769 iteration 14 energy 0 : -154229
 E-Slope 0.0038181 iteration 15 energy 0 : -154820
 E-Slope 0.00347462 iteration 16 energy 0 : -155381
 E-Slope 0.00319286 iteration 17 energy 0 : -155926
 E-Slope 0.00293846 iteration 18 energy 0 : -156440
 E-Slope 0.00270279 iteration 19 energy 0 : -156956
 E-Slope 0.00246113 iteration 20 energy 0 : -157327
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1907_02052016_Aug2_Ref_vimp2_2462_08192016_Test_NewCases/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1907_02052016_Aug2_Ref_vimp2_2462_08192016_Test_NewCases/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1907_02052016_Aug2_Ref_vimp2_2462_08192016_Test_NewCases/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1907_02052016_Aug2_Ref_vimp2_2462_08192016_Test_NewCases/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2039_03182016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2618_10262016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2039_03182016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2618_10262016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547780607
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [13.1441, 7.96882, 4.80942]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -7.387073731508156, -27.156452616968412, 11.868154401119867]
level 0, iter 4129, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.026453787849048418, -0.033866991740944985, 0.049281961294732696, 0.997859966262702, 1.038393752018392, 0.8542594655449315, 0.9109735666832258, 0.05170729135923286, 0.05567307134920127, -0.01442442309208765, -3.6474845736140833, -28.619564585168465, 7.164060008815356]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 483, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.025083668360676537, -0.037687789385702275, 0.0542725091242609, 0.9974993407848185, 1.0362520801576223, 0.8405260614041679, 0.9041671051208319, 0.057978025193515303, 0.0643629390458797, -0.01051105617135055, -3.561767165708605, -28.471107456322883, 7.239757773444969]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 377, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.028586911415185347, -0.02751619747341991, 0.05546480599309284, 0.9976719414058373, 1.052785670814659, 0.853112000336157, 0.9008806441904551, 0.06738608318101569, 0.03376327607749666, -0.011252133831593163, -3.5945673304775663, -28.50774794507114, 7.144971746231913]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 444, size: fix[37, 41, 32]-mov[41, 43, 34], affine para: [-0.032023183344408644, -0.02282686648521548, 0.049540704966786815, 0.9979975793790035, 1.0430467191397519, 0.8692726729423096, 0.8904382325722866, 0.048322189737446314, 0.020434758586266838, -0.000025381678515176255, -3.5431617045143153, -28.6711047664546, 7.050024114644933]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 163, size: fix[74, 81, 42]-mov[81, 85, 48], affine para: [-0.034984642614867154, -0.022549540969242474, 0.04805145051038302, 0.9979772798451049, 1.0503284585318478, 0.8716127491490921, 0.8881095677851518, 0.04652106118890236, 0.0299199213557649, 0.002121898335061899, -3.652967424066381, -28.52881090771214, 7.398422076967495]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 665, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.03221283368600119, 0.0004771740552036522, -0.018828770918925396, 0.9993035489962605, 0.9619042207162972, 1.034186359526477, 1.0197266156791724, -0.0361574775436, -0.015932613719138053, -0.029825449994321962, 2.9837728241905004, 29.784606165933848, -6.305827633385945]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 1866, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.03308011322020163, 0.002837929751884078, -0.019363367204479804, 0.9992610831382188, 0.965220439936455, 1.0581331869749213, 1.0129337553892859, -0.04837182012936384, -0.026474651956375595, -0.04030553196972981, 2.698391900941062, 30.610380422435398, -6.088476213328885]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 142, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.032731652867631064, 0.0038379318708282083, -0.02037824149844662, 0.9992490362531949, 0.9651197467850716, 1.0592348716607816, 1.0220312144828514, -0.04510904763404752, -0.025245464597207886, -0.04218710196708813, 2.966530640680209, 30.542146135353633, -6.063786550548133]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 1502, size: fix[41, 43, 34]-mov[37, 41, 32], affine para: [0.02845762171128458, 0.002896042952675181, -0.031720974036529834, 0.9990873617997214, 0.9574204694064996, 1.045934022539443, 1.0076262512286411, -0.06738492999483803, -0.02250150922853574, -0.05961251360186204, 2.8350617998094125, 30.018553585939365, -6.472116431534127]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 682, size: fix[81, 85, 48]-mov[74, 81, 42], affine para: [0.025147178991320632, 0.010981739312297028, -0.02498131802940992, 0.999311240074867, 0.9710138096066877, 1.0561161238006311, 1.0209139234177673, -0.0605634618554044, -0.030898179020166325, -0.0699718132155061, 2.7959587532558587, 30.43764110760649, -6.923396457976368]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.34332 v2 -0.320652
final [-0.034984642614867154, -0.022549540969242474, 0.04805145051038302, 0.9979772798451049, 1.0503284585318478, 0.8716127491490921, 0.8881095677851518, 0.04652106118890236, 0.0299199213557649, 0.002121898335061899, -3.652967424066381, -28.52881090771214, 7.398422076967495]
outputput affine center: [13.1441, 7.96882, 4.80942]
output affine para: [-0.034984642614867154, -0.022549540969242474, 0.04805145051038302, 0.9979772798451049, 1.0503284585318478, 0.8716127491490921, 0.8881095677851518, 0.04652106118890236, 0.0299199213557649, 0.002121898335061899, -3.652967424066381, -28.52881090771214, 7.398422076967495]
initial measure value (MMI): rval = -0.116156
final measure value (MMI): rval = -0.356044
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -5356.3
 iteration 2 energy 0 : -5636.25
 iteration 3 energy 0 : -5882.28
 iteration 4 energy 0 : -6066.38
 iteration 5 energy 0 : -6215.8
 iteration 6 energy 0 : -6339.17
 iteration 7 energy 0 : -6443.11
 iteration 8 energy 0 : -6534.21
 iteration 9 energy 0 : -6616.72
 iteration 10 energy 0 : -6686.35
 iteration 11 energy 0 : -6746
 iteration 12 energy 0 : -6800.03
 E-Slope 0.00924887 iteration 13 energy 0 : -6852.53
 E-Slope 0.00775996 iteration 14 energy 0 : -6906.4
 E-Slope 0.00671078 iteration 15 energy 0 : -6962.94
 E-Slope 0.00595109 iteration 16 energy 0 : -7019.04
 E-Slope 0.00540212 iteration 17 energy 0 : -7072.23
 E-Slope 0.00497106 iteration 18 energy 0 : -7111.06
 E-Slope 0.00444593 iteration 19 energy 0 : -7087.54
 E-Slope 0.00385176 iteration 20 energy 0 : -7072.54
 E-Slope 0.00320727 iteration 21 energy 0 : -7060.1
 E-Slope 0.00252941 iteration 22 energy 0 : -7053.15
 E-Slope 0.00184855 iteration 23 energy 0 : -7051.93
 E-Slope 0.00119314 iteration 24 energy 0 : -7050.27
 E-Slope 0.000622444 iteration 25 energy 0 : -7055.19
 E-Slope 0.000158325 iteration 26 energy 0 : -7053.52
 E-Slope -0.000144042 iteration 27 energy 0 : -7058.68
 Converged due to oscillation in optimization  metric 0 bad 7  
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -11617.9
 iteration 2 energy 0 : -11750.6
 iteration 3 energy 0 : -11870.5
 iteration 4 energy 0 : -11972.8
 iteration 5 energy 0 : -12077.7
 iteration 6 energy 0 : -12165.7
 iteration 7 energy 0 : -12218.5
 iteration 8 energy 0 : -12209
 iteration 9 energy 0 : -12231
 iteration 10 energy 0 : -12220.1
 iteration 11 energy 0 : -12233.4
 iteration 12 energy 0 : -12234.8
 E-Slope 0.00185221 iteration 13 energy 0 : -12237
 E-Slope 0.00129327 iteration 14 energy 0 : -12255.3
 E-Slope 0.000833668 iteration 15 energy 0 : -12249.1
 E-Slope 0.000546105 iteration 16 energy 0 : -12287.8
 E-Slope 0.000361994 iteration 17 energy 0 : -12272.1
 E-Slope 0.000362784 iteration 18 energy 0 : -12313.4
 E-Slope 0.00039164 iteration 19 energy 0 : -12293.6
 E-Slope 0.00044734 iteration 20 energy 0 : -12335.8
 E-Slope 0.000469767 iteration 21 energy 0 : -12312.7
 E-Slope 0.000505708 iteration 22 energy 0 : -12351.4
 E-Slope 0.000487626 iteration 23 energy 0 : -12326.8
 E-Slope 0.000492193 iteration 24 energy 0 : -12359
 E-Slope 0.000426814 iteration 25 energy 0 : -12335.3
 E-Slope 0.000403665 iteration 26 energy 0 : -12360
 E-Slope 0.000306614 iteration 27 energy 0 : -12339
 E-Slope 0.00028234 iteration 28 energy 0 : -12356.9
 E-Slope 0.000183836 iteration 29 energy 0 : -12339.9
 E-Slope 0.000161387 iteration 30 energy 0 : -12352.3
 E-Slope 7.33212e-05 iteration 31 energy 0 : -12339.6
 Converged due to oscillation in optimization  metric 0 bad 11  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -79205.3
 iteration 2 energy 0 : -81097.8
 iteration 3 energy 0 : -83007.9
 iteration 4 energy 0 : -84478.5
 iteration 5 energy 0 : -85591.1
 iteration 6 energy 0 : -86647
 iteration 7 energy 0 : -87721.2
 iteration 8 energy 0 : -88615.1
 iteration 9 energy 0 : -89327.4
 iteration 10 energy 0 : -89937.4
 iteration 11 energy 0 : -90489.4
 iteration 12 energy 0 : -91042.9
 E-Slope 0.00595973 iteration 13 energy 0 : -91593.9
 E-Slope 0.00518937 iteration 14 energy 0 : -92130.2
 E-Slope 0.00464049 iteration 15 energy 0 : -92724.2
 E-Slope 0.00425415 iteration 16 energy 0 : -93372.9
 E-Slope 0.00397288 iteration 17 energy 0 : -94042.8
 E-Slope 0.00377514 iteration 18 energy 0 : -94609.8
 E-Slope 0.00365909 iteration 19 energy 0 : -95097.1
 E-Slope 0.00358063 iteration 20 energy 0 : -95533.6
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2039_03182016_Aug1_Ref_vimp2_2618_10262016/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2039_03182016_Aug1_Ref_vimp2_2618_10262016/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2039_03182016_Aug1_Ref_vimp2_2618_10262016/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2039_03182016_Aug1_Ref_vimp2_2618_10262016/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2039_03182016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2598_10192016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2039_03182016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2598_10192016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547780749
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [13.1441, 7.96882, 4.80942]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -0.978258839348447, -8.680858058825791, -3.5258645360708663]
level 0, iter 292, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.019734389852931036, -0.06497343315370824, -0.04879992940289462, 0.9964976536508381, 1.081080945174404, 0.9837158255443904, 1.0750147792346205, -0.022878661229212855, 0.02475801760996501, 0.007781193836599279, 1.1409612084197145, -5.666305096356362, -4.9235630942989435]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 871, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.029767977976409492, -0.06615121927231252, -0.05657948326369671, 0.9957593312390276, 1.086897673944992, 0.9597805976460231, 1.1084249474102366, -0.038785823211157304, 0.028825696322969555, 0.0037070003389481415, 1.1857277492580292, -5.712655961166057, -4.986996336385193]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 16, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.02942818754714616, -0.0667412106520311, -0.05673887067841487, 0.9957209916098633, 1.0866536082013547, 0.9589072959407957, 1.1092643376252398, -0.03943799630417974, 0.02854104582204037, 0.0038900974473295336, 1.1997667485819106, -5.703647722150896, -5.0273504298804275]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 65, size: fix[37, 41, 32]-mov[42, 46, 32], affine para: [-0.022906238502866463, -0.06688315682310508, -0.0548971165572995, 0.9959860712704369, 1.0869024050448988, 0.9603805157651703, 1.111042368144368, -0.04480339558371104, 0.02865570558234114, 0.0019312892954004193, 1.0778099769800666, -5.809340311141925, -4.915382479008043]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 61, size: fix[74, 81, 42]-mov[83, 92, 42], affine para: [-0.02328109628901432, -0.064431129929826, -0.060322949000515005, 0.9958251663195847, 1.087958101928439, 0.9620597707702847, 1.1105216418032167, -0.04560881492920773, 0.026308079773856383, 0.0005895328762784316, 1.1080095394451068, -5.983613106908253, -4.944020863263918]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 1048, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.03491606990792471, 0.06143194675484941, 0.04602143423578887, 0.9964381624420933, 0.9204287393463155, 1.0324667884241687, 0.8792822104755205, 0.03105660985684926, -0.009922594959526186, 0.024669852328767977, -0.9893391900781648, 5.849354998643663, 4.656254339148517]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 123, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.032566039497212956, 0.05927395538627178, 0.0520379968660199, 0.9963523965778895, 0.9184566010827188, 1.033231061253229, 0.8815813223626938, 0.03897129645997698, -0.00821440471003688, 0.022437591385644134, -1.046600121990868, 5.873221905877573, 4.674853847638817]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 217, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.038568190905399584, 0.058192320577990626, 0.056017795082626325, 0.9959860215435324, 0.9191129384129862, 1.034857716459329, 0.8747624230868686, 0.04377251897907334, -0.011010873086396793, 0.02016256476458954, -1.1184861706133602, 5.8074329865636, 4.772180492828901]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 349, size: fix[42, 46, 32]-mov[37, 41, 32], affine para: [0.037328145051269676, 0.05580486312342078, 0.05625439527625309, 0.99615654886715, 0.9214053734040463, 1.0334827920454255, 0.8697356733133735, 0.04695547418360196, -0.00006515863541952683, 0.02525820739746629, -1.1137683470728963, 6.060205845407417, 4.708775391163368]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 577, size: fix[83, 92, 42]-mov[74, 81, 42], affine para: [0.025577121457911474, 0.059859643381059396, 0.055415320751920724, 0.9963391873143309, 0.918109809657191, 1.022414901486992, 0.8867069112745486, 0.055525265071206496, -0.0044287166081503114, 0.014848052034909208, -0.9483895147245857, 6.034574059543105, 4.64483000586918]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.50965 v2 -0.51004
 last params [-0.02328109628901432, -0.064431129929826, -0.060322949000515005, 0.9958251663195847, 1.087958101928439, 0.9620597707702847, 1.1105216418032167, -0.04560881492920773, 0.026308079773856383, 0.0005895328762784316, 1.1080095394451068, -5.983613106908253, -4.944020863263918]
 my params [0.025577121457911474, 0.059859643381059396, 0.055415320751920724, 0.9963391873143309, 0.918109809657191, 1.022414901486992, 0.8867069112745486, 0.055525265071206496, -0.0044287166081503114, 0.014848052034909208, -0.9483895147245857, 6.034574059543105, 4.64483000586918]
A=1.08125 0.0694434 -0.124087 
-0.107054 0.971532 0.0397352 
0.137718 -0.049997 1.11821 

rotation R0.987236 0.104354 -0.120315 
-0.0977453 0.993425 0.059596 
0.125743 -0.047075 0.990945 

upper R1.09523 -0.0326925 0.0142208 
0 0.974745 -0.0261148 
0 0 1.12538 

s=0.250892 u=-0.0267629 v=-0.0617341 w-0.0507051 r=0.996444
m_Rotation from vnl-0.0267629 -0.0617341 -0.0507051 0.996444
 new params [-0.026762903835694987, -0.0617341480124504, -0.05070512706353397, 0.9964444952113132, 1.0952331777571407, 0.9747450538401181, 1.1253833272536233, -0.029849823297811773, 0.012984265615517899, -0.02679141870626265, 1.1827497800470734, -6.148874453759485, -4.761577972895387]
outputput affine center: [13.1441, 7.96882, 4.80942]
output affine para: [-0.026762903835694987, -0.0617341480124504, -0.05070512706353397, 0.9964444952113132, 1.0952331777571407, 0.9747450538401181, 1.1253833272536233, -0.029849823297811773, 0.012984265615517899, -0.02679141870626265, 1.1827497800470734, -6.148874453759485, -4.761577972895387]
initial measure value (MMI): rval = -0.251745
final measure value (MMI): rval = -0.503678
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -6340.93
 iteration 2 energy 0 : -6612.12
 iteration 3 energy 0 : -6797.95
 iteration 4 energy 0 : -6954.49
 iteration 5 energy 0 : -7090.25
 iteration 6 energy 0 : -7224.76
 iteration 7 energy 0 : -7369.71
 iteration 8 energy 0 : -7497.99
 iteration 9 energy 0 : -7613.38
 iteration 10 energy 0 : -7692.28
 iteration 11 energy 0 : -7758.5
 iteration 12 energy 0 : -7814.31
 E-Slope 0.00897541 iteration 13 energy 0 : -7858.42
 E-Slope 0.00782932 iteration 14 energy 0 : -7894.62
 E-Slope 0.00676891 iteration 15 energy 0 : -7928.21
 E-Slope 0.00576674 iteration 16 energy 0 : -7958.48
 E-Slope 0.00482038 iteration 17 energy 0 : -7987.11
 E-Slope 0.00397827 iteration 18 energy 0 : -8015.03
 E-Slope 0.00331706 iteration 19 energy 0 : -8043.29
 E-Slope 0.0028356 iteration 20 energy 0 : -8073.35
 E-Slope 0.0025391 iteration 21 energy 0 : -8107.08
 E-Slope 0.00236277 iteration 22 energy 0 : -8145.55
 E-Slope 0.00215733 iteration 23 energy 0 : -8132.6
 E-Slope 0.00195073 iteration 24 energy 0 : -8134.15
 E-Slope 0.00171423 iteration 25 energy 0 : -8130.77
 E-Slope 0.00146146 iteration 26 energy 0 : -8135.12
 E-Slope 0.00118561 iteration 27 energy 0 : -8133
 E-Slope 0.000917852 iteration 28 energy 0 : -8138.9
 E-Slope 0.00065542 iteration 29 energy 0 : -8137.62
 E-Slope 0.00043644 iteration 30 energy 0 : -8145.06
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -13167.3
 iteration 2 energy 0 : -13344.9
 iteration 3 energy 0 : -13460.1
 iteration 4 energy 0 : -13575.7
 iteration 5 energy 0 : -13687.6
 iteration 6 energy 0 : -13729.4
 iteration 7 energy 0 : -13754.7
 iteration 8 energy 0 : -13798.1
 iteration 9 energy 0 : -13802.2
 iteration 10 energy 0 : -13836.9
 iteration 11 energy 0 : -13836
 iteration 12 energy 0 : -13860.8
 E-Slope 0.00176643 iteration 13 energy 0 : -13873.6
 E-Slope 0.00135054 iteration 14 energy 0 : -13892.8
 E-Slope 0.00106172 iteration 15 energy 0 : -13930.3
 E-Slope 0.000879005 iteration 16 energy 0 : -13940.8
 E-Slope 0.000840351 iteration 17 energy 0 : -13970.5
 E-Slope 0.000814967 iteration 18 energy 0 : -13978.5
 E-Slope 0.000815004 iteration 19 energy 0 : -14010.4
 E-Slope 0.00082507 iteration 20 energy 0 : -14013.3
 E-Slope 0.000811145 iteration 21 energy 0 : -14032.6
 E-Slope 0.000796132 iteration 22 energy 0 : -14035.7
 E-Slope 0.000762522 iteration 23 energy 0 : -14061.8
 E-Slope 0.000712134 iteration 24 energy 0 : -14062.1
 E-Slope 0.000655405 iteration 25 energy 0 : -14079.1
 E-Slope 0.000580989 iteration 26 energy 0 : -14079.7
 E-Slope 0.000552244 iteration 27 energy 0 : -14101.9
 E-Slope 0.000498489 iteration 28 energy 0 : -14101.2
 E-Slope 0.00047747 iteration 29 energy 0 : -14118.5
 E-Slope 0.000432596 iteration 30 energy 0 : -14117.6
 E-Slope 0.000430971 iteration 31 energy 0 : -14136.6
 E-Slope 0.000400312 iteration 32 energy 0 : -14134.6
 E-Slope 0.000390843 iteration 33 energy 0 : -14149.5
 E-Slope 0.000354148 iteration 34 energy 0 : -14146.8
 E-Slope 0.000353552 iteration 35 energy 0 : -14162.9
 E-Slope 0.000324674 iteration 36 energy 0 : -14160.3
 E-Slope 0.000317305 iteration 37 energy 0 : -14174
 E-Slope 0.000284448 iteration 38 energy 0 : -14171.3
 E-Slope 0.000285894 iteration 39 energy 0 : -14186.9
 E-Slope 0.000260778 iteration 40 energy 0 : -14183.1
 E-Slope 0.000259481 iteration 41 energy 0 : -14195.1
 E-Slope 0.000234075 iteration 42 energy 0 : -14192
 E-Slope 0.000238337 iteration 43 energy 0 : -14205
 E-Slope 0.000218153 iteration 44 energy 0 : -14201.8
 E-Slope 0.000219584 iteration 45 energy 0 : -14212.5
 E-Slope 0.000196621 iteration 46 energy 0 : -14209
 E-Slope 0.000198193 iteration 47 energy 0 : -14219.5
 E-Slope 0.000177205 iteration 48 energy 0 : -14216.2
 E-Slope 0.000177607 iteration 49 energy 0 : -14226
 E-Slope 0.000156462 iteration 50 energy 0 : -14222.5
 E-Slope 0.000161029 iteration 51 energy 0 : -14232.4
 E-Slope 0.000142626 iteration 52 energy 0 : -14228.1
 E-Slope 0.000144571 iteration 53 energy 0 : -14237.1
 E-Slope 0.00012669 iteration 54 energy 0 : -14233.6
 E-Slope 0.000131577 iteration 55 energy 0 : -14242.6
 E-Slope 0.000117317 iteration 56 energy 0 : -14239
 E-Slope 0.000117913 iteration 57 energy 0 : -14244.1
 E-Slope 9.65074e-05 iteration 58 energy 0 : -14238
 Converged due to oscillation in optimization  metric 0 bad 17  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -95285.4
 iteration 2 energy 0 : -97153.7
 iteration 3 energy 0 : -98507.8
 iteration 4 energy 0 : -99596.4
 iteration 5 energy 0 : -100673
 iteration 6 energy 0 : -101842
 iteration 7 energy 0 : -102828
 iteration 8 energy 0 : -103629
 iteration 9 energy 0 : -104315
 iteration 10 energy 0 : -104937
 iteration 11 energy 0 : -105477
 iteration 12 energy 0 : -105970
 E-Slope 0.00469724 iteration 13 energy 0 : -106437
 E-Slope 0.00418611 iteration 14 energy 0 : -106876
 E-Slope 0.00373567 iteration 15 energy 0 : -107287
 E-Slope 0.00331207 iteration 16 energy 0 : -107653
 E-Slope 0.00293122 iteration 17 energy 0 : -107983
 E-Slope 0.00263113 iteration 18 energy 0 : -108292
 E-Slope 0.00238911 iteration 19 energy 0 : -108568
 E-Slope 0.00218227 iteration 20 energy 0 : -108827
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2039_03182016_Aug2_Ref_vimp2_2598_10192016_Test_NewCases/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2039_03182016_Aug2_Ref_vimp2_2598_10192016_Test_NewCases/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2039_03182016_Aug2_Ref_vimp2_2598_10192016_Test_NewCases/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2039_03182016_Aug2_Ref_vimp2_2598_10192016_Test_NewCases/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2039_03182016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2476_08242016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2039_03182016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2476_08242016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547780862
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [13.4547, 7.4007, 5.16055]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -2.9123001756608424, -7.072145225023341, -9.09291508213425]
level 0, iter 566, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.06313513296002743, 0.007586265413258168, 0.03470852925397901, 0.9973724086619927, 1.0016966866449424, 0.9455632062866031, 0.8850968559591967, 0.025781472680883582, -0.01002735524148391, -0.01661397708768037, -2.591307875352915, -8.313407442108995, -9.083956833454675]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 116, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.06265587245587052, 0.008079527252274043, 0.03807892718132301, 0.9972757683764772, 0.9955840975516684, 0.9401496504012324, 0.8773984707419107, 0.03141041955933778, -0.009759735432066242, -0.023826546972751883, -2.6045749736610797, -8.253144253166468, -9.17884906294998]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 73, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.05674405329498825, 0.009293633348622411, 0.040274301976551075, 0.99753281720209, 0.997190030408963, 0.946571654400848, 0.8857489082304246, 0.03317452853807179, -0.007945300841076246, -0.027696434207599385, -2.6044677559234066, -8.366182640139936, -9.025848192201407]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 97, size: fix[38, 40, 32]-mov[38, 41, 32], affine para: [-0.058018961568374994, 0.009011870920752334, 0.04203655610366951, 0.9973893493676268, 0.9981160456540894, 0.950693532655096, 0.8828472281997309, 0.036632178562780324, -0.00824647636924749, -0.03369708093890212, -2.634407155195602, -8.395791508082585, -9.030647285150605]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 147, size: fix[75, 80, 41]-mov[76, 82, 43], affine para: [-0.0589543516977233, 0.012688524666875095, 0.03798830610191058, 0.9974569035087113, 1.0036913203449056, 0.9671576723521552, 0.8954091636509881, 0.036839858851996934, -0.01982777743906781, -0.033852209710471884, -2.5723889672132594, -8.213747474041778, -8.886612262891843]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 559, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.05999236014793913, -0.010774498936997936, -0.03219427029149793, 0.9976213489380299, 0.9875885718573638, 1.0560632139393027, 1.0936903353193408, -0.029880995831628253, 0.023414179357768267, 0.013376494344332928, 2.84003814658376, 7.362897336871414, 11.078298280062924]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 102, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.06044808709053165, -0.009955198661262762, -0.03704865991211309, 0.9974338672741301, 0.9858638225388507, 1.055800975603192, 1.0994977912490251, -0.0402046300281678, 0.02752418387797635, 0.022940932938328364, 2.964904970831398, 7.458416278236054, 11.036724310118293]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 639, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.0650227927715648, -0.014793155242510434, -0.03841178473684655, 0.9970344697007657, 0.9862466051663324, 1.0562370992843106, 1.0977673503321406, -0.04496091968869414, 0.04126997753688272, 0.03357063475797727, 2.928964100001092, 7.645443006723355, 11.069014984592659]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 24, size: fix[38, 41, 32]-mov[38, 40, 32], affine para: [0.06377706084703907, -0.012654289313717839, -0.03870547828464601, 0.9971330108979618, 0.9882591175531735, 1.05755861754931, 1.10003260933734, -0.04375518795590992, 0.0410452519370672, 0.03655080969021906, 3.0611107390746772, 7.632153193394973, 11.092462817706014]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 217, size: fix[76, 82, 43]-mov[75, 80, 41], affine para: [0.0627645098640855, -0.017003697946438683, -0.03773788660722698, 0.9971696658403161, 0.9822857048345885, 1.0572197832319743, 1.0879982095501783, -0.04442955007747378, 0.043599159245868394, 0.04152390863820311, 3.061331465379363, 7.830213050994919, 10.976344799609658]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.496643 v2 -0.492187
final [-0.0589543516977233, 0.012688524666875095, 0.03798830610191058, 0.9974569035087113, 1.0036913203449056, 0.9671576723521552, 0.8954091636509881, 0.036839858851996934, -0.01982777743906781, -0.033852209710471884, -2.5723889672132594, -8.213747474041778, -8.886612262891843]
outputput affine center: [13.4547, 7.4007, 5.16055]
output affine para: [-0.0589543516977233, 0.012688524666875095, 0.03798830610191058, 0.9974569035087113, 1.0036913203449056, 0.9671576723521552, 0.8954091636509881, 0.036839858851996934, -0.01982777743906781, -0.033852209710471884, -2.5723889672132594, -8.213747474041778, -8.886612262891843]
initial measure value (MMI): rval = -0.290054
final measure value (MMI): rval = -0.506705
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -6073.85
 iteration 2 energy 0 : -6395.46
 iteration 3 energy 0 : -6649.12
 iteration 4 energy 0 : -6868.64
 iteration 5 energy 0 : -7059.82
 iteration 6 energy 0 : -7214.72
 iteration 7 energy 0 : -7333.33
 iteration 8 energy 0 : -7429.82
 iteration 9 energy 0 : -7513.44
 iteration 10 energy 0 : -7586.43
 iteration 11 energy 0 : -7652.28
 iteration 12 energy 0 : -7711.69
 E-Slope 0.0092522 iteration 13 energy 0 : -7760.14
 E-Slope 0.00761815 iteration 14 energy 0 : -7791.32
 E-Slope 0.0062605 iteration 15 energy 0 : -7813.58
 E-Slope 0.00512943 iteration 16 energy 0 : -7826.98
 E-Slope 0.00421416 iteration 17 energy 0 : -7842.51
 E-Slope 0.00347026 iteration 18 energy 0 : -7858.49
 E-Slope 0.00285446 iteration 19 energy 0 : -7877.89
 E-Slope 0.00235513 iteration 20 energy 0 : -7900.69
 E-Slope 0.00198679 iteration 21 energy 0 : -7930.17
 E-Slope 0.00173844 iteration 22 energy 0 : -7957.53
 E-Slope 0.00161491 iteration 23 energy 0 : -7988.24
 E-Slope 0.00148425 iteration 24 energy 0 : -7970.26
 E-Slope 0.00147668 iteration 25 energy 0 : -8009.95
 E-Slope 0.00139928 iteration 26 energy 0 : -7992
 E-Slope 0.00135688 iteration 27 energy 0 : -8021.35
 E-Slope 0.00121125 iteration 28 energy 0 : -8004.45
 E-Slope 0.00113591 iteration 29 energy 0 : -8049.4
 E-Slope 0.000980221 iteration 30 energy 0 : -8033.11
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -13217.4
 iteration 2 energy 0 : -13332.5
 iteration 3 energy 0 : -13450.9
 iteration 4 energy 0 : -13591.4
 iteration 5 energy 0 : -13754.8
 iteration 6 energy 0 : -13884.8
 iteration 7 energy 0 : -13995
 iteration 8 energy 0 : -14095.2
 iteration 9 energy 0 : -14185
 iteration 10 energy 0 : -14271.6
 iteration 11 energy 0 : -14351.7
 iteration 12 energy 0 : -14430.3
 E-Slope 0.00425741 iteration 13 energy 0 : -14407.8
 E-Slope 0.00371372 iteration 14 energy 0 : -14414.3
 E-Slope 0.0030418 iteration 15 energy 0 : -14378.2
 E-Slope 0.00247968 iteration 16 energy 0 : -14460.2
 E-Slope 0.00191651 iteration 17 energy 0 : -14417.2
 E-Slope 0.00151318 iteration 18 energy 0 : -14493.6
 E-Slope 0.00109456 iteration 19 energy 0 : -14446.6
 E-Slope 0.000859991 iteration 20 energy 0 : -14530.4
 E-Slope 0.000625245 iteration 21 energy 0 : -14485.3
 E-Slope 0.000530146 iteration 22 energy 0 : -14531.8
 E-Slope 0.000428297 iteration 23 energy 0 : -14476.3
 E-Slope 0.000529364 iteration 24 energy 0 : -14563.6
 E-Slope 0.000507616 iteration 25 energy 0 : -14525.2
 E-Slope 0.000475764 iteration 26 energy 0 : -14534.6
 E-Slope 0.000293814 iteration 27 energy 0 : -14486.7
 E-Slope 0.000326306 iteration 28 energy 0 : -14571.7
 E-Slope 0.000197344 iteration 29 energy 0 : -14518
 E-Slope 0.000266172 iteration 30 energy 0 : -14593.3
 E-Slope 0.000169262 iteration 31 energy 0 : -14536.9
 E-Slope 0.00029441 iteration 32 energy 0 : -14619.6
 E-Slope 0.000268891 iteration 33 energy 0 : -14572.1
 E-Slope 0.000336178 iteration 34 energy 0 : -14604.1
 E-Slope 0.000218719 iteration 35 energy 0 : -14545.1
 E-Slope 0.000320703 iteration 36 energy 0 : -14625.9
 E-Slope 0.00028339 iteration 37 energy 0 : -14580.7
 E-Slope 0.000290491 iteration 38 energy 0 : -14615.7
 E-Slope 0.000137188 iteration 39 energy 0 : -14563.5
 E-Slope 0.000206687 iteration 40 energy 0 : -14644.4
 E-Slope 0.000115715 iteration 41 energy 0 : -14595
 E-Slope 0.000188366 iteration 42 energy 0 : -14642.9
 E-Slope 9.14708e-05 iteration 43 energy 0 : -14588.1
 Converged due to oscillation in optimization  metric 0 bad 16  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -95250.6
 iteration 2 energy 0 : -97774.7
 iteration 3 energy 0 : -99952.4
 iteration 4 energy 0 : -101797
 iteration 5 energy 0 : -103139
 iteration 6 energy 0 : -104229
 iteration 7 energy 0 : -105177
 iteration 8 energy 0 : -106050
 iteration 9 energy 0 : -106881
 iteration 10 energy 0 : -107536
 iteration 11 energy 0 : -108085
 iteration 12 energy 0 : -108566
 E-Slope 0.0052522 iteration 13 energy 0 : -108995
 E-Slope 0.00441945 iteration 14 energy 0 : -109389
 E-Slope 0.00377415 iteration 15 energy 0 : -109756
 E-Slope 0.00328171 iteration 16 energy 0 : -110073
 E-Slope 0.0028744 iteration 17 energy 0 : -110375
 E-Slope 0.00252141 iteration 18 energy 0 : -110631
 E-Slope 0.00221725 iteration 19 energy 0 : -110880
 E-Slope 0.00196555 iteration 20 energy 0 : -111124
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2039_03182016_Test_NewCases_Aug1_Ref_vimp2_2476_08242016/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2039_03182016_Test_NewCases_Aug1_Ref_vimp2_2476_08242016/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2039_03182016_Test_NewCases_Aug1_Ref_vimp2_2476_08242016/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2039_03182016_Test_NewCases_Aug1_Ref_vimp2_2476_08242016/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2039_03182016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2878_01262017/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2039_03182016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2878_01262017/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547780959
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [13.4547, 7.4007, 5.16055]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -4.675623927614151, -13.756438267854435, 4.098447124955316]
level 0, iter 201, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.01848280966554601, -0.025556229696395736, -0.04601461999175918, 0.998442747290793, 1.037022209503592, 0.9413101155277368, 0.934009595384631, 0.013561079952265515, -0.008690389186687896, 0.01206499983429081, -1.0376675834375255, -12.077982448722699, 4.960660179448909]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 190, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.0177741944568037, -0.023256932896803556, -0.043566155211204424, 0.9986216416660308, 1.0431784888676934, 0.9178503909462271, 0.93126373976418, 0.016253734899146836, -0.01498633013294405, 0.020051252243402692, -1.0542080078346174, -11.962447215554139, 5.037785169055305]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 150, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.02217668508123761, -0.0217983114214514, -0.04335289522200744, 0.998575763141611, 1.0521906502214848, 0.9097673551530125, 0.9312224407023187, 0.018236561593519458, -0.02117687765830515, 0.027018656875804157, -1.032477928212634, -11.965621260571499, 4.967535045373418]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 118, size: fix[38, 40, 32]-mov[38, 38, 32], affine para: [0.020469674984949265, -0.02182938314990001, -0.049625089781656896, 0.9983194984079334, 1.0580553511091788, 0.8960121687172653, 0.9376455559672136, 0.01884323015836655, -0.02150737966020614, 0.03759368820775853, -0.8961109169830356, -12.01506341324635, 4.752006921808315]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 33, size: fix[75, 80, 41]-mov[75, 76, 36], affine para: [0.023655140672746273, -0.019993485141071264, -0.052030141519290335, 0.9981650961865722, 1.0511327459279398, 0.8894502618504676, 0.9289838066310274, 0.017733601389309548, -0.023411211129605505, 0.03790877631364256, -1.2577160561409841, -12.044810274935728, 4.885254276287817]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 508, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.020477322175439704, 0.028080293324876156, 0.04610646549035763, 0.9983317936654621, 0.9214364922567065, 1.0871225218428116, 1.0589303993776102, -0.005471804314423024, -0.001582625839258845, -0.030107722198440462, -0.8034558045046035, 12.57588551955811, -5.862863653453051]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 545, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.021267756710774043, 0.02598477936731196, 0.04932730204837198, 0.9982180578602814, 0.9182131137335113, 1.1078276757305388, 1.0541326437549874, -0.004171560512806997, -0.00111263869154314, -0.022004371488028664, -0.9710258685206239, 13.180669971616743, -5.799971395505096]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 164, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.01902642029525489, 0.026582487161592686, 0.043344785576815544, 0.998525210633338, 0.9130186072280743, 1.120759862794361, 1.05516459618843, -0.003771475439681029, 0.004998225559374145, -0.02959530782099479, -0.8319134517795026, 13.082938528651654, -5.723646404602461]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 150, size: fix[38, 38, 32]-mov[38, 40, 32], affine para: [-0.02054168045301342, 0.0250660863529773, 0.053802342872950895, 0.9980255701035384, 0.9140005830824919, 1.1182838562940816, 1.0578739353037998, 0.007841718451757494, 0.007935514062366996, -0.03361139599375351, -1.0947000917387062, 13.069553427309764, -5.571682092768663]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 282, size: fix[75, 76, 36]-mov[75, 80, 41], affine para: [-0.01606288188947141, 0.026740986782089728, 0.05108940265061392, 0.9982067803757539, 0.9273512040985568, 1.1280355525532153, 1.0709979134419163, 0.016718117871524052, 0.004508373572573607, -0.041395281116470596, -0.7931349586280072, 13.045219186698166, -5.579216181467309]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.41127 v2 -0.40365
final [0.023655140672746273, -0.019993485141071264, -0.052030141519290335, 0.9981650961865722, 1.0511327459279398, 0.8894502618504676, 0.9289838066310274, 0.017733601389309548, -0.023411211129605505, 0.03790877631364256, -1.2577160561409841, -12.044810274935728, 4.885254276287817]
outputput affine center: [13.4547, 7.4007, 5.16055]
output affine para: [0.023655140672746273, -0.019993485141071264, -0.052030141519290335, 0.9981650961865722, 1.0511327459279398, 0.8894502618504676, 0.9289838066310274, 0.017733601389309548, -0.023411211129605505, 0.03790877631364256, -1.2577160561409841, -12.044810274935728, 4.885254276287817]
initial measure value (MMI): rval = -0.151172
final measure value (MMI): rval = -0.430162
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -5850.14
 iteration 2 energy 0 : -6318.61
 iteration 3 energy 0 : -6635.2
 iteration 4 energy 0 : -6888.48
 iteration 5 energy 0 : -7109.93
 iteration 6 energy 0 : -7288.58
 iteration 7 energy 0 : -7433.76
 iteration 8 energy 0 : -7536.46
 iteration 9 energy 0 : -7620.51
 iteration 10 energy 0 : -7687.04
 iteration 11 energy 0 : -7745.4
 iteration 12 energy 0 : -7793.3
 E-Slope 0.0100345 iteration 13 energy 0 : -7810.83
 E-Slope 0.0078552 iteration 14 energy 0 : -7827.9
 E-Slope 0.00604874 iteration 15 energy 0 : -7822.47
 E-Slope 0.00466286 iteration 16 energy 0 : -7869.15
 E-Slope 0.00353495 iteration 17 energy 0 : -7860.03
 E-Slope 0.00268146 iteration 18 energy 0 : -7875.43
 E-Slope 0.0020076 iteration 19 energy 0 : -7868.03
 E-Slope 0.00154329 iteration 20 energy 0 : -7898.95
 E-Slope 0.00115205 iteration 21 energy 0 : -7885.25
 E-Slope 0.000878096 iteration 22 energy 0 : -7896.03
 E-Slope 0.000684619 iteration 23 energy 0 : -7893.79
 E-Slope 0.000582755 iteration 24 energy 0 : -7900.21
 E-Slope 0.000494786 iteration 25 energy 0 : -7903.95
 E-Slope 0.000428043 iteration 26 energy 0 : -7908.53
 E-Slope 0.000322506 iteration 27 energy 0 : -7911.52
 E-Slope 0.000323914 iteration 28 energy 0 : -7915.28
 E-Slope 0.000286102 iteration 29 energy 0 : -7917.81
 E-Slope 0.000275552 iteration 30 energy 0 : -7920.75
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -13113.9
 iteration 2 energy 0 : -13255.5
 iteration 3 energy 0 : -13377.1
 iteration 4 energy 0 : -13486.9
 iteration 5 energy 0 : -13575.2
 iteration 6 energy 0 : -13590.5
 iteration 7 energy 0 : -13657.3
 iteration 8 energy 0 : -13661.5
 iteration 9 energy 0 : -13742.6
 iteration 10 energy 0 : -13733.9
 iteration 11 energy 0 : -13742.5
 iteration 12 energy 0 : -13743.8
 E-Slope 0.0018281 iteration 13 energy 0 : -13820.5
 E-Slope 0.00144465 iteration 14 energy 0 : -13803.4
 E-Slope 0.00112215 iteration 15 energy 0 : -13791.5
 E-Slope 0.0008808 iteration 16 energy 0 : -13789.1
 E-Slope 0.000793919 iteration 17 energy 0 : -13847.1
 E-Slope 0.000655122 iteration 18 energy 0 : -13836.6
 E-Slope 0.000642836 iteration 19 energy 0 : -13888.3
 E-Slope 0.000561357 iteration 20 energy 0 : -13869.9
 E-Slope 0.000571989 iteration 21 energy 0 : -13876.4
 E-Slope 0.000521198 iteration 22 energy 0 : -13868.5
 E-Slope 0.000532992 iteration 23 energy 0 : -13928.4
 E-Slope 0.000466026 iteration 24 energy 0 : -13902.6
 E-Slope 0.000449032 iteration 25 energy 0 : -13881
 E-Slope 0.000370003 iteration 26 energy 0 : -13873.6
 E-Slope 0.000287451 iteration 27 energy 0 : -13899.5
 E-Slope 0.000165619 iteration 28 energy 0 : -13890.9
 E-Slope 0.000183776 iteration 29 energy 0 : -13938.5
 E-Slope 0.000139892 iteration 30 energy 0 : -13917.2
 E-Slope 0.000185713 iteration 31 energy 0 : -13932.2
 E-Slope 0.000176914 iteration 32 energy 0 : -13920.7
 E-Slope 0.000232466 iteration 33 energy 0 : -13967.4
 E-Slope 0.000220895 iteration 34 energy 0 : -13943.5
 E-Slope 0.000283271 iteration 35 energy 0 : -13944.4
 E-Slope 0.000271119 iteration 36 energy 0 : -13930
 E-Slope 0.000264585 iteration 37 energy 0 : -13967.3
 E-Slope 0.00019715 iteration 38 energy 0 : -13946.6
 E-Slope 0.000144213 iteration 39 energy 0 : -13939.8
 E-Slope 5.72056e-05 iteration 40 energy 0 : -13932
 Converged due to oscillation in optimization  metric 0 bad 18  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -89741.6
 iteration 2 energy 0 : -91867.6
 iteration 3 energy 0 : -93592.6
 iteration 4 energy 0 : -94975.6
 iteration 5 energy 0 : -96172.2
 iteration 6 energy 0 : -97139
 iteration 7 energy 0 : -97954.9
 iteration 8 energy 0 : -98713.8
 iteration 9 energy 0 : -99476.6
 iteration 10 energy 0 : -100209
 iteration 11 energy 0 : -100794
 iteration 12 energy 0 : -101313
 E-Slope 0.00505626 iteration 13 energy 0 : -101799
 E-Slope 0.00439432 iteration 14 energy 0 : -102053
 E-Slope 0.00382236 iteration 15 energy 0 : -102211
 E-Slope 0.00333728 iteration 16 energy 0 : -102534
 E-Slope 0.00288206 iteration 17 energy 0 : -102612
 E-Slope 0.00249692 iteration 18 energy 0 : -102977
 E-Slope 0.00210764 iteration 19 energy 0 : -102999
 E-Slope 0.00180044 iteration 20 energy 0 : -103384
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2039_03182016_Test_NewCases_Aug2_Ref_vimp2_2878_01262017/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2039_03182016_Test_NewCases_Aug2_Ref_vimp2_2878_01262017/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2039_03182016_Test_NewCases_Aug2_Ref_vimp2_2878_01262017/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2039_03182016_Test_NewCases_Aug2_Ref_vimp2_2878_01262017/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2119_04142016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1761_12042015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2119_04142016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1761_12042015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547781054
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [16.2877, 6.45308, 3.00225]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -9.470644420845852, -29.70082107850513, 15.979635649621923]
level 0, iter 518, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.0010317026648983746, -0.001569224382686738, 0.06187469325059536, 0.9980821586721169, 0.884523646630203, 1.0297790790251933, 0.9449625738346645, 0.06251788064263017, -0.07240351327806353, 0.06240061984686441, -8.576595799141616, -28.379343685702402, 15.065722582485877]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 67, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.0008171179240238901, 0.0005993051087304546, 0.06433312472564325, 0.9979279644416823, 0.892906194607453, 1.0387849318182718, 0.9434581291077823, 0.07295041191118445, -0.07777864620042546, 0.06286013121171134, -8.482261718443997, -28.317253772544557, 14.996443730525598]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 61, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.0036876637380491503, 0.003033581517448959, 0.06406133393479736, 0.9979345389422226, 0.89201267307352, 1.042785902035913, 0.9392471731800912, 0.07998394073472641, -0.08198588335516582, 0.06455522011349292, -8.499860394712218, -28.346624949135403, 15.077720559120957]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 86, size: fix[41, 42, 33]-mov[39, 43, 32], affine para: [-0.002676734952896764, 0.003454570095599557, 0.06925796005320843, 0.997589212053095, 0.8915788237963248, 1.050033064363824, 0.944449338431194, 0.08733679792984891, -0.08367974147478606, 0.06125142234155418, -8.528006956579722, -28.32894345166711, 15.012716636215048]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 64, size: fix[81, 84, 47]-mov[77, 85, 44], affine para: [-0.0007970537467629447, 0.0025058428372095303, 0.06845718600367205, 0.9976505897063654, 0.8879280683643023, 1.0485309359142305, 0.9380431811968983, 0.09200748849974369, -0.08524903890500338, 0.06290851769824136, -8.519402374837748, -28.424237992524155, 15.075742102321357]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 820, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.0018540085448932526, -0.005222513654602299, -0.06254830700913239, 0.9980265513971732, 1.1238990180211472, 0.9290236299620946, 1.058161491087143, -0.05010958269084384, 0.09202087507746065, -0.05454446852922411, 9.791369767221795, 26.040593834682298, -15.701301178424227]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 98, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.00019723455309119883, -0.0064133804008109875, -0.06517359683759635, 0.9978533118277535, 1.1207895349644248, 0.926917843367205, 1.0561803123787978, -0.05213559168475989, 0.09500139320669299, -0.05294721477178281, 9.838838912804995, 25.838787194057343, -15.751898363215359]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 209, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.0017698444288677532, -0.0056347148902537005, -0.06400286596919964, 0.9979322375725378, 1.121095308484857, 0.9197641199282801, 1.054369907776965, -0.05125075661617369, 0.09371699392405065, -0.0539009839143392, 9.808264105285101, 25.652402386987614, -15.847335677263374]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 194, size: fix[39, 43, 32]-mov[41, 42, 33], affine para: [0.004342096714291345, -0.002313204372704122, -0.06668793022855744, 0.9977617527463583, 1.1206588807128637, 0.9210127620087523, 1.0615782816858286, -0.05309299099511786, 0.08564827624524528, -0.05775586323170656, 9.860444994750145, 25.73281438471507, -15.675157564266465]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 110, size: fix[77, 85, 44]-mov[81, 84, 47], affine para: [0.003989719929718179, -0.0045644439770889415, -0.06371097939772685, 0.9979499782505359, 1.1252081545152905, 0.9190837384721195, 1.0616527231193467, -0.055858562171048315, 0.0868531419720174, -0.055252603620785594, 9.680537243231694, 25.908297739149823, -15.744854813954515]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.510683 v2 -0.513703
 last params [-0.0007970537467629447, 0.0025058428372095303, 0.06845718600367205, 0.9976505897063654, 0.8879280683643023, 1.0485309359142305, 0.9380431811968983, 0.09200748849974369, -0.08524903890500338, 0.06290851769824136, -8.519402374837748, -28.424237992524155, 15.075742102321357]
 my params [0.003989719929718179, -0.0045644439770889415, -0.06371097939772685, 0.9979499782505359, 1.1252081545152905, 0.9190837384721195, 1.0616527231193467, -0.055858562171048315, 0.0868531419720174, -0.055252603620785594, 9.680537243231694, 25.908297739149823, -15.744854813954515]
A=0.889958 -0.0521798 -0.0707325 
0.137816 1.07879 0.0613371 
-0.00905998 -0.00695281 0.941858 

rotation R0.988171 -0.153084 0.00911332 
0.153025 0.988198 0.0068854 
-0.0100598 -0.00540939 0.999935 

upper R0.900611 0.113589 -0.0699847 
0 1.07408 0.0663464 
0 0 0.941575 

s=0.250744 u=-0.00308284 v=0.00480755 w0.0767549 r=0.997034
m_Rotation from vnl-0.00308284 0.00480755 0.0767549 0.997034
 new params [-0.0030828419354202254, 0.004807545438017804, 0.07675489105795985, 0.9970336354863578, 0.9006108677776935, 1.0740824745481465, 0.94157464505588, 0.1261241098953393, -0.07770800261924411, 0.06177026722799538, -8.377052456911137, -28.31795912938977, 15.097264162006228]
outputput affine center: [16.2877, 6.45308, 3.00225]
output affine para: [-0.0030828419354202254, 0.004807545438017804, 0.07675489105795985, 0.9970336354863578, 0.9006108677776935, 1.0740824745481465, 0.94157464505588, 0.1261241098953393, -0.07770800261924411, 0.06177026722799538, -8.377052456911137, -28.31795912938977, 15.097264162006228]
initial measure value (MMI): rval = -0.241647
final measure value (MMI): rval = -0.527386
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -6679.73
 iteration 2 energy 0 : -7061.62
 iteration 3 energy 0 : -7295.53
 iteration 4 energy 0 : -7465.66
 iteration 5 energy 0 : -7609.43
 iteration 6 energy 0 : -7735.63
 iteration 7 energy 0 : -7835.05
 iteration 8 energy 0 : -7916.71
 iteration 9 energy 0 : -7989.45
 iteration 10 energy 0 : -8055.4
 iteration 11 energy 0 : -8116.3
 iteration 12 energy 0 : -8169.8
 E-Slope 0.00721911 iteration 13 energy 0 : -8215.1
 E-Slope 0.00597494 iteration 14 energy 0 : -8227.41
 E-Slope 0.00494341 iteration 15 energy 0 : -8225.9
 E-Slope 0.00406098 iteration 16 energy 0 : -8242.39
 E-Slope 0.00326937 iteration 17 energy 0 : -8242.59
 E-Slope 0.00256773 iteration 18 energy 0 : -8240.34
 E-Slope 0.00194509 iteration 19 energy 0 : -8242.4
 E-Slope 0.00142385 iteration 20 energy 0 : -8255.25
 E-Slope 0.000987642 iteration 21 energy 0 : -8257
 E-Slope 0.00066182 iteration 22 energy 0 : -8264.54
 E-Slope 0.000437744 iteration 23 energy 0 : -8265.2
 E-Slope 0.000324376 iteration 24 energy 0 : -8270.66
 E-Slope 0.000300817 iteration 25 energy 0 : -8271.77
 E-Slope 0.00029029 iteration 26 energy 0 : -8273.34
 E-Slope 0.000257984 iteration 27 energy 0 : -8274.6
 E-Slope 0.000256233 iteration 28 energy 0 : -8277.91
 E-Slope 0.000241943 iteration 29 energy 0 : -8279.55
 E-Slope 0.000217751 iteration 30 energy 0 : -8284.52
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -16959.4
 iteration 2 energy 0 : -17174.3
 iteration 3 energy 0 : -17332.5
 iteration 4 energy 0 : -17447.4
 iteration 5 energy 0 : -17539.9
 iteration 6 energy 0 : -17614.6
 iteration 7 energy 0 : -17682.2
 iteration 8 energy 0 : -17746.4
 iteration 9 energy 0 : -17811.4
 iteration 10 energy 0 : -17878.7
 iteration 11 energy 0 : -17951.7
 iteration 12 energy 0 : -18009.7
 E-Slope 0.00236993 iteration 13 energy 0 : -17987.4
 E-Slope 0.00202406 iteration 14 energy 0 : -17996.6
 E-Slope 0.00170311 iteration 15 energy 0 : -17982
 E-Slope 0.00142361 iteration 16 energy 0 : -18007.6
 E-Slope 0.00113206 iteration 17 energy 0 : -17992.5
 E-Slope 0.000844516 iteration 18 energy 0 : -17990.3
 E-Slope 0.000560619 iteration 19 energy 0 : -17976.5
 E-Slope 0.000327297 iteration 20 energy 0 : -17991.4
 E-Slope 0.000129446 iteration 21 energy 0 : -17980
 E-Slope 1.99974e-05 iteration 22 energy 0 : -18002.6
 Converged due to oscillation in optimization  metric 0 bad 6  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -130334
 iteration 2 energy 0 : -132759
 iteration 3 energy 0 : -134824
 iteration 4 energy 0 : -136310
 iteration 5 energy 0 : -137548
 iteration 6 energy 0 : -138637
 iteration 7 energy 0 : -139479
 iteration 8 energy 0 : -140013
 iteration 9 energy 0 : -140396
 iteration 10 energy 0 : -140772
 iteration 11 energy 0 : -141138
 iteration 12 energy 0 : -141553
 E-Slope 0.00312192 iteration 13 energy 0 : -142007
 E-Slope 0.00258368 iteration 14 energy 0 : -142632
 E-Slope 0.00226055 iteration 15 energy 0 : -143300
 E-Slope 0.00206846 iteration 16 energy 0 : -143834
 E-Slope 0.00197314 iteration 17 energy 0 : -144295
 E-Slope 0.00195376 iteration 18 energy 0 : -144715
 E-Slope 0.00197033 iteration 19 energy 0 : -145091
 E-Slope 0.00197622 iteration 20 energy 0 : -145454
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2119_04142016_Aug1_Ref_vimp2_1761_12042015/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2119_04142016_Aug1_Ref_vimp2_1761_12042015/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2119_04142016_Aug1_Ref_vimp2_1761_12042015/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2119_04142016_Aug1_Ref_vimp2_1761_12042015/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2119_04142016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1709_07072015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2119_04142016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1709_07072015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547781151
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [16.2877, 6.45308, 3.00225]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -2.6367155311696475, -23.03227422274012, 11.514639237584328]
level 0, iter 285, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.007343919399263566, 0.026690406934662195, 0.03611342698097886, 0.9989642182867257, 0.8764069117498517, 1.0138012071895435, 0.9662191344000313, 0.030794579383946395, -0.028170568591510226, 0.010151709136452166, -1.1382340336851402, -25.920110071858037, 9.12131644837723]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 2009, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.004989611963107484, 0.04040829281759496, 0.05598866258859281, 0.9976008937974975, 0.8782133313462267, 1.091920699632579, 0.9797193788484828, 0.0843453719599577, -0.05244592825331543, 0.03276192301963891, -1.2065187947533222, -25.598411825772022, 9.842443255555443]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 831, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.0038630951379294595, 0.045806551454356144, 0.04886606986171383, 0.9977469336239951, 0.8574252569094505, 1.1287589033243384, 0.9746730215461767, 0.09634525117230434, -0.06137372856117214, 0.05495769767126502, -1.1909797271961482, -25.447702571054666, 9.760848431813768]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 160, size: fix[41, 42, 33]-mov[37, 43, 35], affine para: [-0.0069866731017776615, 0.045989660926152844, 0.04668825476337651, 0.9978258086229361, 0.8580176260344263, 1.1381407366067422, 0.9659347328031112, 0.09827871739142043, -0.06628431140191633, 0.06186164231835659, -1.1139627968259984, -25.21889647014242, 9.664984162302684]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 175, size: fix[81, 84, 47]-mov[73, 86, 49], affine para: [-0.0006865212441092846, 0.04032004916143983, 0.04977767622247209, 0.9979458929591781, 0.863278027648286, 1.1537297623259797, 0.9455551059578372, 0.1063900902256832, -0.05504656535292888, 0.06388752973919193, -1.1801252760210499, -25.17983269691672, 9.769524677567563]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 2935, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.0009054217413312567, -0.051127756510677705, -0.03801738754741616, 0.9979678406490484, 1.1637009239891711, 0.82581251838706, 1.013272987758358, -0.032904823964539316, 0.0677573136381549, -0.03798890952285377, 2.132491167397554, 21.07358075133397, -9.962135252703241]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 1901, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.00031978403037559325, -0.04672799724443251, -0.0336157093055797, 0.9983418132581552, 1.1650232459091667, 0.8162387162533029, 1.0268020241796278, -0.026154359982971838, 0.056906845505781956, -0.06498583418505874, 2.351445226823164, 20.890980299667934, -9.969844889378441]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 242, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.0014529659316269274, -0.04792453049346278, -0.030815572384757135, 0.9983744431652798, 1.1591530318363776, 0.8071533734621976, 1.0053230924956238, -0.02718385295778811, 0.05231819464551653, -0.06088894785895821, 2.2817417110710627, 20.864626469922907, -9.650773164147315]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 516, size: fix[37, 43, 35]-mov[41, 42, 33], affine para: [-0.0024530466116870864, -0.035024607940218416, -0.03693935360473501, 0.9987005274636733, 1.1690457489845894, 0.817472228505348, 1.0425937024768732, -0.029583750450961798, 0.033082181739270425, -0.06496268154928622, 2.5849535648948887, 21.043803195247886, -10.176803270584312]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 729, size: fix[73, 86, 49]-mov[81, 84, 47], affine para: [-0.009019925224124216, -0.03157167121278453, -0.042364920489943045, 0.9985625088283977, 1.1855410585633621, 0.8130928283087968, 1.048996738108715, -0.037438280705791416, 0.026518334226796496, -0.07009636527563419, 2.582573448850148, 20.603648550503415, -10.663602309313099]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.398923 v2 -0.410202
 last params [-0.0006865212441092846, 0.04032004916143983, 0.04977767622247209, 0.9979458929591781, 0.863278027648286, 1.1537297623259797, 0.9455551059578372, 0.1063900902256832, -0.05504656535292888, 0.06388752973919193, -1.1801252760210499, -25.17983269691672, 9.769524677567563]
 my params [-0.009019925224124216, -0.03157167121278453, -0.042364920489943045, 0.9985625088283977, 1.1855410585633621, 0.8130928283087968, 1.048996738108715, -0.037438280705791416, 0.026518334226796496, -0.07009636527563419, 2.582573448850148, 20.603648550503415, -10.663602309313099]
A=0.844128 -0.0254859 0.0303941 
0.100595 1.22664 0.0478134 
-0.0593789 0.0197226 0.951236 

rotation R0.99056 -0.116715 0.071887 
0.118046 0.992902 -0.0145417 
-0.0696795 0.0228904 0.997307 

upper R0.852172 0.11818 -0.0305303 
0 1.22136 0.0657007 
0 0 0.950164 

s=0.250603 u=0.00938059 v=0.035477 w0.0588317 r=0.997593
m_Rotation from vnl0.00938059 0.035477 0.0588317 0.997593
 new params [0.009380593254394581, 0.035477014678606276, 0.0588316517278065, 0.9975932150203646, 0.8521722656965155, 1.2213584812676228, 0.9501640268358444, 0.1386807711547704, -0.03582641800881246, 0.05379313435708169, -1.330808728862573, -25.023181435704497, 9.890597469206103]
outputput affine center: [16.2877, 6.45308, 3.00225]
output affine para: [0.009380593254394581, 0.035477014678606276, 0.0588316517278065, 0.9975932150203646, 0.8521722656965155, 1.2213584812676228, 0.9501640268358444, 0.1386807711547704, -0.03582641800881246, 0.05379313435708169, -1.330808728862573, -25.023181435704497, 9.890597469206103]
initial measure value (MMI): rval = -0.157442
final measure value (MMI): rval = -0.42957
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -5482.38
 iteration 2 energy 0 : -5988.7
 iteration 3 energy 0 : -6433.81
 iteration 4 energy 0 : -6760.6
 iteration 5 energy 0 : -7008.7
 iteration 6 energy 0 : -7191.14
 iteration 7 energy 0 : -7340.43
 iteration 8 energy 0 : -7471.35
 iteration 9 energy 0 : -7571.46
 iteration 10 energy 0 : -7646.33
 iteration 11 energy 0 : -7709.14
 iteration 12 energy 0 : -7768.99
 E-Slope 0.0118861 iteration 13 energy 0 : -7814.34
 E-Slope 0.00917687 iteration 14 energy 0 : -7852.34
 E-Slope 0.00724817 iteration 15 energy 0 : -7887.49
 E-Slope 0.00581944 iteration 16 energy 0 : -7913.07
 E-Slope 0.0046659 iteration 17 energy 0 : -7907.76
 E-Slope 0.00369389 iteration 18 energy 0 : -7909.48
 E-Slope 0.0029306 iteration 19 energy 0 : -7934.92
 E-Slope 0.0023169 iteration 20 energy 0 : -7938.9
 E-Slope 0.00186489 iteration 21 energy 0 : -7963.41
 E-Slope 0.0015168 iteration 22 energy 0 : -7979.64
 E-Slope 0.00127701 iteration 23 energy 0 : -8000.72
 E-Slope 0.0011591 iteration 24 energy 0 : -8024.13
 E-Slope 0.00111233 iteration 25 energy 0 : -8039.61
 E-Slope 0.00108319 iteration 26 energy 0 : -8040.04
 E-Slope 0.00112304 iteration 27 energy 0 : -8062.26
 E-Slope 0.00113527 iteration 28 energy 0 : -8056.2
 E-Slope 0.00110717 iteration 29 energy 0 : -8076.22
 E-Slope 0.000986204 iteration 30 energy 0 : -8068.4
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -16329.3
 iteration 2 energy 0 : -16603.2
 iteration 3 energy 0 : -16865.8
 iteration 4 energy 0 : -17089.3
 iteration 5 energy 0 : -17265.6
 iteration 6 energy 0 : -17401.3
 iteration 7 energy 0 : -17431.3
 iteration 8 energy 0 : -17429.5
 iteration 9 energy 0 : -17514.5
 iteration 10 energy 0 : -17503.7
 iteration 11 energy 0 : -17557.5
 iteration 12 energy 0 : -17545.4
 E-Slope 0.00247078 iteration 13 energy 0 : -17588.7
 E-Slope 0.00173103 iteration 14 energy 0 : -17576.4
 E-Slope 0.0012182 iteration 15 energy 0 : -17613.5
 E-Slope 0.000860557 iteration 16 energy 0 : -17601.4
 E-Slope 0.000682391 iteration 17 energy 0 : -17636.1
 E-Slope 0.000598632 iteration 18 energy 0 : -17624.3
 E-Slope 0.000545278 iteration 19 energy 0 : -17656.1
 E-Slope 0.000433989 iteration 20 energy 0 : -17642.3
 E-Slope 0.000423573 iteration 21 energy 0 : -17671.1
 E-Slope 0.000354066 iteration 22 energy 0 : -17657.1
 E-Slope 0.000354879 iteration 23 energy 0 : -17685.7
 E-Slope 0.000298217 iteration 24 energy 0 : -17670
 E-Slope 0.00030192 iteration 25 energy 0 : -17697
 E-Slope 0.000252381 iteration 26 energy 0 : -17681.8
 E-Slope 0.000259243 iteration 27 energy 0 : -17708.9
 E-Slope 0.000215478 iteration 28 energy 0 : -17693.1
 E-Slope 0.000226103 iteration 29 energy 0 : -17718.6
 E-Slope 0.000188626 iteration 30 energy 0 : -17702.7
 E-Slope 0.00020285 iteration 31 energy 0 : -17727.1
 E-Slope 0.000167936 iteration 32 energy 0 : -17710.8
 E-Slope 0.000184119 iteration 33 energy 0 : -17736.5
 E-Slope 0.000151798 iteration 34 energy 0 : -17719.8
 E-Slope 0.000171117 iteration 35 energy 0 : -17745.2
 E-Slope 0.000140451 iteration 36 energy 0 : -17728
 E-Slope 0.000159763 iteration 37 energy 0 : -17752.9
 E-Slope 0.000130191 iteration 38 energy 0 : -17735.5
 E-Slope 0.000151373 iteration 39 energy 0 : -17760.4
 E-Slope 0.000122935 iteration 40 energy 0 : -17742.4
 E-Slope 0.000144951 iteration 41 energy 0 : -17768.1
 E-Slope 0.000117362 iteration 42 energy 0 : -17749.7
 E-Slope 0.000138499 iteration 43 energy 0 : -17774.7
 E-Slope 0.000109516 iteration 44 energy 0 : -17756
 E-Slope 0.000130564 iteration 45 energy 0 : -17780.3
 E-Slope 0.000101075 iteration 46 energy 0 : -17761.1
 E-Slope 0.000122242 iteration 47 energy 0 : -17785.8
 E-Slope 9.29162e-05 iteration 48 energy 0 : -17766.6
 Converged due to oscillation in optimization  metric 0 bad 21  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -123772
 iteration 2 energy 0 : -126221
 iteration 3 energy 0 : -128624
 iteration 4 energy 0 : -130740
 iteration 5 energy 0 : -132694
 iteration 6 energy 0 : -134300
 iteration 7 energy 0 : -135629
 iteration 8 energy 0 : -136795
 iteration 9 energy 0 : -137712
 iteration 10 energy 0 : -138511
 iteration 11 energy 0 : -139268
 iteration 12 energy 0 : -139971
 E-Slope 0.00533678 iteration 13 energy 0 : -140602
 E-Slope 0.00457779 iteration 14 energy 0 : -141200
 E-Slope 0.00395662 iteration 15 energy 0 : -141809
 E-Slope 0.00346034 iteration 16 energy 0 : -142382
 E-Slope 0.00308085 iteration 17 energy 0 : -142858
 E-Slope 0.0027867 iteration 18 energy 0 : -143308
 E-Slope 0.00255048 iteration 19 energy 0 : -143722
 E-Slope 0.00236127 iteration 20 energy 0 : -144117
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2119_04142016_Aug2_Ref_vimp2_1709_07072015/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2119_04142016_Aug2_Ref_vimp2_1709_07072015/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2119_04142016_Aug2_Ref_vimp2_1709_07072015/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2119_04142016_Aug2_Ref_vimp2_1709_07072015/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2119_04142016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2926_02222017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2119_04142016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2926_02222017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547781317
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [15.8242, 6.44462, 3.08712]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -1.383714500393797, 5.460632671005764, 9.089301992825185]
level 0, iter 462, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.07692129650180199, 0.04081036929325051, 0.07031472771387916, 0.9937169954112455, 0.8993215952695429, 1.0106772455191935, 1.0086221393442965, 0.05926655678668942, -0.06202262577441673, -0.004568861688267314, -1.9800048230474758, 4.775715331806704, 9.4473490476881]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 335, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.08199350441535912, 0.04061630156720134, 0.07936026814628953, 0.9926375618121852, 0.9027623099926485, 1.012577402456633, 1.0010577406431376, 0.08420506191438451, -0.06503581487951995, -0.0006201824159511014, -1.9414118623074772, 4.795715595763083, 9.682686621165823]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 110, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.08027251157362009, 0.04177805684833681, 0.08121134878560358, 0.992580291301446, 0.89969595920752, 1.014091474638944, 0.985770747368296, 0.09337717065648939, -0.06697183227533135, 0.0016940695557683548, -1.995092989374483, 4.7652846250862835, 9.68080738811507]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 23, size: fix[42, 43, 32]-mov[37, 42, 32], affine para: [0.08213916805223537, 0.03989019584010133, 0.08362666747471367, 0.9923046456782306, 0.9016907948649904, 1.015619671652524, 0.9957255311841333, 0.09809484313332145, -0.06797565801914571, -0.0019409845713887779, -1.9338553139977819, 4.796963763521505, 9.623837684953935]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 64, size: fix[83, 85, 45]-mov[74, 83, 37], affine para: [0.0810739878583879, 0.042856867872305235, 0.08402128699762154, 0.9922352144024001, 0.9091692153412614, 1.017933648741169, 0.9953068858256825, 0.10103970155193873, -0.06497994811385421, -0.0003099416175543107, -1.8936268247731596, 4.69241108157542, 9.618500096601352]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 668, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.08143672202884661, -0.03743872630938217, -0.07772870501399591, 0.9929373849817393, 1.1210548652197603, 0.9591049127610666, 0.9928119600514939, -0.07493378900406733, 0.03050448456731301, 0.010334575241017085, 1.9975427272310744, -6.507212987408163, -8.511731709033699]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 103, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.08445099671536899, -0.03686519323092449, -0.0782559223854415, 0.9926656019493327, 1.1224008235262986, 0.9595430182524575, 0.9949337171206609, -0.07711474650649046, 0.026830796116522407, 0.005731576958289157, 2.0390126999190725, -6.563508791260836, -8.614870425873656]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 193, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.08278324715594884, -0.03638755169529025, -0.0795630866414009, 0.9927197969800101, 1.1184057507802665, 0.9496302913786906, 0.9955650872115258, -0.07992147816882285, 0.022593917232520723, 0.004081761220447629, 2.0712193344161847, -6.485367344799726, -8.520758615787408]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 87, size: fix[37, 42, 32]-mov[42, 43, 32], affine para: [-0.08159606287979611, -0.03649005540810362, -0.07577817023786515, 0.9931103802167365, 1.1183334120009305, 0.9509656628505534, 0.9941345055105215, -0.07898980178896285, 0.028164162373320766, 0.005776647478580079, 2.0503827671636894, -6.4279140003982365, -8.48850245479336]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 63, size: fix[74, 83, 37]-mov[83, 85, 45], affine para: [-0.07946954189362837, -0.03596656854910064, -0.0748323541479801, 0.9933736037517259, 1.1185352998133928, 0.9569550939931474, 0.9950616668004643, -0.0780071492667551, 0.026948915483268762, 0.004895464809487019, 1.984489941039643, -6.43451570995275, -8.481358177388236]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.533289 v2 -0.536148
 last params [0.0810739878583879, 0.042856867872305235, 0.08402128699762154, 0.9922352144024001, 0.9091692153412614, 1.017933648741169, 0.9953068858256825, 0.10103970155193873, -0.06497994811385421, -0.0003099416175543107, -1.8936268247731596, 4.69241108157542, 9.618500096601352]
 my params [-0.07946954189362837, -0.03596656854910064, -0.0748323541479801, 0.9933736037517259, 1.1185352998133928, 0.9569550939931474, 0.9950616668004643, -0.0780071492667551, 0.026948915483268762, 0.004895464809487019, 1.984489941039643, -6.43451570995275, -8.481358177388236]
A=0.895922 -0.0527178 0.0350374 
0.161627 1.01928 -0.164208 
-0.0598583 0.164079 0.989669 

rotation R0.981994 -0.164198 0.0934204 
0.177155 0.972135 -0.153524 
-0.0656089 0.167309 0.983719 

upper R0.91235 0.118036 -0.0596148 
0 1.02698 0.000195578 
0 0 1.00204 

s=0.251965 u=0.0808387 v=0.0400698 w0.086009 r=0.992201
m_Rotation from vnl0.0808387 0.0400698 0.086009 0.992201
 new params [0.08083865665472938, 0.040069846527216145, 0.08600902337610192, 0.9922005678729646, 0.9123496429741665, 1.0269814628434837, 1.0020394959105945, 0.12937569348608413, -0.06534201635189653, 0.00019043969741321101, -1.8199960493531635, 4.845092436406097, 9.568297605047052]
outputput affine center: [15.8242, 6.44462, 3.08712]
output affine para: [0.08083865665472938, 0.040069846527216145, 0.08600902337610192, 0.9922005678729646, 0.9123496429741665, 1.0269814628434837, 1.0020394959105945, 0.12937569348608413, -0.06534201635189653, 0.00019043969741321101, -1.8199960493531635, 4.845092436406097, 9.568297605047052]
initial measure value (MMI): rval = -0.283649
final measure value (MMI): rval = -0.554118
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -6672.38
 iteration 2 energy 0 : -7076.01
 iteration 3 energy 0 : -7421.47
 iteration 4 energy 0 : -7637.55
 iteration 5 energy 0 : -7767.31
 iteration 6 energy 0 : -7877.49
 iteration 7 energy 0 : -7970.86
 iteration 8 energy 0 : -8053.78
 iteration 9 energy 0 : -8124.7
 iteration 10 energy 0 : -8136.08
 iteration 11 energy 0 : -8147
 iteration 12 energy 0 : -8164.09
 E-Slope 0.00629087 iteration 13 energy 0 : -8171.42
 E-Slope 0.00446021 iteration 14 energy 0 : -8181.86
 E-Slope 0.00323761 iteration 15 energy 0 : -8188.12
 E-Slope 0.00237302 iteration 16 energy 0 : -8198.95
 E-Slope 0.00168553 iteration 17 energy 0 : -8204
 E-Slope 0.00116695 iteration 18 energy 0 : -8208.68
 E-Slope 0.000801802 iteration 19 energy 0 : -8211.45
 E-Slope 0.000591606 iteration 20 energy 0 : -8215.66
 E-Slope 0.000535399 iteration 21 energy 0 : -8224.35
 E-Slope 0.000465617 iteration 22 energy 0 : -8222.75
 E-Slope 0.000420608 iteration 23 energy 0 : -8235.3
 E-Slope 0.00039275 iteration 24 energy 0 : -8237.33
 E-Slope 0.000385143 iteration 25 energy 0 : -8249.49
 E-Slope 0.000387438 iteration 26 energy 0 : -8254.29
 E-Slope 0.000418216 iteration 27 energy 0 : -8271.01
 E-Slope 0.000416093 iteration 28 energy 0 : -8258.78
 E-Slope 0.000459284 iteration 29 energy 0 : -8283.7
 E-Slope 0.000477895 iteration 30 energy 0 : -8282.41
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -16898.8
 iteration 2 energy 0 : -17159.4
 iteration 3 energy 0 : -17393.8
 iteration 4 energy 0 : -17554.9
 iteration 5 energy 0 : -17678.5
 iteration 6 energy 0 : -17779.7
 iteration 7 energy 0 : -17789.5
 iteration 8 energy 0 : -17782.7
 iteration 9 energy 0 : -17816.7
 iteration 10 energy 0 : -17802.3
 iteration 11 energy 0 : -17827.3
 iteration 12 energy 0 : -17828.5
 E-Slope 0.00154323 iteration 13 energy 0 : -17838.1
 E-Slope 0.000976987 iteration 14 energy 0 : -17853.3
 E-Slope 0.000613101 iteration 15 energy 0 : -17859
 E-Slope 0.000388458 iteration 16 energy 0 : -17861.8
 E-Slope 0.000291191 iteration 17 energy 0 : -17878.2
 E-Slope 0.00028722 iteration 18 energy 0 : -17878.3
 E-Slope 0.000288688 iteration 19 energy 0 : -17890.5
 E-Slope 0.000269972 iteration 20 energy 0 : -17898
 E-Slope 0.000281103 iteration 21 energy 0 : -17906.6
 E-Slope 0.000259988 iteration 22 energy 0 : -17909.9
 E-Slope 0.00025364 iteration 23 energy 0 : -17913.8
 E-Slope 0.000242807 iteration 24 energy 0 : -17924.1
 E-Slope 0.00023286 iteration 25 energy 0 : -17930.8
 E-Slope 0.000221416 iteration 26 energy 0 : -17928.5
 E-Slope 0.000203088 iteration 27 energy 0 : -17929.9
 E-Slope 0.000178456 iteration 28 energy 0 : -17933.9
 E-Slope 0.000175022 iteration 29 energy 0 : -17947.4
 E-Slope 0.000153914 iteration 30 energy 0 : -17942.9
 E-Slope 0.000147328 iteration 31 energy 0 : -17953
 E-Slope 0.000127271 iteration 32 energy 0 : -17942.6
 E-Slope 0.000130527 iteration 33 energy 0 : -17962.1
 E-Slope 0.0001183 iteration 34 energy 0 : -17953.5
 E-Slope 0.000112437 iteration 35 energy 0 : -17962.8
 E-Slope 0.000106074 iteration 36 energy 0 : -17959
 E-Slope 0.000115447 iteration 37 energy 0 : -17972.5
 E-Slope 0.000110351 iteration 38 energy 0 : -17969
 E-Slope 0.000110649 iteration 39 energy 0 : -17979.2
 E-Slope 0.000100054 iteration 40 energy 0 : -17972.6
 E-Slope 0.000119403 iteration 41 energy 0 : -17991.7
 E-Slope 0.000112146 iteration 42 energy 0 : -17980.2
 E-Slope 0.000129431 iteration 43 energy 0 : -17998.4
 E-Slope 9.88618e-05 iteration 44 energy 0 : -17974.4
 Converged due to oscillation in optimization  metric 0 bad 11  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -123807
 iteration 2 energy 0 : -125202
 iteration 3 energy 0 : -126583
 iteration 4 energy 0 : -127901
 iteration 5 energy 0 : -129288
 iteration 6 energy 0 : -130814
 iteration 7 energy 0 : -132005
 iteration 8 energy 0 : -132948
 iteration 9 energy 0 : -133793
 iteration 10 energy 0 : -134494
 iteration 11 energy 0 : -135168
 iteration 12 energy 0 : -135752
 E-Slope 0.00444584 iteration 13 energy 0 : -136284
 E-Slope 0.00397097 iteration 14 energy 0 : -136764
 E-Slope 0.00350834 iteration 15 energy 0 : -137232
 E-Slope 0.00307002 iteration 16 energy 0 : -137660
 E-Slope 0.00269305 iteration 17 energy 0 : -138095
 E-Slope 0.00241401 iteration 18 energy 0 : -138474
 E-Slope 0.00220365 iteration 19 energy 0 : -138873
 E-Slope 0.00203211 iteration 20 energy 0 : -139230
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2119_04142016_Test_NewCases_Aug1_Ref_vimp2_2926_02222017_Test_NewCases/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2119_04142016_Test_NewCases_Aug1_Ref_vimp2_2926_02222017_Test_NewCases/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2119_04142016_Test_NewCases_Aug1_Ref_vimp2_2926_02222017_Test_NewCases/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2119_04142016_Test_NewCases_Aug1_Ref_vimp2_2926_02222017_Test_NewCases/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2119_04142016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1709_07072015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2119_04142016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1709_07072015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547781426
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [15.8242, 6.44462, 3.08712]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -2.1735729482196238, -23.031951371628402, 11.41823410719513]
level 0, iter 1078, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.010423234375696984, 0.03423702364248749, 0.04185081197312979, 0.998482694859777, 0.864770292976902, 1.0912120258770266, 0.9766087875150158, 0.05992147207181793, -0.04985536547193897, -0.0032360044456449365, -1.1512337311793555, -26.072784023337352, 9.519124919032144]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 310, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.001287494899778769, 0.041590882360008914, 0.05037160308426387, 0.9978633385710292, 0.859646546681998, 1.1090368527128565, 0.9735139362695298, 0.08217693888395505, -0.0635826347484032, 0.00985003973368347, -1.2056470690855041, -26.082119377766528, 9.741158105754545]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 23, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.001552572981002766, 0.03883904862134959, 0.04689883872936746, 0.9981430843046321, 0.8616120728107165, 1.1142188147307361, 0.976008207206389, 0.08466360828092778, -0.06448072091239487, 0.01081454956064173, -1.1996023128270894, -26.10029285949426, 9.569914356204086]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 341, size: fix[42, 43, 32]-mov[37, 43, 35], affine para: [0.00033874700391061085, 0.03845493809952449, 0.05179575017746751, 0.9979169821431952, 0.8548768225565515, 1.1325850259535692, 0.9709444033480121, 0.09158017513897761, -0.05758582919290813, 0.015371048987215271, -1.2463687202094398, -25.771205711530513, 9.968374097664059]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 197, size: fix[83, 85, 45]-mov[73, 86, 49], affine para: [0.002433475285177161, 0.037098201227537035, 0.05040097864471484, 0.998036844517963, 0.8590934257395401, 1.1320569098100755, 0.9579913670368144, 0.09483063881319245, -0.05691009556199604, 0.02324899791823151, -1.2295275809571724, -25.95640274875418, 10.073052810476614]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 1209, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.0027756282634920095, -0.037397116508554394, -0.027468461681851415, 0.9989190333442551, 1.1772351703714805, 0.8227760466601122, 1.0119246433222109, -0.023177834345732024, 0.037210513332806235, -0.03905389609519855, 2.0012064876608022, 21.10205875017642, -9.66415198977343]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 128, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.004219480187773867, -0.03818994463078879, -0.030268179159889816, 0.9988030643957733, 1.1750077735341107, 0.82033299161803, 1.0153183662121898, -0.021737187164605404, 0.04061171188057945, -0.04041355435793077, 2.175712084015338, 21.252895605319804, -9.682212913180948]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 294, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.005789112874242578, -0.039237293361124775, -0.04238561915435243, 0.998313768446937, 1.166591190421927, 0.8170059738744564, 1.0267834924876866, -0.036744206098437794, 0.043579341291088904, -0.05136760519167714, 2.276395250100078, 20.698907235516028, -10.381253347153816]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 104, size: fix[37, 43, 35]-mov[42, 43, 32], affine para: [-0.00434160782349149, -0.034262321195620296, -0.04206749525359229, 0.9985176861883238, 1.1728206964458827, 0.8217396807542223, 1.033940678150592, -0.0381985898384579, 0.03928338265249976, -0.055295986063162356, 2.2199874038009653, 21.006492109217756, -10.21748830101362]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 729, size: fix[73, 86, 49]-mov[83, 85, 45], affine para: [-0.00550938806744156, -0.02975393418624752, -0.057370991402694395, 0.9978942425873769, 1.1636535032286999, 0.8402049825962477, 1.056090100690238, -0.05747576893866013, 0.03134687901503772, -0.061459598321957784, 2.346582963116976, 21.430230452328058, -10.565372993616492]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.416301 v2 -0.430213
 last params [0.002433475285177161, 0.037098201227537035, 0.05040097864471484, 0.998036844517963, 0.8590934257395401, 1.1320569098100755, 0.9579913670368144, 0.09483063881319245, -0.05691009556199604, 0.02324899791823151, -1.2295275809571724, -25.95640274875418, 10.073052810476614]
 my params [-0.00550938806744156, -0.02975393418624752, -0.057370991402694395, 0.9978942425873769, 1.1636535032286999, 0.8402049825962477, 1.056090100690238, -0.05747576893866013, 0.03134687901503772, -0.061459598321957784, 2.346582963116976, 21.430230452328058, -10.565372993616492]
A=0.861586 -0.0305427 0.0247668 
0.133248 1.18312 0.0490654 
-0.0556301 0.0136443 0.945155 

rotation R0.986246 -0.151563 0.0659398 
0.152527 0.988251 -0.00980457 
-0.063679 0.0197273 0.997775 

upper R0.873602 0.149466 -0.0282766 
0 1.17411 0.0633805 
0 0 0.944204 

s=0.250871 u=0.0074087 v=0.0325176 w0.0762875 r=0.996528
m_Rotation from vnl0.0074087 0.0325176 0.0762875 0.996528
 new params [0.007408695151622556, 0.032517598896575864, 0.0762874784462263, 0.9965279412191455, 0.8736018772644628, 1.1741147218400956, 0.9442043612376574, 0.1710915668776473, -0.03236780603757669, 0.053981547456088186, -1.1055757543587417, -25.148758356752754, 9.824054112737242]
outputput affine center: [15.8242, 6.44462, 3.08712]
output affine para: [0.007408695151622556, 0.032517598896575864, 0.0762874784462263, 0.9965279412191455, 0.8736018772644628, 1.1741147218400956, 0.9442043612376574, 0.1710915668776473, -0.03236780603757669, 0.053981547456088186, -1.1055757543587417, -25.148758356752754, 9.824054112737242]
initial measure value (MMI): rval = -0.172427
final measure value (MMI): rval = -0.414039
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -5645.42
 iteration 2 energy 0 : -6062.67
 iteration 3 energy 0 : -6474.44
 iteration 4 energy 0 : -6781.82
 iteration 5 energy 0 : -7029.84
 iteration 6 energy 0 : -7229.15
 iteration 7 energy 0 : -7398.29
 iteration 8 energy 0 : -7520.92
 iteration 9 energy 0 : -7617.55
 iteration 10 energy 0 : -7701.08
 iteration 11 energy 0 : -7766.85
 iteration 12 energy 0 : -7826.62
 E-Slope 0.0119649 iteration 13 energy 0 : -7880.38
 E-Slope 0.00941209 iteration 14 energy 0 : -7924.37
 E-Slope 0.00753341 iteration 15 energy 0 : -7963.99
 E-Slope 0.00610176 iteration 16 energy 0 : -7998.88
 E-Slope 0.00503567 iteration 17 energy 0 : -8038.87
 E-Slope 0.00428287 iteration 18 energy 0 : -8088.8
 E-Slope 0.00381995 iteration 19 energy 0 : -8145.32
 E-Slope 0.00351829 iteration 20 energy 0 : -8189
 E-Slope 0.00329321 iteration 21 energy 0 : -8218.13
 E-Slope 0.0029913 iteration 22 energy 0 : -8192.21
 E-Slope 0.00265931 iteration 23 energy 0 : -8193.99
 E-Slope 0.00225089 iteration 24 energy 0 : -8175.58
 E-Slope 0.00184868 iteration 25 energy 0 : -8186.15
 E-Slope 0.00140179 iteration 26 energy 0 : -8175.5
 E-Slope 0.000978865 iteration 27 energy 0 : -8183.69
 E-Slope 0.000558399 iteration 28 energy 0 : -8176.28
 E-Slope 0.000218816 iteration 29 energy 0 : -8184.61
 E-Slope -3.19779e-05 iteration 30 energy 0 : -8178.5
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -16665.1
 iteration 2 energy 0 : -16988
 iteration 3 energy 0 : -17202.2
 iteration 4 energy 0 : -17390.3
 iteration 5 energy 0 : -17576.3
 iteration 6 energy 0 : -17716.8
 iteration 7 energy 0 : -17830.5
 iteration 8 energy 0 : -17908.5
 iteration 9 energy 0 : -17927.5
 iteration 10 energy 0 : -17934.3
 iteration 11 energy 0 : -17976.4
 iteration 12 energy 0 : -17973.4
 E-Slope 0.0027993 iteration 13 energy 0 : -18018.7
 E-Slope 0.00210609 iteration 14 energy 0 : -18009.3
 E-Slope 0.00156176 iteration 15 energy 0 : -18052.3
 E-Slope 0.00110753 iteration 16 energy 0 : -18040.3
 E-Slope 0.000828758 iteration 17 energy 0 : -18080.3
 E-Slope 0.000630967 iteration 18 energy 0 : -18066.4
 E-Slope 0.000556044 iteration 19 energy 0 : -18103.6
 E-Slope 0.000511661 iteration 20 energy 0 : -18088
 E-Slope 0.00049179 iteration 21 energy 0 : -18122.1
 E-Slope 0.000426508 iteration 22 energy 0 : -18106
 E-Slope 0.000415303 iteration 23 energy 0 : -18138.2
 E-Slope 0.000351816 iteration 24 energy 0 : -18121.2
 E-Slope 0.000349618 iteration 25 energy 0 : -18152.2
 E-Slope 0.000291951 iteration 26 energy 0 : -18134.5
 E-Slope 0.000295326 iteration 27 energy 0 : -18163.8
 E-Slope 0.000243068 iteration 28 energy 0 : -18145.1
 E-Slope 0.000250183 iteration 29 energy 0 : -18173
 E-Slope 0.000203453 iteration 30 energy 0 : -18154.9
 E-Slope 0.00021451 iteration 31 energy 0 : -18181.8
 E-Slope 0.000172004 iteration 32 energy 0 : -18163.3
 E-Slope 0.00018546 iteration 33 energy 0 : -18189.7
 E-Slope 0.000147022 iteration 34 energy 0 : -18171.3
 E-Slope 0.000163399 iteration 35 energy 0 : -18197
 E-Slope 0.000128523 iteration 36 energy 0 : -18178.7
 E-Slope 0.000147298 iteration 37 energy 0 : -18203.5
 E-Slope 0.000115044 iteration 38 energy 0 : -18185.1
 E-Slope 0.000133142 iteration 39 energy 0 : -18207.6
 E-Slope 0.000100188 iteration 40 energy 0 : -18189.2
 E-Slope 0.000117809 iteration 41 energy 0 : -18212.5
 E-Slope 8.7209e-05 iteration 42 energy 0 : -18195.1
 Converged due to oscillation in optimization  metric 0 bad 16  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -125322
 iteration 2 energy 0 : -127630
 iteration 3 energy 0 : -129888
 iteration 4 energy 0 : -131749
 iteration 5 energy 0 : -133472
 iteration 6 energy 0 : -134971
 iteration 7 energy 0 : -136315
 iteration 8 energy 0 : -137506
 iteration 9 energy 0 : -138505
 iteration 10 energy 0 : -139459
 iteration 11 energy 0 : -140262
 iteration 12 energy 0 : -140957
 E-Slope 0.00522337 iteration 13 energy 0 : -141598
 E-Slope 0.00456287 iteration 14 energy 0 : -142112
 E-Slope 0.00399652 iteration 15 energy 0 : -142583
 E-Slope 0.00349648 iteration 16 energy 0 : -143036
 E-Slope 0.00307382 iteration 17 energy 0 : -143496
 E-Slope 0.0027227 iteration 18 energy 0 : -143964
 E-Slope 0.00244816 iteration 19 energy 0 : -144473
 E-Slope 0.00224651 iteration 20 energy 0 : -144990
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2119_04142016_Test_NewCases_Aug2_Ref_vimp2_1709_07072015/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2119_04142016_Test_NewCases_Aug2_Ref_vimp2_1709_07072015/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2119_04142016_Test_NewCases_Aug2_Ref_vimp2_1709_07072015/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2119_04142016_Test_NewCases_Aug2_Ref_vimp2_1709_07072015/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2309_07072016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2475_08242016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2309_07072016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2475_08242016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547781552
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [9.42157, -17.3149, 38.1193]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 2.530604837415913, 16.999862166257184, -35.1929175766759]
level 0, iter 646, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.12280841811604462, -0.04763197125395096, -0.024383569996494495, 0.9909867452537009, 1.0604406997236138, 1.0062853698761876, 0.9710838567032789, 0.020566627069928043, -0.02015380222348086, -0.0033087007702756275, -1.3613604767241811, 19.158197392267443, -33.96800130668482]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 60, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.11733756057987076, -0.047565247522662724, -0.020925089458361662, 0.991731609225214, 1.0722173263652302, 1.0057493610898682, 0.9696150253577995, 0.014390645952691673, -0.025157137813371155, -0.014460427027641316, -1.5522461967652517, 19.199595639181872, -33.78811898796441]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 953, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.11834875786165248, -0.043072466722026845, -0.020643210651314286, 0.9918226615565352, 1.0916894100089292, 1.0028358777691084, 0.9632337183555353, 0.0061809376916224686, -0.04199413676821543, -0.023881452055145157, -1.8731853729228714, 19.153335314553754, -33.759487510798344]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 610, size: fix[36, 39, 32]-mov[40, 44, 32], affine para: [-0.12651932748231995, -0.03537664136614162, -0.03280315847692583, 0.9907902430953843, 1.1215786276024482, 1.0122448690356374, 0.9661567644838059, 0.007787122452973922, -0.07455147497897707, -0.03601273130771554, -1.8524910029176003, 19.248092482274327, -34.05200432970767]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 217, size: fix[71, 77, 38]-mov[79, 88, 40], affine para: [-0.12024160430378748, -0.03714406750549649, -0.02353214078297803, 0.9917703933843601, 1.1163010624602028, 1.0078876352129589, 0.9630495064251577, 0.0019787519769413225, -0.07886386780215301, -0.0391437282061233, -1.9527179197489672, 19.16017853515367, -33.844660344575594]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 2036, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.12117812160430863, 0.038953859915619574, 0.0371436036784185, 0.9911704254808585, 0.8934592321743297, 0.966983723071215, 1.0150531100057814, 0.03885224820372252, 0.0637750790057118, 0.046003721403414154, 7.038091104074578, -24.61427414131319, 28.671802005836692]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 666, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.1349170148065862, 0.035499693772123954, 0.040995179354751256, 0.9893718037863403, 0.891569717513834, 0.9714305968520727, 1.0079835661114787, 0.04653238022615967, 0.0738118441540134, 0.043043718105029695, 6.9644720274608085, -25.33876985814589, 27.785628679769832]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 176, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.13206530488555043, 0.03145312167716375, 0.04832960383704437, 0.9895623809417992, 0.8841183146715846, 0.9712484039837165, 1.005177435093688, 0.052624838694186646, 0.080863351821524, 0.040071462563318734, 7.2444306352393575, -25.172705019139883, 27.70714336585212]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 2791, size: fix[40, 44, 32]-mov[36, 39, 32], affine para: [0.13061597097075733, 0.03611210164719328, 0.048198971780311024, 0.9896020631351321, 0.8744988963340911, 0.9891973840259521, 1.013562772015618, 0.051267376409660864, 0.08540316748846732, 0.04543854440741199, 7.806628922465222, -25.530077821714016, 28.196755466786524]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 299, size: fix[79, 88, 40]-mov[71, 77, 38], affine para: [0.1253174305083521, 0.03787647198864938, 0.043663076578906966, 0.9904314465040687, 0.8692862919860715, 0.9943974573783774, 1.0192006908740379, 0.05707705474547977, 0.07859821449271245, 0.052035726478553916, 7.578071496956135, -24.753576999798657, 28.9134638379995]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.380859 v2 -0.397704
 last params [-0.12024160430378748, -0.03714406750549649, -0.02353214078297803, 0.9917703933843601, 1.1163010624602028, 1.0078876352129589, 0.9630495064251577, 0.0019787519769413225, -0.07886386780215301, -0.0391437282061233, -1.9527179197489672, 19.16017853515367, -33.844660344575594]
 my params [0.1253174305083521, 0.03787647198864938, 0.043663076578906966, 0.9904314465040687, 0.8692862919860715, 0.9943974573783774, 1.0192006908740379, 0.05707705474547977, 0.07859821449271245, 0.052035726478553916, 7.578071496956135, -24.753576999798657, 28.9134638379995]
A=1.14072 0.0732143 -0.159819 
-0.0818205 0.982719 0.203656 
0.084352 -0.240315 0.947529 

rotation R0.994735 0.0868654 -0.0543668 
-0.0713493 0.967896 0.24101 
0.0735568 -0.235862 0.968999 

upper R1.14676 -0.0149642 -0.103811 
0 1.01421 -0.040251 
0 0 0.975926 

s=0.252164 u=-0.12025 v=-0.0322578 w-0.0398961 r=0.991417
m_Rotation from vnl-0.12025 -0.0322578 -0.0398961 0.991417
 new params [-0.1202502118120859, -0.03225776450858703, -0.039896106828193265, 0.9914169777888667, 1.1467593256005189, 1.0142109346718624, 0.975925992818131, -0.013049159764909822, -0.09052576533592555, -0.03968697971824833, -2.2112339070404907, 19.057442236554447, -33.984211556087594]
outputput affine center: [9.42157, -17.3149, 38.1193]
output affine para: [-0.1202502118120859, -0.03225776450858703, -0.039896106828193265, 0.9914169777888667, 1.1467593256005189, 1.0142109346718624, 0.975925992818131, -0.013049159764909822, -0.09052576533592555, -0.03968697971824833, -2.2112339070404907, 19.057442236554447, -33.984211556087594]
initial measure value (MMI): rval = -0.113549
final measure value (MMI): rval = -0.38515
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -4863.09
 iteration 2 energy 0 : -5174.32
 iteration 3 energy 0 : -5427.22
 iteration 4 energy 0 : -5575.32
 iteration 5 energy 0 : -5678.61
 iteration 6 energy 0 : -5750.19
 iteration 7 energy 0 : -5812.18
 iteration 8 energy 0 : -5867.57
 iteration 9 energy 0 : -5921.17
 iteration 10 energy 0 : -5975.88
 iteration 11 energy 0 : -6032.42
 iteration 12 energy 0 : -6079.74
 E-Slope 0.00735296 iteration 13 energy 0 : -6114.97
 E-Slope 0.00586246 iteration 14 energy 0 : -6115.12
 E-Slope 0.00488018 iteration 15 energy 0 : -6117.36
 E-Slope 0.00409817 iteration 16 energy 0 : -6122.1
 E-Slope 0.00340096 iteration 17 energy 0 : -6124.91
 E-Slope 0.00272826 iteration 18 energy 0 : -6128.87
 E-Slope 0.00209255 iteration 19 energy 0 : -6132.85
 E-Slope 0.00151711 iteration 20 energy 0 : -6137.81
 E-Slope 0.00103033 iteration 21 energy 0 : -6142.17
 E-Slope 0.000667557 iteration 22 energy 0 : -6147.36
 E-Slope 0.000454001 iteration 23 energy 0 : -6151.62
 E-Slope 0.000381947 iteration 24 energy 0 : -6158.24
 E-Slope 0.00041192 iteration 25 energy 0 : -6162.4
 E-Slope 0.0004353 iteration 26 energy 0 : -6168.95
 E-Slope 0.00045 iteration 27 energy 0 : -6173.38
 E-Slope 0.000473201 iteration 28 energy 0 : -6180.78
 E-Slope 0.000484027 iteration 29 energy 0 : -6184.3
 E-Slope 0.000481091 iteration 30 energy 0 : -6186.33
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -9494.03
 iteration 2 energy 0 : -9606.46
 iteration 3 energy 0 : -9763.26
 iteration 4 energy 0 : -9840.6
 iteration 5 energy 0 : -9894.44
 iteration 6 energy 0 : -9931.95
 iteration 7 energy 0 : -9977.63
 iteration 8 energy 0 : -9987.18
 iteration 9 energy 0 : -10035.6
 iteration 10 energy 0 : -10037
 iteration 11 energy 0 : -10079.9
 iteration 12 energy 0 : -10074.7
 E-Slope 0.00221153 iteration 13 energy 0 : -10116.7
 E-Slope 0.00170445 iteration 14 energy 0 : -10110.1
 E-Slope 0.00146605 iteration 15 energy 0 : -10145.3
 E-Slope 0.00125671 iteration 16 energy 0 : -10133.5
 E-Slope 0.00113924 iteration 17 energy 0 : -10168.9
 E-Slope 0.000993945 iteration 18 energy 0 : -10157.8
 E-Slope 0.000918716 iteration 19 energy 0 : -10181.2
 E-Slope 0.000776477 iteration 20 energy 0 : -10170.8
 E-Slope 0.000732563 iteration 21 energy 0 : -10198.4
 E-Slope 0.000612058 iteration 22 energy 0 : -10184.9
 E-Slope 0.000569202 iteration 23 energy 0 : -10201.8
 E-Slope 0.000469014 iteration 24 energy 0 : -10198.8
 E-Slope 0.000457972 iteration 25 energy 0 : -10218
 E-Slope 0.000377685 iteration 26 energy 0 : -10206.5
 E-Slope 0.000370346 iteration 27 energy 0 : -10220.8
 E-Slope 0.0003087 iteration 28 energy 0 : -10218.8
 E-Slope 0.000323728 iteration 29 energy 0 : -10232.8
 E-Slope 0.000281751 iteration 30 energy 0 : -10226.9
 E-Slope 0.000287309 iteration 31 energy 0 : -10237.1
 E-Slope 0.000245951 iteration 32 energy 0 : -10234.3
 E-Slope 0.000257313 iteration 33 energy 0 : -10241.6
 E-Slope 0.000223063 iteration 34 energy 0 : -10241.3
 E-Slope 0.000220388 iteration 35 energy 0 : -10248.2
 E-Slope 0.000196353 iteration 36 energy 0 : -10248.5
 E-Slope 0.000209227 iteration 37 energy 0 : -10254.7
 E-Slope 0.000190161 iteration 38 energy 0 : -10257.5
 E-Slope 0.000193886 iteration 39 energy 0 : -10261.5
 E-Slope 0.000186898 iteration 40 energy 0 : -10265.1
 E-Slope 0.000199586 iteration 41 energy 0 : -10267.6
 E-Slope 0.000198409 iteration 42 energy 0 : -10273.5
 E-Slope 0.000208102 iteration 43 energy 0 : -10275.8
 E-Slope 0.000212394 iteration 44 energy 0 : -10283.3
 E-Slope 0.000219822 iteration 45 energy 0 : -10285.1
 E-Slope 0.000229262 iteration 46 energy 0 : -10294.2
 E-Slope 0.000235759 iteration 47 energy 0 : -10294
 E-Slope 0.000248276 iteration 48 energy 0 : -10305.1
 E-Slope 0.000253864 iteration 49 energy 0 : -10304.3
 E-Slope 0.000274211 iteration 50 energy 0 : -10318
 E-Slope 0.000280835 iteration 51 energy 0 : -10316.9
 E-Slope 0.00030569 iteration 52 energy 0 : -10332.5
 E-Slope 0.00030762 iteration 53 energy 0 : -10329.3
 E-Slope 0.000330113 iteration 54 energy 0 : -10344.6
 E-Slope 0.000327908 iteration 55 energy 0 : -10341.6
 E-Slope 0.000347845 iteration 56 energy 0 : -10357
 E-Slope 0.000337325 iteration 57 energy 0 : -10352.2
 E-Slope 0.000352524 iteration 58 energy 0 : -10368
 E-Slope 0.000333793 iteration 59 energy 0 : -10363.6
 E-Slope 0.000345245 iteration 60 energy 0 : -10379.7
 E-Slope 0.000320628 iteration 61 energy 0 : -10374.5
 E-Slope 0.000333406 iteration 62 energy 0 : -10391.3
 E-Slope 0.000308409 iteration 63 energy 0 : -10385.2
 E-Slope 0.000327036 iteration 64 energy 0 : -10402.8
 E-Slope 0.000303283 iteration 65 energy 0 : -10396.3
 E-Slope 0.000325583 iteration 66 energy 0 : -10415.3
 E-Slope 0.000306271 iteration 67 energy 0 : -10408.9
 E-Slope 0.000333302 iteration 68 energy 0 : -10428.1
 E-Slope 0.000312962 iteration 69 energy 0 : -10420.8
 E-Slope 0.000341028 iteration 70 energy 0 : -10440.9
 E-Slope 0.000321783 iteration 71 energy 0 : -10433.5
 E-Slope 0.000352181 iteration 72 energy 0 : -10454.3
 E-Slope 0.000332654 iteration 73 energy 0 : -10446.7
 E-Slope 0.000368491 iteration 74 energy 0 : -10470.3
 E-Slope 0.000349142 iteration 75 energy 0 : -10461.5
 E-Slope 0.000366963 iteration 76 energy 0 : -10475.2
 E-Slope 0.000333443 iteration 77 energy 0 : -10468.6
 E-Slope 0.000371441 iteration 78 energy 0 : -10498.5
 E-Slope 0.000350535 iteration 79 energy 0 : -10488.5
 E-Slope 0.000352539 iteration 80 energy 0 : -10493.3
 E-Slope 0.000304252 iteration 81 energy 0 : -10487
 E-Slope 0.00033167 iteration 82 energy 0 : -10516.9
 E-Slope 0.000302777 iteration 83 energy 0 : -10508.1
 E-Slope 0.000311509 iteration 84 energy 0 : -10517.5
 E-Slope 0.000270337 iteration 85 energy 0 : -10510.5
 E-Slope 0.000315942 iteration 86 energy 0 : -10541.4
 E-Slope 0.000303634 iteration 87 energy 0 : -10532.1
 E-Slope 0.000311926 iteration 88 energy 0 : -10539.9
 E-Slope 0.000272907 iteration 89 energy 0 : -10533.6
 E-Slope 0.000333898 iteration 90 energy 0 : -10565.4
 tired convergence: reached max iterations 
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -66543.7
 iteration 2 energy 0 : -67870.6
 iteration 3 energy 0 : -68866.2
 iteration 4 energy 0 : -69572.3
 iteration 5 energy 0 : -70143.1
 iteration 6 energy 0 : -70648.3
 iteration 7 energy 0 : -71098
 iteration 8 energy 0 : -71493.3
 iteration 9 energy 0 : -71868.3
 iteration 10 energy 0 : -72231.3
 iteration 11 energy 0 : -72611.9
 iteration 12 energy 0 : -72977.1
 E-Slope 0.00372736 iteration 13 energy 0 : -73323.2
 E-Slope 0.00334905 iteration 14 energy 0 : -73644.7
 E-Slope 0.00310908 iteration 15 energy 0 : -73960.8
 E-Slope 0.00293098 iteration 16 energy 0 : -74245.8
 E-Slope 0.00277093 iteration 17 energy 0 : -74470.2
 E-Slope 0.00262436 iteration 18 energy 0 : -74706.5
 E-Slope 0.00248083 iteration 19 energy 0 : -74927.1
 E-Slope 0.00232524 iteration 20 energy 0 : -75113.2
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2309_07072016_Aug1_Ref_vimp2_2475_08242016/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2309_07072016_Aug1_Ref_vimp2_2475_08242016/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2309_07072016_Aug1_Ref_vimp2_2475_08242016/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2309_07072016_Aug1_Ref_vimp2_2475_08242016/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2309_07072016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1847_01152016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2309_07072016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1847_01152016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547781702
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [9.42157, -17.3149, 38.1193]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 7.068981189231204, 2.2287667648120095, -26.179276196657824]
level 0, iter 794, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.1690522399626505, -0.03249973897057249, 0.09844460826075714, 0.980139666697987, 1.0439574265622151, 0.965963821038787, 0.9667606959409534, 0.014335265864037529, 0.04411718079729998, -0.08446613471475466, 4.480145484901253, 2.9789629089838328, -26.38593771736685]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 267, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.17090951311956828, -0.03764193117229577, 0.09359125545101919, 0.9801090246732526, 1.0359532167593983, 0.9768340357387773, 0.9671365423477903, 0.01716820265004142, 0.05267072872313348, -0.09231008437188185, 4.662621105663279, 3.068231747628747, -26.471090208299014]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 280, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.17256702602375004, -0.03726259727675851, 0.0931881866760142, 0.9798714620997719, 1.0437284379684284, 0.9871338875778609, 0.9594064280561138, 0.021494122422312398, 0.05029292605248446, -0.08694022462280254, 4.575008821290731, 3.21957028874997, -26.446788056876436]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 98, size: fix[36, 39, 32]-mov[42, 45, 34], affine para: [-0.18238243484618924, -0.039545908166564815, 0.0921279364209354, 0.9781028636793153, 1.0389499566587168, 0.9848610544692752, 0.966786798363103, 0.020118839159493626, 0.04380136066605159, -0.09128746466035692, 4.689310516308322, 3.235640054950744, -26.6858775880075]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 334, size: fix[71, 77, 38]-mov[84, 89, 48], affine para: [-0.1754865281038505, -0.04317888254039555, 0.09213425353945637, 0.9792095495252007, 1.03748165167378, 0.9801551853543404, 0.960185860510984, 0.014971881280374187, 0.05537939475601848, -0.08973494033465011, 4.533300470059844, 3.252847556922928, -26.604581870044925]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 1625, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.16378978475914294, 0.021892870639549297, -0.06371401356772509, 0.9841921220467095, 0.9534096959204348, 0.943333878360502, 1.0070602093486565, 0.01310166458554662, -0.03304532633678454, -0.010977598226436675, -5.001235809615229, -12.19975112587689, 24.51195694782789]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 239, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.16947696871859005, 0.026286933063527643, -0.0595976927813685, 0.9833792092774838, 0.9653317040117763, 0.9320718735357163, 1.0146890524914765, 0.015257791907450573, -0.04652692209980702, -0.01511548456977358, -5.172260914859145, -12.794007617823725, 24.583516135296392]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 131, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.16352304972070345, 0.028748108273285323, -0.05970811326549669, 0.9843112819078234, 0.960060110591327, 0.9292084080417119, 1.0144760893391378, 0.016517951895313146, -0.0507473372565645, -0.013504052189504524, -5.112076977903292, -12.394495080624255, 24.779300843116413]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 129, size: fix[42, 45, 34]-mov[36, 39, 32], affine para: [0.17256110904845726, 0.028445029636209047, -0.057009142037770494, 0.9829361635717138, 0.9663145319133658, 0.9350420039750826, 1.0045306102086258, 0.013283782444307848, -0.05222238352714357, -0.01163450044348528, -5.235670998857963, -12.904004897073943, 24.618233023563953]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 1077, size: fix[84, 89, 48]-mov[71, 77, 38], affine para: [0.17105524999415037, 0.028121834464887575, -0.06240257359437559, 0.9828810623287879, 0.975681979165494, 0.9457225805981062, 1.0023059409958412, 0.006105208205288566, -0.060968849251531516, 0.019793927312658367, -5.476381344165764, -11.436425086248558, 24.790666445819856]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.510281 v2 -0.51485
 last params [-0.1754865281038505, -0.04317888254039555, 0.09213425353945637, 0.9792095495252007, 1.03748165167378, 0.9801551853543404, 0.960185860510984, 0.014971881280374187, 0.05537939475601848, -0.08973494033465011, 4.533300470059844, 3.252847556922928, -26.604581870044925]
 my params [0.17105524999415037, 0.028121834464887575, -0.06240257359437559, 0.9828810623287879, 0.975681979165494, 0.9457225805981062, 1.0023059409958412, 0.006105208205288566, -0.060968849251531516, 0.019793927312658367, -5.476381344165764, -11.436425086248558, 24.790666445819856]
A=1.01653 -0.142601 -0.0234014 
0.139212 0.993989 0.33328 
0.0338542 -0.338982 0.937736 

rotation R0.990214 -0.118129 -0.0743119 
0.135607 0.940249 0.312319 
0.0329776 -0.31934 0.947066 

upper R1.02658 -0.0175927 0.052947 
0 1.05969 0.0166739 
0 0 0.993927 

s=0.253917 u=-0.160389 v=-0.0272427 w0.0644281 r=0.984572
m_Rotation from vnl-0.160389 -0.0272427 0.0644281 0.984572
 new params [-0.1603891115509559, -0.027242668812306237, 0.06442811042011377, 0.9845720839428527, 1.0265813098157193, 1.0596924710077036, 0.9939269151850546, -0.017137132589127056, 0.05157606314055676, 0.015734631174061636, 4.51621932709185, 3.867827924158579, -26.93844830752512]
outputput affine center: [9.42157, -17.3149, 38.1193]
output affine para: [-0.1603891115509559, -0.027242668812306237, 0.06442811042011377, 0.9845720839428527, 1.0265813098157193, 1.0596924710077036, 0.9939269151850546, -0.017137132589127056, 0.05157606314055676, 0.015734631174061636, 4.51621932709185, 3.867827924158579, -26.93844830752512]
initial measure value (MMI): rval = -0.184957
final measure value (MMI): rval = -0.508252
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -6336.38
 iteration 2 energy 0 : -6669.62
 iteration 3 energy 0 : -6900.93
 iteration 4 energy 0 : -7067.74
 iteration 5 energy 0 : -7176.66
 iteration 6 energy 0 : -7263.89
 iteration 7 energy 0 : -7337.08
 iteration 8 energy 0 : -7400.16
 iteration 9 energy 0 : -7457.84
 iteration 10 energy 0 : -7508.23
 iteration 11 energy 0 : -7555.38
 iteration 12 energy 0 : -7601.56
 E-Slope 0.006188 iteration 13 energy 0 : -7644.74
 E-Slope 0.0050781 iteration 14 energy 0 : -7684.47
 E-Slope 0.00436392 iteration 15 energy 0 : -7721.34
 E-Slope 0.00389732 iteration 16 energy 0 : -7755.01
 E-Slope 0.00353341 iteration 17 energy 0 : -7783.62
 E-Slope 0.0032285 iteration 18 energy 0 : -7809.49
 E-Slope 0.00296 iteration 19 energy 0 : -7833.89
 E-Slope 0.0027206 iteration 20 energy 0 : -7859.43
 E-Slope 0.00250423 iteration 21 energy 0 : -7882.27
 E-Slope 0.00229744 iteration 22 energy 0 : -7901.9
 E-Slope 0.00210351 iteration 23 energy 0 : -7920.87
 E-Slope 0.00192928 iteration 24 energy 0 : -7938.62
 E-Slope 0.00177993 iteration 25 energy 0 : -7957.11
 E-Slope 0.00165585 iteration 26 energy 0 : -7975.62
 E-Slope 0.00155689 iteration 27 energy 0 : -7993.81
 E-Slope 0.00147563 iteration 28 energy 0 : -8009.62
 E-Slope 0.00140892 iteration 29 energy 0 : -8027.08
 E-Slope 0.00134189 iteration 30 energy 0 : -8039.74
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -12075
 iteration 2 energy 0 : -12184.7
 iteration 3 energy 0 : -12234.9
 iteration 4 energy 0 : -12279.2
 iteration 5 energy 0 : -12296.4
 iteration 6 energy 0 : -12324.3
 iteration 7 energy 0 : -12331.6
 iteration 8 energy 0 : -12354.6
 iteration 9 energy 0 : -12359.6
 iteration 10 energy 0 : -12376.1
 iteration 11 energy 0 : -12376.4
 iteration 12 energy 0 : -12394.4
 E-Slope 0.000803508 iteration 13 energy 0 : -12397.1
 E-Slope 0.000658609 iteration 14 energy 0 : -12410.6
 E-Slope 0.000546083 iteration 15 energy 0 : -12409.2
 E-Slope 0.000497356 iteration 16 energy 0 : -12427.4
 E-Slope 0.000443093 iteration 17 energy 0 : -12428.7
 E-Slope 0.000418551 iteration 18 energy 0 : -12438
 E-Slope 0.000371501 iteration 19 energy 0 : -12435
 E-Slope 0.000366539 iteration 20 energy 0 : -12453.7
 E-Slope 0.000345029 iteration 21 energy 0 : -12454.7
 E-Slope 0.000336006 iteration 22 energy 0 : -12460.5
 E-Slope 0.000298694 iteration 23 energy 0 : -12457.2
 E-Slope 0.000299409 iteration 24 energy 0 : -12475.4
 E-Slope 0.000283323 iteration 25 energy 0 : -12475.5
 E-Slope 0.000275619 iteration 26 energy 0 : -12479.2
 E-Slope 0.00024084 iteration 27 energy 0 : -12475.9
 E-Slope 0.000246286 iteration 28 energy 0 : -12492.6
 E-Slope 0.000234276 iteration 29 energy 0 : -12491.3
 E-Slope 0.000226595 iteration 30 energy 0 : -12494.6
 E-Slope 0.00019259 iteration 31 energy 0 : -12491.3
 E-Slope 0.000200592 iteration 32 energy 0 : -12506.7
 E-Slope 0.000192188 iteration 33 energy 0 : -12504.3
 E-Slope 0.000186816 iteration 34 energy 0 : -12508.5
 E-Slope 0.000157006 iteration 35 energy 0 : -12504.9
 E-Slope 0.000169143 iteration 36 energy 0 : -12519.4
 E-Slope 0.000164576 iteration 37 energy 0 : -12516.2
 E-Slope 0.000162385 iteration 38 energy 0 : -12520.9
 E-Slope 0.000137396 iteration 39 energy 0 : -12517.4
 E-Slope 0.000149295 iteration 40 energy 0 : -12529.3
 E-Slope 0.000141963 iteration 41 energy 0 : -12525.1
 E-Slope 0.000144832 iteration 42 energy 0 : -12534
 E-Slope 0.000125311 iteration 43 energy 0 : -12530.1
 E-Slope 0.000136502 iteration 44 energy 0 : -12538.9
 E-Slope 0.000128269 iteration 45 energy 0 : -12535
 E-Slope 0.000132695 iteration 46 energy 0 : -12544.1
 E-Slope 0.000115067 iteration 47 energy 0 : -12540
 E-Slope 0.000128105 iteration 48 energy 0 : -12549.4
 E-Slope 0.000120081 iteration 49 energy 0 : -12545
 E-Slope 0.000127092 iteration 50 energy 0 : -12554.6
 E-Slope 0.000111796 iteration 51 energy 0 : -12550
 E-Slope 0.000123531 iteration 52 energy 0 : -12559.5
 E-Slope 0.000112094 iteration 53 energy 0 : -12554.8
 E-Slope 0.00012286 iteration 54 energy 0 : -12564.3
 E-Slope 0.000111058 iteration 55 energy 0 : -12559.6
 E-Slope 0.000120781 iteration 56 energy 0 : -12568.8
 E-Slope 0.000107877 iteration 57 energy 0 : -12563.9
 E-Slope 0.000117168 iteration 58 energy 0 : -12573.2
 E-Slope 0.000103652 iteration 59 energy 0 : -12568.3
 E-Slope 0.000113174 iteration 60 energy 0 : -12577.4
 E-Slope 9.92566e-05 iteration 61 energy 0 : -12572.3
 Converged due to oscillation in optimization  metric 0 bad 21  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -74229.3
 iteration 2 energy 0 : -75179.4
 iteration 3 energy 0 : -76527.5
 iteration 4 energy 0 : -77651.2
 iteration 5 energy 0 : -78447.5
 iteration 6 energy 0 : -79080.6
 iteration 7 energy 0 : -79617.5
 iteration 8 energy 0 : -80109.4
 iteration 9 energy 0 : -80538.6
 iteration 10 energy 0 : -80929.9
 iteration 11 energy 0 : -81300.7
 iteration 12 energy 0 : -81659.3
 E-Slope 0.00410608 iteration 13 energy 0 : -81971.6
 E-Slope 0.00343902 iteration 14 energy 0 : -82050.9
 E-Slope 0.00292189 iteration 15 energy 0 : -82220.5
 E-Slope 0.00251402 iteration 16 energy 0 : -82327.4
 E-Slope 0.00216158 iteration 17 energy 0 : -82445.6
 E-Slope 0.00184696 iteration 18 energy 0 : -82566.1
 E-Slope 0.00155002 iteration 19 energy 0 : -82616.2
 E-Slope 0.00130899 iteration 20 energy 0 : -82784.4
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2309_07072016_Aug2_Ref_vimp2_1847_01152016/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2309_07072016_Aug2_Ref_vimp2_1847_01152016/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2309_07072016_Aug2_Ref_vimp2_1847_01152016/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2309_07072016_Aug2_Ref_vimp2_1847_01152016/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2390_07272016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1888_01292016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2390_07272016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1888_01292016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547781814
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [15.0976, 8.16939, 18.4418]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -6.20740263564508, -23.43251548434081, 7.547957858977529]
level 0, iter 731, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.032749339985457655, 0.018231804025540112, -0.013684757323386735, 0.999203587598389, 0.9897990509367607, 1.0115285183254195, 0.9790716923985985, -0.01316819333743879, -0.014383513270559126, 0.046031503450172304, -3.73861572089036, -23.19254668769515, 8.446192042508168]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 948, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.028558417689843747, 0.02568274551648204, -0.02355849992758366, 0.99898438948912, 0.9879524940696911, 1.035508753105332, 0.9701560806912625, -0.03031552564710647, -0.027980633860916364, 0.08477214757249556, -3.7573074161961135, -23.224988358168723, 8.314388553699223]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 50, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.028949077856799326, 0.023653051145058165, -0.024606555959955874, 0.9989979987300074, 0.9889097075701582, 1.0415445822404794, 0.9703134433723446, -0.03602001853895609, -0.026598835907708108, 0.09495937760302048, -3.711577771170322, -22.977953525423253, 8.41234762594741]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 25, size: fix[39, 41, 32]-mov[37, 39, 32], affine para: [-0.02883243815642751, 0.02265533538170938, -0.02694657860709455, 0.9989641175688292, 0.98725599976512, 1.0413086373588123, 0.9693579945972833, -0.0369412150016768, -0.025625505901106523, 0.09807716841523946, -3.718514862743655, -23.045754407876675, 8.399261044468384]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 57, size: fix[78, 81, 39]-mov[73, 77, 39], affine para: [-0.03309358994306664, 0.021003470883015213, -0.027357683083166426, 0.9988569595752275, 0.9877599966974042, 1.0439004854500848, 0.9712338405559663, -0.041464967156302046, -0.027207366873013377, 0.10557766946168681, -3.6994930560253554, -23.084768408936043, 8.300285874150372]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 2607, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.025405727892498835, -0.03177326034111857, 0.023451381848079957, 0.9988969124023577, 0.9997843794098051, 0.964935355591756, 1.0282294720676526, 0.04052923044534096, 0.03999207742727074, -0.11546270799468855, 3.6286252930085023, 23.897186739022, -7.014183931415404]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 179, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.024252014186012427, -0.032808616798261026, 0.02777719791952956, 0.9987811881225265, 0.9998324839464033, 0.9631575977755243, 1.031112839360841, 0.04620102629442004, 0.04086899477594007, -0.11993878055049308, 3.6040195700773943, 23.93670866227446, -6.962152378616937]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 227, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.025853397941916288, -0.03229406916303007, 0.028929000353992998, 0.9987250912289473, 1.001297367748431, 0.9608315065332331, 1.0369741159403199, 0.049383873845578435, 0.04059335995745428, -0.11962705771499622, 3.6287533579302096, 23.975244954070725, -6.9856392602409745]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 214, size: fix[37, 39, 32]-mov[39, 41, 32], affine para: [0.024974167092694673, -0.030300654045591176, 0.02571841515733831, 0.9988977547598304, 1.0002374329632335, 0.961552474052689, 1.0276716396110859, 0.04944955921556022, 0.03806115517253936, -0.12063382488381627, 3.6212112033015327, 23.81481695241888, -7.1017417646003995]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 866, size: fix[73, 77, 39]-mov[78, 81, 39], affine para: [0.028179846559954355, -0.030047904174324347, 0.029827339868665585, 0.9987058373209537, 0.9955251318313342, 0.9702236223231845, 1.0251968859703204, 0.05448028680700994, 0.043552209665155904, -0.12339936384665416, 3.5157570867938257, 24.268734752101373, -6.6618108979978805]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.528156 v2 -0.530125
 last params [-0.03309358994306664, 0.021003470883015213, -0.027357683083166426, 0.9988569595752275, 0.9877599966974042, 1.0439004854500848, 0.9712338405559663, -0.041464967156302046, -0.027207366873013377, 0.10557766946168681, -3.6994930560253554, -23.084768408936043, 8.300285874150372]
 my params [0.028179846559954355, -0.030047904174324347, 0.029827339868665585, 0.9987058373209537, 0.9955251318313342, 0.9702236223231845, 1.0251968859703204, 0.05448028680700994, 0.043552209665155904, -0.12339936384665416, 3.5157570867938257, 24.268734752101373, -6.6618108979978805]
A=1.0072 0.00502914 0.0100435 
-0.0701732 1.02023 0.176125 
-0.0569032 -0.0566518 0.972112 

rotation R0.996001 0.0660647 0.0601438 
-0.0693933 0.996069 0.0550472 
-0.0562708 -0.0590006 0.996671 

upper R1.01124 -0.0626001 -0.05692 
0 1.01989 0.118741 
0 0 0.979175 

s=0.250353 u=-0.0285522 v=0.0291447 w-0.0339123 r=0.998592
m_Rotation from vnl-0.0285522 0.0291447 -0.0339123 0.998592
 new params [-0.028552172763587073, 0.029144698066673403, -0.03391226397007761, 0.9985916674785066, 1.011238943918699, 1.019893222730814, 0.9791746397122127, -0.06190440966015516, -0.05628741564515874, 0.11642464526625473, -3.5961963742749994, -23.339634225775033, 8.050950696663826]
outputput affine center: [15.0976, 8.16939, 18.4418]
output affine para: [-0.028552172763587073, 0.029144698066673403, -0.03391226397007761, 0.9985916674785066, 1.011238943918699, 1.019893222730814, 0.9791746397122127, -0.06190440966015516, -0.05628741564515874, 0.11642464526625473, -3.5961963742749994, -23.339634225775033, 8.050950696663826]
initial measure value (MMI): rval = -0.289142
final measure value (MMI): rval = -0.536703
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -6173.09
 iteration 2 energy 0 : -6516.55
 iteration 3 energy 0 : -6826.73
 iteration 4 energy 0 : -7072.73
 iteration 5 energy 0 : -7240.46
 iteration 6 energy 0 : -7355.16
 iteration 7 energy 0 : -7450.25
 iteration 8 energy 0 : -7543.06
 iteration 9 energy 0 : -7640.97
 iteration 10 energy 0 : -7724.01
 iteration 11 energy 0 : -7800.82
 iteration 12 energy 0 : -7881.38
 E-Slope 0.00905121 iteration 13 energy 0 : -7958.95
 E-Slope 0.00758385 iteration 14 energy 0 : -8016.05
 E-Slope 0.00658302 iteration 15 energy 0 : -8062.39
 E-Slope 0.00590334 iteration 16 energy 0 : -8102.34
 E-Slope 0.00536553 iteration 17 energy 0 : -8140.25
 E-Slope 0.0048726 iteration 18 energy 0 : -8183.43
 E-Slope 0.00442573 iteration 19 energy 0 : -8236.58
 E-Slope 0.00405999 iteration 20 energy 0 : -8296.25
 E-Slope 0.00376417 iteration 21 energy 0 : -8337.11
 E-Slope 0.00350242 iteration 22 energy 0 : -8370.89
 E-Slope 0.00324922 iteration 23 energy 0 : -8394.38
 E-Slope 0.00297773 iteration 24 energy 0 : -8396.63
 E-Slope 0.00265332 iteration 25 energy 0 : -8379.63
 E-Slope 0.00229815 iteration 26 energy 0 : -8383.29
 E-Slope 0.00189402 iteration 27 energy 0 : -8380.99
 E-Slope 0.00146139 iteration 28 energy 0 : -8382.24
 E-Slope 0.00105849 iteration 29 energy 0 : -8397.9
 E-Slope 0.000683516 iteration 30 energy 0 : -8396.9
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -14787.1
 iteration 2 energy 0 : -14871.3
 iteration 3 energy 0 : -14967.3
 iteration 4 energy 0 : -15080
 iteration 5 energy 0 : -15215.8
 iteration 6 energy 0 : -15343.3
 iteration 7 energy 0 : -15472.4
 iteration 8 energy 0 : -15596
 iteration 9 energy 0 : -15699
 iteration 10 energy 0 : -15788.6
 iteration 11 energy 0 : -15789.7
 iteration 12 energy 0 : -15792.2
 E-Slope 0.00348259 iteration 13 energy 0 : -15779.2
 E-Slope 0.00300692 iteration 14 energy 0 : -15828.8
 E-Slope 0.00242993 iteration 15 energy 0 : -15812.4
 E-Slope 0.00189441 iteration 16 energy 0 : -15859.5
 E-Slope 0.00138421 iteration 17 energy 0 : -15843.3
 E-Slope 0.0010012 iteration 18 energy 0 : -15888.6
 E-Slope 0.000691287 iteration 19 energy 0 : -15872.8
 E-Slope 0.000534274 iteration 20 energy 0 : -15909.6
 E-Slope 0.000450157 iteration 21 energy 0 : -15896.7
 E-Slope 0.000489034 iteration 22 energy 0 : -15928.5
 E-Slope 0.000482708 iteration 23 energy 0 : -15918.2
 E-Slope 0.000481568 iteration 24 energy 0 : -15945.2
 E-Slope 0.000418 iteration 25 energy 0 : -15936.2
 E-Slope 0.000415415 iteration 26 energy 0 : -15956.8
 E-Slope 0.000351861 iteration 27 energy 0 : -15948.7
 E-Slope 0.000348531 iteration 28 energy 0 : -15967.7
 E-Slope 0.000289328 iteration 29 energy 0 : -15959.8
 E-Slope 0.000291295 iteration 30 energy 0 : -15978.2
 E-Slope 0.000241995 iteration 31 energy 0 : -15970.1
 E-Slope 0.000247739 iteration 32 energy 0 : -15989.7
 E-Slope 0.000208192 iteration 33 energy 0 : -15981
 E-Slope 0.000220947 iteration 34 energy 0 : -16001.7
 E-Slope 0.00019186 iteration 35 energy 0 : -15991.6
 E-Slope 0.00020849 iteration 36 energy 0 : -16011
 E-Slope 0.000185721 iteration 37 energy 0 : -16000.6
 E-Slope 0.000201672 iteration 38 energy 0 : -16020.5
 E-Slope 0.000179641 iteration 39 energy 0 : -16010.1
 E-Slope 0.000189602 iteration 40 energy 0 : -16025.9
 E-Slope 0.000165425 iteration 41 energy 0 : -16017.4
 E-Slope 0.000165261 iteration 42 energy 0 : -16026.7
 E-Slope 0.000136927 iteration 43 energy 0 : -16021.8
 E-Slope 0.000131279 iteration 44 energy 0 : -16027.4
 E-Slope 9.97558e-05 iteration 45 energy 0 : -16023.1
 Converged due to oscillation in optimization  metric 0 bad 17  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -95295.8
 iteration 2 energy 0 : -97156.3
 iteration 3 energy 0 : -98797.4
 iteration 4 energy 0 : -99990.7
 iteration 5 energy 0 : -100981
 iteration 6 energy 0 : -101933
 iteration 7 energy 0 : -102638
 iteration 8 energy 0 : -103207
 iteration 9 energy 0 : -103639
 iteration 10 energy 0 : -104041
 iteration 11 energy 0 : -104408
 iteration 12 energy 0 : -104775
 E-Slope 0.00377937 iteration 13 energy 0 : -105162
 E-Slope 0.00319811 iteration 14 energy 0 : -105630
 E-Slope 0.00281492 iteration 15 energy 0 : -106122
 E-Slope 0.00253256 iteration 16 energy 0 : -106450
 E-Slope 0.00232087 iteration 17 energy 0 : -106734
 E-Slope 0.00218268 iteration 18 energy 0 : -107000
 E-Slope 0.00207637 iteration 19 energy 0 : -107253
 E-Slope 0.00198118 iteration 20 energy 0 : -107499
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2390_07272016_Aug1_Ref_vimp2_1888_01292016/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2390_07272016_Aug1_Ref_vimp2_1888_01292016/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2390_07272016_Aug1_Ref_vimp2_1888_01292016/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2390_07272016_Aug1_Ref_vimp2_1888_01292016/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2390_07272016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1907_02052016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2390_07272016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1907_02052016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547781936
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [15.0976, 8.16939, 18.4418]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -5.128764038267732, -20.815296679584907, -13.712036872435547]
level 0, iter 993, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.1336844602813583, -0.027567454039141112, 0.038174510612623586, 0.9899046455576256, 1.0859477305228988, 0.9341740795249283, 1.0352621822106984, 0.021289855384667006, 0.0005851685415197198, 0.040425968110769164, -0.7137353186834339, -20.712953844755194, -13.773543794638288]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 323, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.13465705650650986, -0.0304050135420753, 0.03405308131254369, 0.9898400880635367, 1.0913394685425353, 0.9041197397003201, 1.0416688598665365, 0.010282299680304155, 0.004881270593546422, 0.04641022489808715, -0.7137771550144995, -20.692040428392854, -13.893018796177596]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 197, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.1337693798425422, -0.028783090457150502, 0.03317083337182587, 0.9900388793040886, 1.0864637232427725, 0.9014213779074159, 1.0427197961871457, 0.0022106927284100005, 0.0025315610108387417, 0.04863669399261792, -0.673883055566071, -20.639658621534387, -13.952813314341116]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 45, size: fix[39, 41, 32]-mov[43, 46, 35], affine para: [-0.13289295134365334, -0.032428104262050554, 0.031206201785586005, 0.990108102434911, 1.0921616844591648, 0.9020918160262874, 1.0384210169652945, 0.005854645676452689, 0.0022010558368851605, 0.046508952910026685, -0.870556534809819, -20.81014090770967, -13.974545011898513]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 121, size: fix[78, 81, 39]-mov[85, 91, 49], affine para: [-0.12989203564252327, -0.031483604771360946, 0.03240147386373877, 0.9904983524462319, 1.0907845354672057, 0.9018555225408568, 1.0328583511927252, 0.009647270563458656, 0.005245215076265272, 0.046028540963359246, -0.9633069472618526, -20.833788546829233, -13.914061523405021]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 546, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.12025661393570478, 0.031191438706729344, -0.030312353822927494, 0.9917895957116293, 0.9184337241645331, 1.0375999826802211, 0.9738539472720231, -0.02530640039117884, 0.00825577344102226, -0.055391119638459226, 2.3876698603576503, 17.009601657737296, 17.963059542697255]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 156, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.1153407117969995, 0.028421058952883597, -0.03908109789400861, 0.9921499036927621, 0.9153641882154849, 1.0527914915619938, 0.9686239702242623, -0.03452754951391757, 0.010092997698300712, -0.06635828309268514, 2.5172193576233814, 17.41686136986963, 17.754305918380176]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 272, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.1134492626021132, 0.030244175630573234, -0.03964756667853001, 0.9922916028627549, 0.9135575269069701, 1.0670602324936906, 0.969185568957503, -0.03583508162781279, 0.010620107803729914, -0.07216385170785025, 2.5624575923225614, 17.42477655384118, 17.813870744942058]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 395, size: fix[43, 46, 35]-mov[39, 41, 32], affine para: [0.1179434787270435, 0.030600300370309804, -0.032443473151879704, 0.9920183357644422, 0.9045586478143578, 1.074329544822487, 0.9787731975802848, -0.0397991060829715, 0.012361942539476074, -0.08825287274662215, 2.3590969057459925, 17.147294660890726, 18.284272309694693]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 137, size: fix[85, 91, 49]-mov[78, 81, 39], affine para: [0.1234319248438451, 0.027501312022527015, -0.03727242525139588, 0.9912714078809406, 0.9137160554100979, 1.0793198219614875, 0.9790014026833318, -0.04522172810736603, 0.013411276748150113, -0.0920613585614704, 2.406714524919017, 16.98592787271493, 18.287113551908686]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.480014 v2 -0.475026
final [-0.12989203564252327, -0.031483604771360946, 0.03240147386373877, 0.9904983524462319, 1.0907845354672057, 0.9018555225408568, 1.0328583511927252, 0.009647270563458656, 0.005245215076265272, 0.046028540963359246, -0.9633069472618526, -20.833788546829233, -13.914061523405021]
outputput affine center: [15.0976, 8.16939, 18.4418]
output affine para: [-0.12989203564252327, -0.031483604771360946, 0.03240147386373877, 0.9904983524462319, 1.0907845354672057, 0.9018555225408568, 1.0328583511927252, 0.009647270563458656, 0.005245215076265272, 0.046028540963359246, -0.9633069472618526, -20.833788546829233, -13.914061523405021]
initial measure value (MMI): rval = -0.16655
final measure value (MMI): rval = -0.497563
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -6242.49
 iteration 2 energy 0 : -6613.73
 iteration 3 energy 0 : -6926.6
 iteration 4 energy 0 : -7183.91
 iteration 5 energy 0 : -7382.93
 iteration 6 energy 0 : -7529.84
 iteration 7 energy 0 : -7657.99
 iteration 8 energy 0 : -7775.17
 iteration 9 energy 0 : -7880.91
 iteration 10 energy 0 : -7988.52
 iteration 11 energy 0 : -8079.42
 iteration 12 energy 0 : -8154.67
 E-Slope 0.0102315 iteration 13 energy 0 : -8209.41
 E-Slope 0.00852438 iteration 14 energy 0 : -8249.18
 E-Slope 0.00718196 iteration 15 energy 0 : -8281.2
 E-Slope 0.00611277 iteration 16 energy 0 : -8310.38
 E-Slope 0.00523035 iteration 17 energy 0 : -8343.14
 E-Slope 0.00447439 iteration 18 energy 0 : -8385.7
 E-Slope 0.00384346 iteration 19 energy 0 : -8429.21
 E-Slope 0.00332006 iteration 20 energy 0 : -8461.39
 E-Slope 0.00289289 iteration 21 energy 0 : -8487.64
 E-Slope 0.00258373 iteration 22 energy 0 : -8510.29
 E-Slope 0.00236411 iteration 23 energy 0 : -8530.52
 E-Slope 0.00220174 iteration 24 energy 0 : -8547.41
 E-Slope 0.00204221 iteration 25 energy 0 : -8557.45
 E-Slope 0.0017932 iteration 26 energy 0 : -8538.24
 E-Slope 0.00148882 iteration 27 energy 0 : -8532.98
 E-Slope 0.00114409 iteration 28 energy 0 : -8528.98
 E-Slope 0.00078582 iteration 29 energy 0 : -8523.96
 E-Slope 0.000489943 iteration 30 energy 0 : -8531.47
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -14950.2
 iteration 2 energy 0 : -15049.7
 iteration 3 energy 0 : -15149.3
 iteration 4 energy 0 : -15247.6
 iteration 5 energy 0 : -15356.2
 iteration 6 energy 0 : -15461.3
 iteration 7 energy 0 : -15553.9
 iteration 8 energy 0 : -15646.2
 iteration 9 energy 0 : -15730.4
 iteration 10 energy 0 : -15753.5
 iteration 11 energy 0 : -15746
 iteration 12 energy 0 : -15752.1
 E-Slope 0.002558 iteration 13 energy 0 : -15756.1
 E-Slope 0.00207732 iteration 14 energy 0 : -15747.5
 E-Slope 0.00160448 iteration 15 energy 0 : -15763.1
 E-Slope 0.00112727 iteration 16 energy 0 : -15746.3
 E-Slope 0.000768162 iteration 17 energy 0 : -15789.6
 E-Slope 0.000457443 iteration 18 energy 0 : -15765.1
 E-Slope 0.000286438 iteration 19 energy 0 : -15808.6
 E-Slope 0.000175074 iteration 20 energy 0 : -15782
 E-Slope 0.00021787 iteration 21 energy 0 : -15828.8
 E-Slope 0.000237994 iteration 22 energy 0 : -15800.3
 E-Slope 0.000290632 iteration 23 energy 0 : -15845.9
 E-Slope 0.000298038 iteration 24 energy 0 : -15820.7
 E-Slope 0.000345163 iteration 25 energy 0 : -15863.2
 E-Slope 0.000322416 iteration 26 energy 0 : -15836.2
 E-Slope 0.000349037 iteration 27 energy 0 : -15875.7
 E-Slope 0.000287168 iteration 28 energy 0 : -15843.2
 E-Slope 0.000312023 iteration 29 energy 0 : -15882.4
 E-Slope 0.000248305 iteration 30 energy 0 : -15855.5
 E-Slope 0.000271589 iteration 31 energy 0 : -15892.9
 E-Slope 0.000199646 iteration 32 energy 0 : -15860.6
 E-Slope 0.00022123 iteration 33 energy 0 : -15896.9
 E-Slope 0.000155598 iteration 34 energy 0 : -15870
 E-Slope 0.000186332 iteration 35 energy 0 : -15908
 E-Slope 0.000135906 iteration 36 energy 0 : -15880.7
 E-Slope 0.000173032 iteration 37 energy 0 : -15913.7
 E-Slope 0.000128314 iteration 38 energy 0 : -15886.6
 E-Slope 0.000166804 iteration 39 energy 0 : -15918.4
 E-Slope 0.000116646 iteration 40 energy 0 : -15891.1
 E-Slope 0.000142813 iteration 41 energy 0 : -15917.6
 E-Slope 9.08226e-05 iteration 42 energy 0 : -15891.5
 Converged due to oscillation in optimization  metric 0 bad 16  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -94503.1
 iteration 2 energy 0 : -96250.7
 iteration 3 energy 0 : -97698
 iteration 4 energy 0 : -99159
 iteration 5 energy 0 : -100350
 iteration 6 energy 0 : -101393
 iteration 7 energy 0 : -102284
 iteration 8 energy 0 : -103079
 iteration 9 energy 0 : -103820
 iteration 10 energy 0 : -104492
 iteration 11 energy 0 : -105104
 iteration 12 energy 0 : -105664
 E-Slope 0.0049139 iteration 13 energy 0 : -106117
 E-Slope 0.00433201 iteration 14 energy 0 : -106514
 E-Slope 0.00380992 iteration 15 energy 0 : -106873
 E-Slope 0.00337854 iteration 16 energy 0 : -107213
 E-Slope 0.00300433 iteration 17 energy 0 : -107518
 E-Slope 0.00267369 iteration 18 energy 0 : -107775
 E-Slope 0.00237569 iteration 19 energy 0 : -108017
 E-Slope 0.00210744 iteration 20 energy 0 : -108240
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2390_07272016_Aug2_Ref_vimp2_1907_02052016/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2390_07272016_Aug2_Ref_vimp2_1907_02052016/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2390_07272016_Aug2_Ref_vimp2_1907_02052016/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2390_07272016_Aug2_Ref_vimp2_1907_02052016/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2398_07292016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1907_02052016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2398_07292016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1907_02052016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547782038
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [12.7059, 5.18342, 16.229]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -2.6855912236184505, -17.836528138197647, -11.513766461609048]
level 0, iter 1826, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.12289925852598357, -0.015341632229998096, 0.06241007666320436, 0.9903359979851162, 1.068276016052885, 0.86374098471725, 1.1057444582320632, -0.00829247691114615, -0.00839894078541984, 0.07722110741912794, -1.0644487481952731, -16.474002156113674, -12.287516824434448]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 138, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.12236475550507457, -0.01580965385302077, 0.05927179958660977, 0.9905875908918887, 1.0659773264592256, 0.8607528311471224, 1.105959335834945, -0.014625248230799392, -0.004510576511741985, 0.08804017757035967, -0.9721281019283122, -16.41808010811225, -12.44912785335462]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 159, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.11952789543316093, -0.016656623414842524, 0.05614346007951062, 0.9911021899885177, 1.0734656554046684, 0.8569557198886653, 1.1067009115273194, -0.0178857896963817, -0.007109397539303875, 0.10520234270737887, -0.9982441829366608, -16.51383291118411, -12.506732788116766]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 466, size: fix[39, 37, 32]-mov[43, 46, 35], affine para: [-0.11798369424862071, -0.016641492043365146, 0.057303322791118404, 0.9912210842345494, 1.0632122475092012, 0.8389021113620968, 1.1044962994605583, -0.0209642229664087, -0.005149200083309982, 0.11567921074297402, -1.0535185353695922, -16.481796286446254, -12.431545997805392]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 168, size: fix[77, 74, 41]-mov[85, 91, 49], affine para: [-0.11063032191766342, -0.01905006870560009, 0.05707629690155026, 0.9920384685518561, 1.0580149213159535, 0.8514865514727102, 1.1115217766857317, -0.024720630092952254, 0.0063160873193377175, 0.11984462969127872, -1.0589493591180412, -16.425091130155565, -12.47866054145247]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 774, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.10374919079792534, 0.014460050890736906, -0.06147885852292754, 0.9925962735632907, 0.9373064123809136, 1.0520219714377006, 0.9222756721474198, -0.016594482672465903, 0.022348196970027125, -0.1158817698127023, 3.207178334257601, 13.02608371019948, 14.459613767430588]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 346, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.10410040636421923, 0.017899535619942925, -0.06572742496211294, 0.9922311311520338, 0.9315675381660171, 1.075754704243634, 0.9278622486879431, -0.02133228659062582, 0.018980598619560165, -0.13442689604884842, 3.160281185212272, 12.869683386026885, 14.625949733183123]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 67, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.10289443143109464, 0.01779101803054399, -0.06589680129914743, 0.9923476342675731, 0.9290303309251615, 1.0833393751894764, 0.9259319021301328, -0.022411549423957414, 0.017997359628909592, -0.14101522794795937, 3.0520464436692087, 12.768561586973798, 14.642345453776768]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 34, size: fix[43, 46, 35]-mov[39, 37, 32], affine para: [0.1037257872664049, 0.0196392622466562, -0.06468303428997386, 0.9923060845875197, 0.9325493387729823, 1.0876855023636864, 0.925571389401646, -0.023057897253326583, 0.019229405448692526, -0.14489617675146843, 3.1723622538892218, 13.092680053857507, 14.69344974527907]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 160, size: fix[85, 91, 49]-mov[77, 74, 41], affine para: [0.10410133815251572, 0.018274551357522307, -0.057080726391565424, 0.9927591565138788, 0.9348003130199534, 1.096439054053117, 0.9283121868323079, -0.022214238197890125, 0.020180407029213348, -0.15225306763661803, 2.8583410088989445, 12.884989380477215, 14.842154955240321]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.486849 v2 -0.489597
 last params [-0.11063032191766342, -0.01905006870560009, 0.05707629690155026, 0.9920384685518561, 1.0580149213159535, 0.8514865514727102, 1.1115217766857317, -0.024720630092952254, 0.0063160873193377175, 0.11984462969127872, -1.0589493591180412, -16.425091130155565, -12.47866054145247]
 my params [0.10410133815251572, 0.018274551357522307, -0.057080726391565424, 0.9927591565138788, 0.9348003130199534, 1.096439054053117, 0.9283121868323079, -0.022214238197890125, 0.020180407029213348, -0.15225306763661803, 2.8583410088989445, 12.884989380477215, 14.842154955240321]
A=1.06399 -0.0937022 -0.0650742 
0.110838 0.85209 0.346958 
0.0262844 -0.224904 1.05316 

rotation R0.994318 -0.0940296 -0.049906 
0.10358 0.962754 0.249752 
0.0245631 -0.253502 0.967023 

upper R1.07007 -0.0104346 -0.00289761 
0 0.886177 0.073177 
0 0 1.10833 

s=0.252406 u=-0.127025 v=-0.0187965 w0.0498779 r=0.990466
m_Rotation from vnl-0.127025 -0.0187965 0.0498779 0.990466
 new params [-0.127024582208427, -0.018796486400229642, 0.04987792576777352, 0.9904663750652442, 1.070073923373359, 0.8861774650895058, 1.108327527212796, -0.009751317277983364, -0.0027078552067670027, 0.08257603810687632, -0.8680631640143253, -16.445595252612467, -12.808350933672084]
outputput affine center: [12.7059, 5.18342, 16.229]
output affine para: [-0.127024582208427, -0.018796486400229642, 0.04987792576777352, 0.9904663750652442, 1.070073923373359, 0.8861774650895058, 1.108327527212796, -0.009751317277983364, -0.0027078552067670027, 0.08257603810687632, -0.8680631640143253, -16.445595252612467, -12.808350933672084]
initial measure value (MMI): rval = -0.184404
final measure value (MMI): rval = -0.510284
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -5889.33
 iteration 2 energy 0 : -6361.48
 iteration 3 energy 0 : -6785.39
 iteration 4 energy 0 : -7080.96
 iteration 5 energy 0 : -7312.94
 iteration 6 energy 0 : -7498.23
 iteration 7 energy 0 : -7662.91
 iteration 8 energy 0 : -7813.53
 iteration 9 energy 0 : -7935.78
 iteration 10 energy 0 : -8036.72
 iteration 11 energy 0 : -8135.95
 iteration 12 energy 0 : -8240.48
 E-Slope 0.0123975 iteration 13 energy 0 : -8338.78
 E-Slope 0.0103324 iteration 14 energy 0 : -8420.39
 E-Slope 0.00891431 iteration 15 energy 0 : -8487.9
 E-Slope 0.00782045 iteration 16 energy 0 : -8541.97
 E-Slope 0.00685561 iteration 17 energy 0 : -8562.42
 E-Slope 0.00584441 iteration 18 energy 0 : -8536.98
 E-Slope 0.00495946 iteration 19 energy 0 : -8580.16
 E-Slope 0.0040499 iteration 20 energy 0 : -8554.01
 E-Slope 0.00314874 iteration 21 energy 0 : -8545.19
 E-Slope 0.00230664 iteration 22 energy 0 : -8555.75
 E-Slope 0.00152678 iteration 23 energy 0 : -8547.57
 E-Slope 0.000889607 iteration 24 energy 0 : -8546.98
 E-Slope 0.000432573 iteration 25 energy 0 : -8551.73
 E-Slope 0.000135928 iteration 26 energy 0 : -8552.77
 E-Slope -1.5825e-05 iteration 27 energy 0 : -8552.71
 Converged due to oscillation in optimization  metric 0 bad 6  
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -13234
 iteration 2 energy 0 : -13411
 iteration 3 energy 0 : -13528
 iteration 4 energy 0 : -13638.7
 iteration 5 energy 0 : -13663.9
 iteration 6 energy 0 : -13766
 iteration 7 energy 0 : -13764.7
 iteration 8 energy 0 : -13831.2
 iteration 9 energy 0 : -13818.4
 iteration 10 energy 0 : -13865.2
 iteration 11 energy 0 : -13848.7
 iteration 12 energy 0 : -13870.5
 E-Slope 0.00155899 iteration 13 energy 0 : -13863.5
 E-Slope 0.00115804 iteration 14 energy 0 : -13878.4
 E-Slope 0.000832722 iteration 15 energy 0 : -13869.1
 E-Slope 0.000661731 iteration 16 energy 0 : -13903.7
 E-Slope 0.000458911 iteration 17 energy 0 : -13890.7
 E-Slope 0.000401996 iteration 18 energy 0 : -13910.6
 E-Slope 0.000303969 iteration 19 energy 0 : -13904.1
 E-Slope 0.000302345 iteration 20 energy 0 : -13918.2
 E-Slope 0.000248745 iteration 21 energy 0 : -13910.8
 E-Slope 0.000271693 iteration 22 energy 0 : -13928.4
 E-Slope 0.000238329 iteration 23 energy 0 : -13919.6
 E-Slope 0.00024388 iteration 24 energy 0 : -13935.4
 E-Slope 0.000209689 iteration 25 energy 0 : -13926.7
 E-Slope 0.000203736 iteration 26 energy 0 : -13940.9
 E-Slope 0.000157028 iteration 27 energy 0 : -13932.6
 E-Slope 0.000169404 iteration 28 energy 0 : -13945.9
 E-Slope 0.000138856 iteration 29 energy 0 : -13937.8
 E-Slope 0.000146978 iteration 30 energy 0 : -13951
 E-Slope 0.000123285 iteration 31 energy 0 : -13942.8
 E-Slope 0.000128649 iteration 32 energy 0 : -13954.3
 E-Slope 0.000100859 iteration 33 energy 0 : -13945.3
 E-Slope 0.000115342 iteration 34 energy 0 : -13961.4
 E-Slope 9.02638e-05 iteration 35 energy 0 : -13948.8
 Converged due to oscillation in optimization  metric 0 bad 15  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -91938.5
 iteration 2 energy 0 : -93693.2
 iteration 3 energy 0 : -95253.8
 iteration 4 energy 0 : -96629.9
 iteration 5 energy 0 : -97701.3
 iteration 6 energy 0 : -98603.1
 iteration 7 energy 0 : -99477.2
 iteration 8 energy 0 : -100502
 iteration 9 energy 0 : -101478
 iteration 10 energy 0 : -102284
 iteration 11 energy 0 : -102896
 iteration 12 energy 0 : -103401
 E-Slope 0.0052654 iteration 13 energy 0 : -103826
 E-Slope 0.00468259 iteration 14 energy 0 : -104178
 E-Slope 0.00416028 iteration 15 energy 0 : -104502
 E-Slope 0.00368622 iteration 16 energy 0 : -104784
 E-Slope 0.00322454 iteration 17 energy 0 : -105035
 E-Slope 0.00276766 iteration 18 energy 0 : -105268
 E-Slope 0.00233188 iteration 19 energy 0 : -105471
 E-Slope 0.00197084 iteration 20 energy 0 : -105659
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2398_07292016_Aug1_Ref_vimp2_1907_02052016/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2398_07292016_Aug1_Ref_vimp2_1907_02052016/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2398_07292016_Aug1_Ref_vimp2_1907_02052016/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2398_07292016_Aug1_Ref_vimp2_1907_02052016/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2398_07292016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1875_01262016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2398_07292016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1875_01262016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547782137
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [12.7059, 5.18342, 16.229]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 2.9494346221716174, -19.879355313237166, -35.47546029061132]
level 0, iter 1431, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.14643617851526566, 0.08130403523180378, -0.08509557489169181, 0.982193892574538, 1.0106766788519237, 0.9770622053552619, 0.9694907582621344, -0.040247597006203756, 0.12565042095461862, 0.04575167220367602, 5.6815910110428725, -22.926926498587875, -40.32290263092879]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 122, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.14498124975178406, 0.07674056274485473, -0.09203914282068931, 0.9821507620721204, 1.0075666469042583, 0.9707440644205279, 0.9650200554900957, -0.05271603069061243, 0.1262442784516363, 0.045396150763598264, 5.617172256645144, -23.114983750793474, -40.62104350518819]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 339, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.14579453984874619, 0.0805119173021412, -0.09615820368071087, 0.9813334719592135, 1.0190978887435966, 0.9808255149814983, 0.9720003767995927, -0.05804393317420322, 0.11433055856486952, 0.04284862112257036, 5.54618711978554, -23.391695781805502, -40.48597857770698]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 427, size: fix[39, 37, 32]-mov[45, 46, 43], affine para: [-0.14967796040748613, 0.08780634680983929, -0.09743331037832133, 0.9799965834924563, 1.013053802504174, 0.9929368909782721, 0.9737356928531153, -0.06930649070028608, 0.10766816386586914, 0.051315912530249114, 5.6408055170628, -23.467738811154184, -40.56054577296673]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 206, size: fix[77, 74, 41]-mov[90, 92, 60], affine para: [-0.1442456523530302, 0.07422487634960653, -0.10656613147023117, 0.980982935188785, 1.0139703402544813, 0.9682784787891615, 0.9823076020190987, -0.07986119403502837, 0.10700206947384804, 0.0641983582913715, 5.475842186644249, -23.278865047448097, -40.628624503552736]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 2050, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.12846007820696487, -0.12593622095490584, 0.07996617007317525, 0.9804302566743264, 0.8958353456797488, 0.862025758448134, 0.9241286371235062, 0.024974046755697147, 0.053609236168820004, -0.03464231026947464, -13.037732569735441, 7.578892427738921, 36.70223094064727]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 340, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.12820792311167512, -0.12288332235328046, 0.07215877643033591, 0.9814558209735613, 0.9013791562054252, 0.8505293792334963, 0.9210511968366047, 0.023705321178096282, 0.04765863585517072, -0.0636645067119413, -12.919601261041127, 6.415666872320556, 36.45257415386576]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 699, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.12387295053633096, -0.11918855044365442, 0.07055899244579464, 0.9825838438289113, 0.8963110182526114, 0.8354284829644862, 0.921851931809343, 0.010027606511448376, 0.04419749708135248, -0.07649586686348318, -12.568282281211111, 5.600544003997726, 36.17158671508069]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 156, size: fix[45, 46, 43]-mov[39, 37, 32], affine para: [0.1276209985946753, -0.11645365969578408, 0.0710355353114017, 0.9823977700423485, 0.8919668235238019, 0.8267992542994497, 0.9139332329021201, 0.008758472556597587, 0.05133467244266128, -0.08481743245517996, -11.844924098885208, 4.990756764706312, 36.031125606723315]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 2250, size: fix[90, 92, 60]-mov[77, 74, 41], affine para: [0.12748622626780068, -0.12131798604733347, 0.055654445215034515, 0.9828182899708475, 0.8937367981568132, 0.8475511961484586, 0.9383508979658791, -0.017111694917042505, 0.054707969103038996, -0.1260317636656119, -12.63949480944889, 3.6747175478317766, 36.526369397603695]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.311784 v2 -0.301549
final [-0.1442456523530302, 0.07422487634960653, -0.10656613147023117, 0.980982935188785, 1.0139703402544813, 0.9682784787891615, 0.9823076020190987, -0.07986119403502837, 0.10700206947384804, 0.0641983582913715, 5.475842186644249, -23.278865047448097, -40.628624503552736]
outputput affine center: [12.7059, 5.18342, 16.229]
output affine para: [-0.1442456523530302, 0.07422487634960653, -0.10656613147023117, 0.980982935188785, 1.0139703402544813, 0.9682784787891615, 0.9823076020190987, -0.07986119403502837, 0.10700206947384804, 0.0641983582913715, 5.475842186644249, -23.278865047448097, -40.628624503552736]
initial measure value (MMI): rval = -0.102458
final measure value (MMI): rval = -0.308746
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -4263.19
 iteration 2 energy 0 : -4483.78
 iteration 3 energy 0 : -4713.77
 iteration 4 energy 0 : -4887.28
 iteration 5 energy 0 : -5028.74
 iteration 6 energy 0 : -5150.44
 iteration 7 energy 0 : -5258.93
 iteration 8 energy 0 : -5357.46
 iteration 9 energy 0 : -5450.63
 iteration 10 energy 0 : -5541.42
 iteration 11 energy 0 : -5614.83
 iteration 12 energy 0 : -5671.28
 E-Slope 0.0117935 iteration 13 energy 0 : -5722.23
 E-Slope 0.0100794 iteration 14 energy 0 : -5768.17
 E-Slope 0.00876728 iteration 15 energy 0 : -5811.86
 E-Slope 0.00756877 iteration 16 energy 0 : -5819.53
 E-Slope 0.0064052 iteration 17 energy 0 : -5819.63
 E-Slope 0.00527744 iteration 18 energy 0 : -5821.35
 E-Slope 0.00423563 iteration 19 energy 0 : -5832.81
 E-Slope 0.0032556 iteration 20 energy 0 : -5830.63
 E-Slope 0.00246457 iteration 21 energy 0 : -5853.47
 E-Slope 0.00180127 iteration 22 energy 0 : -5846.92
 E-Slope 0.00139894 iteration 23 energy 0 : -5883.68
 E-Slope 0.00106341 iteration 24 energy 0 : -5875.17
 E-Slope 0.00092636 iteration 25 energy 0 : -5903.89
 E-Slope 0.000843652 iteration 26 energy 0 : -5893.97
 E-Slope 0.000962168 iteration 27 energy 0 : -5925.93
 E-Slope 0.00100092 iteration 28 energy 0 : -5914.81
 E-Slope 0.00107423 iteration 29 energy 0 : -5944.82
 E-Slope 0.00103597 iteration 30 energy 0 : -5932.62
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -9323.35
 iteration 2 energy 0 : -9395.73
 iteration 3 energy 0 : -9494.32
 iteration 4 energy 0 : -9571.66
 iteration 5 energy 0 : -9640.54
 iteration 6 energy 0 : -9704.58
 iteration 7 energy 0 : -9768.46
 iteration 8 energy 0 : -9836.67
 iteration 9 energy 0 : -9903.06
 iteration 10 energy 0 : -9959.31
 iteration 11 energy 0 : -9984.02
 iteration 12 energy 0 : -9953.34
 E-Slope 0.00333568 iteration 13 energy 0 : -10020.1
 E-Slope 0.00285822 iteration 14 energy 0 : -10005.2
 E-Slope 0.00243099 iteration 15 energy 0 : -10026.1
 E-Slope 0.00195143 iteration 16 energy 0 : -10003.7
 E-Slope 0.00161229 iteration 17 energy 0 : -10068.7
 E-Slope 0.0012297 iteration 18 energy 0 : -10038.5
 E-Slope 0.000988036 iteration 19 energy 0 : -10086.7
 E-Slope 0.000740893 iteration 20 energy 0 : -10051.5
 E-Slope 0.000707634 iteration 21 energy 0 : -10117.9
 E-Slope 0.000674397 iteration 22 energy 0 : -10087.5
 E-Slope 0.000695795 iteration 23 energy 0 : -10111.9
 E-Slope 0.000541933 iteration 24 energy 0 : -10080.4
 E-Slope 0.000597306 iteration 25 energy 0 : -10136
 E-Slope 0.000513002 iteration 26 energy 0 : -10102.7
 E-Slope 0.000525668 iteration 27 energy 0 : -10147.2
 E-Slope 0.000384808 iteration 28 energy 0 : -10112.7
 E-Slope 0.000454374 iteration 29 energy 0 : -10165.1
 E-Slope 0.000353575 iteration 30 energy 0 : -10126.9
 E-Slope 0.000419326 iteration 31 energy 0 : -10173.5
 E-Slope 0.00030385 iteration 32 energy 0 : -10134.3
 E-Slope 0.000409983 iteration 33 energy 0 : -10188.8
 E-Slope 0.000348955 iteration 34 energy 0 : -10150.3
 E-Slope 0.000408731 iteration 35 energy 0 : -10197.5
 E-Slope 0.000295758 iteration 36 energy 0 : -10157.8
 E-Slope 0.000382155 iteration 37 energy 0 : -10211.7
 E-Slope 0.000296026 iteration 38 energy 0 : -10172.8
 E-Slope 0.000372097 iteration 39 energy 0 : -10219.3
 E-Slope 0.000271924 iteration 40 energy 0 : -10179.3
 E-Slope 0.000366151 iteration 41 energy 0 : -10233.2
 E-Slope 0.000279002 iteration 42 energy 0 : -10194.1
 E-Slope 0.000359908 iteration 43 energy 0 : -10240.9
 E-Slope 0.000255778 iteration 44 energy 0 : -10200.5
 E-Slope 0.000351436 iteration 45 energy 0 : -10254.8
 E-Slope 0.000265554 iteration 46 energy 0 : -10215.2
 E-Slope 0.000351027 iteration 47 energy 0 : -10262.8
 E-Slope 0.000250526 iteration 48 energy 0 : -10222.1
 E-Slope 0.000348657 iteration 49 energy 0 : -10276.3
 E-Slope 0.00026425 iteration 50 energy 0 : -10236.3
 E-Slope 0.000349291 iteration 51 energy 0 : -10283.8
 E-Slope 0.000247575 iteration 52 energy 0 : -10242.7
 E-Slope 0.000343293 iteration 53 energy 0 : -10296.5
 E-Slope 0.000256076 iteration 54 energy 0 : -10256.1
 E-Slope 0.000338741 iteration 55 energy 0 : -10303.4
 E-Slope 0.000234306 iteration 56 energy 0 : -10262
 E-Slope 0.000327736 iteration 57 energy 0 : -10315.3
 E-Slope 0.000238113 iteration 58 energy 0 : -10274.7
 E-Slope 0.000320569 iteration 59 energy 0 : -10321.9
 E-Slope 0.000216007 iteration 60 energy 0 : -10280
 E-Slope 0.00030978 iteration 61 energy 0 : -10333.2
 E-Slope 0.000222094 iteration 62 energy 0 : -10293
 E-Slope 0.000304595 iteration 63 energy 0 : -10338.9
 E-Slope 0.000196852 iteration 64 energy 0 : -10295
 E-Slope 0.000293754 iteration 65 energy 0 : -10351.4
 E-Slope 0.000219733 iteration 66 energy 0 : -10316.4
 E-Slope 0.000272654 iteration 67 energy 0 : -10340.5
 E-Slope 0.000154279 iteration 68 energy 0 : -10304.7
 E-Slope 0.000226274 iteration 69 energy 0 : -10352.9
 E-Slope 0.000121914 iteration 70 energy 0 : -10312.9
 E-Slope 0.000210829 iteration 71 energy 0 : -10368
 E-Slope 0.000120752 iteration 72 energy 0 : -10327.4
 E-Slope 0.000225596 iteration 73 energy 0 : -10376.9
 E-Slope 0.000152253 iteration 74 energy 0 : -10334.8
 E-Slope 0.000268623 iteration 75 energy 0 : -10390.3
 E-Slope 0.000195138 iteration 76 energy 0 : -10348.5
 E-Slope 0.000314705 iteration 77 energy 0 : -10397
 E-Slope 0.000263669 iteration 78 energy 0 : -10356.2
 E-Slope 0.000359118 iteration 79 energy 0 : -10415.3
 E-Slope 0.000282124 iteration 80 energy 0 : -10377
 E-Slope 0.00032939 iteration 81 energy 0 : -10401.2
 E-Slope 0.000208832 iteration 82 energy 0 : -10367.3
 E-Slope 0.000282601 iteration 83 energy 0 : -10418.5
 E-Slope 0.000181057 iteration 84 energy 0 : -10380.7
 E-Slope 0.000266664 iteration 85 energy 0 : -10433
 E-Slope 0.000172995 iteration 86 energy 0 : -10393.9
 E-Slope 0.000277258 iteration 87 energy 0 : -10445
 E-Slope 0.000201508 iteration 88 energy 0 : -10405.1
 E-Slope 0.000309072 iteration 89 energy 0 : -10457.2
 E-Slope 0.000233345 iteration 90 energy 0 : -10416.6
 tired convergence: reached max iterations 
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -69171.1
 iteration 2 energy 0 : -70497.3
 iteration 3 energy 0 : -72196.2
 iteration 4 energy 0 : -73609.9
 iteration 5 energy 0 : -74735
 iteration 6 energy 0 : -75639.2
 iteration 7 energy 0 : -76382.2
 iteration 8 energy 0 : -77016.5
 iteration 9 energy 0 : -77573.5
 iteration 10 energy 0 : -78097.1
 iteration 11 energy 0 : -78602.7
 iteration 12 energy 0 : -79048.5
 E-Slope 0.00572915 iteration 13 energy 0 : -79477.2
 E-Slope 0.00488215 iteration 14 energy 0 : -79880.6
 E-Slope 0.00425368 iteration 15 energy 0 : -80263.8
 E-Slope 0.00379414 iteration 16 energy 0 : -80612.5
 E-Slope 0.00345131 iteration 17 energy 0 : -80948.7
 E-Slope 0.00318808 iteration 18 energy 0 : -81284
 E-Slope 0.0029619 iteration 19 energy 0 : -81551
 E-Slope 0.00276061 iteration 20 energy 0 : -81822.2
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2398_07292016_Aug2_Ref_vimp2_1875_01262016/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2398_07292016_Aug2_Ref_vimp2_1875_01262016/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2398_07292016_Aug2_Ref_vimp2_1875_01262016/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2398_07292016_Aug2_Ref_vimp2_1875_01262016/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2438_08122016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1712_11162015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2438_08122016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1712_11162015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547782286
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [16.7861, 10.5133, 8.37186]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -3.97401004656432, -22.998100005985563, 25.06455210497514]
level 0, iter 598, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.038847612755746934, 0.027317923091248416, 0.0864019104394786, 0.9951277827161538, 0.9464645898340543, 0.9822693944897352, 0.9610251388993388, -0.007066184392053367, 0.048953398017792665, -0.031082146304111727, -0.5797973513274772, -22.654045135616702, 21.847375706682605]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 383, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.042819447098765784, 0.023628430015799052, 0.09277071924407258, 0.9944856891358879, 0.9157212019191706, 0.9844301398115873, 0.9535597415154858, 0.006074811071819464, 0.07418730689890549, -0.05266648418492106, -0.4910616571873024, -23.002954091913185, 21.911527214409826]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 148, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.0385809924343753, 0.01359116243978429, 0.0911525609321163, 0.9949964813816332, 0.9267874616971254, 1.0014688979262674, 0.9647342875781261, 0.010233865880101703, 0.08727289157434301, -0.057479529939228106, -0.5271272541409511, -22.89343862627356, 21.920208392460843]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 57, size: fix[38, 39, 32]-mov[36, 39, 32], affine para: [0.04358973074903631, 0.012305882136322128, 0.09080735226784824, 0.994837939270601, 0.9244381175292422, 1.004747099278258, 0.9588852336034702, 0.015475235117065863, 0.09780816826133597, -0.06475427490352355, -0.6424830013876865, -23.13663225510605, 21.9207659426382]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 57, size: fix[75, 78, 37]-mov[71, 77, 33], affine para: [0.04498935733431373, 0.010236586714233536, 0.09707578425498065, 0.9942069513589049, 0.9338563969165405, 1.0138567678007895, 0.970259369818983, 0.019817457559528493, 0.09824510791536756, -0.06434248767190769, -0.5287164353015062, -23.057304409709698, 21.87881161859275]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 822, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.052614150495887316, -0.03432818288886944, -0.08080274962000267, 0.9947483313285786, 0.9588986955404541, 0.9354708779202856, 0.9012215514909377, -0.014338303116532631, 0.03476806687831696, 0.0020914242713296317, 4.725930583063605, 18.479302524026238, -22.597101573670198]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 376, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.05885009775489471, -0.03421661338332073, -0.08398610113890656, 0.9941389360538603, 0.9464047136718341, 0.9385006862590891, 0.9021897347176996, -0.018730581939114487, 0.040770906505032865, 0.0044760652906575505, 4.667979947014414, 17.955962851265877, -22.79280626914693]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 2283, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.04946314533021449, -0.03725519121250035, -0.08199295870219872, 0.994707294989346, 0.9333801238394991, 0.9284119767538058, 0.8934892933150663, -0.02181731508657574, 0.06716863513020792, 0.008049364057156547, 4.2039438120737325, 18.272621250207774, -22.344964865203597]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 392, size: fix[36, 39, 32]-mov[38, 39, 32], affine para: [-0.06424421229409458, -0.04567077936902886, -0.08739904820932963, 0.9930499823627409, 0.9575979511697512, 0.9324880899555842, 0.9077066434054842, -0.02797957396016906, 0.06855429053393566, 0.013353236270434268, 4.541131295751325, 17.84900039705658, -23.49088751679208]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 1214, size: fix[71, 77, 33]-mov[75, 78, 37], affine para: [-0.05730864495106623, -0.03908611677459503, -0.10005698085722114, 0.9925606254889889, 0.9785861891316356, 0.9565464604147651, 0.931867313715279, -0.04182937328425946, 0.023760109322829816, 0.01450594382077045, 5.3665442597311985, 18.49205442687185, -23.517194894574292]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.338384 v2 -0.312888
final [0.04498935733431373, 0.010236586714233536, 0.09707578425498065, 0.9942069513589049, 0.9338563969165405, 1.0138567678007895, 0.970259369818983, 0.019817457559528493, 0.09824510791536756, -0.06434248767190769, -0.5287164353015062, -23.057304409709698, 21.87881161859275]
outputput affine center: [16.7861, 10.5133, 8.37186]
output affine para: [0.04498935733431373, 0.010236586714233536, 0.09707578425498065, 0.9942069513589049, 0.9338563969165405, 1.0138567678007895, 0.970259369818983, 0.019817457559528493, 0.09824510791536756, -0.06434248767190769, -0.5287164353015062, -23.057304409709698, 21.87881161859275]
initial measure value (MMI): rval = -0.138535
final measure value (MMI): rval = -0.346213
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -4061.94
 iteration 2 energy 0 : -4269.9
 iteration 3 energy 0 : -4478.01
 iteration 4 energy 0 : -4657.95
 iteration 5 energy 0 : -4806.9
 iteration 6 energy 0 : -4938.71
 iteration 7 energy 0 : -5059.3
 iteration 8 energy 0 : -5163.28
 iteration 9 energy 0 : -5256.7
 iteration 10 energy 0 : -5336.21
 iteration 11 energy 0 : -5411.29
 iteration 12 energy 0 : -5477
 E-Slope 0.0127323 iteration 13 energy 0 : -5548.43
 E-Slope 0.0110677 iteration 14 energy 0 : -5611.64
 E-Slope 0.00976411 iteration 15 energy 0 : -5673.77
 E-Slope 0.0087328 iteration 16 energy 0 : -5728.32
 E-Slope 0.0078646 iteration 17 energy 0 : -5773.85
 E-Slope 0.00708029 iteration 18 energy 0 : -5803.81
 E-Slope 0.00631296 iteration 19 energy 0 : -5814.62
 E-Slope 0.00558943 iteration 20 energy 0 : -5837.78
 E-Slope 0.00476882 iteration 21 energy 0 : -5819.65
 E-Slope 0.00405187 iteration 22 energy 0 : -5858.23
 E-Slope 0.00333428 iteration 23 energy 0 : -5860.04
 E-Slope 0.00270241 iteration 24 energy 0 : -5882.84
 E-Slope 0.00209257 iteration 25 energy 0 : -5869.67
 E-Slope 0.00165304 iteration 26 energy 0 : -5896.15
 E-Slope 0.00127798 iteration 27 energy 0 : -5886.11
 E-Slope 0.00104412 iteration 28 energy 0 : -5898.73
 E-Slope 0.000831239 iteration 29 energy 0 : -5880.94
 E-Slope 0.000724286 iteration 30 energy 0 : -5898.32
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -9429.65
 iteration 2 energy 0 : -9516.55
 iteration 3 energy 0 : -9637.46
 iteration 4 energy 0 : -9761.88
 iteration 5 energy 0 : -9866.8
 iteration 6 energy 0 : -9969.54
 iteration 7 energy 0 : -10049
 iteration 8 energy 0 : -10123.3
 iteration 9 energy 0 : -10176.4
 iteration 10 energy 0 : -10186.6
 iteration 11 energy 0 : -10194.7
 iteration 12 energy 0 : -10183.3
 E-Slope 0.00358932 iteration 13 energy 0 : -10206.3
 E-Slope 0.00281131 iteration 14 energy 0 : -10213.4
 E-Slope 0.00211636 iteration 15 energy 0 : -10228.6
 E-Slope 0.00153653 iteration 16 energy 0 : -10233.7
 E-Slope 0.00107636 iteration 17 energy 0 : -10241.9
 E-Slope 0.000770934 iteration 18 energy 0 : -10255.6
 E-Slope 0.000567235 iteration 19 energy 0 : -10256.7
 E-Slope 0.000503063 iteration 20 energy 0 : -10275.1
 E-Slope 0.000526078 iteration 21 energy 0 : -10285.1
 E-Slope 0.000541411 iteration 22 energy 0 : -10289.4
 E-Slope 0.000551932 iteration 23 energy 0 : -10297.2
 E-Slope 0.000513658 iteration 24 energy 0 : -10303.3
 E-Slope 0.000508688 iteration 25 energy 0 : -10315.6
 E-Slope 0.000485092 iteration 26 energy 0 : -10317.5
 E-Slope 0.000475563 iteration 27 energy 0 : -10326.5
 E-Slope 0.000438243 iteration 28 energy 0 : -10323.9
 E-Slope 0.000390075 iteration 29 energy 0 : -10325.4
 E-Slope 0.00035274 iteration 30 energy 0 : -10330.8
 E-Slope 0.000295125 iteration 31 energy 0 : -10332.4
 E-Slope 0.000253208 iteration 32 energy 0 : -10332.7
 E-Slope 0.000239618 iteration 33 energy 0 : -10346.2
 E-Slope 0.000211723 iteration 34 energy 0 : -10343.2
 E-Slope 0.000211768 iteration 35 energy 0 : -10357.3
 E-Slope 0.000204414 iteration 36 energy 0 : -10355.3
 E-Slope 0.000224933 iteration 37 energy 0 : -10364.6
 E-Slope 0.000236697 iteration 38 energy 0 : -10366.5
 E-Slope 0.00025437 iteration 39 energy 0 : -10368.8
 E-Slope 0.000248566 iteration 40 energy 0 : -10368.2
 E-Slope 0.000256062 iteration 41 energy 0 : -10382.4
 E-Slope 0.000244163 iteration 42 energy 0 : -10376.3
 E-Slope 0.000252821 iteration 43 energy 0 : -10393.8
 E-Slope 0.000228927 iteration 44 energy 0 : -10386.1
 E-Slope 0.000260778 iteration 45 energy 0 : -10409.2
 E-Slope 0.000268795 iteration 46 energy 0 : -10409.9
 E-Slope 0.000301845 iteration 47 energy 0 : -10418.3
 E-Slope 0.000309773 iteration 48 energy 0 : -10418.2
 E-Slope 0.000348322 iteration 49 energy 0 : -10435.7
 E-Slope 0.000359669 iteration 50 energy 0 : -10432.4
 E-Slope 0.000339463 iteration 51 energy 0 : -10426.2
 E-Slope 0.000314578 iteration 52 energy 0 : -10436.4
 E-Slope 0.000316933 iteration 53 energy 0 : -10447.6
 E-Slope 0.000267655 iteration 54 energy 0 : -10438.8
 E-Slope 0.000257656 iteration 55 energy 0 : -10450.6
 E-Slope 0.000200115 iteration 56 energy 0 : -10443.3
 E-Slope 0.000177592 iteration 57 energy 0 : -10445.1
 E-Slope 0.000145532 iteration 58 energy 0 : -10445.9
 E-Slope 0.00013826 iteration 59 energy 0 : -10455.9
 E-Slope 9.73046e-05 iteration 60 energy 0 : -10444.1
 Converged due to oscillation in optimization  metric 0 bad 13  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -60196
 iteration 2 energy 0 : -61075
 iteration 3 energy 0 : -61941.2
 iteration 4 energy 0 : -62640.3
 iteration 5 energy 0 : -63269.5
 iteration 6 energy 0 : -63854.9
 iteration 7 energy 0 : -64461.7
 iteration 8 energy 0 : -65110.1
 iteration 9 energy 0 : -65818
 iteration 10 energy 0 : -66445.3
 iteration 11 energy 0 : -66988.1
 iteration 12 energy 0 : -67385.5
 E-Slope 0.00544747 iteration 13 energy 0 : -67742.2
 E-Slope 0.00506694 iteration 14 energy 0 : -68015.8
 E-Slope 0.00467928 iteration 15 energy 0 : -68242.4
 E-Slope 0.00426183 iteration 16 energy 0 : -68485.1
 E-Slope 0.00383785 iteration 17 energy 0 : -68788.3
 E-Slope 0.00342674 iteration 18 energy 0 : -69114.5
 E-Slope 0.0030485 iteration 19 energy 0 : -69402.3
 E-Slope 0.00272907 iteration 20 energy 0 : -69658
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2438_08122016_Aug1_Ref_vimp2_1712_11162015/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2438_08122016_Aug1_Ref_vimp2_1712_11162015/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2438_08122016_Aug1_Ref_vimp2_1712_11162015/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2438_08122016_Aug1_Ref_vimp2_1712_11162015/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2438_08122016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2587_10132016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2438_08122016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2587_10132016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547782416
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [16.7861, 10.5133, 8.37186]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -5.9996466474971495, 3.5470095021382235, 0.16472324847041087]
level 0, iter 157, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.030615468398942716, 0.001165177286343298, 0.0642468825009056, 0.997463620161417, 0.9966439937451445, 1.0378482013935928, 0.9978642356734501, -0.006805164105101731, -0.021248388286772956, 0.03573428401318382, -3.9164809118624277, 2.7277958427019313, -1.85599495763187]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 263, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.028414785011097194, 0.005823180875290877, 0.06943697907963473, 0.9971645784390664, 0.9993223136487943, 1.056893496419958, 0.9895539494220688, 0.005929580445742442, -0.03543330996407602, 0.06090145039587694, -3.8821855151353306, 2.9161232204316625, -1.914354318730032]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 310, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.03143879579346345, 0.007231095706547478, 0.06542759726221284, 0.9973357222572714, 1.0130547706881872, 1.079149643634213, 0.9904597293754351, 0.008525994883377784, -0.03986934411112985, 0.06616580686300791, -3.639642411284689, 3.1387846187784096, -2.0624668836213282]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 158, size: fix[38, 39, 32]-mov[37, 38, 32], affine para: [-0.026856824014325154, 0.006819033536937248, 0.06187468950265646, 0.9976992204990617, 1.0063338753335358, 1.0837477533007016, 0.981468325207423, 0.01062969576046952, -0.04439673658109983, 0.07335488752049815, -3.6965193732841684, 2.939586694782362, -1.894810447534994]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 94, size: fix[75, 78, 37]-mov[73, 76, 40], affine para: [-0.0309883583280402, 0.009412616950316852, 0.06511028697798206, 0.9973523824706714, 1.0039222317248113, 1.0834599038018338, 0.9744889207282557, 0.016629353461045594, -0.05024796718529165, 0.07612221650925162, -3.739750576846509, 3.053098136245257, -1.8158591639429693]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 215, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.025004728662685705, 0.0013445007938318835, -0.06671860542512421, 0.9974575597749747, 0.985337747913468, 0.9468745237569826, 0.9925150952105429, 0.006333904699124264, 0.020560589549457938, -0.028125466027166365, 3.3070089570094265, -3.476836561749608, 1.6190830699415026]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 2990, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.02995280711582939, -0.00857045357038951, -0.06653024886829313, 0.9972979006580744, 0.9901664197119397, 0.882680106853677, 1.0211693650349598, -0.011015367442318619, 0.059788526014043636, -0.06418775217338903, 3.2763035913119847, -3.512417571642145, 1.8727171721089524]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 154, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.03451954439612403, -0.005758077659332947, -0.06181554579920103, 0.9974738512331539, 0.9845809365860066, 0.8836479154091993, 1.028433622124499, -0.019729768997497517, 0.06654926759797715, -0.06375683425809231, 3.12914401082369, -3.5635789671458165, 1.7144827785592003]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 317, size: fix[37, 38, 32]-mov[38, 39, 32], affine para: [0.04190003420903422, -0.004575664973228626, -0.06720844459602336, 0.9968482710013182, 0.9934705044800386, 0.8772123657854094, 1.0400156724759033, -0.033347390360401075, 0.06655654118121641, -0.061514813612336475, 3.188204715017807, -3.8429479270870197, 1.50356473895525]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 3916, size: fix[73, 76, 40]-mov[75, 78, 37], affine para: [0.0344868556235132, -0.015109659814039295, -0.07159873903091361, 0.9967226171501729, 1.0025561162290628, 0.8998775200580617, 1.0282343754161483, -0.037001534931662756, 0.0802004759807604, -0.07079952640610487, 3.414679876362264, -3.714341122202235, 1.9287357625023251]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.35982 v2 -0.348702
final [-0.0309883583280402, 0.009412616950316852, 0.06511028697798206, 0.9973523824706714, 1.0039222317248113, 1.0834599038018338, 0.9744889207282557, 0.016629353461045594, -0.05024796718529165, 0.07612221650925162, -3.739750576846509, 3.053098136245257, -1.8158591639429693]
outputput affine center: [16.7861, 10.5133, 8.37186]
output affine para: [-0.0309883583280402, 0.009412616950316852, 0.06511028697798206, 0.9973523824706714, 1.0039222317248113, 1.0834599038018338, 0.9744889207282557, 0.016629353461045594, -0.05024796718529165, 0.07612221650925162, -3.739750576846509, 3.053098136245257, -1.8158591639429693]
initial measure value (MMI): rval = -0.170755
final measure value (MMI): rval = -0.366277
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -4934.37
 iteration 2 energy 0 : -5305.04
 iteration 3 energy 0 : -5641.41
 iteration 4 energy 0 : -5916.92
 iteration 5 energy 0 : -6129.08
 iteration 6 energy 0 : -6299.81
 iteration 7 energy 0 : -6443.18
 iteration 8 energy 0 : -6567.96
 iteration 9 energy 0 : -6681.8
 iteration 10 energy 0 : -6796.08
 iteration 11 energy 0 : -6893.39
 iteration 12 energy 0 : -6979.88
 E-Slope 0.0133256 iteration 13 energy 0 : -7053.59
 E-Slope 0.0111563 iteration 14 energy 0 : -7114
 E-Slope 0.00950624 iteration 15 energy 0 : -7164.55
 E-Slope 0.00821785 iteration 16 energy 0 : -7205.61
 E-Slope 0.00712074 iteration 17 energy 0 : -7234.93
 E-Slope 0.0060719 iteration 18 energy 0 : -7237.12
 E-Slope 0.00504533 iteration 19 energy 0 : -7236.44
 E-Slope 0.0040654 iteration 20 energy 0 : -7242.16
 E-Slope 0.00314876 iteration 21 energy 0 : -7244.83
 E-Slope 0.0023757 iteration 22 energy 0 : -7255.77
 E-Slope 0.0017392 iteration 23 energy 0 : -7264.43
 E-Slope 0.00125151 iteration 24 energy 0 : -7273.67
 E-Slope 0.000905998 iteration 25 energy 0 : -7282.11
 E-Slope 0.000687294 iteration 26 energy 0 : -7290.6
 E-Slope 0.0005797 iteration 27 energy 0 : -7298.52
 E-Slope 0.000558868 iteration 28 energy 0 : -7304.37
 E-Slope 0.000601754 iteration 29 energy 0 : -7312.19
 E-Slope 0.000624388 iteration 30 energy 0 : -7317.64
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -11492.8
 iteration 2 energy 0 : -11555
 iteration 3 energy 0 : -11627.6
 iteration 4 energy 0 : -11728.7
 iteration 5 energy 0 : -11848.5
 iteration 6 energy 0 : -11964.7
 iteration 7 energy 0 : -12080.5
 iteration 8 energy 0 : -12191.2
 iteration 9 energy 0 : -12284.4
 iteration 10 energy 0 : -12362.8
 iteration 11 energy 0 : -12431.8
 iteration 12 energy 0 : -12492.1
 E-Slope 0.00453826 iteration 13 energy 0 : -12537.7
 E-Slope 0.00422234 iteration 14 energy 0 : -12577.9
 E-Slope 0.00381187 iteration 15 energy 0 : -12621.9
 E-Slope 0.00336453 iteration 16 energy 0 : -12656.2
 E-Slope 0.0029326 iteration 17 energy 0 : -12685.9
 E-Slope 0.00250255 iteration 18 energy 0 : -12693.8
 E-Slope 0.00204623 iteration 19 energy 0 : -12666.3
 E-Slope 0.00167038 iteration 20 energy 0 : -12691.6
 E-Slope 0.0012999 iteration 21 energy 0 : -12673.8
 E-Slope 0.00100197 iteration 22 energy 0 : -12697.4
 E-Slope 0.000718005 iteration 23 energy 0 : -12681.5
 E-Slope 0.00051894 iteration 24 energy 0 : -12705.5
 E-Slope 0.000331178 iteration 25 energy 0 : -12689.9
 E-Slope 0.000221699 iteration 26 energy 0 : -12713.9
 E-Slope 0.00014253 iteration 27 energy 0 : -12700.5
 E-Slope 0.000144579 iteration 28 energy 0 : -12724.8
 E-Slope 0.000156008 iteration 29 energy 0 : -12707.9
 E-Slope 0.000197932 iteration 30 energy 0 : -12724.7
 E-Slope 0.000160687 iteration 31 energy 0 : -12711.4
 E-Slope 0.000183664 iteration 32 energy 0 : -12730.5
 E-Slope 0.000147037 iteration 33 energy 0 : -12719.4
 E-Slope 0.000169791 iteration 34 energy 0 : -12739.2
 E-Slope 0.000132643 iteration 35 energy 0 : -12725.2
 E-Slope 0.00018885 iteration 36 energy 0 : -12765.5
 E-Slope 0.000175029 iteration 37 energy 0 : -12746.2
 E-Slope 0.000252746 iteration 38 energy 0 : -12787.3
 E-Slope 0.000256203 iteration 39 energy 0 : -12765.9
 E-Slope 0.000334173 iteration 40 energy 0 : -12799.1
 E-Slope 0.000327386 iteration 41 energy 0 : -12777.4
 E-Slope 0.000367679 iteration 42 energy 0 : -12804
 E-Slope 0.000326075 iteration 43 energy 0 : -12782.1
 E-Slope 0.000340395 iteration 44 energy 0 : -12811.9
 E-Slope 0.000286609 iteration 45 energy 0 : -12795.3
 E-Slope 0.000288971 iteration 46 energy 0 : -12823
 E-Slope 0.000225231 iteration 47 energy 0 : -12808.8
 E-Slope 0.000241451 iteration 48 energy 0 : -12828.4
 E-Slope 0.000188835 iteration 49 energy 0 : -12815.4
 E-Slope 0.000221319 iteration 50 energy 0 : -12836.1
 E-Slope 0.000182927 iteration 51 energy 0 : -12823.2
 E-Slope 0.000218019 iteration 52 energy 0 : -12844.2
 E-Slope 0.000182115 iteration 53 energy 0 : -12830.9
 E-Slope 0.000207923 iteration 54 energy 0 : -12850.8
 E-Slope 0.000164472 iteration 55 energy 0 : -12838.4
 E-Slope 0.000189766 iteration 56 energy 0 : -12859
 E-Slope 0.000153124 iteration 57 energy 0 : -12845.3
 E-Slope 0.000182122 iteration 58 energy 0 : -12865.7
 E-Slope 0.000153951 iteration 59 energy 0 : -12852
 E-Slope 0.000179268 iteration 60 energy 0 : -12872.7
 E-Slope 0.000150576 iteration 61 energy 0 : -12859.7
 E-Slope 0.000178128 iteration 62 energy 0 : -12881
 E-Slope 0.000152066 iteration 63 energy 0 : -12868.2
 E-Slope 0.000182919 iteration 64 energy 0 : -12889.7
 E-Slope 0.000158288 iteration 65 energy 0 : -12876.3
 E-Slope 0.000187732 iteration 66 energy 0 : -12897.4
 E-Slope 0.000163481 iteration 67 energy 0 : -12884.3
 E-Slope 0.000195675 iteration 68 energy 0 : -12906.5
 E-Slope 0.000170276 iteration 69 energy 0 : -12892.6
 E-Slope 0.000200063 iteration 70 energy 0 : -12914.5
 E-Slope 0.000171676 iteration 71 energy 0 : -12900.3
 E-Slope 0.000198498 iteration 72 energy 0 : -12922
 E-Slope 0.000168495 iteration 73 energy 0 : -12908
 E-Slope 0.000194341 iteration 74 energy 0 : -12929.3
 E-Slope 0.000163928 iteration 75 energy 0 : -12915.3
 E-Slope 0.000188388 iteration 76 energy 0 : -12935.7
 E-Slope 0.000155121 iteration 77 energy 0 : -12921
 E-Slope 0.000176743 iteration 78 energy 0 : -12941.4
 E-Slope 0.000142388 iteration 79 energy 0 : -12927
 E-Slope 0.000165999 iteration 80 energy 0 : -12947.8
 E-Slope 0.000131048 iteration 81 energy 0 : -12932
 E-Slope 0.000154331 iteration 82 energy 0 : -12952.7
 E-Slope 0.000121824 iteration 83 energy 0 : -12938.5
 E-Slope 0.0001477 iteration 84 energy 0 : -12959.2
 E-Slope 0.00011877 iteration 85 energy 0 : -12945.2
 E-Slope 0.000146993 iteration 86 energy 0 : -12965.3
 E-Slope 0.000120401 iteration 87 energy 0 : -12951.1
 E-Slope 0.000150137 iteration 88 energy 0 : -12971.8
 E-Slope 0.000123598 iteration 89 energy 0 : -12957.5
 E-Slope 0.000153631 iteration 90 energy 0 : -12978.5
 tired convergence: reached max iterations 
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -70333.5
 iteration 2 energy 0 : -71709.7
 iteration 3 energy 0 : -73096.1
 iteration 4 energy 0 : -74265.3
 iteration 5 energy 0 : -75197.5
 iteration 6 energy 0 : -76057.5
 iteration 7 energy 0 : -76856.1
 iteration 8 energy 0 : -77620.3
 iteration 9 energy 0 : -78296.6
 iteration 10 energy 0 : -78909.2
 iteration 11 energy 0 : -79385.4
 iteration 12 energy 0 : -79677.3
 E-Slope 0.00553006 iteration 13 energy 0 : -79915
 E-Slope 0.00474912 iteration 14 energy 0 : -80108
 E-Slope 0.00405356 iteration 15 energy 0 : -80267
 E-Slope 0.00342681 iteration 16 energy 0 : -80416.4
 E-Slope 0.00284573 iteration 17 energy 0 : -80563.2
 E-Slope 0.00232834 iteration 18 energy 0 : -80709.1
 E-Slope 0.00189379 iteration 19 energy 0 : -80865.1
 E-Slope 0.0015646 iteration 20 energy 0 : -81038.8
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2438_08122016_Aug2_Ref_vimp2_2587_10132016_Test_NewCases/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2438_08122016_Aug2_Ref_vimp2_2587_10132016_Test_NewCases/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2438_08122016_Aug2_Ref_vimp2_2587_10132016_Test_NewCases/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2438_08122016_Aug2_Ref_vimp2_2587_10132016_Test_NewCases/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2450_08172016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2390_07272016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2450_08172016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2390_07272016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547782572
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [13.6788, 4.09967, 11.9765]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 1.4214323925747632, 4.065854342309965, 6.467253580748082]
level 0, iter 606, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.016105881458426344, -0.014557337582210495, -0.000013439830855846323, 0.9997643143883141, 0.9656916807968796, 1.0574268460628347, 1.0037699972648488, 0.007555275235138459, -0.01019073211217782, -0.07367369729560834, -0.7906483707775349, 4.0210578778016215, 7.009261871268887]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 192, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.014303585739054244, -0.01186940084606269, 0.0006903200988745148, 0.9998270091454432, 0.964089985949338, 1.0739406684673893, 1.0039997178477433, 0.006568282270377426, -0.015599112258629758, -0.083588192218579, -0.8222515072004939, 3.9000980542433585, 6.894033504192012]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 23, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.012040449037782041, -0.012720543336893264, -0.001943501354427022, 0.9998447070253801, 0.9619026671201603, 1.0745953267906274, 1.0017392792650714, 0.0076263044575746765, -0.016240836785937726, -0.08627545948485543, -0.8278077898316974, 3.884487389209739, 6.944839784259221]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 106, size: fix[36, 38, 32]-mov[39, 41, 32], affine para: [0.01523814573975486, -0.007877130745473226, 0.0012670076299176767, 0.9998520612657147, 0.9619425783692354, 1.0837845775826966, 1.0038160072980449, 0.00846231201427461, -0.02142646028495205, -0.09397223637392291, -0.8524159036323599, 3.8141895210928647, 6.935853201088406]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 122, size: fix[71, 76, 40]-mov[78, 81, 39], affine para: [0.004763561237164411, -0.00932045621714197, 0.002797905611035454, 0.9999413029295449, 0.9713433980877237, 1.0881344991941406, 1.0088328978084455, 0.007588182997219264, -0.022231496065995376, -0.107535961703282, -0.7736813216314726, 3.9408878839567314, 7.129570632207631]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 485, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.02492943222142552, 0.0037319215290041565, -0.002403674474061435, 0.9996793578542279, 1.0190375315797535, 0.9467378454023755, 0.9870564776705665, -0.007015889175184448, 0.038557723442278966, 0.06907657484594341, 0.4395776276638246, -4.332075742290899, -6.516711681526655]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 44, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.02436693030396464, 0.0022241139105055683, -0.0029160360113462563, 0.9996963552793695, 1.017726141179476, 0.936387752291089, 0.9860826210830425, -0.007438733411334094, 0.0400870819811624, 0.07312144343276035, 0.44179172267896927, -4.24391415280621, -6.584523745103509]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 89, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.021400073537236376, 0.0028275572568117924, -0.004290086490905276, 0.9997577891321782, 1.0191586111500137, 0.9320061113537685, 0.9902405658613085, -0.011137260677760205, 0.03788078067218664, 0.07683526019308112, 0.43985495209682385, -4.3103979645816, -6.600677223377249]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 142, size: fix[39, 41, 32]-mov[36, 38, 32], affine para: [-0.021015279917985373, 0.006219579425956045, -0.007823754078135053, 0.9997291951893063, 1.0197728896503382, 0.935127471962714, 0.9917516778485241, -0.015947754700043507, 0.031934087408883594, 0.08337175874434585, 0.34535325494556146, -4.404466666368796, -6.691129282429057]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 428, size: fix[78, 81, 39]-mov[71, 76, 40], affine para: [-0.01862413946928678, 0.00042546406224493573, -0.008520100259766327, 0.999790162134497, 1.020529950190478, 0.9271195422346251, 0.9873629928753127, -0.018620564575809875, 0.038714728953127914, 0.10098353501239718, 0.48560863913190677, -4.456336122397965, -6.819187754069063]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.584987 v2 -0.566223
final [0.004763561237164411, -0.00932045621714197, 0.002797905611035454, 0.9999413029295449, 0.9713433980877237, 1.0881344991941406, 1.0088328978084455, 0.007588182997219264, -0.022231496065995376, -0.107535961703282, -0.7736813216314726, 3.9408878839567314, 7.129570632207631]
outputput affine center: [13.6788, 4.09967, 11.9765]
output affine para: [0.004763561237164411, -0.00932045621714197, 0.002797905611035454, 0.9999413029295449, 0.9713433980877237, 1.0881344991941406, 1.0088328978084455, 0.007588182997219264, -0.022231496065995376, -0.107535961703282, -0.7736813216314726, 3.9408878839567314, 7.129570632207631]
initial measure value (MMI): rval = -0.327073
final measure value (MMI): rval = -0.592656
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -6590.66
 iteration 2 energy 0 : -6990.39
 iteration 3 energy 0 : -7296.5
 iteration 4 energy 0 : -7519.02
 iteration 5 energy 0 : -7691.27
 iteration 6 energy 0 : -7827.01
 iteration 7 energy 0 : -7949.01
 iteration 8 energy 0 : -8060.38
 iteration 9 energy 0 : -8160.99
 iteration 10 energy 0 : -8236.41
 iteration 11 energy 0 : -8299.67
 iteration 12 energy 0 : -8346.59
 E-Slope 0.00862955 iteration 13 energy 0 : -8388.5
 E-Slope 0.00701828 iteration 14 energy 0 : -8420.5
 E-Slope 0.00577272 iteration 15 energy 0 : -8435.46
 E-Slope 0.00469161 iteration 16 energy 0 : -8428.04
 E-Slope 0.00375901 iteration 17 energy 0 : -8439.85
 E-Slope 0.00290556 iteration 18 energy 0 : -8438.19
 E-Slope 0.00215814 iteration 19 energy 0 : -8440.19
 E-Slope 0.00153929 iteration 20 energy 0 : -8443.06
 E-Slope 0.00105934 iteration 21 energy 0 : -8444.24
 E-Slope 0.000701718 iteration 22 energy 0 : -8450.66
 E-Slope 0.000446714 iteration 23 energy 0 : -8451.32
 E-Slope 0.000278354 iteration 24 energy 0 : -8454.72
 E-Slope 0.000193827 iteration 25 energy 0 : -8457.19
 E-Slope 0.000193544 iteration 26 energy 0 : -8466.77
 E-Slope 0.000220418 iteration 27 energy 0 : -8468.9
 E-Slope 0.000216626 iteration 28 energy 0 : -8470.05
 E-Slope 0.000239328 iteration 29 energy 0 : -8475.49
 E-Slope 0.000253074 iteration 30 energy 0 : -8480.32
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -12276
 iteration 2 energy 0 : -12352.8
 iteration 3 energy 0 : -12437.7
 iteration 4 energy 0 : -12531
 iteration 5 energy 0 : -12593.6
 iteration 6 energy 0 : -12654
 iteration 7 energy 0 : -12693.9
 iteration 8 energy 0 : -12687.4
 iteration 9 energy 0 : -12707.5
 iteration 10 energy 0 : -12698.1
 iteration 11 energy 0 : -12723.5
 iteration 12 energy 0 : -12714.9
 E-Slope 0.00135886 iteration 13 energy 0 : -12731.8
 E-Slope 0.000960596 iteration 14 energy 0 : -12726.2
 E-Slope 0.000648208 iteration 15 energy 0 : -12737.6
 E-Slope 0.000436306 iteration 16 energy 0 : -12737.2
 E-Slope 0.00030303 iteration 17 energy 0 : -12745.1
 E-Slope 0.000245027 iteration 18 energy 0 : -12747.1
 E-Slope 0.000245906 iteration 19 energy 0 : -12754.9
 E-Slope 0.000222638 iteration 20 energy 0 : -12757.2
 E-Slope 0.000221774 iteration 21 energy 0 : -12760.8
 E-Slope 0.000188589 iteration 22 energy 0 : -12759.8
 E-Slope 0.00019259 iteration 23 energy 0 : -12765.9
 E-Slope 0.000173032 iteration 24 energy 0 : -12768.3
 E-Slope 0.000172354 iteration 25 energy 0 : -12770.9
 E-Slope 0.000151388 iteration 26 energy 0 : -12771.2
 E-Slope 0.00014662 iteration 27 energy 0 : -12776.6
 E-Slope 0.000129074 iteration 28 energy 0 : -12775.3
 E-Slope 0.000123501 iteration 29 energy 0 : -12780.6
 E-Slope 0.000110075 iteration 30 energy 0 : -12779.3
 E-Slope 0.000107735 iteration 31 energy 0 : -12783.3
 E-Slope 9.95845e-05 iteration 32 energy 0 : -12782
 Converged due to oscillation in optimization  metric 0 bad 9  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -83060.4
 iteration 2 energy 0 : -84682.8
 iteration 3 energy 0 : -86172
 iteration 4 energy 0 : -87169.4
 iteration 5 energy 0 : -87950.5
 iteration 6 energy 0 : -88635.9
 iteration 7 energy 0 : -89213.3
 iteration 8 energy 0 : -89725.8
 iteration 9 energy 0 : -90188.6
 iteration 10 energy 0 : -90622.4
 iteration 11 energy 0 : -91046.1
 iteration 12 energy 0 : -91468.7
 E-Slope 0.00385889 iteration 13 energy 0 : -91878.9
 E-Slope 0.00336935 iteration 14 energy 0 : -92313
 E-Slope 0.00307092 iteration 15 energy 0 : -92707.3
 E-Slope 0.00285453 iteration 16 energy 0 : -93029.5
 E-Slope 0.00267575 iteration 17 energy 0 : -93308
 E-Slope 0.00251864 iteration 18 energy 0 : -93558.6
 E-Slope 0.00236195 iteration 19 energy 0 : -93775.6
 E-Slope 0.00216836 iteration 20 energy 0 : -93837.5
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2450_08172016_Aug1_Ref_vimp2_2390_07272016/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2450_08172016_Aug1_Ref_vimp2_2390_07272016/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2450_08172016_Aug1_Ref_vimp2_2390_07272016/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2450_08172016_Aug1_Ref_vimp2_2390_07272016/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2450_08172016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2878_01262017/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2450_08172016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2878_01262017/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547782655
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [13.6788, 4.09967, 11.9765]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -4.991751679189132, -10.421035183843262, -2.695265881864758]
level 0, iter 426, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.005211733022296313, 0.004973989312797381, -0.04215491464683874, 0.9990851117098773, 1.0182603724264714, 0.9574980116651597, 0.9748129560503833, 0.0010446157170775016, -0.021991982178293835, -0.0027299891358673026, -2.3609409467890354, -9.794841272284303, -2.2325955180443473]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 83, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.0029013007305554997, 0.005777070002746675, -0.04081857593272777, 0.9991456609399244, 1.0145953533678882, 0.947790925711881, 0.9769975784953209, -0.004613141936386828, -0.02865614260970399, -0.007173502919053084, -2.270267387495961, -9.920333773310068, -2.1903983605626345]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 76, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.0066855351513253666, 0.005884926125383445, -0.04738029220602095, 0.9988372135511928, 1.013128874915696, 0.9358826247641998, 0.9711001465989, -0.006976492282491948, -0.030228181967047955, -0.009720702327252516, -2.269060679444968, -9.502958164114599, -2.18971421802984]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 291, size: fix[36, 38, 32]-mov[38, 38, 32], affine para: [-0.009766464649000422, 0.00950653224052346, -0.0394187113670674, 0.9991298250013256, 1.0226157579128476, 0.9363122817009708, 0.9726413242523265, -0.013408208312613346, -0.044455533825180006, -0.006961940589758665, -2.386497870570806, -9.734701611965987, -2.1108412500207883]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 67, size: fix[71, 76, 40]-mov[75, 76, 36], affine para: [-0.006648027576860782, 0.009252703544091048, -0.03880673493321988, 0.9991817795227679, 1.030210292915638, 0.9405566966953475, 0.9776843926276064, -0.017772985258891524, -0.048967104951520846, -0.0054790914491582385, -2.515005427767904, -9.664799190648196, -2.1593046662536897]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 308, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.004227290693115293, -0.0007533483230818537, 0.046494424973066086, 0.998909320672364, 0.9765330342364718, 1.0247091684732887, 1.0078718779879552, 0.021207768249252267, 0.01899748657190912, -0.012830508227318039, 1.471877692617566, 9.957673994938117, 2.254402956014259]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 130, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.0014823461056011169, -0.0027361410482960634, 0.04562208197093771, 0.9989539237716745, 0.9712840646483383, 1.0303392933892852, 1.0050289431520425, 0.027009883851709434, 0.023399269073267673, -0.017564450378276385, 1.5413446616301911, 9.968128485193398, 2.2430935476341918]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 193, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.0025232155591710446, -0.005752015131968887, 0.044773392382004076, 0.9989774226877055, 0.9720420633452072, 1.0407220567940114, 1.0146313744679991, 0.030031409371994944, 0.025737895599301567, -0.02119094029856625, 1.5172049869958288, 10.073245159755224, 2.3352338491680107]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 92, size: fix[38, 38, 32]-mov[36, 38, 32], affine para: [0.004910329506993946, -0.004154223938202404, 0.04607504207228507, 0.9989172746457241, 0.9753778277842441, 1.0399070903965786, 1.0075957544584553, 0.034575772740447416, 0.03354376025417938, -0.021136413252776366, 1.6899885901448501, 10.44042168258814, 2.573901954914743]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 222, size: fix[75, 76, 36]-mov[71, 76, 40], affine para: [0.006559612314556574, -0.006287327601634815, 0.041840021539922806, 0.999083006359057, 0.9685198443081549, 1.0475051720903128, 1.017741498740888, 0.03637019791389319, 0.03976701923476645, -0.020301167923436142, 1.8221220908574511, 10.070585644153718, 2.5094158746137865]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.361427 v2 -0.365163
 last params [-0.006648027576860782, 0.009252703544091048, -0.03880673493321988, 0.9991817795227679, 1.030210292915638, 0.9405566966953475, 0.9776843926276064, -0.017772985258891524, -0.048967104951520846, -0.0054790914491582385, -2.515005427767904, -9.664799190648196, -2.1593046662536897]
 my params [0.006559612314556574, -0.006287327601634815, 0.041840021539922806, 0.999083006359057, 0.9685198443081549, 1.0475051720903128, 1.017741498740888, 0.03637019791389319, 0.03976701923476645, -0.020301167923436142, 1.8221220908574511, 10.070585644153718, 2.5094158746137865]
A=1.03219 0.0521819 -0.0266913 
-0.0801302 0.950953 0.0319545 
-0.0118048 -0.0133957 0.982406 

rotation R0.996935 0.0772276 0.0124749 
-0.0773933 0.996911 0.0133997 
-0.0114016 -0.0143241 0.999832 

upper R1.03536 -0.0214227 -0.0402836 
0 0.952237 0.0157224 
0 0 0.982336 

s=0.250198 u=-0.00693642 v=0.00597385 w-0.0386858 r=0.999209
m_Rotation from vnl-0.00693642 0.00597385 -0.0386858 0.999209
 new params [-0.0069364190214961435, 0.0059738541267462765, -0.03868580987175284, 0.9992094911842047, 1.035363485565407, 0.9522366066695325, 0.9823360893704524, -0.02069097840653606, -0.03890764679174879, 0.016511032042915017, -2.3392998864817005, -9.510830939317268, -2.308852160542573]
outputput affine center: [13.6788, 4.09967, 11.9765]
output affine para: [-0.0069364190214961435, 0.0059738541267462765, -0.03868580987175284, 0.9992094911842047, 1.035363485565407, 0.9522366066695325, 0.9823360893704524, -0.02069097840653606, -0.03890764679174879, 0.016511032042915017, -2.3392998864817005, -9.510830939317268, -2.308852160542573]
initial measure value (MMI): rval = -0.21514
final measure value (MMI): rval = -0.355775
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -4957.73
 iteration 2 energy 0 : -5270.28
 iteration 3 energy 0 : -5586.5
 iteration 4 energy 0 : -5877.64
 iteration 5 energy 0 : -6087.15
 iteration 6 energy 0 : -6254.71
 iteration 7 energy 0 : -6405.3
 iteration 8 energy 0 : -6535.36
 iteration 9 energy 0 : -6648.56
 iteration 10 energy 0 : -6747.82
 iteration 11 energy 0 : -6838.52
 iteration 12 energy 0 : -6927.6
 E-Slope 0.0133673 iteration 13 energy 0 : -7011.42
 E-Slope 0.0112766 iteration 14 energy 0 : -7095.62
 E-Slope 0.00974013 iteration 15 energy 0 : -7182.11
 E-Slope 0.00871152 iteration 16 energy 0 : -7262.19
 E-Slope 0.00797947 iteration 17 energy 0 : -7344.5
 E-Slope 0.0074232 iteration 18 energy 0 : -7419.34
 E-Slope 0.00699957 iteration 19 energy 0 : -7488.24
 E-Slope 0.00664511 iteration 20 energy 0 : -7549.13
 E-Slope 0.00632133 iteration 21 energy 0 : -7607.33
 E-Slope 0.00598985 iteration 22 energy 0 : -7659.93
 E-Slope 0.00560811 iteration 23 energy 0 : -7698.63
 E-Slope 0.00516466 iteration 24 energy 0 : -7725.46
 E-Slope 0.00455663 iteration 25 energy 0 : -7707.59
 E-Slope 0.00399783 iteration 26 energy 0 : -7754.81
 E-Slope 0.00338452 iteration 27 energy 0 : -7748.93
 E-Slope 0.00280587 iteration 28 energy 0 : -7768.04
 E-Slope 0.00221995 iteration 29 energy 0 : -7754.55
 E-Slope 0.00180009 iteration 30 energy 0 : -7800.08
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -11244.6
 iteration 2 energy 0 : -11325.9
 iteration 3 energy 0 : -11395.2
 iteration 4 energy 0 : -11473.6
 iteration 5 energy 0 : -11569.2
 iteration 6 energy 0 : -11674.9
 iteration 7 energy 0 : -11771
 iteration 8 energy 0 : -11830.6
 iteration 9 energy 0 : -11880.2
 iteration 10 energy 0 : -11902.1
 iteration 11 energy 0 : -11883.7
 iteration 12 energy 0 : -11861.7
 E-Slope 0.00271234 iteration 13 energy 0 : -11893
 E-Slope 0.00215586 iteration 14 energy 0 : -11878.7
 E-Slope 0.00161351 iteration 15 energy 0 : -11902.4
 E-Slope 0.00106584 iteration 16 energy 0 : -11885
 E-Slope 0.000663631 iteration 17 energy 0 : -11918.1
 E-Slope 0.000365861 iteration 18 energy 0 : -11902.9
 E-Slope 0.000259288 iteration 19 energy 0 : -11936.5
 E-Slope 0.000202902 iteration 20 energy 0 : -11920.1
 E-Slope 0.000273407 iteration 21 energy 0 : -11954.7
 E-Slope 0.000333399 iteration 22 energy 0 : -11937.4
 E-Slope 0.000395805 iteration 23 energy 0 : -11969.7
 E-Slope 0.000360258 iteration 24 energy 0 : -11951
 E-Slope 0.000400446 iteration 25 energy 0 : -11978.5
 E-Slope 0.000363342 iteration 26 energy 0 : -11964
 E-Slope 0.000391126 iteration 27 energy 0 : -11992.9
 E-Slope 0.000332952 iteration 28 energy 0 : -11976.3
 E-Slope 0.000362381 iteration 29 energy 0 : -12008.2
 E-Slope 0.000308909 iteration 30 energy 0 : -11989.9
 E-Slope 0.000340268 iteration 31 energy 0 : -12018.7
 E-Slope 0.000286207 iteration 32 energy 0 : -11999.2
 E-Slope 0.000320792 iteration 33 energy 0 : -12028.4
 E-Slope 0.000268973 iteration 34 energy 0 : -12008.5
 E-Slope 0.0002997 iteration 35 energy 0 : -12035.6
 E-Slope 0.000241108 iteration 36 energy 0 : -12014.2
 E-Slope 0.000260808 iteration 37 energy 0 : -12042.5
 E-Slope 0.000201523 iteration 38 energy 0 : -12021.4
 E-Slope 0.000223286 iteration 39 energy 0 : -12048.5
 E-Slope 0.000163116 iteration 40 energy 0 : -12026.4
 E-Slope 0.000187047 iteration 41 energy 0 : -12050.6
 E-Slope 0.000131629 iteration 42 energy 0 : -12029.9
 E-Slope 0.000160113 iteration 43 energy 0 : -12055.9
 E-Slope 0.000109784 iteration 44 energy 0 : -12035.9
 E-Slope 0.000142962 iteration 45 energy 0 : -12060.4
 E-Slope 9.78634e-05 iteration 46 energy 0 : -12040.2
 Converged due to oscillation in optimization  metric 0 bad 19  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -78248.6
 iteration 2 energy 0 : -79952.8
 iteration 3 energy 0 : -81617.2
 iteration 4 energy 0 : -83084.8
 iteration 5 energy 0 : -84262.2
 iteration 6 energy 0 : -85241.9
 iteration 7 energy 0 : -86082.8
 iteration 8 energy 0 : -86910.2
 iteration 9 energy 0 : -87610.3
 iteration 10 energy 0 : -88241.3
 iteration 11 energy 0 : -88837
 iteration 12 energy 0 : -89319.2
 E-Slope 0.00569687 iteration 13 energy 0 : -89701.4
 E-Slope 0.00491337 iteration 14 energy 0 : -90038.5
 E-Slope 0.00426008 iteration 15 energy 0 : -90350.6
 E-Slope 0.00372324 iteration 16 energy 0 : -90636.6
 E-Slope 0.0032588 iteration 17 energy 0 : -90881.2
 E-Slope 0.00284827 iteration 18 energy 0 : -91116.1
 E-Slope 0.00248448 iteration 19 energy 0 : -91346.7
 E-Slope 0.00218437 iteration 20 energy 0 : -91562.7
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2450_08172016_Aug2_Ref_vimp2_2878_01262017/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2450_08172016_Aug2_Ref_vimp2_2878_01262017/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2450_08172016_Aug2_Ref_vimp2_2878_01262017/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2450_08172016_Aug2_Ref_vimp2_2878_01262017/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2456_08182016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1847_01152016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2456_08182016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1847_01152016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547782744
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [13.7362, 3.00486, -4.24985]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 2.762857253686379, -18.06832405693665, 16.184651583103427]
level 0, iter 724, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.013581593809062955, -0.002502498379910234, 0.03056415060963608, 0.9994373969934163, 0.9580363147661592, 0.9983339404407053, 1.063255618445145, -0.0884616843377312, 0.008129507139977583, 0.001750877565745703, 4.557921687976089, -20.543201208539873, 14.91404736739164]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 170, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.01629330910475048, -0.0027895994735193533, 0.026540797315069743, 0.9995110466078276, 0.9610933240623039, 0.9992866355508188, 1.0673022389015188, -0.10122016045300614, 0.008278172284013032, 0.0006166537010309414, 4.560486745173518, -20.498776254299244, 14.802329659598607]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 59, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.01928727801937266, -0.004274729592762291, 0.024141622302473086, 0.9995133364123346, 0.957581796014819, 0.9966039525985197, 1.0683929269723278, -0.11012292234143821, 0.01144535630203979, 0.005510321182496354, 4.571418386578472, -20.429374907920472, 14.771957896276623]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 397, size: fix[40, 43, 38]-mov[42, 45, 34], affine para: [-0.017908490646799773, -0.008447088621564297, 0.017464632155456426, 0.9996513988787529, 0.9531714153251668, 1.0020999748273896, 1.076347893570545, -0.12895998509334636, 0.021647141861841777, 0.017714123428014417, 4.439578313171036, -20.386264326759385, 14.940704636929167]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 97, size: fix[79, 86, 54]-mov[84, 89, 48], affine para: [-0.012215952932521035, -0.004221229649788055, 0.014818280602212413, 0.999806666448163, 0.9498979617507889, 1.008336814924027, 1.0773045230675529, -0.1327733827753136, 0.01176008405705482, 0.012449593239238109, 4.378563937758421, -20.689099689537027, 14.900817898901629]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 1645, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.009271373827831525, -0.009333040619109426, 0.007661396034524591, 0.9998841127805507, 1.0086338921107438, 0.978616557751445, 0.9195646492332805, 0.1883678735362418, 0.022780729810451487, -0.06608049215716125, -1.3020523172471452, 21.68013309614596, -12.836007696619891]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 122, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.00957592758922999, -0.006381544703986156, 0.010113855866840648, 0.9998826368216931, 1.0117694760190035, 0.98040630306898, 0.9197372817240077, 0.18937167440344577, 0.021413386432586997, -0.0677652494034508, -1.358451749569454, 21.798052122744885, -12.862660387156973]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 214, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.0077393969927037854, -0.00881148184664822, 0.007693084479819497, 0.9999016331485022, 1.011937620009802, 0.9818096241391923, 0.9206575737201408, 0.1938622062268535, 0.018730965365780956, -0.066071353800482, -1.0150146136832123, 21.595585707208652, -13.021489854620127]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 90, size: fix[42, 45, 34]-mov[40, 43, 38], affine para: [0.00468256833252042, -0.005193827463368757, 0.0058261230142538575, 0.9999585761423895, 1.0124652793056588, 0.9745037094338852, 0.9184027111437321, 0.18710880742373504, 0.011572647500332257, -0.06933080259937142, -1.0208254388653755, 21.266016181045707, -13.16992789443074]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 244, size: fix[84, 89, 48]-mov[79, 86, 54], affine para: [0.0037220952868587814, -0.004280489537283689, 0.013789603198242437, 0.9998888289503147, 1.0253321866568343, 0.9641557773095796, 0.9158968560196997, 0.1938047997578112, 0.019179390997993283, -0.05745347531120337, -1.1275156759386538, 20.882094018072912, -13.275964129036163]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.385999 v2 -0.408779
 last params [-0.012215952932521035, -0.004221229649788055, 0.014818280602212413, 0.999806666448163, 0.9498979617507889, 1.008336814924027, 1.0773045230675529, -0.1327733827753136, 0.01176008405705482, 0.012449593239238109, 4.378563937758421, -20.689099689537027, 14.900817898901629]
 my params [0.0037220952868587814, -0.004280489537283689, 0.013789603198242437, 0.9998888289503147, 1.0253321866568343, 0.9641557773095796, 0.9158968560196997, 0.1938047997578112, 0.019179390997993283, -0.05745347531120337, -1.1275156759386538, 20.882094018072912, -13.275964129036163]
A=0.980716 -0.173814 -0.0261195 
-0.0291649 1.03628 0.0703228 
-0.00923398 -0.00825575 1.09176 

rotation R0.999514 0.0296309 0.00969995 
-0.0297239 0.999512 0.00959294 
-0.00941097 -0.0098766 0.999907 

upper R0.981193 -0.204454 -0.0384715 
0 1.0307 0.0587317 
0 0 1.09208 

s=0.250033 u=-0.00486803 v=0.00477837 w-0.0148407 r=0.999867
m_Rotation from vnl-0.00486803 0.00477837 -0.0148407 0.999867
 new params [-0.00486803442248156, 0.004778367204442228, -0.014840674000796713, 0.9998666030240849, 0.981193443243957, 1.0307049898629892, 1.0920753819647209, -0.20837265275035763, -0.03920888508164241, 0.056982084482665986, 4.388608429131965, -20.738962470167007, 14.656095887925744]
outputput affine center: [13.7362, 3.00486, -4.24985]
output affine para: [-0.00486803442248156, 0.004778367204442228, -0.014840674000796713, 0.9998666030240849, 0.981193443243957, 1.0307049898629892, 1.0920753819647209, -0.20837265275035763, -0.03920888508164241, 0.056982084482665986, 4.388608429131965, -20.738962470167007, 14.656095887925744]
initial measure value (MMI): rval = -0.185621
final measure value (MMI): rval = -0.393844
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -4557.08
 iteration 2 energy 0 : -5050.25
 iteration 3 energy 0 : -5433.96
 iteration 4 energy 0 : -5723.07
 iteration 5 energy 0 : -5958.08
 iteration 6 energy 0 : -6167.88
 iteration 7 energy 0 : -6356.33
 iteration 8 energy 0 : -6478.5
 iteration 9 energy 0 : -6576.93
 iteration 10 energy 0 : -6656.81
 iteration 11 energy 0 : -6722.96
 iteration 12 energy 0 : -6784.09
 E-Slope 0.0140269 iteration 13 energy 0 : -6851.61
 E-Slope 0.0112436 iteration 14 energy 0 : -6918.68
 E-Slope 0.00918689 iteration 15 energy 0 : -6969.72
 E-Slope 0.00756981 iteration 16 energy 0 : -7002.42
 E-Slope 0.00617427 iteration 17 energy 0 : -6994.69
 E-Slope 0.00502 iteration 18 energy 0 : -6995.72
 E-Slope 0.00408079 iteration 19 energy 0 : -6988.67
 E-Slope 0.00330395 iteration 20 energy 0 : -7014.04
 E-Slope 0.00255316 iteration 21 energy 0 : -7000.57
 E-Slope 0.00184257 iteration 22 energy 0 : -6992.32
 E-Slope 0.00120466 iteration 23 energy 0 : -6992.84
 E-Slope 0.000678733 iteration 24 energy 0 : -6998.93
 E-Slope 0.000284776 iteration 25 energy 0 : -6995.06
 E-Slope 0.000116609 iteration 26 energy 0 : -7015.44
 E-Slope 5.4881e-05 iteration 27 energy 0 : -7006.03
 Converged due to oscillation in optimization  metric 0 bad 6  
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -17309
 iteration 2 energy 0 : -17577
 iteration 3 energy 0 : -17964
 iteration 4 energy 0 : -18288.9
 iteration 5 energy 0 : -18447.1
 iteration 6 energy 0 : -18564.1
 iteration 7 energy 0 : -18625.7
 iteration 8 energy 0 : -18730.3
 iteration 9 energy 0 : -18754.4
 iteration 10 energy 0 : -18834.3
 iteration 11 energy 0 : -18833
 iteration 12 energy 0 : -18935
 E-Slope 0.00319476 iteration 13 energy 0 : -18932.4
 E-Slope 0.00234821 iteration 14 energy 0 : -18958.4
 E-Slope 0.00174711 iteration 15 energy 0 : -18948.2
 E-Slope 0.00143265 iteration 16 energy 0 : -19002.2
 E-Slope 0.0011749 iteration 17 energy 0 : -18991.2
 E-Slope 0.000999793 iteration 18 energy 0 : -19028
 E-Slope 0.000800326 iteration 19 energy 0 : -19010
 E-Slope 0.000718467 iteration 20 energy 0 : -19067.1
 E-Slope 0.000592798 iteration 21 energy 0 : -19050.3
 E-Slope 0.000551239 iteration 22 energy 0 : -19087.8
 E-Slope 0.000438578 iteration 23 energy 0 : -19060.8
 E-Slope 0.000463091 iteration 24 energy 0 : -19116.5
 E-Slope 0.000432655 iteration 25 energy 0 : -19098.4
 E-Slope 0.000436716 iteration 26 energy 0 : -19132.7
 E-Slope 0.000367463 iteration 27 energy 0 : -19103.4
 E-Slope 0.00039345 iteration 28 energy 0 : -19162.5
 E-Slope 0.000356995 iteration 29 energy 0 : -19141.6
 E-Slope 0.000368036 iteration 30 energy 0 : -19172.4
 E-Slope 0.000299267 iteration 31 energy 0 : -19140
 E-Slope 0.000336051 iteration 32 energy 0 : -19201.7
 E-Slope 0.000302464 iteration 33 energy 0 : -19175.3
 E-Slope 0.000317767 iteration 34 energy 0 : -19203.1
 E-Slope 0.000245512 iteration 35 energy 0 : -19168.8
 E-Slope 0.000278264 iteration 36 energy 0 : -19227.9
 E-Slope 0.000247799 iteration 37 energy 0 : -19205.6
 E-Slope 0.00026229 iteration 38 energy 0 : -19229.6
 E-Slope 0.000191644 iteration 39 energy 0 : -19196.2
 E-Slope 0.000236109 iteration 40 energy 0 : -19258.2
 E-Slope 0.000214577 iteration 41 energy 0 : -19233.3
 E-Slope 0.000231408 iteration 42 energy 0 : -19252.1
 E-Slope 0.000161111 iteration 43 energy 0 : -19217.8
 E-Slope 0.000204682 iteration 44 energy 0 : -19274.1
 E-Slope 0.000174493 iteration 45 energy 0 : -19244.7
 E-Slope 0.000195026 iteration 46 energy 0 : -19275.9
 E-Slope 0.000137135 iteration 47 energy 0 : -19249.8
 E-Slope 0.000164926 iteration 48 energy 0 : -19280.3
 E-Slope 0.000130713 iteration 49 energy 0 : -19254.3
 E-Slope 0.00014396 iteration 50 energy 0 : -19283.3
 E-Slope 8.46907e-05 iteration 51 energy 0 : -19258.9
 Converged due to oscillation in optimization  metric 0 bad 21  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -131607
 iteration 2 energy 0 : -134102
 iteration 3 energy 0 : -136806
 iteration 4 energy 0 : -139249
 iteration 5 energy 0 : -141525
 iteration 6 energy 0 : -143265
 iteration 7 energy 0 : -144624
 iteration 8 energy 0 : -145820
 iteration 9 energy 0 : -146798
 iteration 10 energy 0 : -147612
 iteration 11 energy 0 : -148315
 iteration 12 energy 0 : -148964
 E-Slope 0.00535402 iteration 13 energy 0 : -149605
 E-Slope 0.00450665 iteration 14 energy 0 : -150239
 E-Slope 0.00382684 iteration 15 energy 0 : -150921
 E-Slope 0.00329611 iteration 16 energy 0 : -151455
 E-Slope 0.00292066 iteration 17 energy 0 : -151966
 E-Slope 0.00265102 iteration 18 energy 0 : -152487
 E-Slope 0.00243733 iteration 19 energy 0 : -152904
 E-Slope 0.00226788 iteration 20 energy 0 : -153295
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2456_08182016_Aug1_Ref_vimp2_1847_01152016/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2456_08182016_Aug1_Ref_vimp2_1847_01152016/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2456_08182016_Aug1_Ref_vimp2_1847_01152016/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2456_08182016_Aug1_Ref_vimp2_1847_01152016/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2456_08182016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1709_07072015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2456_08182016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1709_07072015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547782881
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [13.7362, 3.00486, -4.24985]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0.004273433089755585, -19.644637624558953, 18.713030585456725]
level 0, iter 841, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.03987290121463757, 0.001743193798810613, -0.052278176544710626, 0.9978347083967705, 0.8913859411534089, 0.9450248142322432, 1.019190990874866, -0.06515566149652281, -0.0025749568577743557, -0.03272836225870959, 1.0094373430250887, -25.267376765535033, 18.41546033417537]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 213, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.04047378911151202, -0.001964363632081118, -0.05642579669690787, 0.9975841534114287, 0.8928979170635043, 0.9476006536884383, 1.0263985659475547, -0.0737164246167788, 0.007567968651940409, -0.03696520521637082, 0.9927510074775465, -25.222328354573026, 18.48583012467435]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 531, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.03771257779052913, -0.0019128858794621312, -0.06715938313761098, 0.9970274417490128, 0.889628351103347, 0.9620534185947067, 1.0276536495973854, -0.0969476160874823, 0.0027659983408472397, -0.019523184754949113, 0.955945291947816, -25.426553615923968, 18.399976110577146]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 148, size: fix[40, 43, 38]-mov[37, 43, 35], affine para: [0.03560516216144486, -0.004713647271919217, -0.06918357332943281, 0.9969572142966939, 0.8899635886726726, 0.9580026054105943, 1.0287256857033715, -0.10297751917522564, 0.007650733470481873, -0.018337260435581267, 0.9629080765743926, -24.94224600206708, 18.35298917367913]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 234, size: fix[79, 86, 54]-mov[73, 86, 49], affine para: [0.03149262141294963, -0.007251507695185468, -0.07135673438384933, 0.9969272024028435, 0.8861005376901253, 0.9767837611114741, 1.0309569177555862, -0.11323701809512307, 0.024803749698449798, -0.013858649023039541, 0.9730937897887284, -24.91975580308651, 18.436918091610202]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 971, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.02799606724477379, -0.007625702654544049, 0.06102948385297722, 0.9977141228721229, 1.1120803551310543, 0.9456895838780506, 0.9890577715776755, 0.052532910282697964, 0.019349746809545623, -0.005950296587681201, -2.7522568088712984, 22.28675093297839, -19.36153481268586]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 74, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.027314728310612494, -0.00552794867967508, 0.06552326985042312, 0.9974618030324874, 1.1047055037320257, 0.931320021499585, 0.982610187449747, 0.05965236924005568, 0.01919231717708618, -0.009472104689346113, -2.9219513414942155, 21.78738005402108, -19.207426785853183]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 1527, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.030321067788387213, 0.0007771237140648243, 0.09038903314704663, 0.9954445497433031, 1.1284835180343409, 0.9347286844966629, 0.9792488345680948, 0.10173851921157505, 0.010238445825966011, -0.012073279742726475, -2.7698997403668253, 22.746206446439754, -19.17381078627738]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 321, size: fix[37, 43, 35]-mov[40, 43, 38], affine para: [-0.03690105794277009, 0.0011702325146825646, 0.0872877048458058, 0.9954987689903576, 1.1317027121742067, 0.9283944156137949, 0.9727019375471476, 0.09682177508247705, 0.01189497635519192, -0.009352405029571922, -2.58124752526119, 22.151753296853702, -19.36916711665063]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 516, size: fix[73, 86, 49]-mov[79, 86, 54], affine para: [-0.04147142516958177, 0.004381804661462979, 0.07318824492585703, 0.9964458848763366, 1.1407921126808633, 0.9373305088446211, 0.9782266394090153, 0.09479729541414156, 0.00569307030681389, 0.0027560927972463153, -2.1031361580397454, 21.719164532926552, -19.771323434906456]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.353621 v2 -0.362505
 last params [0.03149262141294963, -0.007251507695185468, -0.07135673438384933, 0.9969272024028435, 0.8861005376901253, 0.9767837611114741, 1.0309569177555862, -0.11323701809512307, 0.024803749698449798, -0.013858649023039541, 0.9730937897887284, -24.91975580308651, 18.436918091610202]
 my params [-0.04147142516958177, 0.004381804661462979, 0.07318824492585703, 0.9964458848763366, 1.1407921126808633, 0.9373305088446211, 0.9782266394090153, 0.09479729541414156, 0.00569307030681389, 0.0027560927972463153, -2.1031361580397454, 21.719164532926552, -19.771323434906456]
A=0.881933 0.0273701 -0.0102156 
-0.156003 1.05153 -0.0902972 
0.00272127 0.0851433 1.0187 

rotation R0.984709 0.173352 -0.0172702 
-0.174183 0.981438 -0.0802484 
0.0030384 0.0820295 0.996625 

upper R0.895628 -0.155948 0.0087641 
0 1.04374 -0.00682839 
0 0 1.02269 

s=0.251172 u=0.0407596 v=-0.00510093 w-0.0872909 r=0.995336
m_Rotation from vnl0.0407596 -0.00510093 -0.0872909 0.995336
 new params [0.04075959510419688, -0.00510093066821282, -0.08729086030336783, 0.9953355924615366, 0.8956279985587465, 1.0437362472288516, 1.0226872083329428, -0.17412124852169322, 0.009785421342145361, -0.006542257357908314, 1.0583921472736584, -24.951654822803274, 18.297576581755145]
outputput affine center: [13.7362, 3.00486, -4.24985]
output affine para: [0.04075959510419688, -0.00510093066821282, -0.08729086030336783, 0.9953355924615366, 0.8956279985587465, 1.0437362472288516, 1.0226872083329428, -0.17412124852169322, 0.009785421342145361, -0.006542257357908314, 1.0583921472736584, -24.951654822803274, 18.297576581755145]
initial measure value (MMI): rval = -0.169049
final measure value (MMI): rval = -0.374956
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -5153.3
 iteration 2 energy 0 : -5675.78
 iteration 3 energy 0 : -6076.11
 iteration 4 energy 0 : -6398.7
 iteration 5 energy 0 : -6705.88
 iteration 6 energy 0 : -6908.59
 iteration 7 energy 0 : -7057.42
 iteration 8 energy 0 : -7163.47
 iteration 9 energy 0 : -7270.2
 iteration 10 energy 0 : -7345.39
 iteration 11 energy 0 : -7362.8
 iteration 12 energy 0 : -7411.12
 E-Slope 0.0121818 iteration 13 energy 0 : -7406.51
 E-Slope 0.00921686 iteration 14 energy 0 : -7484.55
 E-Slope 0.0069114 iteration 15 energy 0 : -7498.18
 E-Slope 0.0051039 iteration 16 energy 0 : -7500.81
 E-Slope 0.00398253 iteration 17 energy 0 : -7556.16
 E-Slope 0.00318781 iteration 18 energy 0 : -7568.01
 E-Slope 0.00251695 iteration 19 energy 0 : -7542.39
 E-Slope 0.00194459 iteration 20 energy 0 : -7535.46
 E-Slope 0.00167329 iteration 21 energy 0 : -7590.68
 E-Slope 0.00144021 iteration 22 energy 0 : -7573.67
 E-Slope 0.00110256 iteration 23 energy 0 : -7553.84
 E-Slope 0.000831008 iteration 24 energy 0 : -7556.53
 E-Slope 0.0004711 iteration 25 energy 0 : -7550.25
 E-Slope 0.000278555 iteration 26 energy 0 : -7547.04
 E-Slope 0.000200324 iteration 27 energy 0 : -7584.48
 E-Slope 7.12946e-05 iteration 28 energy 0 : -7571.13
 Converged due to oscillation in optimization  metric 0 bad 8  
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -18065.7
 iteration 2 energy 0 : -18406.8
 iteration 3 energy 0 : -18842.4
 iteration 4 energy 0 : -19143.5
 iteration 5 energy 0 : -19369.5
 iteration 6 energy 0 : -19517.6
 iteration 7 energy 0 : -19598.2
 iteration 8 energy 0 : -19699.7
 iteration 9 energy 0 : -19702.2
 iteration 10 energy 0 : -19834.1
 iteration 11 energy 0 : -19884.9
 iteration 12 energy 0 : -19864.6
 E-Slope 0.00340167 iteration 13 energy 0 : -19872.6
 E-Slope 0.00248377 iteration 14 energy 0 : -19932.5
 E-Slope 0.00181795 iteration 15 energy 0 : -19907.2
 E-Slope 0.00147156 iteration 16 energy 0 : -20044.6
 E-Slope 0.00118877 iteration 17 energy 0 : -19985.2
 E-Slope 0.0010831 iteration 18 energy 0 : -20091.4
 E-Slope 0.000926286 iteration 19 energy 0 : -20035.1
 E-Slope 0.000845343 iteration 20 energy 0 : -20069.2
 E-Slope 0.000680767 iteration 21 energy 0 : -20045.4
 E-Slope 0.000616483 iteration 22 energy 0 : -20061
 E-Slope 0.000557274 iteration 23 energy 0 : -20056.7
 E-Slope 0.000438698 iteration 24 energy 0 : -20055.2
 E-Slope 0.000288449 iteration 25 energy 0 : -20045.5
 E-Slope 0.000193886 iteration 26 energy 0 : -20059.4
 E-Slope 4.22597e-05 iteration 27 energy 0 : -20044.4
 Converged due to oscillation in optimization  metric 0 bad 9  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -130731
 iteration 2 energy 0 : -133653
 iteration 3 energy 0 : -137183
 iteration 4 energy 0 : -139900
 iteration 5 energy 0 : -142014
 iteration 6 energy 0 : -143933
 iteration 7 energy 0 : -145586
 iteration 8 energy 0 : -146966
 iteration 9 energy 0 : -148216
 iteration 10 energy 0 : -149176
 iteration 11 energy 0 : -149974
 iteration 12 energy 0 : -150733
 E-Slope 0.00604276 iteration 13 energy 0 : -151440
 E-Slope 0.00507472 iteration 14 energy 0 : -152141
 E-Slope 0.00434116 iteration 15 energy 0 : -152761
 E-Slope 0.00375453 iteration 16 energy 0 : -153258
 E-Slope 0.00326663 iteration 17 energy 0 : -153753
 E-Slope 0.00287947 iteration 18 energy 0 : -154246
 E-Slope 0.00257409 iteration 19 energy 0 : -154691
 E-Slope 0.002327 iteration 20 energy 0 : -155093
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2456_08182016_Aug2_Ref_vimp2_1709_07072015/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2456_08182016_Aug2_Ref_vimp2_1709_07072015/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2456_08182016_Aug2_Ref_vimp2_1709_07072015/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2456_08182016_Aug2_Ref_vimp2_1709_07072015/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2459_08192016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1751_12022015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2459_08192016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1751_12022015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547783014
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [7.47828, 2.49675, 5.14667]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 1.4637787412809278, -16.46148051666856, -0.2347539683756228]
level 0, iter 1840, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.0013897467376510044, 0.008004217994652911, 0.04301282376217851, 0.9990414896741292, 1.057029878241967, 0.9483885519962766, 0.9270492954703722, -0.025926983085407914, 0.0501790230023928, -0.17220277001138154, 3.1877801685058196, -17.028336673249783, 0.4132936939784196]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 1333, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.011640793878323345, 0.0013780708489268757, 0.058017767754606916, 0.9982467287516599, 1.0575368517001618, 0.9067134873882536, 0.8815656139080689, -0.00952452075212881, 0.04121949677190815, -0.2659339238647543, 3.122773707750864, -17.940170622584823, 0.178749525894677]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 341, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.008006960168393168, 0.005381809035297275, 0.05461406686836431, 0.9984609298417576, 1.0600812232920693, 0.9187704432993538, 0.8868917820305332, -0.01499357734857423, 0.040695203022732725, -0.2837970612656193, 3.086328761055825, -18.329178109348998, 0.32153503716629367]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 487, size: fix[41, 45, 33]-mov[39, 46, 33], affine para: [-0.018212559655187113, 0.001608276704040537, 0.05159585612810861, 0.9985006678752183, 1.0514630619412175, 0.9205284005656585, 0.8828185847733924, -0.019146058356337498, 0.03602072761473265, -0.2997553917134758, 2.947088542806999, -18.421608453680946, 0.275244075373561]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 131, size: fix[82, 90, 47]-mov[78, 92, 46], affine para: [-0.009592169078971976, 0.0037000110947415137, 0.05149422612131698, 0.9986203707547858, 1.0577477888484088, 0.9235399072707667, 0.8890869830884268, -0.02110654599571204, 0.03420736808400226, -0.30612135768741217, 2.816010278492369, -18.69094346238366, 0.09465888206954262]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 6137, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.004860488441956282, -0.017137164424381252, -0.023621748483403083, 0.9995622573137624, 0.9381719623611174, 1.0568537745791167, 1.0381137650566612, 0.06823399927314826, -0.036225985273024564, 0.11865671421132935, -1.0688777104138423, 17.899351632857943, -1.1066168411107724]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 1222, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.008236601364195299, -0.015859308067529367, -0.023209897334239383, 0.9995708786330865, 0.9319653726451731, 1.0607478905228254, 1.0522448305074075, 0.0637236862502018, -0.039507858685046665, 0.16272064413508144, -1.0348367612372686, 18.68562112464791, -1.1555801142063773]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 242, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.00030075684782428545, -0.013394870665996421, -0.031593171142991754, 0.9994110058040633, 0.9373338569721588, 1.067230108133725, 1.048103287562851, 0.05587272549316177, -0.04085517469392315, 0.1734399123769814, -0.8258256880933615, 18.47475796594211, -1.0166139999869641]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 226, size: fix[39, 46, 33]-mov[41, 45, 33], affine para: [-0.0014642351184838724, -0.01229484227152537, -0.02477132997055813, 0.9996164634901358, 0.9355608250997125, 1.06598506848175, 1.0538133626649218, 0.054340628469497436, -0.038920468406565066, 0.1835567619702645, -1.1560055980004784, 18.687041033210143, -0.891863813246323]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 558, size: fix[78, 92, 46]-mov[82, 90, 47], affine para: [0.00832413922304083, -0.017534698158211223, -0.02761707673842931, 0.999430107680932, 0.940339993054153, 1.0893651289180932, 1.0648700355928185, 0.045394885659877426, -0.035768870742409566, 0.19644377915976893, -1.2807646478407428, 18.9684899547499, -0.593098795532879]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.351592 v2 -0.333302
final [-0.009592169078971976, 0.0037000110947415137, 0.05149422612131698, 0.9986203707547858, 1.0577477888484088, 0.9235399072707667, 0.8890869830884268, -0.02110654599571204, 0.03420736808400226, -0.30612135768741217, 2.816010278492369, -18.69094346238366, 0.09465888206954262]
outputput affine center: [7.47828, 2.49675, 5.14667]
output affine para: [-0.009592169078971976, 0.0037000110947415137, 0.05149422612131698, 0.9986203707547858, 1.0577477888484088, 0.9235399072707667, 0.8890869830884268, -0.02110654599571204, 0.03420736808400226, -0.30612135768741217, 2.816010278492369, -18.69094346238366, 0.09465888206954262]
initial measure value (MMI): rval = -0.182308
final measure value (MMI): rval = -0.371462
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -4964.51
 iteration 2 energy 0 : -5389.99
 iteration 3 energy 0 : -5721.27
 iteration 4 energy 0 : -5981.58
 iteration 5 energy 0 : -6226.56
 iteration 6 energy 0 : -6420.33
 iteration 7 energy 0 : -6582.43
 iteration 8 energy 0 : -6720.34
 iteration 9 energy 0 : -6841.71
 iteration 10 energy 0 : -6955.39
 iteration 11 energy 0 : -7052.71
 iteration 12 energy 0 : -7138.51
 E-Slope 0.0138965 iteration 13 energy 0 : -7212.53
 E-Slope 0.0116909 iteration 14 energy 0 : -7284.39
 E-Slope 0.00998332 iteration 15 energy 0 : -7351.49
 E-Slope 0.00860033 iteration 16 energy 0 : -7413.22
 E-Slope 0.00753475 iteration 17 energy 0 : -7467.13
 E-Slope 0.00666936 iteration 18 energy 0 : -7515.37
 E-Slope 0.00595786 iteration 19 energy 0 : -7564.18
 E-Slope 0.00536106 iteration 20 energy 0 : -7610.46
 E-Slope 0.00484183 iteration 21 energy 0 : -7648.4
 E-Slope 0.00436405 iteration 22 energy 0 : -7669.27
 E-Slope 0.00384843 iteration 23 energy 0 : -7665.5
 E-Slope 0.00332896 iteration 24 energy 0 : -7673.37
 E-Slope 0.0028371 iteration 25 energy 0 : -7693.75
 E-Slope 0.00232466 iteration 26 energy 0 : -7686.84
 E-Slope 0.00190882 iteration 27 energy 0 : -7716.04
 E-Slope 0.00151155 iteration 28 energy 0 : -7710.92
 E-Slope 0.00120201 iteration 29 energy 0 : -7729.25
 E-Slope 0.000928804 iteration 30 energy 0 : -7726.73
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -16714.2
 iteration 2 energy 0 : -17006.9
 iteration 3 energy 0 : -17266.4
 iteration 4 energy 0 : -17477.1
 iteration 5 energy 0 : -17658.2
 iteration 6 energy 0 : -17804.6
 iteration 7 energy 0 : -17900.7
 iteration 8 energy 0 : -17936.7
 iteration 9 energy 0 : -17954.1
 iteration 10 energy 0 : -17955.7
 iteration 11 energy 0 : -18021.9
 iteration 12 energy 0 : -18018
 E-Slope 0.00269816 iteration 13 energy 0 : -18070.3
 E-Slope 0.00197452 iteration 14 energy 0 : -18066.7
 E-Slope 0.00145775 iteration 15 energy 0 : -18109.3
 E-Slope 0.0010692 iteration 16 energy 0 : -18103.8
 E-Slope 0.000855796 iteration 17 energy 0 : -18148.2
 E-Slope 0.000731982 iteration 18 energy 0 : -18138.4
 E-Slope 0.00071568 iteration 19 energy 0 : -18184.7
 E-Slope 0.000673115 iteration 20 energy 0 : -18169.7
 E-Slope 0.000657678 iteration 21 energy 0 : -18217.6
 E-Slope 0.000576176 iteration 22 energy 0 : -18199.2
 E-Slope 0.000586674 iteration 23 energy 0 : -18251.2
 E-Slope 0.000526868 iteration 24 energy 0 : -18229.9
 E-Slope 0.00054206 iteration 25 energy 0 : -18277.5
 E-Slope 0.000490025 iteration 26 energy 0 : -18255.4
 E-Slope 0.000503622 iteration 27 energy 0 : -18302
 E-Slope 0.000449777 iteration 28 energy 0 : -18279.2
 E-Slope 0.000461139 iteration 29 energy 0 : -18321.2
 E-Slope 0.000404477 iteration 30 energy 0 : -18299.5
 E-Slope 0.000418186 iteration 31 energy 0 : -18341.4
 E-Slope 0.000360101 iteration 32 energy 0 : -18318.8
 E-Slope 0.000371374 iteration 33 energy 0 : -18355.5
 E-Slope 0.000311829 iteration 34 energy 0 : -18334.1
 E-Slope 0.000327781 iteration 35 energy 0 : -18369.5
 E-Slope 0.000273138 iteration 36 energy 0 : -18348.4
 E-Slope 0.000291906 iteration 37 energy 0 : -18384
 E-Slope 0.000243872 iteration 38 energy 0 : -18364.9
 E-Slope 0.000273131 iteration 39 energy 0 : -18403.2
 E-Slope 0.000227287 iteration 40 energy 0 : -18375.9
 E-Slope 0.000256702 iteration 41 energy 0 : -18415.7
 E-Slope 0.000213385 iteration 42 energy 0 : -18388.5
 E-Slope 0.0002473 iteration 43 energy 0 : -18429.6
 E-Slope 0.000206381 iteration 44 energy 0 : -18400.7
 E-Slope 0.000235274 iteration 45 energy 0 : -18439.7
 E-Slope 0.000192903 iteration 46 energy 0 : -18411.8
 E-Slope 0.000219807 iteration 47 energy 0 : -18450.9
 E-Slope 0.000174597 iteration 48 energy 0 : -18421.1
 E-Slope 0.000199869 iteration 49 energy 0 : -18460
 E-Slope 0.000157312 iteration 50 energy 0 : -18430.9
 E-Slope 0.000186354 iteration 51 energy 0 : -18466.9
 E-Slope 0.000139408 iteration 52 energy 0 : -18437.5
 E-Slope 0.000167981 iteration 53 energy 0 : -18474.5
 E-Slope 0.000122301 iteration 54 energy 0 : -18445.5
 E-Slope 0.000154778 iteration 55 energy 0 : -18482.7
 E-Slope 0.000117905 iteration 56 energy 0 : -18459
 E-Slope 0.000157438 iteration 57 energy 0 : -18496.6
 E-Slope 0.000126421 iteration 58 energy 0 : -18471
 E-Slope 0.00017219 iteration 59 energy 0 : -18509.2
 E-Slope 0.000135697 iteration 60 energy 0 : -18475.6
 E-Slope 0.000176251 iteration 61 energy 0 : -18514.6
 E-Slope 0.00013645 iteration 62 energy 0 : -18482.3
 E-Slope 0.000164941 iteration 63 energy 0 : -18516.4
 E-Slope 0.000115946 iteration 64 energy 0 : -18486.2
 E-Slope 0.000136167 iteration 65 energy 0 : -18518.8
 E-Slope 8.23215e-05 iteration 66 energy 0 : -18489.3
 Converged due to oscillation in optimization  metric 0 bad 28  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -120908
 iteration 2 energy 0 : -123933
 iteration 3 energy 0 : -126798
 iteration 4 energy 0 : -129394
 iteration 5 energy 0 : -131657
 iteration 6 energy 0 : -133558
 iteration 7 energy 0 : -135200
 iteration 8 energy 0 : -136650
 iteration 9 energy 0 : -137845
 iteration 10 energy 0 : -138925
 iteration 11 energy 0 : -139886
 iteration 12 energy 0 : -140762
 E-Slope 0.00659186 iteration 13 energy 0 : -141565
 E-Slope 0.00567964 iteration 14 energy 0 : -142202
 E-Slope 0.00490039 iteration 15 energy 0 : -142777
 E-Slope 0.00424415 iteration 16 energy 0 : -143255
 E-Slope 0.00368652 iteration 17 energy 0 : -143638
 E-Slope 0.00319596 iteration 18 energy 0 : -143934
 E-Slope 0.00275303 iteration 19 energy 0 : -144140
 E-Slope 0.00235126 iteration 20 energy 0 : -144293
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2459_08192016_Aug1_Ref_vimp2_1751_12022015/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2459_08192016_Aug1_Ref_vimp2_1751_12022015/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2459_08192016_Aug1_Ref_vimp2_1751_12022015/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2459_08192016_Aug1_Ref_vimp2_1751_12022015/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2459_08192016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_702_04302014/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2459_08192016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_702_04302014/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547783220
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [7.47828, 2.49675, 5.14667]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 2.4399865159672984, -20.406868439181974, 19.850586263949342]
level 0, iter 1949, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.11071460642422376, 0.02600382342443822, 0.025116493443642984, 0.9931944617489243, 1.008076453824792, 0.9709341158259537, 0.9407450240253682, 0.0010648709773995743, 0.03248911074916694, -0.08833793692658716, 3.419646659198198, -21.20940520549966, 20.253741222228356]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 473, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.11042565374066082, 0.02558924670916938, 0.03384990507465236, 0.9929781212973636, 1.0243415998299796, 0.975039958231856, 0.9615884114423808, 0.013152219032190394, 0.032781860933531935, -0.11156780311214695, 3.3286037924782095, -21.10115498773042, 20.153434881177056]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 80, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.10428626128354815, 0.02747194086263705, 0.03404546157535138, 0.9935847093825773, 1.0234256513159439, 0.974579156962763, 0.9575679258069988, 0.012977162605190749, 0.02841973235164109, -0.11500320414334445, 3.5830290047534747, -21.08404444547585, 19.981138381291426]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 39, size: fix[41, 45, 33]-mov[39, 42, 32], affine para: [0.10441121710783699, 0.02836641413420317, 0.03599444482780461, 0.9934777522585823, 1.0224720174238784, 0.9675208410836564, 0.954655153087747, 0.01614183281733348, 0.027051657697653223, -0.12327620114445392, 3.429142161594864, -21.032013625438196, 20.00657194758601]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 61, size: fix[82, 90, 47]-mov[77, 84, 37], affine para: [0.10114194409450952, 0.029109304116519956, 0.032267803141490976, 0.9939224036307146, 1.0229208482214587, 0.9704492713160972, 0.9570584383453522, 0.019342504516564517, 0.026500950584802497, -0.12596582878177964, 3.3582414732759633, -21.27264261509789, 20.068370910670648]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 1630, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.09921518858476018, -0.04176700466904144, -0.005560554324069031, 0.9941734978919302, 0.9620840771715546, 0.949913552545338, 1.0274804629142955, 0.033337880861417396, 0.025675578815027782, 0.13993731371121354, -1.0173573037827233, 13.288700368401555, -24.074803081013286]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 2434, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.09175755755902693, -0.03226372476305589, -0.008858495214573955, 0.9952191365512165, 0.9621799067350625, 0.9626837305985471, 1.0603139260918268, 0.03032981738159325, -0.005662989857464849, 0.1675246050803426, -0.8275695895512397, 13.179449678343659, -24.145564802087804]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 364, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.08931822773640422, -0.03318734454088117, -0.011593988990779508, 0.9953825564955588, 0.9669876142499934, 0.9582801277485008, 1.0553434388511038, 0.01914000828257164, -0.006214407515772652, 0.16984356912341056, -0.9263567126312013, 13.25750904158793, -24.109555248472237]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 597, size: fix[39, 42, 32]-mov[41, 45, 33], affine para: [-0.08607473483123816, -0.031417930150993714, -0.005855911659819458, 0.9957759597356183, 0.9643693919399068, 0.9528098532425434, 1.0388015230886505, 0.021471200862898162, 0.002652148885583383, 0.17868456819126105, -1.2991541485235172, 13.326838982155458, -23.658999720066497]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 175, size: fix[77, 84, 37]-mov[82, 90, 47], affine para: [-0.09083386398258551, -0.030448256734765783, -0.013673628481640197, 0.9953065581517851, 0.9742445133634378, 0.9513095702332068, 1.0394416675106486, 0.013800615795509296, 0.005550887859752057, 0.19329682314196053, -1.3152647605756398, 13.145076185540388, -23.873112376325416]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.419345 v2 -0.40727
final [0.10114194409450952, 0.029109304116519956, 0.032267803141490976, 0.9939224036307146, 1.0229208482214587, 0.9704492713160972, 0.9570584383453522, 0.019342504516564517, 0.026500950584802497, -0.12596582878177964, 3.3582414732759633, -21.27264261509789, 20.068370910670648]
outputput affine center: [7.47828, 2.49675, 5.14667]
output affine para: [0.10114194409450952, 0.029109304116519956, 0.032267803141490976, 0.9939224036307146, 1.0229208482214587, 0.9704492713160972, 0.9570584383453522, 0.019342504516564517, 0.026500950584802497, -0.12596582878177964, 3.3582414732759633, -21.27264261509789, 20.068370910670648]
initial measure value (MMI): rval = -0.200576
final measure value (MMI): rval = -0.420075
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -4276.31
 iteration 2 energy 0 : -4661.32
 iteration 3 energy 0 : -4980.13
 iteration 4 energy 0 : -5264.01
 iteration 5 energy 0 : -5459.13
 iteration 6 energy 0 : -5607.21
 iteration 7 energy 0 : -5726.87
 iteration 8 energy 0 : -5823.27
 iteration 9 energy 0 : -5909.22
 iteration 10 energy 0 : -5985.55
 iteration 11 energy 0 : -6054.46
 iteration 12 energy 0 : -6117.97
 E-Slope 0.0127207 iteration 13 energy 0 : -6184.43
 E-Slope 0.0102784 iteration 14 energy 0 : -6242.14
 E-Slope 0.00851648 iteration 15 energy 0 : -6294.24
 E-Slope 0.00735874 iteration 16 energy 0 : -6342.33
 E-Slope 0.00653492 iteration 17 energy 0 : -6388.79
 E-Slope 0.00591968 iteration 18 energy 0 : -6434.65
 E-Slope 0.0054089 iteration 19 energy 0 : -6468.11
 E-Slope 0.00494123 iteration 20 energy 0 : -6497.33
 E-Slope 0.00444129 iteration 21 energy 0 : -6504.31
 E-Slope 0.00387867 iteration 22 energy 0 : -6500.74
 E-Slope 0.00333799 iteration 23 energy 0 : -6520.55
 E-Slope 0.00276233 iteration 24 energy 0 : -6517.72
 E-Slope 0.00227685 iteration 25 energy 0 : -6539.86
 E-Slope 0.00180364 iteration 26 energy 0 : -6535.85
 E-Slope 0.00142873 iteration 27 energy 0 : -6554.61
 E-Slope 0.00110911 iteration 28 energy 0 : -6556.27
 E-Slope 0.000895604 iteration 29 energy 0 : -6569.49
 E-Slope 0.000771128 iteration 30 energy 0 : -6573.6
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -14351
 iteration 2 energy 0 : -14508.6
 iteration 3 energy 0 : -14694.7
 iteration 4 energy 0 : -14868.3
 iteration 5 energy 0 : -15022.9
 iteration 6 energy 0 : -15178.6
 iteration 7 energy 0 : -15327.9
 iteration 8 energy 0 : -15451.4
 iteration 9 energy 0 : -15564
 iteration 10 energy 0 : -15662.8
 iteration 11 energy 0 : -15743.8
 iteration 12 energy 0 : -15722.8
 E-Slope 0.00438344 iteration 13 energy 0 : -15716.8
 E-Slope 0.00369328 iteration 14 energy 0 : -15755.9
 E-Slope 0.00297678 iteration 15 energy 0 : -15738.9
 E-Slope 0.00233954 iteration 16 energy 0 : -15780.5
 E-Slope 0.00172119 iteration 17 energy 0 : -15763.1
 E-Slope 0.00121541 iteration 18 energy 0 : -15784.8
 E-Slope 0.000822 iteration 19 energy 0 : -15788
 E-Slope 0.000528172 iteration 20 energy 0 : -15788.3
 E-Slope 0.000358857 iteration 21 energy 0 : -15805
 E-Slope 0.000271469 iteration 22 energy 0 : -15792.9
 E-Slope 0.000308618 iteration 23 energy 0 : -15823.4
 E-Slope 0.000279941 iteration 24 energy 0 : -15809.4
 E-Slope 0.000268601 iteration 25 energy 0 : -15844.7
 E-Slope 0.00026612 iteration 26 energy 0 : -15827.3
 E-Slope 0.000264511 iteration 27 energy 0 : -15859.8
 E-Slope 0.000280589 iteration 28 energy 0 : -15846.5
 E-Slope 0.00028415 iteration 29 energy 0 : -15869.3
 E-Slope 0.000294 iteration 30 energy 0 : -15868.4
 E-Slope 0.000311777 iteration 31 energy 0 : -15887.3
 E-Slope 0.000303261 iteration 32 energy 0 : -15883.7
 E-Slope 0.000321135 iteration 33 energy 0 : -15903.6
 E-Slope 0.000296198 iteration 34 energy 0 : -15900.1
 E-Slope 0.000311457 iteration 35 energy 0 : -15916.9
 E-Slope 0.000286669 iteration 36 energy 0 : -15917.2
 E-Slope 0.000305414 iteration 37 energy 0 : -15931.4
 E-Slope 0.000309624 iteration 38 energy 0 : -15954.9
 E-Slope 0.000325568 iteration 39 energy 0 : -15948.6
 E-Slope 0.000333086 iteration 40 energy 0 : -15973
 E-Slope 0.00033357 iteration 41 energy 0 : -15962.9
 E-Slope 0.000337534 iteration 42 energy 0 : -15984.6
 E-Slope 0.000330374 iteration 43 energy 0 : -15975.6
 E-Slope 0.000329062 iteration 44 energy 0 : -16002.1
 E-Slope 0.000317894 iteration 45 energy 0 : -15992.7
 E-Slope 0.000327319 iteration 46 energy 0 : -16029.9
 E-Slope 0.000313364 iteration 47 energy 0 : -16012.8
 E-Slope 0.0002992 iteration 48 energy 0 : -16029.1
 E-Slope 0.000268355 iteration 49 energy 0 : -16018.4
 E-Slope 0.000293978 iteration 50 energy 0 : -16054.3
 E-Slope 0.000265241 iteration 51 energy 0 : -16034.7
 E-Slope 0.00028082 iteration 52 energy 0 : -16059.5
 E-Slope 0.000242494 iteration 53 energy 0 : -16042.4
 E-Slope 0.000244677 iteration 54 energy 0 : -16065.3
 E-Slope 0.000200428 iteration 55 energy 0 : -16051.5
 E-Slope 0.000199333 iteration 56 energy 0 : -16070.1
 E-Slope 0.000162207 iteration 57 energy 0 : -16062.9
 E-Slope 0.000200637 iteration 58 energy 0 : -16094.5
 E-Slope 0.000173435 iteration 59 energy 0 : -16070.7
 E-Slope 0.000187866 iteration 60 energy 0 : -16096.3
 E-Slope 0.000158891 iteration 61 energy 0 : -16083.7
 E-Slope 0.000211351 iteration 62 energy 0 : -16121.1
 E-Slope 0.000190787 iteration 63 energy 0 : -16095.2
 E-Slope 0.000227012 iteration 64 energy 0 : -16125.4
 E-Slope 0.000202604 iteration 65 energy 0 : -16107
 E-Slope 0.000219189 iteration 66 energy 0 : -16127.1
 E-Slope 0.000184961 iteration 67 energy 0 : -16112.8
 E-Slope 0.000209518 iteration 68 energy 0 : -16151.4
 E-Slope 0.000178151 iteration 69 energy 0 : -16126.7
 E-Slope 0.000207044 iteration 70 energy 0 : -16152
 E-Slope 0.000172228 iteration 71 energy 0 : -16136.4
 E-Slope 0.000203148 iteration 72 energy 0 : -16172.6
 E-Slope 0.000166133 iteration 73 energy 0 : -16143.5
 E-Slope 0.000207163 iteration 74 energy 0 : -16176.8
 E-Slope 0.000175856 iteration 75 energy 0 : -16157
 E-Slope 0.000218093 iteration 76 energy 0 : -16194.8
 E-Slope 0.000186913 iteration 77 energy 0 : -16167.1
 E-Slope 0.000204496 iteration 78 energy 0 : -16195.5
 E-Slope 0.000169843 iteration 79 energy 0 : -16180.3
 E-Slope 0.000211909 iteration 80 energy 0 : -16212
 E-Slope 0.000174962 iteration 81 energy 0 : -16185.7
 E-Slope 0.000190519 iteration 82 energy 0 : -16211.5
 E-Slope 0.000156127 iteration 83 energy 0 : -16198.4
 E-Slope 0.000194572 iteration 84 energy 0 : -16228.5
 E-Slope 0.000155196 iteration 85 energy 0 : -16206.9
 E-Slope 0.000197381 iteration 86 energy 0 : -16247.3
 E-Slope 0.000165224 iteration 87 energy 0 : -16219.3
 E-Slope 0.000203006 iteration 88 energy 0 : -16245.7
 E-Slope 0.000160113 iteration 89 energy 0 : -16220.3
 E-Slope 0.000194728 iteration 90 energy 0 : -16262.6
 tired convergence: reached max iterations 
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -110224
 iteration 2 energy 0 : -112099
 iteration 3 energy 0 : -113767
 iteration 4 energy 0 : -115182
 iteration 5 energy 0 : -116569
 iteration 6 energy 0 : -118020
 iteration 7 energy 0 : -119325
 iteration 8 energy 0 : -120449
 iteration 9 energy 0 : -121453
 iteration 10 energy 0 : -122419
 iteration 11 energy 0 : -123446
 iteration 12 energy 0 : -124472
 E-Slope 0.00573675 iteration 13 energy 0 : -125432
 E-Slope 0.00536729 iteration 14 energy 0 : -126297
 E-Slope 0.00503729 iteration 15 energy 0 : -127055
 E-Slope 0.00471359 iteration 16 energy 0 : -127757
 E-Slope 0.00439393 iteration 17 energy 0 : -128367
 E-Slope 0.00410238 iteration 18 energy 0 : -128942
 E-Slope 0.0038251 iteration 19 energy 0 : -129468
 E-Slope 0.00354675 iteration 20 energy 0 : -129972
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2459_08192016_Aug2_Ref_vimp2_702_04302014/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2459_08192016_Aug2_Ref_vimp2_702_04302014/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2459_08192016_Aug2_Ref_vimp2_702_04302014/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2459_08192016_Aug2_Ref_vimp2_702_04302014/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2460_08192016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2119_04142016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2460_08192016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2119_04142016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547783405
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [12.7774, 6.95889, 4.79281]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 3.4666832452960037, -0.5190490386700377, -1.7943333915621618]
level 0, iter 357, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.0013045849583644149, -0.06469879749543918, -0.07960467981375052, 0.9947238102169269, 1.136383101718155, 0.915899509824532, 0.9505060188716036, -0.04516326258725817, 0.06570759536523338, 0.012319230655269625, 3.067379893236062, -1.1111899628569346, -0.5010977868561376]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 50, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.0021707876524162755, -0.06438512906873364, -0.07783075905586889, 0.9948830161283074, 1.1387575858360595, 0.9181863177575181, 0.94455857219703, -0.0506949673540913, 0.062204854469635674, 0.013774577662828929, 2.995419881115136, -1.0818685640108205, -0.43557424586069854]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 56, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.00016075703471507463, -0.06492017355269532, -0.08247947022226018, 0.9944759837295816, 1.1389413629076977, 0.9151140329330975, 0.9494083450305107, -0.05599735866926874, 0.0644586850464747, 0.0183837618174873, 3.0128562204736142, -1.0997464010608393, -0.5193678712314358]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 329, size: fix[35, 44, 32]-mov[41, 42, 33], affine para: [-0.0006914306544499366, -0.06392338304002823, -0.07940850821688687, 0.9947902350984034, 1.1438375992431478, 0.9101400205712306, 0.9486169939232129, -0.04707283748248165, 0.06369585276397183, 0.01789316981266255, 3.0568468940479843, -1.1158632593596982, -0.38171765471776375]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 215, size: fix[70, 87, 43]-mov[81, 84, 47], affine para: [0.005307660524365354, -0.05953663702161865, -0.08445956854117281, 0.9946324943785785, 1.1439895445784227, 0.9195071780057277, 0.9494209682730017, -0.06061901709844839, 0.051984826397816035, 0.01926436571097858, 3.0512295988924727, -1.1435535215402324, -0.4195991090112091]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 439, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.0021276335665942926, 0.07016088340102364, 0.08030408286551909, 0.9942958201113601, 0.9023120254004099, 1.0629955064655376, 1.0466530654094104, 0.07794312537646811, -0.11239133853933495, 0.006308938137927766, -2.8045220993562725, 0.6161586304500798, 0.7842392815222273]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 238, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.005225134607488874, 0.07236606263230345, 0.08562204112759277, 0.993682402491146, 0.8991339997266269, 1.0638637605307555, 1.0404338060220735, 0.09733894047509226, -0.11673390349411743, 0.007112722923209377, -2.7866049965890194, 0.4847925888411814, 0.9075863019288644]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 59, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.0021682523436696455, 0.0743838627533193, 0.08717734438216908, 0.9934095078416263, 0.8988085210255529, 1.066604691046975, 1.039692407164544, 0.10457473382042226, -0.12299841030335273, 0.0078085956810438496, -2.781924925268114, 0.6698329536539224, 0.7709958841852503]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 49, size: fix[41, 42, 33]-mov[35, 44, 32], affine para: [0.0033132905230908666, 0.0723907917247198, 0.0905912745752869, 0.9932481141941336, 0.897615240215129, 1.0734778505814808, 1.0398044882902575, 0.11186097854319076, -0.12269135850933158, 0.00789132337024119, -2.793279964674266, 0.6031461913839407, 0.8383975539088528]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 138, size: fix[81, 84, 47]-mov[70, 87, 43], affine para: [-0.004194688413988457, 0.07360867658746532, 0.09083360476251204, 0.9931331348646059, 0.8968114830886317, 1.0682972337146623, 1.035355019503298, 0.11544081066684043, -0.12186380124738551, 0.005378808311866393, -2.831260260280946, 0.6576035023421691, 0.5863609031471329]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.596479 v2 -0.595098
final [0.005307660524365354, -0.05953663702161865, -0.08445956854117281, 0.9946324943785785, 1.1439895445784227, 0.9195071780057277, 0.9494209682730017, -0.06061901709844839, 0.051984826397816035, 0.01926436571097858, 3.0512295988924727, -1.1435535215402324, -0.4195991090112091]
outputput affine center: [12.7774, 6.95889, 4.79281]
output affine para: [0.005307660524365354, -0.05953663702161865, -0.08445956854117281, 0.9946324943785785, 1.1439895445784227, 0.9195071780057277, 0.9494209682730017, -0.06061901709844839, 0.051984826397816035, 0.01926436571097858, 3.0512295988924727, -1.1435535215402324, -0.4195991090112091]
initial measure value (MMI): rval = -0.263758
final measure value (MMI): rval = -0.58471
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -7053.76
 iteration 2 energy 0 : -7567.22
 iteration 3 energy 0 : -7904.21
 iteration 4 energy 0 : -8131.96
 iteration 5 energy 0 : -8289.58
 iteration 6 energy 0 : -8402.13
 iteration 7 energy 0 : -8496.99
 iteration 8 energy 0 : -8577.73
 iteration 9 energy 0 : -8638.33
 iteration 10 energy 0 : -8696.07
 iteration 11 energy 0 : -8756.18
 iteration 12 energy 0 : -8823.34
 E-Slope 0.0069334 iteration 13 energy 0 : -8841.95
 E-Slope 0.00532883 iteration 14 energy 0 : -8835.34
 E-Slope 0.0042035 iteration 15 energy 0 : -8843
 E-Slope 0.00331077 iteration 16 energy 0 : -8831.74
 E-Slope 0.0025613 iteration 17 energy 0 : -8830.71
 E-Slope 0.00189272 iteration 18 energy 0 : -8828.37
 E-Slope 0.00131119 iteration 19 energy 0 : -8827.24
 E-Slope 0.000833906 iteration 20 energy 0 : -8830.5
 E-Slope 0.000432983 iteration 21 energy 0 : -8828.38
 E-Slope 0.000145182 iteration 22 energy 0 : -8834.62
 E-Slope -2.75448e-05 iteration 23 energy 0 : -8831.82
 Converged due to oscillation in optimization  metric 0 bad 7  
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -14728.9
 iteration 2 energy 0 : -14897
 iteration 3 energy 0 : -15035.1
 iteration 4 energy 0 : -15170.7
 iteration 5 energy 0 : -15193.4
 iteration 6 energy 0 : -15230.4
 iteration 7 energy 0 : -15247.3
 iteration 8 energy 0 : -15273.5
 iteration 9 energy 0 : -15288.9
 iteration 10 energy 0 : -15306.6
 iteration 11 energy 0 : -15323.1
 iteration 12 energy 0 : -15333.7
 E-Slope 0.00122767 iteration 13 energy 0 : -15352.4
 E-Slope 0.000883751 iteration 14 energy 0 : -15357.5
 E-Slope 0.000684187 iteration 15 energy 0 : -15378.5
 E-Slope 0.000615656 iteration 16 energy 0 : -15379.3
 E-Slope 0.000562325 iteration 17 energy 0 : -15400.9
 E-Slope 0.000511453 iteration 18 energy 0 : -15395.8
 E-Slope 0.000480019 iteration 19 energy 0 : -15420.8
 E-Slope 0.000442006 iteration 20 energy 0 : -15415.4
 E-Slope 0.000441112 iteration 21 energy 0 : -15451.9
 E-Slope 0.000417463 iteration 22 energy 0 : -15441.1
 E-Slope 0.00039912 iteration 23 energy 0 : -15450.1
 E-Slope 0.000356629 iteration 24 energy 0 : -15442.1
 E-Slope 0.000339538 iteration 25 energy 0 : -15461.4
 E-Slope 0.000293821 iteration 26 energy 0 : -15453.1
 E-Slope 0.000284217 iteration 27 energy 0 : -15475.4
 E-Slope 0.000244826 iteration 28 energy 0 : -15467.4
 E-Slope 0.000246495 iteration 29 energy 0 : -15489.6
 E-Slope 0.000214987 iteration 30 energy 0 : -15482.8
 E-Slope 0.000229433 iteration 31 energy 0 : -15504.3
 E-Slope 0.000209369 iteration 32 energy 0 : -15496.7
 E-Slope 0.000233814 iteration 33 energy 0 : -15505
 E-Slope 0.000222847 iteration 34 energy 0 : -15500.9
 E-Slope 0.000232309 iteration 35 energy 0 : -15519
 E-Slope 0.000204571 iteration 36 energy 0 : -15511.4
 E-Slope 0.000196852 iteration 37 energy 0 : -15517.9
 E-Slope 0.000154525 iteration 38 energy 0 : -15510.1
 E-Slope 0.000141017 iteration 39 energy 0 : -15517.6
 E-Slope 9.6269e-05 iteration 40 energy 0 : -15509.4
 Converged due to oscillation in optimization  metric 0 bad 12  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -110736
 iteration 2 energy 0 : -112437
 iteration 3 energy 0 : -114061
 iteration 4 energy 0 : -115382
 iteration 5 energy 0 : -116551
 iteration 6 energy 0 : -117610
 iteration 7 energy 0 : -118571
 iteration 8 energy 0 : -119428
 iteration 9 energy 0 : -120174
 iteration 10 energy 0 : -120846
 iteration 11 energy 0 : -121429
 iteration 12 energy 0 : -121967
 E-Slope 0.0042903 iteration 13 energy 0 : -122435
 E-Slope 0.00377642 iteration 14 energy 0 : -122839
 E-Slope 0.0033395 iteration 15 energy 0 : -123188
 E-Slope 0.00294526 iteration 16 energy 0 : -123478
 E-Slope 0.00258841 iteration 17 energy 0 : -123740
 E-Slope 0.00226963 iteration 18 energy 0 : -123981
 E-Slope 0.00199018 iteration 19 energy 0 : -124206
 E-Slope 0.00174872 iteration 20 energy 0 : -124416
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2460_08192016_Aug1_Ref_vimp2_2119_04142016/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2460_08192016_Aug1_Ref_vimp2_2119_04142016/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2460_08192016_Aug1_Ref_vimp2_2119_04142016/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2460_08192016_Aug1_Ref_vimp2_2119_04142016/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2460_08192016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2551_09232016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2460_08192016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2551_09232016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547783499
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [12.7774, 6.95889, 4.79281]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 3.7822155879837425, 3.1164290881116887, -22.71348633834682]
level 0, iter 335, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.04999602870329537, 0.00935990374517178, 0.028819959099600397, 0.9982896369657845, 1.1485506255021913, 1.029055802476727, 0.9059121108960134, 0.02842023007459248, -0.015998657943130233, -0.057679501274608906, 2.8996326770669123, 3.2412982426444525, -23.007654799791027]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 94, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.054151105642581875, 0.010261196041401294, 0.028392240808707073, 0.9980762727744539, 1.1434202728781884, 1.0272897499732114, 0.9046463822785985, 0.029815820653715266, -0.023279863085989404, -0.06254703883233667, 2.8767723836799055, 3.19840764980846, -22.976161376960945]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 94, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.04933693490654737, 0.010542024518191338, 0.03221495112727953, 0.9982068570676882, 1.1456110411601301, 1.0221322233221668, 0.8984015899146469, 0.03453226856396835, -0.02584758233947277, -0.05658497185406035, 2.9651509081760774, 3.263176581268955, -23.0266194604722]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 167, size: fix[35, 44, 32]-mov[42, 46, 34], affine para: [-0.05310015743577347, 0.010660168384713948, 0.0300147826814147, 0.99808108233294, 1.1465987025142388, 1.012102421847319, 0.8858354139286494, 0.02192102689392364, -0.018695844561509235, -0.05435663738184483, 2.9943319040039476, 3.2802425220416, -23.050938546729117]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 483, size: fix[70, 87, 43]-mov[83, 92, 48], affine para: [-0.05727921615454761, 0.005121299928744085, 0.031121978865297942, 0.9978598529429211, 1.1394534887444416, 1.0215028306734253, 0.8983001115196723, 0.029412196148176594, -0.019426243628131595, -0.07473332804506105, 2.874151253624179, 3.267819747325275, -23.01364896338398]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 523, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.0436090418504388, 0.0001427712009357161, -0.02352864885488509, 0.9987715623546429, 0.8743854379587391, 0.9733522751562875, 1.048096065458348, -0.017757926274910813, -0.0013229763919572173, 0.05046786664231619, -2.748326090663952, -3.82911073985667, 24.141979699390053]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 798, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.04688699423726656, -0.0026188577763389597, -0.02931014151083002, 0.9984666579109974, 0.8720538750990735, 0.97804158798832, 1.0536702420379374, -0.028049395190910032, 0.009303863251602823, 0.07181130197828016, -2.6080892932148676, -3.442783285518179, 24.2225002473705]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 532, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.04867214243430373, -0.0024507335941395575, -0.03247225142868172, 0.998283812020839, 0.8784052299794637, 0.9830884003688813, 1.055041039356268, -0.03700875864800284, 0.007790586390789993, 0.08965170794142784, -2.572225996090167, -3.066636694577377, 24.2193831401176]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 250, size: fix[42, 46, 34]-mov[35, 44, 32], affine para: [0.05970675537453596, -0.0053626190231067196, -0.030666642730468652, 0.9977303757546425, 0.8731206990600677, 0.9759257730874948, 1.062320012303064, -0.03739959508191619, 0.01085567800783501, 0.08696565614924859, -2.669109797305738, -3.7731436890427865, 24.37519875439371]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 572, size: fix[83, 92, 48]-mov[70, 87, 43], affine para: [0.05986555503210775, -0.005641564256805349, -0.025325270753672954, 0.9978691891899896, 0.8752822551405461, 0.9802791950467201, 1.0644701988249075, -0.04223255724753281, 0.018130096838526403, 0.0895870779712334, -2.52853886758675, -3.8122108303813067, 24.327544289526827]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.463593 v2 -0.460845
final [-0.05727921615454761, 0.005121299928744085, 0.031121978865297942, 0.9978598529429211, 1.1394534887444416, 1.0215028306734253, 0.8983001115196723, 0.029412196148176594, -0.019426243628131595, -0.07473332804506105, 2.874151253624179, 3.267819747325275, -23.01364896338398]
outputput affine center: [12.7774, 6.95889, 4.79281]
output affine para: [-0.05727921615454761, 0.005121299928744085, 0.031121978865297942, 0.9978598529429211, 1.1394534887444416, 1.0215028306734253, 0.8983001115196723, 0.029412196148176594, -0.019426243628131595, -0.07473332804506105, 2.874151253624179, 3.267819747325275, -23.01364896338398]
initial measure value (MMI): rval = -0.27326
final measure value (MMI): rval = -0.474827
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -6691.64
 iteration 2 energy 0 : -7117.99
 iteration 3 energy 0 : -7395.95
 iteration 4 energy 0 : -7592.76
 iteration 5 energy 0 : -7730.97
 iteration 6 energy 0 : -7834.41
 iteration 7 energy 0 : -7914.04
 iteration 8 energy 0 : -7979.03
 iteration 9 energy 0 : -8035.09
 iteration 10 energy 0 : -8083.01
 iteration 11 energy 0 : -8124.79
 iteration 12 energy 0 : -8163.19
 E-Slope 0.00629753 iteration 13 energy 0 : -8197.19
 E-Slope 0.00492375 iteration 14 energy 0 : -8231.28
 E-Slope 0.00402015 iteration 15 energy 0 : -8264.89
 E-Slope 0.00342935 iteration 16 energy 0 : -8300.02
 E-Slope 0.00304806 iteration 17 energy 0 : -8340.17
 E-Slope 0.00284196 iteration 18 energy 0 : -8393.16
 E-Slope 0.00279608 iteration 19 energy 0 : -8460.34
 E-Slope 0.00283455 iteration 20 energy 0 : -8511.17
 E-Slope 0.00292329 iteration 21 energy 0 : -8557.88
 E-Slope 0.00300611 iteration 22 energy 0 : -8591.87
 E-Slope 0.00301151 iteration 23 energy 0 : -8604.2
 E-Slope 0.00286596 iteration 24 energy 0 : -8588.23
 E-Slope 0.00257917 iteration 25 energy 0 : -8575.78
 E-Slope 0.00218301 iteration 26 energy 0 : -8568.57
 E-Slope 0.00172733 iteration 27 energy 0 : -8572.03
 E-Slope 0.00121982 iteration 28 energy 0 : -8564.44
 E-Slope 0.000743128 iteration 29 energy 0 : -8572.46
 E-Slope 0.000322394 iteration 30 energy 0 : -8565.39
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -14038.6
 iteration 2 energy 0 : -14230.4
 iteration 3 energy 0 : -14374.8
 iteration 4 energy 0 : -14494.9
 iteration 5 energy 0 : -14598.2
 iteration 6 energy 0 : -14632.7
 iteration 7 energy 0 : -14658.2
 iteration 8 energy 0 : -14681.5
 iteration 9 energy 0 : -14702.7
 iteration 10 energy 0 : -14716.6
 iteration 11 energy 0 : -14737.1
 iteration 12 energy 0 : -14744.2
 E-Slope 0.00157711 iteration 13 energy 0 : -14764.3
 E-Slope 0.00113978 iteration 14 energy 0 : -14768
 E-Slope 0.000839509 iteration 15 energy 0 : -14782.5
 E-Slope 0.000646465 iteration 16 energy 0 : -14785.6
 E-Slope 0.000563331 iteration 17 energy 0 : -14796.1
 E-Slope 0.000493176 iteration 18 energy 0 : -14800
 E-Slope 0.00043916 iteration 19 energy 0 : -14811.7
 E-Slope 0.000389636 iteration 20 energy 0 : -14814.4
 E-Slope 0.000357628 iteration 21 energy 0 : -14825.9
 E-Slope 0.000321552 iteration 22 energy 0 : -14827.6
 E-Slope 0.00030607 iteration 23 energy 0 : -14838.5
 E-Slope 0.000279628 iteration 24 energy 0 : -14839.4
 E-Slope 0.000275597 iteration 25 energy 0 : -14849.9
 E-Slope 0.000257507 iteration 26 energy 0 : -14850.2
 E-Slope 0.000255696 iteration 27 energy 0 : -14860.7
 E-Slope 0.000239819 iteration 28 energy 0 : -14860.5
 E-Slope 0.000235021 iteration 29 energy 0 : -14870.3
 E-Slope 0.00021825 iteration 30 energy 0 : -14869.8
 E-Slope 0.000215076 iteration 31 energy 0 : -14879.1
 E-Slope 0.000199281 iteration 32 energy 0 : -14878.3
 E-Slope 0.000197425 iteration 33 energy 0 : -14887.1
 E-Slope 0.000182472 iteration 34 energy 0 : -14886
 E-Slope 0.000181153 iteration 35 energy 0 : -14894.3
 E-Slope 0.000166155 iteration 36 energy 0 : -14892.8
 E-Slope 0.00016477 iteration 37 energy 0 : -14900.6
 E-Slope 0.000149786 iteration 38 energy 0 : -14898.9
 E-Slope 0.000148945 iteration 39 energy 0 : -14906.3
 E-Slope 0.000134952 iteration 40 energy 0 : -14904.6
 E-Slope 0.000134654 iteration 41 energy 0 : -14911.7
 E-Slope 0.000121832 iteration 42 energy 0 : -14910
 E-Slope 0.000122704 iteration 43 energy 0 : -14916.8
 E-Slope 0.000106066 iteration 44 energy 0 : -14911.1
 E-Slope 0.000110343 iteration 45 energy 0 : -14923
 E-Slope 9.32291e-05 iteration 46 energy 0 : -14914.1
 Converged due to oscillation in optimization  metric 0 bad 10  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -101156
 iteration 2 energy 0 : -103874
 iteration 3 energy 0 : -106086
 iteration 4 energy 0 : -107766
 iteration 5 energy 0 : -109062
 iteration 6 energy 0 : -110161
 iteration 7 energy 0 : -111066
 iteration 8 energy 0 : -111907
 iteration 9 energy 0 : -112697
 iteration 10 energy 0 : -113477
 iteration 11 energy 0 : -114244
 iteration 12 energy 0 : -114934
 E-Slope 0.00511135 iteration 13 energy 0 : -115588
 E-Slope 0.00448728 iteration 14 energy 0 : -116204
 E-Slope 0.00405268 iteration 15 energy 0 : -116738
 E-Slope 0.00372516 iteration 16 energy 0 : -117211
 E-Slope 0.00345452 iteration 17 energy 0 : -117682
 E-Slope 0.00321493 iteration 18 energy 0 : -118108
 E-Slope 0.00298259 iteration 19 energy 0 : -118511
 E-Slope 0.00276048 iteration 20 energy 0 : -118909
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2460_08192016_Aug2_Ref_vimp2_2551_09232016_Test_NewCases/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2460_08192016_Aug2_Ref_vimp2_2551_09232016_Test_NewCases/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2460_08192016_Aug2_Ref_vimp2_2551_09232016_Test_NewCases/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2460_08192016_Aug2_Ref_vimp2_2551_09232016_Test_NewCases/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2462_08192016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1756_12032015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2462_08192016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1756_12032015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547783610
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [14.3279, 0.13181, -4.08394]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -4.084371414066096, 2.139541089661633, 19.34790048383909]
level 0, iter 885, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.026379115038369753, -0.036537865121601745, -0.07151778162159711, 0.9964207613323168, 0.8118066102635672, 0.978915728415296, 0.8679914186423017, -0.014245736597798046, 0.03666343468333887, -0.06826880362875294, -3.7045516280846607, -1.6240554856270322, 18.667843790225728]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 275, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.014817196144293466, -0.03927630358528336, -0.07775047221872156, 0.9960886942159639, 0.8193545998155454, 0.9848111547913425, 0.8632209906204668, -0.02091123992546536, 0.044561422344179535, -0.07372849918021998, -3.6500654443498086, -1.5832483465811238, 18.573176685116618]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 257, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.02118906243890725, -0.04211366129155634, -0.07189300286050007, 0.9962975756797164, 0.8168880294944121, 0.9900604455118195, 0.8650254932759005, -0.01835200792477991, 0.05087822211014635, -0.0716242242262134, -3.6148288563868256, -1.5452591141709897, 18.762032685173573]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 113, size: fix[43, 41, 32]-mov[39, 38, 32], affine para: [0.021985717518252935, -0.04321056184197921, -0.06780493858543032, 0.9965199274846109, 0.8247211127925294, 0.9875942505787491, 0.8672779207791526, -0.015537819708541928, 0.058622641155009765, -0.07366430236661174, -3.478272346208067, -1.444337215638023, 18.836569927848796]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 61, size: fix[85, 82, 39]-mov[77, 75, 39], affine para: [0.022080423135588906, -0.04317781255311902, -0.07080499444369383, 0.99631058620247, 0.8213470049006377, 0.9867771572420125, 0.8653507737531473, -0.02006144617346109, 0.055483237479974794, -0.07460595010538476, -3.764282917757101, -1.7493313760033005, 18.949984984288893]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 2105, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.05058460889745483, 0.03349818989771326, 0.053607621924671986, 0.9967172575449115, 1.1987022192902892, 1.0182147955462735, 1.1404718662528175, -0.0186544403611213, -0.016560074831513207, 0.019897331197695017, 3.1464402924013846, -0.5962644490115899, -21.90046660471401]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 126, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.04462124919227119, 0.03157506365443081, 0.05651323293508619, 0.9969043153577802, 1.2020207425169678, 1.011738215135073, 1.1429545109364851, -0.021181929885964595, -0.014871402201984598, 0.030211692072605174, 3.2796093871250234, -0.22769412207727865, -21.661738446917642]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 434, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.034266642580956665, 0.03542530700662689, 0.05782281918808852, 0.9971095057268569, 1.205369999526637, 1.0032846298773792, 1.1514781981069284, -0.022719655650326652, -0.022487342391036398, 0.05048661867822632, 3.094189368929488, -0.3229923723665836, -21.85842073781622]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 428, size: fix[39, 38, 32]-mov[43, 41, 32], affine para: [-0.03418198458356756, 0.03819825924058635, 0.05297946134518403, 0.9972791292293707, 1.2049087770537352, 0.9953064313871605, 1.1498572466575772, -0.029392576708539814, -0.032412107213951845, 0.05435526321894503, 3.1885364756083927, -0.3961432379271309, -22.02770495719131]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 299, size: fix[77, 75, 39]-mov[85, 82, 39], affine para: [-0.031197648203699264, 0.04004643770787466, 0.05460296575354712, 0.9972168799736517, 1.2028578115926214, 0.9873442746725101, 1.1486593816114028, -0.026744166613243345, -0.027727991931200673, 0.05165858203567269, 3.089413990287403, -0.33349261972883276, -21.967609565749054]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.487681 v2 -0.480982
final [0.022080423135588906, -0.04317781255311902, -0.07080499444369383, 0.99631058620247, 0.8213470049006377, 0.9867771572420125, 0.8653507737531473, -0.02006144617346109, 0.055483237479974794, -0.07460595010538476, -3.764282917757101, -1.7493313760033005, 18.949984984288893]
outputput affine center: [14.3279, 0.13181, -4.08394]
output affine para: [0.022080423135588906, -0.04317781255311902, -0.07080499444369383, 0.99631058620247, 0.8213470049006377, 0.9867771572420125, 0.8653507737531473, -0.02006144617346109, 0.055483237479974794, -0.07460595010538476, -3.764282917757101, -1.7493313760033005, 18.949984984288893]
initial measure value (MMI): rval = -0.183509
final measure value (MMI): rval = -0.500943
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -5429.51
 iteration 2 energy 0 : -5802.9
 iteration 3 energy 0 : -6075.7
 iteration 4 energy 0 : -6276.94
 iteration 5 energy 0 : -6430.82
 iteration 6 energy 0 : -6570.83
 iteration 7 energy 0 : -6714.16
 iteration 8 energy 0 : -6866.08
 iteration 9 energy 0 : -7015.97
 iteration 10 energy 0 : -7159.17
 iteration 11 energy 0 : -7277.43
 iteration 12 energy 0 : -7352.35
 E-Slope 0.0122897 iteration 13 energy 0 : -7408.88
 E-Slope 0.0107903 iteration 14 energy 0 : -7452.99
 E-Slope 0.00951587 iteration 15 energy 0 : -7488.68
 E-Slope 0.0083005 iteration 16 energy 0 : -7519.23
 E-Slope 0.00706687 iteration 17 energy 0 : -7547.03
 E-Slope 0.00578626 iteration 18 energy 0 : -7551.53
 E-Slope 0.0045393 iteration 19 energy 0 : -7553.56
 E-Slope 0.003407 iteration 20 energy 0 : -7549.99
 E-Slope 0.00250231 iteration 21 energy 0 : -7566.96
 E-Slope 0.00179381 iteration 22 energy 0 : -7559.68
 E-Slope 0.00136246 iteration 23 energy 0 : -7590.65
 E-Slope 0.00101271 iteration 24 energy 0 : -7582.04
 E-Slope 0.000823192 iteration 25 energy 0 : -7611.81
 E-Slope 0.000666678 iteration 26 energy 0 : -7602.28
 E-Slope 0.000621371 iteration 27 energy 0 : -7626.31
 E-Slope 0.000585862 iteration 28 energy 0 : -7616.86
 E-Slope 0.000647694 iteration 29 energy 0 : -7641.09
 E-Slope 0.000651412 iteration 30 energy 0 : -7631.81
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -15188.4
 iteration 2 energy 0 : -15352.3
 iteration 3 energy 0 : -15479.2
 iteration 4 energy 0 : -15600.3
 iteration 5 energy 0 : -15783.1
 iteration 6 energy 0 : -15950.5
 iteration 7 energy 0 : -16089.6
 iteration 8 energy 0 : -16211.4
 iteration 9 energy 0 : -16309.1
 iteration 10 energy 0 : -16387.9
 iteration 11 energy 0 : -16447.6
 iteration 12 energy 0 : -16509.1
 E-Slope 0.00411415 iteration 13 energy 0 : -16564.4
 E-Slope 0.00364266 iteration 14 energy 0 : -16574.6
 E-Slope 0.00306001 iteration 15 energy 0 : -16552.3
 E-Slope 0.00242233 iteration 16 energy 0 : -16551.7
 E-Slope 0.00181556 iteration 17 energy 0 : -16526.1
 E-Slope 0.00131337 iteration 18 energy 0 : -16545
 E-Slope 0.000869259 iteration 19 energy 0 : -16528.6
 E-Slope 0.000536844 iteration 20 energy 0 : -16548.1
 E-Slope 0.00026489 iteration 21 energy 0 : -16531.2
 E-Slope 0.000104204 iteration 22 energy 0 : -16559.2
 E-Slope -1.76504e-05 iteration 23 energy 0 : -16539.9
 Converged due to oscillation in optimization  metric 0 bad 6  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -97978.2
 iteration 2 energy 0 : -99475.3
 iteration 3 energy 0 : -101145
 iteration 4 energy 0 : -102595
 iteration 5 energy 0 : -103845
 iteration 6 energy 0 : -105099
 iteration 7 energy 0 : -106081
 iteration 8 energy 0 : -106901
 iteration 9 energy 0 : -107609
 iteration 10 energy 0 : -108244
 iteration 11 energy 0 : -108798
 iteration 12 energy 0 : -109320
 E-Slope 0.00493588 iteration 13 energy 0 : -109774
 E-Slope 0.00428415 iteration 14 energy 0 : -110208
 E-Slope 0.00373644 iteration 15 energy 0 : -110618
 E-Slope 0.00327817 iteration 16 energy 0 : -110998
 E-Slope 0.0029012 iteration 17 energy 0 : -111396
 E-Slope 0.00262857 iteration 18 energy 0 : -111788
 E-Slope 0.00242809 iteration 19 energy 0 : -112188
 E-Slope 0.00227903 iteration 20 energy 0 : -112572
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2462_08192016_Test_NewCases_Aug1_Ref_vimp2_1756_12032015/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2462_08192016_Test_NewCases_Aug1_Ref_vimp2_1756_12032015/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2462_08192016_Test_NewCases_Aug1_Ref_vimp2_1756_12032015/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2462_08192016_Test_NewCases_Aug1_Ref_vimp2_1756_12032015/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2462_08192016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1622_05292015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2462_08192016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1622_05292015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547783717
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [14.3279, 0.13181, -4.08394]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -6.879296987165804, -25.778919359828883, 30.462938952619517]
level 0, iter 519, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.018628746665411137, 0.01651868314857592, -0.013705436510880672, 0.9995960503697277, 0.8931266391210143, 0.9815012937620337, 0.9381532970354485, 0.018779794982287195, 0.0006038086464598692, -0.016185100558815276, -6.310858703124788, -25.79890383378405, 31.536126208281832]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 348, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.019685703963590543, 0.01642401035420615, -0.014331084627604634, 0.9995685794165098, 0.8842966631231901, 1.0133712184057764, 0.9384568764878088, 0.027369619055260235, -0.0006295592898153734, -0.024098345346868597, -6.3261720418235114, -25.92062650360351, 31.501312119433678]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 61, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.01563931213033873, 0.016202016316396794, -0.013545948752532953, 0.9996546472936374, 0.8868443853725805, 1.0199200156955504, 0.9348660389653192, 0.029519184219229312, 0.0007733709197159518, -0.027869410846621777, -6.299935813847021, -25.99852692333799, 31.514403109424844]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 43, size: fix[43, 41, 32]-mov[37, 38, 32], affine para: [0.016779706794123564, 0.015496830741656427, -0.014183001642451674, 0.9996385007297779, 0.8846055362076658, 1.025516603050702, 0.9329324239245815, 0.030018310174183188, 0.0018137283167460284, -0.02999626445778462, -6.379783031534053, -25.996839406979056, 31.483446331873893]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 531, size: fix[85, 82, 39]-mov[74, 75, 35], affine para: [0.019406055063675806, 0.017909556233517757, -0.012552836691485597, 0.9995724481564009, 0.8794923336194962, 1.041617874779621, 0.9327926629086567, 0.03168156622203929, -0.004543731803003349, -0.038039099955433274, -6.482491693453443, -26.160436185079835, 31.49039395267636]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 1253, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.020716343936785276, -0.018543551343488972, 0.004899903612742277, 0.9996014009304158, 1.131063885216338, 0.9364355683580888, 1.0743636774442957, -0.05171970977169344, -0.0036902039712169007, 0.025016967634107868, 6.742736804377718, 22.376056003170437, -34.71374483978791]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 1016, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.021779742222707312, -0.017214896460487062, 0.0034484296003061323, 0.9996086226628194, 1.1358214778730813, 0.9333996572389965, 1.0760300682972936, -0.05236465014759841, -0.007656469639934407, 0.04295449095552568, 6.76826586175581, 21.752834202443296, -34.79418238052236]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 363, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.019204299595228548, -0.01746195843919344, 0.0027925242499743136, 0.9996591802673738, 1.1351973264107746, 0.9284471138145515, 1.0762402084375502, -0.049835067591001134, -0.0096094318342209, 0.036589200113139535, 7.039691371373991, 21.9279643916871, -34.74732585976718]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 319, size: fix[37, 38, 32]-mov[43, 41, 32], affine para: [-0.015439989346769016, -0.01743908287599597, 0.009491911830207742, 0.9996836443231545, 1.1369377754644878, 0.9277457688261646, 1.08125003354869, -0.04018985029808034, 0.0008161627983364373, 0.032640140854675495, 6.724089615115051, 22.348700310412983, -34.4757885510536]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 399, size: fix[74, 75, 35]-mov[85, 82, 39], affine para: [-0.017840008181709086, -0.02300589598880599, 0.012912684297663367, 0.9994927340616627, 1.1290605721712783, 0.9144254791970932, 1.0792951749610313, -0.04625386858924003, 0.007980823942010678, 0.026312557076837776, 6.534739704408743, 22.201274008185074, -34.399482902038514]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.500359 v2 -0.514291
 last params [0.019406055063675806, 0.017909556233517757, -0.012552836691485597, 0.9995724481564009, 0.8794923336194962, 1.041617874779621, 0.9327926629086567, 0.03168156622203929, -0.004543731803003349, -0.038039099955433274, -6.482491693453443, -26.160436185079835, 31.49039395267636]
 my params [-0.017840008181709086, -0.02300589598880599, 0.012912684297663367, 0.9994927340616627, 1.1290605721712783, 0.9144254791970932, 1.0792951749610313, -0.04625386858924003, 0.007980823942010678, 0.026312557076837776, 6.534739704408743, 22.201274008185074, -34.399482902038514]
A=0.883591 0.0738233 0.029982 
-0.0261978 1.09167 -0.0639871 
-0.0430366 0.0324914 0.92496 

rotation R0.998378 0.031153 0.0476482 
-0.0296011 0.999019 -0.0329353 
-0.0486275 0.0314714 0.998321 

upper R0.885026 0.039809 -0.013151 
0 1.09392 -0.0338804 
0 0 0.926943 

s=0.250134 u=0.0161103 v=0.0240818 w-0.0151967 r=0.999465
m_Rotation from vnl0.0161103 0.0240818 -0.0151967 0.999465
 new params [0.016110302689907617, 0.024081803762285785, -0.01519666989600908, 0.9994646497494876, 0.8850261800145901, 1.0939185954472406, 0.9269431117189705, 0.04498056399134664, -0.014859498543238307, -0.030971636481509378, -6.381643228249941, -26.26632681615406, 31.37803064833025]
outputput affine center: [14.3279, 0.13181, -4.08394]
output affine para: [0.016110302689907617, 0.024081803762285785, -0.01519666989600908, 0.9994646497494876, 0.8850261800145901, 1.0939185954472406, 0.9269431117189705, 0.04498056399134664, -0.014859498543238307, -0.030971636481509378, -6.381643228249941, -26.26632681615406, 31.37803064833025]
initial measure value (MMI): rval = -0.326413
final measure value (MMI): rval = -0.524564
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -5968.01
 iteration 2 energy 0 : -6243.42
 iteration 3 energy 0 : -6507.64
 iteration 4 energy 0 : -6739.27
 iteration 5 energy 0 : -6915
 iteration 6 energy 0 : -7066.64
 iteration 7 energy 0 : -7184.98
 iteration 8 energy 0 : -7296.62
 iteration 9 energy 0 : -7404.29
 iteration 10 energy 0 : -7505.35
 iteration 11 energy 0 : -7589.17
 iteration 12 energy 0 : -7653.6
 E-Slope 0.0101775 iteration 13 energy 0 : -7705.56
 E-Slope 0.0085802 iteration 14 energy 0 : -7746.14
 E-Slope 0.00723378 iteration 15 energy 0 : -7766.94
 E-Slope 0.00603911 iteration 16 energy 0 : -7758.77
 E-Slope 0.00502307 iteration 17 energy 0 : -7794.32
 E-Slope 0.00407986 iteration 18 energy 0 : -7792.98
 E-Slope 0.00317602 iteration 19 energy 0 : -7790.63
 E-Slope 0.00234592 iteration 20 energy 0 : -7786.66
 E-Slope 0.00168717 iteration 21 energy 0 : -7804.82
 E-Slope 0.00114167 iteration 22 energy 0 : -7791.93
 E-Slope 0.00083106 iteration 23 energy 0 : -7829.72
 E-Slope 0.000591636 iteration 24 energy 0 : -7816.89
 E-Slope 0.000452191 iteration 25 energy 0 : -7819.89
 E-Slope 0.000363454 iteration 26 energy 0 : -7810.84
 E-Slope 0.000390232 iteration 27 energy 0 : -7844.27
 E-Slope 0.000323437 iteration 28 energy 0 : -7828.67
 E-Slope 0.00033021 iteration 29 energy 0 : -7830.2
 E-Slope 0.000288859 iteration 30 energy 0 : -7820.91
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -15546
 iteration 2 energy 0 : -15742.8
 iteration 3 energy 0 : -15901.1
 iteration 4 energy 0 : -16024.1
 iteration 5 energy 0 : -16135
 iteration 6 energy 0 : -16242.9
 iteration 7 energy 0 : -16348.9
 iteration 8 energy 0 : -16444
 iteration 9 energy 0 : -16531.2
 iteration 10 energy 0 : -16588.3
 iteration 11 energy 0 : -16634.7
 iteration 12 energy 0 : -16663.6
 E-Slope 0.00301731 iteration 13 energy 0 : -16657.5
 E-Slope 0.00249225 iteration 14 energy 0 : -16631.5
 E-Slope 0.0019992 iteration 15 energy 0 : -16635.5
 E-Slope 0.00150798 iteration 16 energy 0 : -16624.9
 E-Slope 0.00106928 iteration 17 energy 0 : -16642
 E-Slope 0.000666335 iteration 18 energy 0 : -16625
 E-Slope 0.00037846 iteration 19 energy 0 : -16652.4
 E-Slope 0.000149369 iteration 20 energy 0 : -16629.2
 E-Slope 3.66494e-05 iteration 21 energy 0 : -16647.8
 Converged due to oscillation in optimization  metric 0 bad 5  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -97637.1
 iteration 2 energy 0 : -99598.6
 iteration 3 energy 0 : -101054
 iteration 4 energy 0 : -102103
 iteration 5 energy 0 : -102928
 iteration 6 energy 0 : -103496
 iteration 7 energy 0 : -103921
 iteration 8 energy 0 : -104267
 iteration 9 energy 0 : -104567
 iteration 10 energy 0 : -104857
 iteration 11 energy 0 : -105156
 iteration 12 energy 0 : -105468
 E-Slope 0.00272629 iteration 13 energy 0 : -105809
 E-Slope 0.00226459 iteration 14 energy 0 : -106180
 E-Slope 0.00200937 iteration 15 energy 0 : -106613
 E-Slope 0.00191005 iteration 16 energy 0 : -107116
 E-Slope 0.00194127 iteration 17 energy 0 : -107685
 E-Slope 0.00203766 iteration 18 energy 0 : -108184
 E-Slope 0.00215117 iteration 19 energy 0 : -108607
 E-Slope 0.00225119 iteration 20 energy 0 : -108984
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2462_08192016_Test_NewCases_Aug2_Ref_vimp2_1622_05292015/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2462_08192016_Test_NewCases_Aug2_Ref_vimp2_1622_05292015/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2462_08192016_Test_NewCases_Aug2_Ref_vimp2_1622_05292015/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2462_08192016_Test_NewCases_Aug2_Ref_vimp2_1622_05292015/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2475_08242016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2119_04142016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2475_08242016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2119_04142016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547783825
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [11.9401, -0.310535, 3.07936]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 3.8707085242105173, 6.756460689288735, 0.019353994827976617]
level 0, iter 322, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.012300432913450114, 0.0036901621453755383, -0.0716201577118316, 0.9973493044379261, 1.06216444874781, 0.8926779251394346, 1.081773408315663, -0.030318952524583987, 0.0746936113226019, 0.04048978371557236, 4.441338730821247, 6.194643509419399, 1.6050640469533732]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 146, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.015557260260786831, 0.0024817120392455626, -0.07097311357374629, 0.9973538138033967, 1.0646646704089175, 0.8835933742149807, 1.0911976808740287, -0.03236891860863578, 0.0740657550352975, 0.049078103373141196, 4.419828125003217, 6.200633991807918, 1.6876060552720022]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 98, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.017900480346779712, 0.0036626696626656245, -0.07474678565837778, 0.997035142654479, 1.0671794703563553, 0.8831635925361169, 1.0919192194514589, -0.03683187459918747, 0.07495727516809861, 0.0569904860116789, 4.438165306834677, 6.144404296817499, 1.583784804104989]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 30, size: fix[40, 44, 32]-mov[42, 43, 32], affine para: [0.016979865674184105, 0.0036400818894414544, -0.0765684369411458, 0.9969130897073799, 1.0653818801368196, 0.8842336808823911, 1.0907337681615725, -0.035284425510543255, 0.0732263401861566, 0.05849824540312165, 4.46310241401431, 6.191050294513175, 1.5325773352549543]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 276, size: fix[79, 88, 40]-mov[83, 85, 45], affine para: [0.020053261757384224, 0.003784376880495714, -0.07135199614425047, 0.9972424167827735, 1.0589936452698532, 0.8886024816459063, 1.0865408740147997, -0.03059289320468801, 0.07292669277783789, 0.06027788198687329, 4.335612919210412, 6.30394579376149, 1.6811897875004742]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 766, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.016176063732721794, -0.0006218741618831639, 0.0844251453197806, 0.9962983203199611, 0.9442584663200223, 1.0982493336564416, 0.9173253578403776, 0.076176562376837, -0.09359476914383394, -0.03992260747085208, -3.3468604717818864, -7.675875996684367, -1.2365274745519919]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 82, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.01611256215887715, -0.0003287046859407027, 0.0828826356690321, 0.9964289969679025, 0.9463807353224677, 1.0998224856099907, 0.9139476560375414, 0.08148056667765353, -0.09049238289051031, -0.03957925433802039, -3.4130842001029866, -7.63966507934431, -1.2568024789518673]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 31, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.0154016636025828, -0.00010402469828474595, 0.08643128156997923, 0.9961387511302358, 0.9460714775363961, 1.1003423571611732, 0.9130355399244345, 0.08343508142001313, -0.09110087234466585, -0.03924444580041903, -3.3756587988020725, -7.608160925438564, -1.225888143202717]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 27, size: fix[42, 43, 32]-mov[40, 44, 32], affine para: [-0.017503697978983185, -0.0007501491460374499, 0.08463026001041869, 0.9962583886341375, 0.9475717778059983, 1.1050969435505127, 0.914167591201541, 0.08646331599901312, -0.09127174298465156, -0.038313276616116616, -3.3816198638004846, -7.6296255789086125, -1.255146027847361]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 107, size: fix[83, 85, 45]-mov[79, 88, 40], affine para: [-0.010687732520173914, -0.0011747339028818663, 0.0888970644167906, 0.995982783140307, 0.9436801788538434, 1.1004575212339118, 0.9142077158730793, 0.08927942559221942, -0.08840257914267587, -0.03714956189878222, -3.3497636212615682, -7.929644208612652, -1.256150656677058]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.574035 v2 -0.56632
final [0.020053261757384224, 0.003784376880495714, -0.07135199614425047, 0.9972424167827735, 1.0589936452698532, 0.8886024816459063, 1.0865408740147997, -0.03059289320468801, 0.07292669277783789, 0.06027788198687329, 4.335612919210412, 6.30394579376149, 1.6811897875004742]
outputput affine center: [11.9401, -0.310535, 3.07936]
output affine para: [0.020053261757384224, 0.003784376880495714, -0.07135199614425047, 0.9972424167827735, 1.0589936452698532, 0.8886024816459063, 1.0865408740147997, -0.03059289320468801, 0.07292669277783789, 0.06027788198687329, 4.335612919210412, 6.30394579376149, 1.6811897875004742]
initial measure value (MMI): rval = -0.246192
final measure value (MMI): rval = -0.596787
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -7124.81
 iteration 2 energy 0 : -7577.94
 iteration 3 energy 0 : -7919.05
 iteration 4 energy 0 : -8152.52
 iteration 5 energy 0 : -8319.14
 iteration 6 energy 0 : -8446.55
 iteration 7 energy 0 : -8535.12
 iteration 8 energy 0 : -8544.92
 iteration 9 energy 0 : -8559.8
 iteration 10 energy 0 : -8558.21
 iteration 11 energy 0 : -8572.69
 iteration 12 energy 0 : -8567.08
 E-Slope 0.00501125 iteration 13 energy 0 : -8583.09
 E-Slope 0.00311799 iteration 14 energy 0 : -8573.84
 E-Slope 0.0018851 iteration 15 energy 0 : -8591.51
 E-Slope 0.00106633 iteration 16 energy 0 : -8586.99
 E-Slope 0.000593439 iteration 17 energy 0 : -8600.59
 E-Slope 0.000362106 iteration 18 energy 0 : -8596.25
 E-Slope 0.000341907 iteration 19 energy 0 : -8608.86
 E-Slope 0.00031209 iteration 20 energy 0 : -8605.48
 E-Slope 0.000314251 iteration 21 energy 0 : -8613.29
 E-Slope 0.00028944 iteration 22 energy 0 : -8612.96
 E-Slope 0.000285238 iteration 23 energy 0 : -8615.59
 E-Slope 0.000263914 iteration 24 energy 0 : -8622.54
 E-Slope 0.000264987 iteration 25 energy 0 : -8623.76
 E-Slope 0.00024873 iteration 26 energy 0 : -8633.76
 E-Slope 0.000254221 iteration 27 energy 0 : -8632.79
 E-Slope 0.000260115 iteration 28 energy 0 : -8645.14
 E-Slope 0.000286341 iteration 29 energy 0 : -8648.06
 E-Slope 0.000294961 iteration 30 energy 0 : -8653.59
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -17157.8
 iteration 2 energy 0 : -17380.8
 iteration 3 energy 0 : -17557.3
 iteration 4 energy 0 : -17757.5
 iteration 5 energy 0 : -17897.7
 iteration 6 energy 0 : -17996.2
 iteration 7 energy 0 : -17995.5
 iteration 8 energy 0 : -18033.2
 iteration 9 energy 0 : -18030.9
 iteration 10 energy 0 : -18074.7
 iteration 11 energy 0 : -18074.7
 iteration 12 energy 0 : -18103.1
 E-Slope 0.00176048 iteration 13 energy 0 : -18100.9
 E-Slope 0.00123039 iteration 14 energy 0 : -18120.4
 E-Slope 0.000806913 iteration 15 energy 0 : -18117.4
 E-Slope 0.000567287 iteration 16 energy 0 : -18135.5
 E-Slope 0.000436865 iteration 17 energy 0 : -18131.6
 E-Slope 0.000403777 iteration 18 energy 0 : -18147.6
 E-Slope 0.00033623 iteration 19 energy 0 : -18142.9
 E-Slope 0.000303954 iteration 20 energy 0 : -18157.4
 E-Slope 0.000243388 iteration 21 energy 0 : -18154.1
 E-Slope 0.000230126 iteration 22 energy 0 : -18168
 E-Slope 0.00019484 iteration 23 energy 0 : -18163.1
 E-Slope 0.000190213 iteration 24 energy 0 : -18174.2
 E-Slope 0.000163615 iteration 25 energy 0 : -18168.8
 E-Slope 0.000161186 iteration 26 energy 0 : -18181
 E-Slope 0.000137344 iteration 27 energy 0 : -18175.1
 E-Slope 0.000137039 iteration 28 energy 0 : -18186.5
 E-Slope 0.0001157 iteration 29 energy 0 : -18180.3
 E-Slope 0.000116184 iteration 30 energy 0 : -18190.8
 E-Slope 9.62168e-05 iteration 31 energy 0 : -18184.6
 Converged due to oscillation in optimization  metric 0 bad 12  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -111848
 iteration 2 energy 0 : -114063
 iteration 3 energy 0 : -115722
 iteration 4 energy 0 : -116881
 iteration 5 energy 0 : -117757
 iteration 6 energy 0 : -118473
 iteration 7 energy 0 : -119136
 iteration 8 energy 0 : -119769
 iteration 9 energy 0 : -120447
 iteration 10 energy 0 : -121016
 iteration 11 energy 0 : -121538
 iteration 12 energy 0 : -121966
 E-Slope 0.00339907 iteration 13 energy 0 : -122334
 E-Slope 0.00295755 iteration 14 energy 0 : -122665
 E-Slope 0.00263872 iteration 15 energy 0 : -122945
 E-Slope 0.00236567 iteration 16 energy 0 : -123145
 E-Slope 0.00210474 iteration 17 energy 0 : -123316
 E-Slope 0.00183693 iteration 18 energy 0 : -123427
 E-Slope 0.00157896 iteration 19 energy 0 : -123586
 E-Slope 0.00133611 iteration 20 energy 0 : -123711
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2475_08242016_Aug1_Ref_vimp2_2119_04142016_Test_NewCases/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2475_08242016_Aug1_Ref_vimp2_2119_04142016_Test_NewCases/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2475_08242016_Aug1_Ref_vimp2_2119_04142016_Test_NewCases/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2475_08242016_Aug1_Ref_vimp2_2119_04142016_Test_NewCases/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2475_08242016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1712_11162015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2475_08242016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1712_11162015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547783920
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [11.9401, -0.310535, 3.07936]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0.8735925736547454, -12.170523450380117, 30.360444406517303]
level 0, iter 1403, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.11394440934133156, 0.05104386180237584, 0.05489698221777016, 0.990655094922313, 0.9526621241040071, 0.8905912443959567, 0.970404255118433, 0.04002222931024081, 0.09610561526406244, -0.010578193846947033, 3.874508587999378, -11.613240662545948, 27.414077378793642]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 23, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.11313822986647608, 0.04912985127532717, 0.0539929839821586, 0.9908939178020254, 0.953139831031578, 0.8911640406028897, 0.9732558648052402, 0.04185372252243895, 0.09691409368496441, -0.010452142863806704, 3.778690227747048, -11.695737213411327, 27.507845209528742]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 175, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.11370747007313749, 0.05029717019114856, 0.05206090329657265, 0.9908735884401574, 0.9590421751118754, 0.8978067380742438, 0.9819643170041503, 0.05033510513928577, 0.1008860218753487, -0.012004997804458422, 3.8226969390311267, -11.779435151569606, 27.504955629774194]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 84, size: fix[40, 44, 32]-mov[36, 39, 32], affine para: [0.1116236196411791, 0.04217628732115543, 0.05587052162675193, 0.991281903970389, 0.9482365925629117, 0.8913504215388734, 0.9689927630823614, 0.05489233497685124, 0.10203472946883946, -0.008004102578584879, 3.802259444572601, -11.52701579144134, 27.442498675934605]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 504, size: fix[79, 88, 40]-mov[71, 77, 33], affine para: [0.11469921648121308, 0.04492687606234422, 0.06167492952011346, 0.990465480778893, 0.9303869090454141, 0.8864117838638613, 0.9725935613159663, 0.06127182157204834, 0.1098018629905708, -0.007102635909368142, 3.848972832972086, -11.70971370986721, 27.626038043496933]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 472, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.10179157085538357, -0.07329459536478632, -0.05282624576909079, 0.9906945877267369, 1.0396735012655198, 1.0697643796453553, 0.950804458466271, -0.026649936837419962, -0.06096944835947608, 0.038966774810354675, 2.4171281985709383, 6.047991085142728, -28.862806309786958]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 124, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.10151554775941554, -0.06924754676396883, -0.05394549915552846, 0.9909537092877442, 1.044307312871788, 1.0746703580427721, 0.9473363135863774, -0.03158774707758389, -0.06738255525846372, 0.04216918476475581, 2.221057787107313, 5.865060803835681, -28.748860316169825]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 326, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.098698659056329, -0.06641808803750915, -0.05662628604289509, 0.9912823392005491, 1.0501015175715884, 1.0737218672227518, 0.939769708654344, -0.04070706510652128, -0.08092288149263595, 0.04180228981866296, 2.342125985221552, 6.22998691232662, -28.62179422980406]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 898, size: fix[36, 39, 32]-mov[40, 44, 32], affine para: [-0.0961245277882129, -0.07117149407064931, -0.057717994859738414, 0.991142435101341, 1.0552785074840252, 1.0663861529132326, 0.9341441461411588, -0.05669716309323645, -0.06911372853265274, 0.049624527925984534, 2.0609598687402038, 6.002032247544979, -28.60977599256461]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 583, size: fix[71, 77, 33]-mov[79, 88, 40], affine para: [-0.09298781829099914, -0.06995466556016627, -0.05547699159531934, 0.991656146967979, 1.0550688273346935, 1.0605298919163775, 0.9249061129226419, -0.060542699114602506, -0.06780560385852279, 0.050210396036946, 1.9015467930933045, 6.336749296511282, -28.401835138005566]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.393526 v2 -0.399746
 last params [0.11469921648121308, 0.04492687606234422, 0.06167492952011346, 0.990465480778893, 0.9303869090454141, 0.8864117838638613, 0.9725935613159663, 0.06127182157204834, 0.1098018629905708, -0.007102635909368142, 3.848972832972086, -11.70971370986721, 27.626038043496933]
 my params [-0.09298781829099914, -0.06995466556016627, -0.05547699159531934, 0.991656146967979, 1.0550688273346935, 1.0605298919163775, 0.9249061129226419, -0.060542699114602506, -0.06780560385852279, 0.050210396036946, 1.9015467930933045, 6.336749296511282, -28.401835138005566]
A=0.930726 -0.0227483 0.199322 
0.122987 0.910381 -0.219396 
-0.138851 0.207789 1.05191 

rotation R0.980714 -0.0931086 0.171847 
0.129593 0.967949 -0.215128 
-0.146309 0.233249 0.961347 

upper R0.949029 0.0652679 0.0131415 
0 0.931787 0.0144346 
0 0 1.0927 

s=0.252861 u=0.113377 v=0.0804491 w0.0563124 r=0.988687
m_Rotation from vnl0.113377 0.0804491 0.0563124 0.988687
 new params [0.11337688778329046, 0.08044910422324811, 0.056312420692291934, 0.988687278274595, 0.9490292227792689, 0.9317874496295689, 1.0927031683911668, 0.06877334659000076, 0.013847307667956943, 0.01549135240432446, 4.035438782448694, -12.233972646121963, 28.82353583674953]
outputput affine center: [11.9401, -0.310535, 3.07936]
output affine para: [0.11337688778329046, 0.08044910422324811, 0.056312420692291934, 0.988687278274595, 0.9490292227792689, 0.9317874496295689, 1.0927031683911668, 0.06877334659000076, 0.013847307667956943, 0.01549135240432446, 4.035438782448694, -12.233972646121963, 28.82353583674953]
initial measure value (MMI): rval = -0.118615
final measure value (MMI): rval = -0.417363
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -3947.51
 iteration 2 energy 0 : -4162.4
 iteration 3 energy 0 : -4347.31
 iteration 4 energy 0 : -4510.88
 iteration 5 energy 0 : -4642.69
 iteration 6 energy 0 : -4756.14
 iteration 7 energy 0 : -4861.29
 iteration 8 energy 0 : -4967.93
 iteration 9 energy 0 : -5071.3
 iteration 10 energy 0 : -5160.98
 iteration 11 energy 0 : -5243.55
 iteration 12 energy 0 : -5309.73
 E-Slope 0.0126665 iteration 13 energy 0 : -5374.91
 E-Slope 0.0111002 iteration 14 energy 0 : -5398.83
 E-Slope 0.00965185 iteration 15 energy 0 : -5413.18
 E-Slope 0.00831529 iteration 16 energy 0 : -5429.87
 E-Slope 0.00708291 iteration 17 energy 0 : -5460.4
 E-Slope 0.00585962 iteration 18 energy 0 : -5467.31
 E-Slope 0.00477692 iteration 19 energy 0 : -5498.67
 E-Slope 0.00378489 iteration 20 energy 0 : -5498.31
 E-Slope 0.00303999 iteration 21 energy 0 : -5527.11
 E-Slope 0.00242479 iteration 22 energy 0 : -5527.41
 E-Slope 0.00204924 iteration 23 energy 0 : -5554.87
 E-Slope 0.00175618 iteration 24 energy 0 : -5550.67
 E-Slope 0.00169075 iteration 25 energy 0 : -5580.46
 E-Slope 0.00159542 iteration 26 energy 0 : -5580.51
 E-Slope 0.00153839 iteration 27 energy 0 : -5606.94
 E-Slope 0.00142857 iteration 28 energy 0 : -5605.66
 E-Slope 0.00141127 iteration 29 energy 0 : -5627.6
 E-Slope 0.00132026 iteration 30 energy 0 : -5627.93
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -11088.2
 iteration 2 energy 0 : -11273.5
 iteration 3 energy 0 : -11474.5
 iteration 4 energy 0 : -11614.9
 iteration 5 energy 0 : -11728.4
 iteration 6 energy 0 : -11811.7
 iteration 7 energy 0 : -11882.5
 iteration 8 energy 0 : -11946.8
 iteration 9 energy 0 : -12005.8
 iteration 10 energy 0 : -12074.9
 iteration 11 energy 0 : -12133.2
 iteration 12 energy 0 : -12185.4
 E-Slope 0.00384367 iteration 13 energy 0 : -12227.8
 E-Slope 0.00329416 iteration 14 energy 0 : -12267.2
 E-Slope 0.00289809 iteration 15 energy 0 : -12290.4
 E-Slope 0.00260776 iteration 16 energy 0 : -12332.3
 E-Slope 0.00239964 iteration 17 energy 0 : -12376.7
 E-Slope 0.00226057 iteration 18 energy 0 : -12436.3
 E-Slope 0.00220412 iteration 19 energy 0 : -12512.1
 E-Slope 0.00221667 iteration 20 energy 0 : -12584.8
 E-Slope 0.00228356 iteration 21 energy 0 : -12655.3
 E-Slope 0.0024346 iteration 22 energy 0 : -12737.5
 E-Slope 0.00261995 iteration 23 energy 0 : -12807.4
 E-Slope 0.00279535 iteration 24 energy 0 : -12863.9
 E-Slope 0.00289812 iteration 25 energy 0 : -12897.7
 E-Slope 0.0029339 iteration 26 energy 0 : -12941.3
 E-Slope 0.00286184 iteration 27 energy 0 : -12977.6
 E-Slope 0.00273774 iteration 28 energy 0 : -13027.5
 E-Slope 0.00258986 iteration 29 energy 0 : -13088.6
 E-Slope 0.00246309 iteration 30 energy 0 : -13157.8
 E-Slope 0.00240581 iteration 31 energy 0 : -13236.9
 E-Slope 0.00243337 iteration 32 energy 0 : -13328.1
 E-Slope 0.00249124 iteration 33 energy 0 : -13388.9
 E-Slope 0.00251496 iteration 34 energy 0 : -13397.3
 E-Slope 0.00244468 iteration 35 energy 0 : -13377.4
 E-Slope 0.00231043 iteration 36 energy 0 : -13386.6
 E-Slope 0.00205154 iteration 37 energy 0 : -13374.6
 E-Slope 0.00173164 iteration 38 energy 0 : -13383.1
 E-Slope 0.0013419 iteration 39 energy 0 : -13378.5
 E-Slope 0.000951104 iteration 40 energy 0 : -13387.5
 E-Slope 0.000581779 iteration 41 energy 0 : -13383
 E-Slope 0.000296943 iteration 42 energy 0 : -13397.2
 E-Slope 8.63001e-05 iteration 43 energy 0 : -13384.1
 Converged due to oscillation in optimization  metric 0 bad 5  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -78396.4
 iteration 2 energy 0 : -80062.7
 iteration 3 energy 0 : -81564.1
 iteration 4 energy 0 : -82658.6
 iteration 5 energy 0 : -83473.3
 iteration 6 energy 0 : -84248.3
 iteration 7 energy 0 : -84948.1
 iteration 8 energy 0 : -85772.5
 iteration 9 energy 0 : -86557.8
 iteration 10 energy 0 : -87146
 iteration 11 energy 0 : -87669.8
 iteration 12 energy 0 : -88154.5
 E-Slope 0.00504261 iteration 13 energy 0 : -88558.6
 E-Slope 0.00447754 iteration 14 energy 0 : -88888.8
 E-Slope 0.00403764 iteration 15 energy 0 : -89214
 E-Slope 0.00365777 iteration 16 energy 0 : -89555.6
 E-Slope 0.00329451 iteration 17 energy 0 : -89891.9
 E-Slope 0.00295796 iteration 18 energy 0 : -90213.2
 E-Slope 0.00265998 iteration 19 energy 0 : -90577.3
 E-Slope 0.00245167 iteration 20 energy 0 : -90962.9
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2475_08242016_Aug2_Ref_vimp2_1712_11162015/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2475_08242016_Aug2_Ref_vimp2_1712_11162015/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2475_08242016_Aug2_Ref_vimp2_1712_11162015/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2475_08242016_Aug2_Ref_vimp2_1712_11162015/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2476_08242016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1875_01262016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2476_08242016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1875_01262016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547784039
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [10.528, 0.355481, -3.90121]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 5.113868707285674, -14.95410738229499, -15.316713960692802]
level 0, iter 1040, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.03642084120373592, 0.022974905614203813, -0.13053140779586453, 0.9905085701884968, 1.0824534245878281, 0.9970554277521145, 1.058436823319665, -0.015212844815465776, 0.04843577298901605, -0.056847083082246945, 8.68974036386215, -18.282470476044022, -19.225243480443336]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 365, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.04752813921784754, 0.02574714324387155, -0.1265878329156091, 0.9904815400374699, 1.0742519445922978, 0.9732950609536716, 1.047948599125415, -0.012837097478448247, 0.061401256379509286, -0.06540958319925293, 9.047448884082494, -18.444396827490813, -19.07097344452186]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 358, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.050115915989302234, 0.026299600026727335, -0.12848897469922774, 0.9900945961794401, 1.0693984787277, 0.9656109173601729, 1.06664719589296, -0.002866535466875266, 0.06751566799983837, -0.0747877282338367, 9.063897764466688, -18.298416367143865, -19.159237242346414]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 200, size: fix[38, 41, 32]-mov[45, 46, 43], affine para: [-0.047212517771081874, 0.023132791922619102, -0.12501541750247483, 0.9907608174984828, 1.0520768978643598, 0.9577035291805854, 1.0321510305967285, -0.0004020016265468913, 0.08308881764637037, -0.08287609530136514, 9.091243595497804, -18.425880279931917, -19.17825967055407]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 1454, size: fix[76, 82, 43]-mov[90, 92, 60], affine para: [-0.07005197607424403, 0.023014123752515974, -0.13521649315301212, 0.988068606289765, 1.0625952729871035, 0.9659248444890856, 1.014472735277991, -0.001576389533646083, 0.07771347899321134, -0.0822520408202889, 9.002133689847089, -17.899261891589383, -19.366282482609922]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 4293, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.046042946721640755, -0.039669024847540584, 0.17308626252564244, 0.9830297865526445, 0.8692868868063983, 0.8519037140804607, 0.8178708099645204, 0.0683512526785319, 0.06973838053004218, 0.008108696485536455, -10.603571121020687, 11.367613303390831, 15.526976489993494]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 362, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.047910731270073434, -0.045511631733093263, 0.17441253395564077, 0.9824528086403593, 0.8513363369394666, 0.8447632782812654, 0.812766196018501, 0.08162540676323539, 0.0786829883809304, 0.01155891424667859, -10.188116479210573, 11.363302897138151, 15.549068958358161]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 155, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.042532649251845515, -0.04196728217339399, 0.17681396334263313, 0.9824288998913194, 0.8634714165873988, 0.849175079504497, 0.8240331726017126, 0.08226374062509842, 0.08331748431090218, 0.015023487545496771, -10.230601977123495, 11.19086773463107, 15.570736967552072]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 62, size: fix[45, 46, 43]-mov[38, 41, 32], affine para: [0.042987336336852214, -0.04494922231120525, 0.17889659102332287, 0.981900028540846, 0.8632446445253301, 0.8489580568397461, 0.8242111012714539, 0.08367885106788656, 0.0856754968241505, 0.015407136848787627, -10.269645784765743, 11.287306820006403, 15.403573720963948]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 419, size: fix[90, 92, 60]-mov[76, 82, 43], affine para: [0.0423298109959404, -0.044825110661947096, 0.17779577600175195, 0.9821341856340847, 0.8644782103467855, 0.8441791372818164, 0.8361898273549264, 0.08978371245332953, 0.07864860390223864, 0.002450749959849327, -10.127213135656458, 10.87020285273947, 15.427920466404272]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.260388 v2 -0.261254
 last params [-0.07005197607424403, 0.023014123752515974, -0.13521649315301212, 0.988068606289765, 1.0625952729871035, 0.9659248444890856, 1.014472735277991, -0.001576389533646083, 0.07771347899321134, -0.0822520408202889, 9.002133689847089, -17.899261891589383, -19.366282482609922]
 my params [0.0423298109959404, -0.044825110661947096, 0.17779577600175195, 0.9821341856340847, 0.8644782103467855, 0.8441791372818164, 0.8361898273549264, 0.08978371245332953, 0.07864860390223864, 0.002450749959849327, -10.127213135656458, 10.87020285273947, 15.427920466404272]
A=1.12338 0.309641 0.0190358 
-0.417983 1.10574 0.0767045 
-0.0872965 -0.118498 1.18681 

rotation R0.934751 0.339255 0.105577 
-0.347799 0.934428 0.0766851 
-0.0726384 -0.108401 0.99145 

upper R1.20179 -0.0865298 -0.095092 
0 1.15112 -0.0505188 
0 0 1.18455 

s=0.254473 u=-0.0470994 v=0.045351 w-0.174837 r=0.982424
m_Rotation from vnl-0.0470994 0.045351 -0.174837 0.982424
 new params [-0.047099404308606, 0.04535100252023501, -0.17483661009148574, 0.9824240899203878, 1.2017945488728932, 1.1511223329502995, 1.1845536752075256, -0.0720005205668054, -0.07912503408681862, -0.04388654654695646, 7.717155206952523, -17.435967269457862, -17.905974566347975]
outputput affine center: [10.528, 0.355481, -3.90121]
output affine para: [-0.047099404308606, 0.04535100252023501, -0.17483661009148574, 0.9824240899203878, 1.2017945488728932, 1.1511223329502995, 1.1845536752075256, -0.0720005205668054, -0.07912503408681862, -0.04388654654695646, 7.717155206952523, -17.435967269457862, -17.905974566347975]
initial measure value (MMI): rval = -0.0878283
final measure value (MMI): rval = -0.285601
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -3371.74
 iteration 2 energy 0 : -3621.83
 iteration 3 energy 0 : -3876.49
 iteration 4 energy 0 : -4094.92
 iteration 5 energy 0 : -4264.59
 iteration 6 energy 0 : -4414.3
 iteration 7 energy 0 : -4567.05
 iteration 8 energy 0 : -4725.56
 iteration 9 energy 0 : -4869.72
 iteration 10 energy 0 : -4999.36
 iteration 11 energy 0 : -5119.03
 iteration 12 energy 0 : -5229.5
 E-Slope 0.0189066 iteration 13 energy 0 : -5329.36
 E-Slope 0.0168746 iteration 14 energy 0 : -5424.26
 E-Slope 0.0152551 iteration 15 energy 0 : -5509.75
 E-Slope 0.0139329 iteration 16 energy 0 : -5595.4
 E-Slope 0.0127372 iteration 17 energy 0 : -5679.47
 E-Slope 0.0116296 iteration 18 energy 0 : -5762.94
 E-Slope 0.01062 iteration 19 energy 0 : -5833.16
 E-Slope 0.00973401 iteration 20 energy 0 : -5891.49
 E-Slope 0.00891344 iteration 21 energy 0 : -5937.33
 E-Slope 0.00814077 iteration 22 energy 0 : -5982.24
 E-Slope 0.00742765 iteration 23 energy 0 : -6030.07
 E-Slope 0.00681162 iteration 24 energy 0 : -6088.18
 E-Slope 0.00630089 iteration 25 energy 0 : -6150.95
 E-Slope 0.00590946 iteration 26 energy 0 : -6215.27
 E-Slope 0.00534094 iteration 27 energy 0 : -6193.41
 E-Slope 0.00481422 iteration 28 energy 0 : -6224.34
 E-Slope 0.00422184 iteration 29 energy 0 : -6216.59
 E-Slope 0.00377075 iteration 30 energy 0 : -6262.05
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -10231.1
 iteration 2 energy 0 : -10466.2
 iteration 3 energy 0 : -10680.5
 iteration 4 energy 0 : -10880
 iteration 5 energy 0 : -11046.4
 iteration 6 energy 0 : -11129.5
 iteration 7 energy 0 : -11223.4
 iteration 8 energy 0 : -11273.9
 iteration 9 energy 0 : -11333.6
 iteration 10 energy 0 : -11371.1
 iteration 11 energy 0 : -11432.3
 iteration 12 energy 0 : -11456.6
 E-Slope 0.00435512 iteration 13 energy 0 : -11495.3
 E-Slope 0.00344602 iteration 14 energy 0 : -11504.1
 E-Slope 0.00277512 iteration 15 energy 0 : -11552.2
 E-Slope 0.00226735 iteration 16 energy 0 : -11551.7
 E-Slope 0.00199731 iteration 17 energy 0 : -11607.6
 E-Slope 0.0017155 iteration 18 energy 0 : -11597.1
 E-Slope 0.00160046 iteration 19 energy 0 : -11665.4
 E-Slope 0.0014264 iteration 20 energy 0 : -11645.4
 E-Slope 0.00137484 iteration 21 energy 0 : -11712.3
 E-Slope 0.00124753 iteration 22 energy 0 : -11687.6
 E-Slope 0.00125843 iteration 23 energy 0 : -11755.4
 E-Slope 0.00118513 iteration 24 energy 0 : -11734.1
 E-Slope 0.00121132 iteration 25 energy 0 : -11799.9
 E-Slope 0.0011202 iteration 26 energy 0 : -11773.1
 E-Slope 0.00115217 iteration 27 energy 0 : -11840.5
 E-Slope 0.00104383 iteration 28 energy 0 : -11807.3
 E-Slope 0.00107998 iteration 29 energy 0 : -11876.5
 E-Slope 0.000955388 iteration 30 energy 0 : -11838.8
 E-Slope 0.00100234 iteration 31 energy 0 : -11908.2
 E-Slope 0.000872672 iteration 32 energy 0 : -11867.2
 E-Slope 0.000920594 iteration 33 energy 0 : -11938.4
 E-Slope 0.00078477 iteration 34 energy 0 : -11894.5
 E-Slope 0.000832304 iteration 35 energy 0 : -11965.1
 E-Slope 0.000705406 iteration 36 energy 0 : -11919.6
 E-Slope 0.000760987 iteration 37 energy 0 : -11988.7
 E-Slope 0.000635691 iteration 38 energy 0 : -11941.8
 E-Slope 0.000695735 iteration 39 energy 0 : -12008.5
 E-Slope 0.000568055 iteration 40 energy 0 : -11961.1
 E-Slope 0.000628114 iteration 41 energy 0 : -12024.7
 E-Slope 0.000497252 iteration 42 energy 0 : -11976.9
 E-Slope 0.00055626 iteration 43 energy 0 : -12039
 E-Slope 0.000422828 iteration 44 energy 0 : -11990.5
 E-Slope 0.000480503 iteration 45 energy 0 : -12048.6
 E-Slope 0.000350453 iteration 46 energy 0 : -12002.4
 E-Slope 0.000407703 iteration 47 energy 0 : -12056.1
 E-Slope 0.000282161 iteration 48 energy 0 : -12011.4
 E-Slope 0.000338659 iteration 49 energy 0 : -12060.8
 E-Slope 0.000219539 iteration 50 energy 0 : -12018.7
 E-Slope 0.000274442 iteration 51 energy 0 : -12063.4
 E-Slope 0.000162423 iteration 52 energy 0 : -12024.1
 E-Slope 0.000215016 iteration 53 energy 0 : -12064
 E-Slope 0.000109807 iteration 54 energy 0 : -12027.9
 E-Slope 0.00016214 iteration 55 energy 0 : -12063.1
 E-Slope 5.14612e-05 iteration 56 energy 0 : -12022.1
 Converged due to oscillation in optimization  metric 0 bad 21  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -77277.6
 iteration 2 energy 0 : -79363.6
 iteration 3 energy 0 : -81395.6
 iteration 4 energy 0 : -83264.1
 iteration 5 energy 0 : -85077.3
 iteration 6 energy 0 : -86436.5
 iteration 7 energy 0 : -87668.1
 iteration 8 energy 0 : -88810.6
 iteration 9 energy 0 : -89855.3
 iteration 10 energy 0 : -90836.2
 iteration 11 energy 0 : -91768.9
 iteration 12 energy 0 : -92502.8
 E-Slope 0.00804897 iteration 13 energy 0 : -93189.4
 E-Slope 0.00711944 iteration 14 energy 0 : -93833.7
 E-Slope 0.00632331 iteration 15 energy 0 : -94464
 E-Slope 0.00565468 iteration 16 energy 0 : -95054.1
 E-Slope 0.00513972 iteration 17 energy 0 : -95649.7
 E-Slope 0.00471212 iteration 18 energy 0 : -96281.1
 E-Slope 0.00435343 iteration 19 energy 0 : -96847.6
 E-Slope 0.00405652 iteration 20 energy 0 : -97376.2
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2476_08242016_Aug1_Ref_vimp2_1875_01262016/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2476_08242016_Aug1_Ref_vimp2_1875_01262016/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2476_08242016_Aug1_Ref_vimp2_1875_01262016/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2476_08242016_Aug1_Ref_vimp2_1875_01262016/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2476_08242016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2998_03222017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2476_08242016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2998_03222017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547784190
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [10.528, 0.355481, -3.90121]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 2.905984090427877, 9.980648244114484, -4.119675892064033]
level 0, iter 446, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.03580860767069706, -0.020565977568175596, -0.045547120906104084, 0.9981083327778183, 1.0506486566860604, 0.9682249395118518, 1.0835941250932208, -0.012280532915296868, -0.047134026083977, -0.022662904262870005, 3.8428716974806245, 9.589174979767671, -3.1649830195086333]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 172, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.030663020916070365, -0.017123212695277477, -0.04908580743557699, 0.9981769173065916, 1.0583541801127836, 0.9593922577333455, 1.0966661240037212, -0.018924311247164982, -0.05643705734651629, -0.026784162929220416, 3.867258882820725, 9.598613282667426, -3.202496073636069]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 318, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.03595664777108708, -0.015705239640878336, -0.04936918435296857, 0.9980095934234356, 1.0644946658834074, 0.9434207846022856, 1.1137259633229555, -0.014506707595786261, -0.06340179973703233, -0.03896918570712552, 3.845266985661729, 9.46663076303722, -3.072997450953936]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 1286, size: fix[38, 41, 32]-mov[39, 45, 33], affine para: [-0.04313995930901168, -0.014196507565648657, -0.04344349601564531, 0.9980230787600524, 1.0688765798451665, 0.9274612785333408, 1.123267403346413, -0.013354717226792809, -0.08258346336319089, -0.04908457422965708, 3.9983294241523066, 9.648245343904035, -3.1136658864878664]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 362, size: fix[76, 82, 43]-mov[77, 89, 47], affine para: [-0.027229115566079928, -0.012873064749685333, -0.039366753721187274, 0.9987708036235816, 1.0564668324828184, 0.8995958351607933, 1.1117106359504185, -0.01016311783605266, -0.08469706093822896, -0.05252992667542735, 3.9226606606847794, 9.91790378076602, -2.8897892497375777]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 815, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.038114087474975265, 0.014159474029724903, 0.05370126979642087, 0.9977289207261678, 0.9246391354701187, 1.0577130354071105, 0.8765357692469162, 0.041411750165819536, 0.07492774071358999, 0.028960370073038085, -2.7082517362286644, -10.668202622990874, 2.151017355664818]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 40, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.0393904757942484, 0.01502709337407262, 0.05452757701380338, 0.9976218322723462, 0.9261053671690997, 1.0575925548994909, 0.8750480315519773, 0.04250586226586993, 0.07520379476471725, 0.029328042920292383, -2.6813124597608873, -10.40963750682058, 2.134993174334852]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 104, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.038537871307841615, 0.013502162482214012, 0.05458158376637499, 0.9976739822191005, 0.9249782247580005, 1.0580046089051158, 0.8728106928728459, 0.04559009495586215, 0.07482528996625289, 0.026532355810264297, -2.6561552570938427, -10.518363372922087, 2.1419979223999013]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 32, size: fix[39, 45, 33]-mov[38, 41, 32], affine para: [0.03944712122171986, 0.015750869287755136, 0.054281064202016394, 0.9976218726617293, 0.923693783223361, 1.0565445874291335, 0.8733458774720453, 0.04659296040938805, 0.07567720958113149, 0.02601208957953888, -2.6868621235645356, -10.536652257177026, 2.2193222085072133]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 382, size: fix[77, 89, 47]-mov[76, 82, 43], affine para: [0.03224343993732514, 0.018376746067896993, 0.053720071627599966, 0.9978661281400875, 0.9307448398443858, 1.0590900545543112, 0.8679953258370785, 0.04951590492805477, 0.06788526870158841, 0.028278022974754485, -2.6813631245816425, -10.577472987844885, 2.216719981417823]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.393703 v2 -0.388048
final [-0.027229115566079928, -0.012873064749685333, -0.039366753721187274, 0.9987708036235816, 1.0564668324828184, 0.8995958351607933, 1.1117106359504185, -0.01016311783605266, -0.08469706093822896, -0.05252992667542735, 3.9226606606847794, 9.91790378076602, -2.8897892497375777]
outputput affine center: [10.528, 0.355481, -3.90121]
output affine para: [-0.027229115566079928, -0.012873064749685333, -0.039366753721187274, 0.9987708036235816, 1.0564668324828184, 0.8995958351607933, 1.1117106359504185, -0.01016311783605266, -0.08469706093822896, -0.05252992667542735, 3.9226606606847794, 9.91790378076602, -2.8897892497375777]
initial measure value (MMI): rval = -0.222508
final measure value (MMI): rval = -0.409541
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -5251.18
 iteration 2 energy 0 : -5701.47
 iteration 3 energy 0 : -6062.52
 iteration 4 energy 0 : -6278.29
 iteration 5 energy 0 : -6438.24
 iteration 6 energy 0 : -6566.75
 iteration 7 energy 0 : -6672.54
 iteration 8 energy 0 : -6772.43
 iteration 9 energy 0 : -6868.65
 iteration 10 energy 0 : -6965.78
 iteration 11 energy 0 : -7055.43
 iteration 12 energy 0 : -7145.56
 E-Slope 0.0106724 iteration 13 energy 0 : -7237.59
 E-Slope 0.00908091 iteration 14 energy 0 : -7321.75
 E-Slope 0.0081803 iteration 15 energy 0 : -7385.88
 E-Slope 0.007516 iteration 16 energy 0 : -7435.12
 E-Slope 0.00687731 iteration 17 energy 0 : -7456.55
 E-Slope 0.00609979 iteration 18 energy 0 : -7437.12
 E-Slope 0.00514241 iteration 19 energy 0 : -7407.47
 E-Slope 0.00424382 iteration 20 energy 0 : -7449.73
 E-Slope 0.00324542 iteration 21 energy 0 : -7419.19
 E-Slope 0.00241161 iteration 22 energy 0 : -7459.97
 E-Slope 0.001582 iteration 23 energy 0 : -7430.61
 E-Slope 0.00100326 iteration 24 energy 0 : -7471.14
 E-Slope 0.000529185 iteration 25 energy 0 : -7444.21
 E-Slope 0.000309847 iteration 26 energy 0 : -7468.95
 E-Slope 0.000173114 iteration 27 energy 0 : -7445.88
 E-Slope 0.000276729 iteration 28 energy 0 : -7490.98
 E-Slope 0.000356533 iteration 29 energy 0 : -7468.12
 E-Slope 0.000390843 iteration 30 energy 0 : -7478.19
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -12647.2
 iteration 2 energy 0 : -12918.6
 iteration 3 energy 0 : -13123.8
 iteration 4 energy 0 : -13302.5
 iteration 5 energy 0 : -13311.5
 iteration 6 energy 0 : -13501.5
 iteration 7 energy 0 : -13512.9
 iteration 8 energy 0 : -13591
 iteration 9 energy 0 : -13557.4
 iteration 10 energy 0 : -13699.3
 iteration 11 energy 0 : -13672.1
 iteration 12 energy 0 : -13719.2
 E-Slope 0.00273164 iteration 13 energy 0 : -13676.1
 E-Slope 0.00220568 iteration 14 energy 0 : -13799.5
 E-Slope 0.00177255 iteration 15 energy 0 : -13761.2
 E-Slope 0.00152209 iteration 16 energy 0 : -13786
 E-Slope 0.00111169 iteration 17 energy 0 : -13742.2
 E-Slope 0.00106696 iteration 18 energy 0 : -13851.4
 E-Slope 0.000891551 iteration 19 energy 0 : -13804.1
 E-Slope 0.000838637 iteration 20 energy 0 : -13850.2
 E-Slope 0.000605009 iteration 21 energy 0 : -13803.2
 E-Slope 0.000697426 iteration 22 energy 0 : -13911.2
 E-Slope 0.000631735 iteration 23 energy 0 : -13865.3
 E-Slope 0.000611126 iteration 24 energy 0 : -13877.3
 E-Slope 0.000418715 iteration 25 energy 0 : -13833.5
 E-Slope 0.000520162 iteration 26 energy 0 : -13930.2
 E-Slope 0.000453182 iteration 27 energy 0 : -13879.4
 E-Slope 0.00048849 iteration 28 energy 0 : -13945.4
 E-Slope 0.000350483 iteration 29 energy 0 : -13896.3
 E-Slope 0.000479609 iteration 30 energy 0 : -13985.5
 E-Slope 0.00042697 iteration 31 energy 0 : -13931.7
 E-Slope 0.000454232 iteration 32 energy 0 : -13959.3
 E-Slope 0.000310086 iteration 33 energy 0 : -13912.3
 E-Slope 0.000429206 iteration 34 energy 0 : -13999.6
 E-Slope 0.000374772 iteration 35 energy 0 : -13947.2
 E-Slope 0.000384331 iteration 36 energy 0 : -13995.6
 E-Slope 0.000232644 iteration 37 energy 0 : -13948.1
 E-Slope 0.000320598 iteration 38 energy 0 : -14026.4
 E-Slope 0.000234552 iteration 39 energy 0 : -13974.4
 E-Slope 0.000293978 iteration 40 energy 0 : -14019.2
 E-Slope 0.000190981 iteration 41 energy 0 : -13972.3
 E-Slope 0.000306174 iteration 42 energy 0 : -14041.7
 E-Slope 0.000248812 iteration 43 energy 0 : -13991.3
 E-Slope 0.000288673 iteration 44 energy 0 : -14041.5
 E-Slope 0.000168823 iteration 45 energy 0 : -13993.8
 E-Slope 0.000256278 iteration 46 energy 0 : -14056.7
 E-Slope 0.000177875 iteration 47 energy 0 : -14007.6
 E-Slope 0.000233278 iteration 48 energy 0 : -14059.3
 E-Slope 0.00013274 iteration 49 energy 0 : -14011.8
 E-Slope 0.000220098 iteration 50 energy 0 : -14068.9
 E-Slope 0.000146858 iteration 51 energy 0 : -14020.9
 E-Slope 0.000208333 iteration 52 energy 0 : -14075.4
 E-Slope 0.000117525 iteration 53 energy 0 : -14028.5
 E-Slope 0.000197254 iteration 54 energy 0 : -14081.8
 E-Slope 0.000122048 iteration 55 energy 0 : -14035
 E-Slope 0.000187412 iteration 56 energy 0 : -14087
 E-Slope 0.000103027 iteration 57 energy 0 : -14041.3
 E-Slope 0.000179745 iteration 58 energy 0 : -14094.1
 E-Slope 0.000104636 iteration 59 energy 0 : -14047.5
 E-Slope 0.000171535 iteration 60 energy 0 : -14098.3
 E-Slope 9.06736e-05 iteration 61 energy 0 : -14052.5
 Converged due to oscillation in optimization  metric 0 bad 27  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -93182.5
 iteration 2 energy 0 : -95472.1
 iteration 3 energy 0 : -97520.7
 iteration 4 energy 0 : -99332.4
 iteration 5 energy 0 : -100779
 iteration 6 energy 0 : -102104
 iteration 7 energy 0 : -103219
 iteration 8 energy 0 : -104225
 iteration 9 energy 0 : -104997
 iteration 10 energy 0 : -105790
 iteration 11 energy 0 : -106478
 iteration 12 energy 0 : -107089
 E-Slope 0.00592624 iteration 13 energy 0 : -107653
 E-Slope 0.00513351 iteration 14 energy 0 : -108190
 E-Slope 0.00449677 iteration 15 energy 0 : -108721
 E-Slope 0.00398616 iteration 16 energy 0 : -109148
 E-Slope 0.00354807 iteration 17 energy 0 : -109506
 E-Slope 0.00317667 iteration 18 energy 0 : -109812
 E-Slope 0.00284411 iteration 19 energy 0 : -110060
 E-Slope 0.00254489 iteration 20 energy 0 : -110271
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2476_08242016_Aug2_Ref_vimp2_2998_03222017_Test_NewCases/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2476_08242016_Aug2_Ref_vimp2_2998_03222017_Test_NewCases/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2476_08242016_Aug2_Ref_vimp2_2998_03222017_Test_NewCases/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2476_08242016_Aug2_Ref_vimp2_2998_03222017_Test_NewCases/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2484_08252016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2617_10262016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2484_08252016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2617_10262016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547784311
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [12.2849, 6.72534, 7.1407]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -0.5806122326293082, -19.559252261856525, 1.0317252685039033]
level 0, iter 276, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.03433053636551635, 0.03827001585096904, 0.03411991885166065, 0.9980945102029058, 1.0620206183774743, 1.0005284583924807, 0.9512689088590213, -0.02722402034099738, -0.010812328996534563, -0.0017971052046442046, 1.231237786974146, -19.336043379645414, -1.0158528344212867]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 29, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.03263901997564422, 0.03912981526751617, 0.03327433436581856, 0.9981464675109918, 1.0604123601206823, 0.9990515970778407, 0.9483099485418338, -0.02905078960147509, -0.010871556178283025, -0.0009055986503286605, 1.2406837082864284, -19.422171886973466, -1.0645765204655264]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 106, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.03226269833166578, 0.038504601920017256, 0.029072826135432966, 0.998314221429225, 1.05957448391335, 0.9994273137692712, 0.9413880036448892, -0.03280858268554777, -0.012350612368776038, 0.0028978019036515466, 1.267918132073141, -19.444233197597438, -0.9577356261034198]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 39, size: fix[40, 41, 32]-mov[40, 41, 32], affine para: [0.03027162061860018, 0.04079170814978891, 0.031122114156806175, 0.9982239626164845, 1.0624320335844522, 1.0023582066022556, 0.9422642485142599, -0.03490381874386952, -0.012380397070914402, 0.005025258400296278, 1.1615330058890536, -19.31954524620225, -1.0252186919596544]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 62, size: fix[79, 82, 43]-mov[79, 82, 39], affine para: [0.035356423634263084, 0.04087367535613215, 0.03439552289665229, 0.9979459975245865, 1.0609656638077665, 0.999745817556148, 0.9388994828983482, -0.03734410690192524, -0.016186898747479823, 0.0031583476081042225, 1.043970574788985, -19.29338133243428, -0.8753350352267415]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 249, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.03948113999343385, -0.0465233858798815, -0.03809209800311516, 0.9974095478893369, 0.9353248310133077, 1.00152173760959, 1.0535555570811745, 0.015116336034875352, 0.047784995186739884, -0.020529115622299858, 0.5398972842072159, 19.45335482914088, -0.5103011855867002]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 209, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.0351786169745348, -0.0490187198729553, -0.03797010808768352, 0.9974557137545433, 0.9330694948479845, 0.9982463130674236, 1.0518319877495108, 0.01794861693431801, 0.05405811979952279, -0.01603863810299197, 0.5494753140197134, 19.304279747154844, -0.29955351668504226]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 101, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.03438056432013814, -0.046834640269891474, -0.03389428771586277, 0.9977352707647722, 0.9361358943172744, 0.9994254805117619, 1.0512270420395786, 0.019167298341720873, 0.05499607278836271, -0.022854950768859482, 0.39066753506723123, 19.431280853099494, -0.337782719877107]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 355, size: fix[40, 41, 32]-mov[40, 41, 32], affine para: [-0.04238088573385671, -0.05099096685867847, -0.04113180054357027, 0.9969513312129509, 0.9314277937580192, 0.9870296240954528, 1.0518949428072049, 0.016598365355961014, 0.06082668671733693, -0.026803799543654437, 0.7695182634156628, 19.083646364532324, -0.5539884083972798]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 185, size: fix[79, 82, 39]-mov[79, 82, 43], affine para: [-0.04439137721320994, -0.051631733676246336, -0.040825928972395654, 0.9968434246310905, 0.936378662693078, 0.9911688748159017, 1.055787728390647, 0.018464455455171756, 0.05918005060830411, -0.0188940708887273, 0.8430063350478594, 19.272947540797126, -0.6519653157137384]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.488309 v2 -0.4856
final [0.035356423634263084, 0.04087367535613215, 0.03439552289665229, 0.9979459975245865, 1.0609656638077665, 0.999745817556148, 0.9388994828983482, -0.03734410690192524, -0.016186898747479823, 0.0031583476081042225, 1.043970574788985, -19.29338133243428, -0.8753350352267415]
outputput affine center: [12.2849, 6.72534, 7.1407]
output affine para: [0.035356423634263084, 0.04087367535613215, 0.03439552289665229, 0.9979459975245865, 1.0609656638077665, 0.999745817556148, 0.9388994828983482, -0.03734410690192524, -0.016186898747479823, 0.0031583476081042225, 1.043970574788985, -19.29338133243428, -0.8753350352267415]
initial measure value (MMI): rval = -0.202957
final measure value (MMI): rval = -0.51347
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -6209.09
 iteration 2 energy 0 : -6569.57
 iteration 3 energy 0 : -6894.36
 iteration 4 energy 0 : -7137.79
 iteration 5 energy 0 : -7316.11
 iteration 6 energy 0 : -7447.8
 iteration 7 energy 0 : -7559.7
 iteration 8 energy 0 : -7651.02
 iteration 9 energy 0 : -7724.32
 iteration 10 energy 0 : -7788.61
 iteration 11 energy 0 : -7849.13
 iteration 12 energy 0 : -7899.6
 E-Slope 0.00861138 iteration 13 energy 0 : -7943.82
 E-Slope 0.00683202 iteration 14 energy 0 : -7982.64
 E-Slope 0.00557233 iteration 15 energy 0 : -8015.01
 E-Slope 0.00465973 iteration 16 energy 0 : -8042.17
 E-Slope 0.00396257 iteration 17 energy 0 : -8066.19
 E-Slope 0.0033878 iteration 18 energy 0 : -8085.95
 E-Slope 0.00289613 iteration 19 energy 0 : -8096.39
 E-Slope 0.00241449 iteration 20 energy 0 : -8085.8
 E-Slope 0.00196037 iteration 21 energy 0 : -8087.63
 E-Slope 0.00156196 iteration 22 energy 0 : -8098.83
 E-Slope 0.00119524 iteration 23 energy 0 : -8094.17
 E-Slope 0.000929549 iteration 24 energy 0 : -8117.52
 E-Slope 0.000695951 iteration 25 energy 0 : -8112.58
 E-Slope 0.000529505 iteration 26 energy 0 : -8119.97
 E-Slope 0.000392914 iteration 27 energy 0 : -8114.49
 E-Slope 0.000348315 iteration 28 energy 0 : -8135.92
 E-Slope 0.000323057 iteration 29 energy 0 : -8130.81
 E-Slope 0.000339925 iteration 30 energy 0 : -8137.35
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -14628.5
 iteration 2 energy 0 : -14756.3
 iteration 3 energy 0 : -14914.1
 iteration 4 energy 0 : -15039.7
 iteration 5 energy 0 : -15153
 iteration 6 energy 0 : -15260.8
 iteration 7 energy 0 : -15364.7
 iteration 8 energy 0 : -15459.9
 iteration 9 energy 0 : -15539.2
 iteration 10 energy 0 : -15538.8
 iteration 11 energy 0 : -15527.1
 iteration 12 energy 0 : -15583.2
 E-Slope 0.00283289 iteration 13 energy 0 : -15599.3
 E-Slope 0.00228141 iteration 14 energy 0 : -15599
 E-Slope 0.00177002 iteration 15 energy 0 : -15589.1
 E-Slope 0.00136913 iteration 16 energy 0 : -15639.9
 E-Slope 0.00101765 iteration 17 energy 0 : -15637.8
 E-Slope 0.000759289 iteration 18 energy 0 : -15657.8
 E-Slope 0.000570394 iteration 19 energy 0 : -15651.1
 E-Slope 0.000471734 iteration 20 energy 0 : -15657.8
 E-Slope 0.000457451 iteration 21 energy 0 : -15668.4
 E-Slope 0.000435062 iteration 22 energy 0 : -15687
 E-Slope 0.00040751 iteration 23 energy 0 : -15720.6
 E-Slope 0.000441276 iteration 24 energy 0 : -15735.5
 E-Slope 0.000451051 iteration 25 energy 0 : -15723.3
 E-Slope 0.000498138 iteration 26 energy 0 : -15775.7
 E-Slope 0.000514083 iteration 27 energy 0 : -15790.7
 E-Slope 0.000544988 iteration 28 energy 0 : -15779.9
 E-Slope 0.000521742 iteration 29 energy 0 : -15768.4
 E-Slope 0.000532568 iteration 30 energy 0 : -15801.9
 E-Slope 0.000469789 iteration 31 energy 0 : -15779.9
 E-Slope 0.000419788 iteration 32 energy 0 : -15808.4
 E-Slope 0.000343241 iteration 33 energy 0 : -15800.5
 E-Slope 0.00026191 iteration 34 energy 0 : -15796.9
 E-Slope 0.000196517 iteration 35 energy 0 : -15788.9
 E-Slope 0.00015188 iteration 36 energy 0 : -15800.3
 E-Slope 6.45742e-05 iteration 37 energy 0 : -15789.1
 Converged due to oscillation in optimization  metric 0 bad 14  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -104917
 iteration 2 energy 0 : -106821
 iteration 3 energy 0 : -109290
 iteration 4 energy 0 : -111175
 iteration 5 energy 0 : -112455
 iteration 6 energy 0 : -113410
 iteration 7 energy 0 : -114228
 iteration 8 energy 0 : -114880
 iteration 9 energy 0 : -115481
 iteration 10 energy 0 : -116054
 iteration 11 energy 0 : -116658
 iteration 12 energy 0 : -117355
 E-Slope 0.00451168 iteration 13 energy 0 : -118029
 E-Slope 0.00383006 iteration 14 energy 0 : -118647
 E-Slope 0.00342269 iteration 15 energy 0 : -119234
 E-Slope 0.00320619 iteration 16 energy 0 : -119803
 E-Slope 0.00308236 iteration 17 energy 0 : -120348
 E-Slope 0.00298245 iteration 18 energy 0 : -120781
 E-Slope 0.00288097 iteration 19 energy 0 : -121162
 E-Slope 0.0027507 iteration 20 energy 0 : -121508
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2484_08252016_Aug1_Ref_vimp2_2617_10262016/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2484_08252016_Aug1_Ref_vimp2_2617_10262016/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2484_08252016_Aug1_Ref_vimp2_2617_10262016/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2484_08252016_Aug1_Ref_vimp2_2617_10262016/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2484_08252016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_676_04252014/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2484_08252016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_676_04252014/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547784405
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [12.2849, 6.72534, 7.1407]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 4.8096898700397634, -23.312165431755904, -12.987868424288603]
level 0, iter 306, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.07953522806853701, 0.06136756420634448, 0.010139471423887318, 0.994889622359541, 1.028039152988491, 0.9648994097919488, 1.0088694669312481, 0.02827482325841026, -0.005322650827831265, -0.05113567673011829, 6.687859015923699, -21.82715033189549, -12.113301886474513]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 180, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.08186588993312151, 0.06323861153453433, 0.008462385709612717, 0.9945990358454727, 1.021899760523864, 0.9644854267234135, 1.0104556565768712, 0.035590699984750264, -0.01176423801854461, -0.06442694999172821, 6.642052310155722, -21.97305179963062, -12.220081041255966]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 142, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.08318716331107867, 0.06266533831635557, 0.011001314114943572, 0.9945008407848115, 1.024559234709744, 0.9661060631930009, 1.0100034338492176, 0.03243579563432312, -0.009316280692029418, -0.07096910380505206, 6.613323477569713, -21.895715154788252, -12.11059700615986]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 118, size: fix[40, 41, 32]-mov[40, 45, 32], affine para: [-0.0855532382099284, 0.05784218254625448, 0.009762586917143545, 0.9946052569973508, 1.0251270723545678, 0.9715923528504818, 1.0140086111876656, 0.03539120172477815, -0.004490436349631275, -0.06562836654859769, 6.730027173102352, -21.90634188627827, -12.234760100037176]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 51, size: fix[79, 82, 43]-mov[79, 89, 45], affine para: [-0.08480609095422365, 0.058918005919128984, 0.008116606578421398, 0.9946208906981737, 1.0217893691240074, 0.9718388933524496, 1.0116337779656306, 0.03634519626932586, -0.0038283695745687, -0.06812042591149904, 6.734897145594693, -21.790537330630535, -12.191342157740733]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 359, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.07671778458113832, -0.06476459580516254, -0.0013861439331627576, 0.9949462333534173, 0.9680276728362681, 1.0252862933414706, 0.972585607900161, -0.01653842339185488, 0.014185434599250266, 0.03828880084584532, -8.30743138049937, 21.124817281963253, 14.313726042835933]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 211, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.07828935326167948, -0.06401945578523036, -0.0016733946006438577, 0.9948715928185614, 0.9701465303847263, 1.0282947052074403, 0.9749287686355845, -0.01795291434102537, 0.01351883496088476, 0.0439764718182576, -8.285197348652797, 21.079737846171852, 14.404623150216668]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 171, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.07791151259632403, -0.06368609693947644, -0.0016694111553570276, 0.9949226554501425, 0.9653914943584013, 1.0320267441262885, 0.9698356735283361, -0.016666074435765673, 0.014546249144539888, 0.049734103881755545, -8.222027317034247, 21.382745376692863, 14.424228071632749]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 253, size: fix[40, 45, 32]-mov[40, 41, 32], affine para: [0.08298159976973037, -0.06418308473553014, 0.003821439102661343, 0.9944747268466266, 0.9698654753969456, 1.0419099929565865, 0.9715203520019913, -0.011705690510680985, 0.016365854933687085, 0.06074002019895933, -8.442889497037998, 21.5094808548233, 14.752419537895813]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 706, size: fix[79, 89, 45]-mov[79, 82, 43], affine para: [0.08509303954994848, -0.0662247479816755, 0.00894279199314311, 0.9941295106002446, 0.9698582270343624, 1.029990600242033, 0.9775105274821081, -0.00730453044655072, 0.017477528774630765, 0.04972280169027054, -8.695071000785076, 21.206282237259586, 14.956170528304725]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.49453 v2 -0.513526
 last params [-0.08480609095422365, 0.058918005919128984, 0.008116606578421398, 0.9946208906981737, 1.0217893691240074, 0.9718388933524496, 1.0116337779656306, 0.03634519626932586, -0.0038283695745687, -0.06812042591149904, 6.734897145594693, -21.790537330630535, -12.191342157740733]
 my params [0.08509303954994848, -0.0662247479816755, 0.00894279199314311, 0.9941295106002446, 0.9698582270343624, 1.029990600242033, 0.9775105274821081, -0.00730453044655072, 0.017477528774630765, 0.04972280169027054, -8.695071000785076, 21.206282237259586, 14.956170528304725]
A=1.02404 0.0168099 0.120698 
-0.0215849 0.965334 0.113427 
-0.133144 -0.174291 0.999219 

rotation R0.991437 -0.0020262 0.130573 
-0.0208977 0.984532 0.173954 
-0.128905 -0.175193 0.976059 

upper R1.03288 0.0189597 -0.0115107 
0 0.980902 -0.0636283 
0 0 1.01079 

s=0.251513 u=-0.0878149 v=0.0652621 w-0.00474643 r=0.993985
m_Rotation from vnl-0.0878149 0.0652621 -0.00474643 0.993985
 new params [-0.0878148842692925, 0.06526206019042112, -0.00474642629189138, 0.9939853525268508, 1.0328838716080206, 0.9809023987006854, 1.0107872349459275, 0.018356114580491426, -0.011144208586011015, -0.06486714344373502, 6.7424364320655865, -22.355249924728586, -12.406118577818937]
outputput affine center: [12.2849, 6.72534, 7.1407]
output affine para: [-0.0878148842692925, 0.06526206019042112, -0.00474642629189138, 0.9939853525268508, 1.0328838716080206, 0.9809023987006854, 1.0107872349459275, 0.018356114580491426, -0.011144208586011015, -0.06486714344373502, 6.7424364320655865, -22.355249924728586, -12.406118577818937]
initial measure value (MMI): rval = -0.231037
final measure value (MMI): rval = -0.504904
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -6383.71
 iteration 2 energy 0 : -6841.48
 iteration 3 energy 0 : -7179.09
 iteration 4 energy 0 : -7412.6
 iteration 5 energy 0 : -7566.1
 iteration 6 energy 0 : -7679.57
 iteration 7 energy 0 : -7770.87
 iteration 8 energy 0 : -7851.35
 iteration 9 energy 0 : -7929.5
 iteration 10 energy 0 : -7997.53
 iteration 11 energy 0 : -8058.08
 iteration 12 energy 0 : -8113.74
 E-Slope 0.0078489 iteration 13 energy 0 : -8171.94
 E-Slope 0.0063382 iteration 14 energy 0 : -8236.13
 E-Slope 0.00540821 iteration 15 energy 0 : -8282.75
 E-Slope 0.00480985 iteration 16 energy 0 : -8320.89
 E-Slope 0.00436303 iteration 17 energy 0 : -8356.28
 E-Slope 0.00399627 iteration 18 energy 0 : -8393.65
 E-Slope 0.00367394 iteration 19 energy 0 : -8430.97
 E-Slope 0.00328761 iteration 20 energy 0 : -8426.4
 E-Slope 0.00283792 iteration 21 energy 0 : -8412.17
 E-Slope 0.0023738 iteration 22 energy 0 : -8415.8
 E-Slope 0.001883 iteration 23 energy 0 : -8410.28
 E-Slope 0.00140059 iteration 24 energy 0 : -8411.62
 E-Slope 0.000969172 iteration 25 energy 0 : -8415.28
 E-Slope 0.000623532 iteration 26 energy 0 : -8414.7
 E-Slope 0.000367589 iteration 27 energy 0 : -8423.3
 E-Slope 0.000168368 iteration 28 energy 0 : -8420.05
 E-Slope 6.75917e-05 iteration 29 energy 0 : -8432.04
 Converged due to oscillation in optimization  metric 0 bad 5  
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -15192.3
 iteration 2 energy 0 : -15445.2
 iteration 3 energy 0 : -15634.2
 iteration 4 energy 0 : -15770
 iteration 5 energy 0 : -15880.4
 iteration 6 energy 0 : -15975.7
 iteration 7 energy 0 : -16064.3
 iteration 8 energy 0 : -16096.1
 iteration 9 energy 0 : -16111
 iteration 10 energy 0 : -16163.7
 iteration 11 energy 0 : -16159.6
 iteration 12 energy 0 : -16221.3
 E-Slope 0.0022699 iteration 13 energy 0 : -16207
 E-Slope 0.00178432 iteration 14 energy 0 : -16261.7
 E-Slope 0.00139388 iteration 15 energy 0 : -16246.4
 E-Slope 0.0011156 iteration 16 energy 0 : -16277.3
 E-Slope 0.000879176 iteration 17 energy 0 : -16263.9
 E-Slope 0.00070329 iteration 18 energy 0 : -16267.4
 E-Slope 0.000611648 iteration 19 energy 0 : -16286
 E-Slope 0.00051105 iteration 20 energy 0 : -16281.4
 E-Slope 0.000397891 iteration 21 energy 0 : -16285.4
 E-Slope 0.000322558 iteration 22 energy 0 : -16284.9
 E-Slope 0.000223123 iteration 23 energy 0 : -16288.3
 E-Slope 0.000194184 iteration 24 energy 0 : -16295.9
 E-Slope 0.000123851 iteration 25 energy 0 : -16289
 E-Slope 0.000123218 iteration 26 energy 0 : -16297.4
 E-Slope 8.87737e-05 iteration 27 energy 0 : -16292.7
 Converged due to oscillation in optimization  metric 0 bad 8  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -110588
 iteration 2 energy 0 : -112859
 iteration 3 energy 0 : -115113
 iteration 4 energy 0 : -117040
 iteration 5 energy 0 : -118518
 iteration 6 energy 0 : -119730
 iteration 7 energy 0 : -120727
 iteration 8 energy 0 : -121638
 iteration 9 energy 0 : -122446
 iteration 10 energy 0 : -123140
 iteration 11 energy 0 : -123777
 iteration 12 energy 0 : -124342
 E-Slope 0.00488628 iteration 13 energy 0 : -124889
 E-Slope 0.00416057 iteration 14 energy 0 : -125403
 E-Slope 0.00361156 iteration 15 energy 0 : -125911
 E-Slope 0.00321049 iteration 16 energy 0 : -126380
 E-Slope 0.00289863 iteration 17 energy 0 : -126796
 E-Slope 0.0026418 iteration 18 energy 0 : -127149
 E-Slope 0.0024095 iteration 19 energy 0 : -127430
 E-Slope 0.00219528 iteration 20 energy 0 : -127662
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2484_08252016_Aug2_Ref_vimp2_676_04252014/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2484_08252016_Aug2_Ref_vimp2_676_04252014/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2484_08252016_Aug2_Ref_vimp2_676_04252014/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2484_08252016_Aug2_Ref_vimp2_676_04252014/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2485_08252016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_702_04302014/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2485_08252016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_702_04302014/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547784501
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [14.8665, 6.57469, 5.00718]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -5.206909075801681, -24.386419152514353, 20.1909772468831]
level 0, iter 1272, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.047258688954248375, -0.0006224997201931984, -0.004296903730500469, 0.9988732479302641, 0.9545896800401076, 1.0327667037146921, 1.1780007644670354, 0.032719296351274754, 0.015849664520196607, 0.026803264714977605, -3.2898748251412853, -24.980254364019334, 17.398241333955696]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 29, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.045224870516748734, 0.0022067792359020855, -0.00677422599205642, 0.9989514257832339, 0.9478876817134558, 1.0246720927741195, 1.1715459242692665, 0.03693232045143272, 0.0159208424703834, 0.02845137732083248, -3.1950901731683046, -24.967355624399957, 17.42005690619617]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 138, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.04923680961427377, -0.0026025167332637093, 0.0033535381211970312, 0.9987781121288805, 0.9512481703135383, 1.024768654044, 1.1783025624282077, 0.03980134737916358, 0.021707037183233868, 0.029267618137437845, -3.248284876645448, -24.891812487198656, 17.574307255447568]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 43, size: fix[40, 41, 32]-mov[39, 42, 32], affine para: [0.04877880217636451, -0.0014555452376377863, -0.0008859047374162924, 0.9988081522590295, 0.9465650251574192, 1.0169345170716855, 1.1720690501565911, 0.04129704889271951, 0.023403022045201897, 0.030985858480145952, -3.165602213671289, -25.009521361434388, 17.458716574496933]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 45, size: fix[80, 82, 44]-mov[77, 84, 37], affine para: [0.04674961240718515, -0.0028618417403463983, -0.005891435977457603, 0.9988851658643022, 0.9475112496615918, 1.0189373132530535, 1.17642158906446, 0.03796375301380932, 0.019976557959076793, 0.03292780909340951, -3.3521797590504807, -24.839936110932005, 17.347171196867087]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 767, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.04548894874983719, -0.0007021647918046803, 0.0015177953387326114, 0.9989634421757134, 1.0436948437031799, 0.9647381793185613, 0.8449651838834323, -0.04009776752446856, -0.013020016580499059, -0.01606753336509805, 2.427301390584199, 22.791584709983756, -16.920695056566917]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 262, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.04886225589419785, 0.0013039197678335105, -0.006492579526531802, 0.9987835732295866, 1.045766365707521, 0.9842207570555259, 0.8539507747328025, -0.04852727898979148, -0.021536905743060674, -0.004876762047823887, 2.6835216575019585, 22.955898732246887, -17.349385854561966]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 212, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.045988059374909, -0.002516211662084672, -0.006067913246586084, 0.9989203909734916, 1.042753931337616, 0.97171280707956, 0.8477644953534385, -0.047363236865948406, -0.010493300351195837, -0.007158503279739816, 2.6680744214632393, 22.823116703454748, -17.145632781430464]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 309, size: fix[39, 42, 32]-mov[40, 41, 32], affine para: [-0.04880720154927071, -0.004382770704283957, -0.0012968035538366276, 0.9987977606594967, 1.0454663787177585, 0.9687662207528944, 0.8475573112956016, -0.04679191458766705, -0.007956689969908535, -0.013101740304500715, 2.4982619860306006, 22.83982159588118, -17.182982348267622]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 485, size: fix[77, 84, 37]-mov[80, 82, 44], affine para: [-0.05069444575178574, -0.0017240955064750335, 0.0023208182000953328, 0.9987100252162716, 1.0472121520294775, 0.9559898695618105, 0.848853680168081, -0.05006536865820521, -0.012126037772758383, -0.0342001585954621, 2.321106225700638, 22.834788258790603, -17.268525698578397]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.402381 v2 -0.402774
 last params [0.04674961240718515, -0.0028618417403463983, -0.005891435977457603, 0.9988851658643022, 0.9475112496615918, 1.0189373132530535, 1.17642158906446, 0.03796375301380932, 0.019976557959076793, 0.03292780909340951, -3.3521797590504807, -24.839936110932005, 17.347171196867087]
 my params [-0.05069444575178574, -0.0017240955064750335, 0.0023208182000953328, 0.9987100252162716, 1.0472121520294775, 0.9559898695618105, 0.848853680168081, -0.05006536865820521, -0.012126037772758383, -0.0342001585954621, 2.321106225700638, 22.834788258790603, -17.268525698578397]
A=0.954607 0.0583446 0.0139789 
-0.00481443 1.04473 -0.0658455 
-0.00433414 0.119279 1.172 

rotation R0.999977 0.00552653 0.00393759 
-0.00504325 0.993508 -0.113651 
-0.00454013 0.113629 0.993513 

upper R0.954629 0.0525329 0.00898963 
0 1.05182 0.0678318 
0 0 1.17193 

s=0.250407 u=0.0569126 v=0.00212288 w-0.00264675 r=0.998373
m_Rotation from vnl0.0569126 0.00212288 -0.00264675 0.998373
 new params [0.05691256630271156, 0.002122883847717471, -0.0026467498077081737, 0.9983734010261212, 0.9546287675931601, 1.0518212518154515, 1.1719328872058759, 0.05502969583378856, 0.009416884214114756, 0.064489849579704, -3.306636379399818, -24.982018210774854, 17.52502293588051]
outputput affine center: [14.8665, 6.57469, 5.00718]
output affine para: [0.05691256630271156, 0.002122883847717471, -0.0026467498077081737, 0.9983734010261212, 0.9546287675931601, 1.0518212518154515, 1.1719328872058759, 0.05502969583378856, 0.009416884214114756, 0.064489849579704, -3.306636379399818, -24.982018210774854, 17.52502293588051]
initial measure value (MMI): rval = -0.165727
final measure value (MMI): rval = -0.425241
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -4334.99
 iteration 2 energy 0 : -4794.07
 iteration 3 energy 0 : -5127.72
 iteration 4 energy 0 : -5373.52
 iteration 5 energy 0 : -5577.96
 iteration 6 energy 0 : -5785.55
 iteration 7 energy 0 : -5956.61
 iteration 8 energy 0 : -6110
 iteration 9 energy 0 : -6231.57
 iteration 10 energy 0 : -6345.23
 iteration 11 energy 0 : -6444.54
 iteration 12 energy 0 : -6537.97
 E-Slope 0.015488 iteration 13 energy 0 : -6634.5
 E-Slope 0.013249 iteration 14 energy 0 : -6722.92
 E-Slope 0.011615 iteration 15 energy 0 : -6811.77
 E-Slope 0.0103076 iteration 16 energy 0 : -6891.92
 E-Slope 0.00921474 iteration 17 energy 0 : -6964.37
 E-Slope 0.00835896 iteration 18 energy 0 : -7025.16
 E-Slope 0.00764025 iteration 19 energy 0 : -7078.82
 E-Slope 0.00701045 iteration 20 energy 0 : -7122.57
 E-Slope 0.0063826 iteration 21 energy 0 : -7158.41
 E-Slope 0.00572588 iteration 22 energy 0 : -7178.67
 E-Slope 0.00496683 iteration 23 energy 0 : -7173.42
 E-Slope 0.00410884 iteration 24 energy 0 : -7157.76
 E-Slope 0.00323249 iteration 25 energy 0 : -7148
 E-Slope 0.00248267 iteration 26 energy 0 : -7179.62
 E-Slope 0.00178168 iteration 27 energy 0 : -7167.79
 E-Slope 0.00121209 iteration 28 energy 0 : -7176.8
 E-Slope 0.000739388 iteration 29 energy 0 : -7167.83
 E-Slope 0.000487402 iteration 30 energy 0 : -7203.8
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -13017.1
 iteration 2 energy 0 : -13215.7
 iteration 3 energy 0 : -13397.6
 iteration 4 energy 0 : -13525.1
 iteration 5 energy 0 : -13626.7
 iteration 6 energy 0 : -13702.4
 iteration 7 energy 0 : -13739.1
 iteration 8 energy 0 : -13791.4
 iteration 9 energy 0 : -13805.7
 iteration 10 energy 0 : -13848.7
 iteration 11 energy 0 : -13854.7
 iteration 12 energy 0 : -13868.8
 E-Slope 0.00221464 iteration 13 energy 0 : -13876.1
 E-Slope 0.00163151 iteration 14 energy 0 : -13882.4
 E-Slope 0.00122909 iteration 15 energy 0 : -13901.3
 E-Slope 0.000924625 iteration 16 energy 0 : -13900.5
 E-Slope 0.000733793 iteration 17 energy 0 : -13921.9
 E-Slope 0.000602148 iteration 18 energy 0 : -13922.5
 E-Slope 0.000508972 iteration 19 energy 0 : -13941.8
 E-Slope 0.000450693 iteration 20 energy 0 : -13938.3
 E-Slope 0.000408806 iteration 21 energy 0 : -13957.7
 E-Slope 0.000394255 iteration 22 energy 0 : -13953.6
 E-Slope 0.000377834 iteration 23 energy 0 : -13965
 E-Slope 0.000349872 iteration 24 energy 0 : -13961.1
 E-Slope 0.000327408 iteration 25 energy 0 : -13974
 E-Slope 0.000284269 iteration 26 energy 0 : -13969.5
 E-Slope 0.000271007 iteration 27 energy 0 : -13984.7
 E-Slope 0.000227369 iteration 28 energy 0 : -13977.9
 E-Slope 0.000224933 iteration 29 energy 0 : -13995.8
 E-Slope 0.000198156 iteration 30 energy 0 : -13989.6
 E-Slope 0.000207096 iteration 31 energy 0 : -14004.4
 E-Slope 0.000189677 iteration 32 energy 0 : -14000.1
 E-Slope 0.000200495 iteration 33 energy 0 : -14009.2
 E-Slope 0.00017862 iteration 34 energy 0 : -14000.2
 E-Slope 0.000175647 iteration 35 energy 0 : -14010
 E-Slope 0.000142545 iteration 36 energy 0 : -14001.7
 E-Slope 0.000141345 iteration 37 energy 0 : -14017.6
 E-Slope 0.000118695 iteration 38 energy 0 : -14014.5
 E-Slope 0.000130743 iteration 39 energy 0 : -14028.9
 E-Slope 0.000114404 iteration 40 energy 0 : -14022.6
 E-Slope 0.000134043 iteration 41 energy 0 : -14034.9
 E-Slope 0.00013008 iteration 42 energy 0 : -14031.5
 E-Slope 0.000155799 iteration 43 energy 0 : -14043.6
 E-Slope 0.000155933 iteration 44 energy 0 : -14037.9
 E-Slope 0.000174791 iteration 45 energy 0 : -14048.9
 E-Slope 0.000163354 iteration 46 energy 0 : -14045.2
 E-Slope 0.000168353 iteration 47 energy 0 : -14054.3
 E-Slope 0.000142701 iteration 48 energy 0 : -14049.6
 E-Slope 0.000147395 iteration 49 energy 0 : -14061.7
 E-Slope 0.000129782 iteration 50 energy 0 : -14056.6
 E-Slope 0.00013677 iteration 51 energy 0 : -14065.3
 E-Slope 0.000121616 iteration 52 energy 0 : -14062.9
 E-Slope 0.000132807 iteration 53 energy 0 : -14074.8
 E-Slope 0.000122927 iteration 54 energy 0 : -14070.2
 E-Slope 0.000140332 iteration 55 energy 0 : -14082.9
 E-Slope 0.00013148 iteration 56 energy 0 : -14077.3
 E-Slope 0.000150643 iteration 57 energy 0 : -14091.9
 E-Slope 0.000144549 iteration 58 energy 0 : -14085.5
 E-Slope 0.000156246 iteration 59 energy 0 : -14095.5
 E-Slope 0.000142217 iteration 60 energy 0 : -14090
 E-Slope 0.000148632 iteration 61 energy 0 : -14098.8
 E-Slope 0.000131011 iteration 62 energy 0 : -14094.3
 E-Slope 0.000127293 iteration 63 energy 0 : -14101.4
 E-Slope 0.00010509 iteration 64 energy 0 : -14097.2
 E-Slope 0.00010515 iteration 65 energy 0 : -14105.8
 E-Slope 8.66055e-05 iteration 66 energy 0 : -14102.6
 Converged due to oscillation in optimization  metric 0 bad 25  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -96823
 iteration 2 energy 0 : -98724.8
 iteration 3 energy 0 : -100275
 iteration 4 energy 0 : -101367
 iteration 5 energy 0 : -102183
 iteration 6 energy 0 : -102912
 iteration 7 energy 0 : -103590
 iteration 8 energy 0 : -104332
 iteration 9 energy 0 : -105251
 iteration 10 energy 0 : -106136
 iteration 11 energy 0 : -107016
 iteration 12 energy 0 : -107837
 E-Slope 0.00466333 iteration 13 energy 0 : -108497
 E-Slope 0.00440861 iteration 14 energy 0 : -109098
 E-Slope 0.00423596 iteration 15 energy 0 : -109557
 E-Slope 0.00405578 iteration 16 energy 0 : -109955
 E-Slope 0.00381823 iteration 17 energy 0 : -110303
 E-Slope 0.00351694 iteration 18 energy 0 : -110620
 E-Slope 0.00315009 iteration 19 energy 0 : -110871
 E-Slope 0.00274923 iteration 20 energy 0 : -111100
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2485_08252016_Aug1_Ref_vimp2_702_04302014/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2485_08252016_Aug1_Ref_vimp2_702_04302014/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2485_08252016_Aug1_Ref_vimp2_702_04302014/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2485_08252016_Aug1_Ref_vimp2_702_04302014/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2485_08252016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2587_10132016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2485_08252016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2587_10132016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547784627
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [14.8665, 6.57469, 5.00718]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -4.15490909095878, 7.572046483458458, 3.501026931340168]
level 0, iter 2298, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.0010392701039783213, 0.009368598473831561, 0.029285489862940363, 0.9995266426482962, 0.8940446966383848, 1.025997877430682, 1.0803618109382702, 0.024395654258843064, -0.05540228766637049, 0.15612610202608715, -1.6029122938262126, 7.762909610915667, 0.22538222100487795]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 68, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.0034413888932905844, 0.011230017384853446, 0.03155560501982911, 0.9994329829177411, 0.8895022570232873, 1.0174437942574484, 1.0741005703469935, 0.0255058170471473, -0.05255046697786201, 0.16587787281946326, -1.6024077746577166, 7.8955231977700535, 0.15386486072773897]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 313, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.0029384509186315914, 0.010759250789531837, 0.031474448511552594, 0.9994423260596583, 0.892058561570878, 1.0012724275594094, 1.0670374752057723, 0.02942430209594178, -0.05263702749194759, 0.18248827839203388, -1.600415958582979, 7.896903146820847, 0.18352382329413255]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 62, size: fix[40, 41, 32]-mov[37, 38, 32], affine para: [0.010423185737307293, 0.013997612398264482, 0.037428518599484005, 0.9991469011320014, 0.894961773505774, 1.0089793900164041, 1.065986637380128, 0.02828919360160736, -0.0556744271727529, 0.18580101801916007, -1.5489746059253615, 7.925348974970398, 0.234765925208977]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 153, size: fix[80, 82, 44]-mov[73, 76, 40], affine para: [0.005744898943635653, 0.010406384657423415, 0.031078200615137254, 0.9994462710626392, 0.8886077735778377, 1.0113613333707698, 1.0624358330319932, 0.030186571295677263, -0.06007744446140114, 0.19457121839644884, -1.6647006720527249, 8.242210772134335, 0.1649971739225389]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 2195, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.0030979473774215348, -0.017316459984135953, -0.041639523147676064, 0.9989778241020663, 1.1034620875801826, 0.9689885383768873, 0.9194278081838447, -0.0344573473377556, 0.058745367591588, -0.10141591972675777, 1.4099636078731084, -7.424803564596669, -0.2835496054330481]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 445, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.008400278990784877, -0.016955456706310223, -0.05049097256118603, 0.9985452465915517, 1.1187493742063965, 0.9854382755522164, 0.9251422535024341, -0.048874054790867545, 0.06201595027085078, -0.12106036195470872, 1.5334902914493476, -7.279418419141781, -0.5128197878026611]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 117, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.008887250823985067, -0.01650062368665613, -0.0502066144994769, 0.9985629885246317, 1.1223233578526455, 0.9907491545728414, 0.9251989058404714, -0.04785120414906935, 0.06379718337653739, -0.12276895439459516, 1.4551979709251623, -7.280652559357885, -0.4255407150351946]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 344, size: fix[37, 38, 32]-mov[40, 41, 32], affine para: [-0.006558198971165346, -0.012621663029882728, -0.04724301891035114, 0.9987821488256841, 1.1182396580436385, 0.9867322924358579, 0.9247466191088832, -0.051258531010048305, 0.05889614661347005, -0.1334738341922754, 1.581015043376244, -7.577173875513394, -0.21366378466843625]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 536, size: fix[73, 76, 40]-mov[80, 82, 44], affine para: [-0.004008350827836899, -0.0170126022902207, -0.048466187623645594, 0.9986718846268705, 1.1122297276749333, 0.9969092798190701, 0.9233934101281597, -0.057486839048160834, 0.06842302951949951, -0.14029839580562412, 1.6572795216007237, -7.211548774853257, 0.1100855182825987]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.316801 v2 -0.317406
 last params [0.005744898943635653, 0.010406384657423415, 0.031078200615137254, 0.9994462710626392, 0.8886077735778377, 1.0113613333707698, 1.0624358330319932, 0.030186571295677263, -0.06007744446140114, 0.19457121839644884, -1.6647006720527249, 8.242210772134335, 0.1649971739225389]
 my params [-0.004008350827836899, -0.0170126022902207, -0.048466187623645594, 0.9986718846268705, 1.1122297276749333, 0.9969092798190701, 0.9233934101281597, -0.057486839048160834, 0.06842302951949951, -0.14029839580562412, 1.6572795216007237, -7.211548774853257, 0.1100855182825987]
A=0.902136 -0.0301518 -0.0347912 
0.0921368 0.999823 0.145468 
-0.0363783 0.0104561 1.0823 

rotation R0.994025 -0.101062 0.0412288 
0.101522 0.994791 -0.00920531 
-0.0400837 0.0133359 0.999107 

upper R0.907558 0.0711127 -0.0631977 
0 0.997801 0.16266 
0 0 1.07856 

s=0.250378 u=0.00564384 v=0.0203589 w0.0507225 r=0.998489
m_Rotation from vnl0.00564384 0.0203589 0.0507225 0.998489
 new params [0.005643835108936433, 0.020358870943684246, 0.05072250320408348, 0.9984893044834647, 0.907558470739793, 0.9978008592844843, 1.078560729390575, 0.0783560904052496, -0.06963488369411505, 0.16301856931797226, -1.708703328761177, 7.0415587118328515, 0.016548335877710763]
outputput affine center: [14.8665, 6.57469, 5.00718]
output affine para: [0.005643835108936433, 0.020358870943684246, 0.05072250320408348, 0.9984893044834647, 0.907558470739793, 0.9978008592844843, 1.078560729390575, 0.0783560904052496, -0.06963488369411505, 0.16301856931797226, -1.708703328761177, 7.0415587118328515, 0.016548335877710763]
initial measure value (MMI): rval = -0.149623
final measure value (MMI): rval = -0.322403
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -4203.61
 iteration 2 energy 0 : -4535.9
 iteration 3 energy 0 : -4826.88
 iteration 4 energy 0 : -5060.88
 iteration 5 energy 0 : -5257.41
 iteration 6 energy 0 : -5430.99
 iteration 7 energy 0 : -5585.36
 iteration 8 energy 0 : -5732.15
 iteration 9 energy 0 : -5874.29
 iteration 10 energy 0 : -6009.31
 iteration 11 energy 0 : -6116.38
 iteration 12 energy 0 : -6205.04
 E-Slope 0.0158554 iteration 13 energy 0 : -6271.27
 E-Slope 0.0136645 iteration 14 energy 0 : -6334.43
 E-Slope 0.0118968 iteration 15 energy 0 : -6397.53
 E-Slope 0.0104169 iteration 16 energy 0 : -6463.22
 E-Slope 0.00918284 iteration 17 energy 0 : -6537.37
 E-Slope 0.00817783 iteration 18 energy 0 : -6613.43
 E-Slope 0.00739469 iteration 19 energy 0 : -6693.42
 E-Slope 0.00682004 iteration 20 energy 0 : -6766.6
 E-Slope 0.0064599 iteration 21 energy 0 : -6839.39
 E-Slope 0.00630423 iteration 22 energy 0 : -6912.51
 E-Slope 0.00624813 iteration 23 energy 0 : -6979.83
 E-Slope 0.0061878 iteration 24 energy 0 : -7031.61
 E-Slope 0.00594994 iteration 25 energy 0 : -7046.36
 E-Slope 0.00542391 iteration 26 energy 0 : -7018.71
 E-Slope 0.00475234 iteration 27 energy 0 : -7026.67
 E-Slope 0.00394761 iteration 28 energy 0 : -7022.85
 E-Slope 0.00311168 iteration 29 energy 0 : -7028.15
 E-Slope 0.00230039 iteration 30 energy 0 : -7032.19
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -12552.3
 iteration 2 energy 0 : -12788.4
 iteration 3 energy 0 : -12988.5
 iteration 4 energy 0 : -13175.7
 iteration 5 energy 0 : -13344.3
 iteration 6 energy 0 : -13389.1
 iteration 7 energy 0 : -13473.2
 iteration 8 energy 0 : -13503.5
 iteration 9 energy 0 : -13554.9
 iteration 10 energy 0 : -13582.7
 iteration 11 energy 0 : -13614.5
 iteration 12 energy 0 : -13640.3
 E-Slope 0.00299123 iteration 13 energy 0 : -13660.1
 E-Slope 0.00229071 iteration 14 energy 0 : -13685.6
 E-Slope 0.00174835 iteration 15 energy 0 : -13697.2
 E-Slope 0.00139593 iteration 16 energy 0 : -13720.6
 E-Slope 0.00120734 iteration 17 energy 0 : -13727.5
 E-Slope 0.00103284 iteration 18 energy 0 : -13749.7
 E-Slope 0.000914499 iteration 19 energy 0 : -13752.3
 E-Slope 0.000809759 iteration 20 energy 0 : -13774.8
 E-Slope 0.000723138 iteration 21 energy 0 : -13774.3
 E-Slope 0.000658184 iteration 22 energy 0 : -13795.5
 E-Slope 0.00059218 iteration 23 energy 0 : -13794.6
 E-Slope 0.000555396 iteration 24 energy 0 : -13816.7
 E-Slope 0.000502028 iteration 25 energy 0 : -13812.5
 E-Slope 0.000482842 iteration 26 energy 0 : -13834
 E-Slope 0.000438742 iteration 27 energy 0 : -13828.8
 E-Slope 0.000431024 iteration 28 energy 0 : -13851
 E-Slope 0.000393122 iteration 29 energy 0 : -13844.5
 E-Slope 0.000394091 iteration 30 energy 0 : -13867.3
 E-Slope 0.000361234 iteration 31 energy 0 : -13860.8
 E-Slope 0.000369184 iteration 32 energy 0 : -13883.3
 E-Slope 0.000336356 iteration 33 energy 0 : -13873.8
 E-Slope 0.000344992 iteration 34 energy 0 : -13896.7
 E-Slope 0.000311829 iteration 35 energy 0 : -13885.9
 E-Slope 0.000323206 iteration 36 energy 0 : -13908.9
 E-Slope 0.00028751 iteration 37 energy 0 : -13896.6
 E-Slope 0.000296988 iteration 38 energy 0 : -13919.5
 E-Slope 0.000260293 iteration 39 energy 0 : -13907.6
 E-Slope 0.000270776 iteration 40 energy 0 : -13929.9
 E-Slope 0.000234433 iteration 41 energy 0 : -13917.7
 E-Slope 0.000248246 iteration 42 energy 0 : -13940.3
 E-Slope 0.000215642 iteration 43 energy 0 : -13927.2
 E-Slope 0.000233524 iteration 44 energy 0 : -13949.4
 E-Slope 0.00020092 iteration 45 energy 0 : -13935.7
 E-Slope 0.000220254 iteration 46 energy 0 : -13957.8
 E-Slope 0.000188261 iteration 47 energy 0 : -13944.3
 E-Slope 0.000207894 iteration 48 energy 0 : -13965.5
 E-Slope 0.000174865 iteration 49 energy 0 : -13951.8
 E-Slope 0.000194862 iteration 50 energy 0 : -13973.5
 E-Slope 0.000164546 iteration 51 energy 0 : -13960.5
 E-Slope 0.000183314 iteration 52 energy 0 : -13979.5
 E-Slope 0.000152551 iteration 53 energy 0 : -13966.7
 E-Slope 0.000172399 iteration 54 energy 0 : -13986
 E-Slope 0.000143811 iteration 55 energy 0 : -13974.4
 E-Slope 0.000164956 iteration 56 energy 0 : -13993
 E-Slope 0.000136845 iteration 57 energy 0 : -13981
 E-Slope 0.000158712 iteration 58 energy 0 : -13999.6
 E-Slope 0.000132076 iteration 59 energy 0 : -13987.6
 E-Slope 0.000153549 iteration 60 energy 0 : -14005.6
 E-Slope 0.000128813 iteration 61 energy 0 : -13995.2
 E-Slope 0.000151582 iteration 62 energy 0 : -14012.2
 E-Slope 0.000129655 iteration 63 energy 0 : -14001.9
 E-Slope 0.000150956 iteration 64 energy 0 : -14018.6
 E-Slope 0.000127763 iteration 65 energy 0 : -14008.2
 E-Slope 0.000147209 iteration 66 energy 0 : -14024.2
 E-Slope 0.000126287 iteration 67 energy 0 : -14015.3
 E-Slope 0.000145786 iteration 68 energy 0 : -14030.4
 E-Slope 0.000126377 iteration 69 energy 0 : -14022.8
 E-Slope 0.00014706 iteration 70 energy 0 : -14037.8
 E-Slope 0.000128008 iteration 71 energy 0 : -14029.6
 E-Slope 0.000146329 iteration 72 energy 0 : -14043.3
 E-Slope 0.000128202 iteration 73 energy 0 : -14035.9
 E-Slope 0.000145003 iteration 74 energy 0 : -14048.9
 E-Slope 0.000127822 iteration 75 energy 0 : -14042.9
 E-Slope 0.000141248 iteration 76 energy 0 : -14053.3
 E-Slope 0.000123359 iteration 77 energy 0 : -14049
 E-Slope 0.000133179 iteration 78 energy 0 : -14057.9
 E-Slope 0.000114687 iteration 79 energy 0 : -14053.7
 E-Slope 0.000121787 iteration 80 energy 0 : -14061.7
 E-Slope 0.000104494 iteration 81 energy 0 : -14058.4
 E-Slope 0.000112183 iteration 82 energy 0 : -14065.7
 E-Slope 9.70662e-05 iteration 83 energy 0 : -14063.6
 Converged due to oscillation in optimization  metric 0 bad 32  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -89669
 iteration 2 energy 0 : -91584
 iteration 3 energy 0 : -93558.3
 iteration 4 energy 0 : -95363.5
 iteration 5 energy 0 : -97018.8
 iteration 6 energy 0 : -98421.1
 iteration 7 energy 0 : -99629.2
 iteration 8 energy 0 : -100678
 iteration 9 energy 0 : -101579
 iteration 10 energy 0 : -102364
 iteration 11 energy 0 : -103086
 iteration 12 energy 0 : -103791
 E-Slope 0.00654881 iteration 13 energy 0 : -104446
 E-Slope 0.00574514 iteration 14 energy 0 : -105104
 E-Slope 0.00508579 iteration 15 energy 0 : -105766
 E-Slope 0.0045464 iteration 16 energy 0 : -106296
 E-Slope 0.00411601 iteration 17 energy 0 : -106763
 E-Slope 0.00376133 iteration 18 energy 0 : -107188
 E-Slope 0.00345432 iteration 19 energy 0 : -107556
 E-Slope 0.00317901 iteration 20 energy 0 : -107905
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2485_08252016_Aug2_Ref_vimp2_2587_10132016_Test_NewCases/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2485_08252016_Aug2_Ref_vimp2_2587_10132016_Test_NewCases/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2485_08252016_Aug2_Ref_vimp2_2587_10132016_Test_NewCases/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2485_08252016_Aug2_Ref_vimp2_2587_10132016_Test_NewCases/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2499_08302016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2587_10132016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2499_08302016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2587_10132016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547784781
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [13.9079, 10.8719, 4.79209]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -3.044621766719974, 3.113246471743315, 3.7491960985866797]
level 0, iter 236, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.036241183581344455, 0.006768086758085752, 0.02432943241577091, 0.9990239478273705, 0.9710762790008278, 1.0120657778916105, 1.0103431273258998, 0.0006173816955819462, -0.029399063814448272, 0.02898574425089948, -1.1920197210835166, 4.556251925926992, 0.5552865907251759]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 169, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.035432593645170755, 0.0077961185765352695, 0.02910150380366613, 0.9989178416261679, 0.970038162581284, 1.014349521403225, 1.0106305557881083, 0.009356868218958713, -0.04088834314562887, 0.032477902285661796, -1.1610335449018025, 4.58490215120289, 0.602546856951251]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 113, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.03439984430918473, 0.011792234154885214, 0.025589409833238826, 0.9990108988542251, 0.9735228934397891, 1.0172537800847863, 1.0032202470730438, 0.005340373500640228, -0.043356596473763075, 0.0352697328042871, -1.1592699903794865, 4.43864309524515, 0.6426261180402134]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 128, size: fix[38, 40, 32]-mov[37, 38, 32], affine para: [-0.03753827052896737, 0.01160102347491469, 0.022518414315938682, 0.9989740815039819, 0.9729054373455173, 1.0115520901036406, 1.005205673505088, 0.0014206735488770511, -0.04627986731161825, 0.03669198029282848, -1.1792657771838881, 4.411994675193685, 0.5171759402415212]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 61, size: fix[75, 79, 42]-mov[73, 76, 40], affine para: [-0.036269479308066656, 0.01070678678432427, 0.02392615357786, 0.9989982125922174, 0.9688172526588954, 1.0101760629080017, 1.0025889037904014, 0.0013466682379576868, -0.04802684153352683, 0.039267390034072196, -1.1971381427049876, 4.5737677890985164, 0.5879435444071742]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 217, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.04130439320865683, -0.006485302499639915, -0.022539812178045415, 0.9988712854117547, 1.025097172878183, 0.9791163324718495, 0.9866603456510185, 0.004700265030348591, 0.027647935300728035, -0.023655218188721888, 0.9702588728649439, -4.424187697648684, -0.8093743231408355]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 100, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.038336279295174316, -0.009362416251549589, -0.025870946390964874, 0.9988860640656524, 1.0274892323430416, 0.9756104205892109, 0.9925774020688635, -0.0014732993573141522, 0.036195804076540015, -0.02440302539913138, 0.9312292033413877, -4.377558737738933, -0.9089214475074459]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 40, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.03894913310072366, -0.009052676232991176, -0.028048496960066126, 0.9988064356530769, 1.02459860237426, 0.9735446795422349, 0.9926592902953363, -0.0030315110492258545, 0.03785856659495244, -0.025652776429230237, 0.94589112858959, -4.448758300738451, -0.9386682106589491]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 89, size: fix[37, 38, 32]-mov[38, 40, 32], affine para: [0.03574571065381859, -0.010868678332781097, -0.025484345069718636, 0.9989768086184581, 1.0285800189630991, 0.9680696583947559, 0.9906812123160542, -0.005303954566358036, 0.04293210293881042, -0.026983557548769427, 1.0145069411148229, -4.253534645178602, -0.8444242927013259]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 244, size: fix[73, 76, 40]-mov[75, 79, 42], affine para: [0.03810803418461314, -0.009456204574571173, -0.026315708011941042, 0.9988822960877114, 1.0227605755412543, 0.9716431519182864, 0.9935332476581088, -0.011709093866767533, 0.04376756511879315, -0.02502317996921722, 0.7951154441090702, -4.505235024082858, -0.962637260555846]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.494742 v2 -0.500876
 last params [-0.036269479308066656, 0.01070678678432427, 0.02392615357786, 0.9989982125922174, 0.9688172526588954, 1.0101760629080017, 1.0025889037904014, 0.0013466682379576868, -0.04802684153352683, 0.039267390034072196, -1.1971381427049876, 4.5737677890985164, 0.5879435444071742]
 my params [0.03810803418461314, -0.009456204574571173, -0.026315708011941042, 0.9988822960877114, 1.0227605755412543, 0.9716431519182864, 0.9935332476581088, -0.011709093866767533, 0.04376756511879315, -0.02502317996921722, 0.7951154441090702, -4.505235024082858, -0.962637260555846]
A=0.977756 -0.0367987 -0.0261894 
0.0528388 1.02286 0.103973 
-0.021033 -0.0761255 1.00341 

rotation R0.998313 -0.0553973 0.017404 
0.0539497 0.995736 0.0748299 
-0.0214752 -0.0737647 0.997044 

upper R0.979409 0.0200815 -0.0420841 
0 1.02616 0.0309648 
0 0 1.00776 

s=0.250279 u=-0.0371901 v=0.00973063 w0.0273672 r=0.998886
m_Rotation from vnl-0.0371901 0.00973063 0.0273672 0.998886
 new params [-0.03719010197632394, 0.009730633408899007, 0.027367233472011244, 0.9988860023148489, 0.9794086837521037, 1.026157145468387, 1.0077643665602203, 0.02050371074502469, -0.04296892928410124, 0.030175539625256032, -0.9684264871024383, 4.666322232559385, 0.6396760034359055]
outputput affine center: [13.9079, 10.8719, 4.79209]
output affine para: [-0.03719010197632394, 0.009730633408899007, 0.027367233472011244, 0.9988860023148489, 0.9794086837521037, 1.026157145468387, 1.0077643665602203, 0.02050371074502469, -0.04296892928410124, 0.030175539625256032, -0.9684264871024383, 4.666322232559385, 0.6396760034359055]
initial measure value (MMI): rval = -0.252275
final measure value (MMI): rval = -0.496143
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -6277.26
 iteration 2 energy 0 : -6591.28
 iteration 3 energy 0 : -6808.03
 iteration 4 energy 0 : -6981.83
 iteration 5 energy 0 : -7138.99
 iteration 6 energy 0 : -7288.96
 iteration 7 energy 0 : -7414.1
 iteration 8 energy 0 : -7515.49
 iteration 9 energy 0 : -7578.05
 iteration 10 energy 0 : -7625.85
 iteration 11 energy 0 : -7669.03
 iteration 12 energy 0 : -7710.73
 E-Slope 0.00793953 iteration 13 energy 0 : -7752.52
 E-Slope 0.006414 iteration 14 energy 0 : -7746.04
 E-Slope 0.00514115 iteration 15 energy 0 : -7771.27
 E-Slope 0.00398713 iteration 16 energy 0 : -7764.64
 E-Slope 0.00308192 iteration 17 energy 0 : -7800.2
 E-Slope 0.0023566 iteration 18 energy 0 : -7797.95
 E-Slope 0.00178847 iteration 19 energy 0 : -7794.02
 E-Slope 0.00134901 iteration 20 energy 0 : -7787.93
 E-Slope 0.00104994 iteration 21 energy 0 : -7814.72
 E-Slope 0.000781246 iteration 22 energy 0 : -7807.75
 E-Slope 0.000573404 iteration 23 energy 0 : -7809.95
 E-Slope 0.000415452 iteration 24 energy 0 : -7803.56
 E-Slope 0.000405245 iteration 25 energy 0 : -7829.51
 E-Slope 0.000339657 iteration 26 energy 0 : -7826.29
 E-Slope 0.00030718 iteration 27 energy 0 : -7822.96
 E-Slope 0.000217289 iteration 28 energy 0 : -7816.13
 E-Slope 0.000264473 iteration 29 energy 0 : -7839.34
 E-Slope 0.000273935 iteration 30 energy 0 : -7834.26
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -12706.6
 iteration 2 energy 0 : -12848.9
 iteration 3 energy 0 : -13010.5
 iteration 4 energy 0 : -13145
 iteration 5 energy 0 : -13252
 iteration 6 energy 0 : -13273.6
 iteration 7 energy 0 : -13309.7
 iteration 8 energy 0 : -13322.1
 iteration 9 energy 0 : -13353.8
 iteration 10 energy 0 : -13361.2
 iteration 11 energy 0 : -13386.3
 iteration 12 energy 0 : -13390.8
 E-Slope 0.00179954 iteration 13 energy 0 : -13417.7
 E-Slope 0.00128017 iteration 14 energy 0 : -13419.1
 E-Slope 0.000950783 iteration 15 energy 0 : -13443.7
 E-Slope 0.0007511 iteration 16 energy 0 : -13441.4
 E-Slope 0.000699289 iteration 17 energy 0 : -13467.5
 E-Slope 0.000624798 iteration 18 energy 0 : -13463.8
 E-Slope 0.000600547 iteration 19 energy 0 : -13489.9
 E-Slope 0.00054311 iteration 20 energy 0 : -13483.9
 E-Slope 0.000532322 iteration 21 energy 0 : -13508.2
 E-Slope 0.000485115 iteration 22 energy 0 : -13501.6
 E-Slope 0.000481099 iteration 23 energy 0 : -13527.6
 E-Slope 0.000437096 iteration 24 energy 0 : -13519.4
 E-Slope 0.000439987 iteration 25 energy 0 : -13543.8
 E-Slope 0.000401996 iteration 26 energy 0 : -13536.1
 E-Slope 0.000405446 iteration 27 energy 0 : -13557.5
 E-Slope 0.000364758 iteration 28 energy 0 : -13549.5
 E-Slope 0.000362463 iteration 29 energy 0 : -13565.8
 E-Slope 0.000319734 iteration 30 energy 0 : -13559.7
 E-Slope 0.000311367 iteration 31 energy 0 : -13571.1
 E-Slope 0.000265747 iteration 32 energy 0 : -13566.9
 E-Slope 0.000250667 iteration 33 energy 0 : -13575.2
 E-Slope 0.000204176 iteration 34 energy 0 : -13572.8
 E-Slope 0.000194244 iteration 35 energy 0 : -13580.6
 E-Slope 0.000156544 iteration 36 energy 0 : -13579.6
 E-Slope 0.000154361 iteration 37 energy 0 : -13586.2
 E-Slope 0.000129245 iteration 38 energy 0 : -13586.1
 E-Slope 0.000135608 iteration 39 energy 0 : -13591.7
 E-Slope 0.000121832 iteration 40 energy 0 : -13592.7
 E-Slope 0.000132352 iteration 41 energy 0 : -13598.4
 E-Slope 0.000126451 iteration 42 energy 0 : -13599.7
 E-Slope 0.000137456 iteration 43 energy 0 : -13605.5
 E-Slope 0.000134245 iteration 44 energy 0 : -13606.6
 E-Slope 0.000139318 iteration 45 energy 0 : -13610
 E-Slope 0.000133052 iteration 46 energy 0 : -13611.4
 E-Slope 0.000134975 iteration 47 energy 0 : -13615.1
 E-Slope 0.000129312 iteration 48 energy 0 : -13617.4
 E-Slope 0.000127643 iteration 49 energy 0 : -13619.5
 E-Slope 0.00012105 iteration 50 energy 0 : -13622.2
 E-Slope 0.000116944 iteration 51 energy 0 : -13623.8
 E-Slope 0.000110753 iteration 52 energy 0 : -13626.9
 E-Slope 0.000107266 iteration 53 energy 0 : -13628.2
 E-Slope 0.000103995 iteration 54 energy 0 : -13632.1
 E-Slope 0.000102624 iteration 55 energy 0 : -13632.5
 E-Slope 0.000104211 iteration 56 energy 0 : -13638.1
 E-Slope 0.000102326 iteration 57 energy 0 : -13637.2
 E-Slope 0.000104189 iteration 58 energy 0 : -13643.2
 E-Slope 0.000102811 iteration 59 energy 0 : -13642.1
 E-Slope 0.000105813 iteration 60 energy 0 : -13647.5
 E-Slope 0.000101946 iteration 61 energy 0 : -13645.7
 E-Slope 0.00010556 iteration 62 energy 0 : -13652.8
 E-Slope 0.000101767 iteration 63 energy 0 : -13651.2
 E-Slope 0.0001055 iteration 64 energy 0 : -13657.8
 E-Slope 0.000100598 iteration 65 energy 0 : -13655.6
 E-Slope 0.000103466 iteration 66 energy 0 : -13661.6
 E-Slope 9.69917e-05 iteration 67 energy 0 : -13659.8
 Converged due to oscillation in optimization  metric 0 bad 18  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -86155.2
 iteration 2 energy 0 : -87578.4
 iteration 3 energy 0 : -88996.6
 iteration 4 energy 0 : -90233.4
 iteration 5 energy 0 : -91248.7
 iteration 6 energy 0 : -92162.7
 iteration 7 energy 0 : -92950.7
 iteration 8 energy 0 : -93730.3
 iteration 9 energy 0 : -94407.9
 iteration 10 energy 0 : -95031
 iteration 11 energy 0 : -95578.9
 iteration 12 energy 0 : -96102.6
 E-Slope 0.00488281 iteration 13 energy 0 : -96549.1
 E-Slope 0.00432834 iteration 14 energy 0 : -96941.3
 E-Slope 0.0038624 iteration 15 energy 0 : -97300.6
 E-Slope 0.00346214 iteration 16 energy 0 : -97602.9
 E-Slope 0.00308466 iteration 17 energy 0 : -97807.9
 E-Slope 0.00272463 iteration 18 energy 0 : -97973
 E-Slope 0.00237624 iteration 19 energy 0 : -98128.9
 E-Slope 0.00205804 iteration 20 energy 0 : -98274.3
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2499_08302016_Aug1_Ref_vimp2_2587_10132016_Test_NewCases/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2499_08302016_Aug1_Ref_vimp2_2587_10132016_Test_NewCases/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2499_08302016_Aug1_Ref_vimp2_2587_10132016_Test_NewCases/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2499_08302016_Aug1_Ref_vimp2_2587_10132016_Test_NewCases/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2499_08302016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1739_11242015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2499_08302016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1739_11242015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547784884
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [13.9079, 10.8719, 4.79209]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -3.5220783684325987, -23.737641832967313, 9.839471845939745]
level 0, iter 547, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.022247671040369395, -0.05010370485567804, -0.020349300756406292, 0.9982888188554152, 1.0371395165412567, 1.013130318041997, 1.062226722455898, -0.03712521237701307, 0.02775780918456576, -0.011422055027353144, -2.305128620161889, -23.591894742064937, 7.561488429320271]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 145, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.035837086501369846, -0.05467883693717907, -0.02885478989481684, 0.9974433964503534, 1.03412428883905, 1.0179895944002693, 1.0651212325344137, -0.04931475101435773, 0.046334736242402, -0.013998582855423209, -2.1958697690837874, -23.144173984261705, 7.524053114917994]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 201, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.03376784106141948, -0.054079999509299786, -0.03550005410345396, 0.9973338622155455, 1.0288185092667281, 1.00435987149873, 1.0633743358901133, -0.06324487324426814, 0.04859389583185608, -0.017437504169243476, -2.1765787665381406, -23.385106797675668, 7.539057936106734]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 63, size: fix[38, 40, 32]-mov[40, 46, 33], affine para: [-0.03457120237653241, -0.052262804060193256, -0.03262955233168169, 0.9975012499203402, 1.0291560531826398, 1.003717771622215, 1.0672554225689548, -0.06472418160447051, 0.053195066700283664, -0.023840493557188234, -2.1461092521584684, -23.479664403664305, 7.5786934759948235]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 115, size: fix[75, 79, 42]-mov[80, 91, 46], affine para: [-0.03875782062192441, -0.05156361194375256, -0.03376220403324633, 0.9973460476899532, 1.031306861662396, 1.0052784595330295, 1.0666634859749515, -0.07045635964840175, 0.05091795747826328, -0.030894423099061055, -2.199670222938128, -23.479298411994932, 7.368972041495362]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 2838, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.06097930906460067, 0.017279440526573972, 0.05962838226815238, 0.9962065051128585, 0.9687984355141985, 0.98852532850393, 0.81737223302087, 0.1318404878606259, 0.01014603943409303, 0.031222422276750022, 1.94672766586329, 24.32069115878733, -3.876613219463131]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 92, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.06340962372060724, 0.011625928939301679, 0.06057245252418809, 0.9960798338442126, 0.9681428479472212, 0.9810943431840721, 0.8217016468246848, 0.13583458665129525, 0.016242730645000116, 0.02445344579787369, 1.8835950453874757, 24.10996668651457, -3.878958396922978]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 124, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.0628632739477338, 0.01452157262748093, 0.06302536001421656, 0.9959242625381086, 0.9720203592647408, 0.98158142293898, 0.8182167127618287, 0.14067321373309336, 0.01746323240976153, 0.030434651533671475, 1.9829649667405782, 24.341937671139465, -3.7070777575008016]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 549, size: fix[40, 46, 33]-mov[38, 40, 32], affine para: [0.059366197610796714, 0.01135851016242526, 0.0634232893447591, 0.9961546693143676, 0.9795822938063228, 0.9789370048505308, 0.8262965515227916, 0.14477749910916357, 0.021304883133323394, 0.03234399619172559, 2.1233429256312473, 24.135512572993914, -4.265006547218793]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 1232, size: fix[80, 91, 46]-mov[75, 79, 42], affine para: [0.05047889664776697, 0.0145628424769578, 0.06245012389444346, 0.9966643299716229, 0.9850499716367754, 0.9695047509637807, 0.8290145987950528, 0.1481674234450123, 0.016481095982170627, 0.028139418273492492, 2.4050827440743596, 23.874214460060948, -4.7811189895806665]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.391995 v2 -0.398242
 last params [-0.03875782062192441, -0.05156361194375256, -0.03376220403324633, 0.9973460476899532, 1.031306861662396, 1.0052784595330295, 1.0666634859749515, -0.07045635964840175, 0.05091795747826328, -0.030894423099061055, -2.199670222938128, -23.479298411994932, 7.368972041495362]
 my params [0.05047889664776697, 0.0145628424769578, 0.06245012389444346, 0.9966643299716229, 0.9850499716367754, 0.9695047509637807, 0.8290145987950528, 0.1481674234450123, 0.016481095982170627, 0.028139418273492492, 2.4050827440743596, 23.874214460060948, -4.7811189895806665]
A=1.0251 -0.0215243 -0.0534933 
-0.128082 1.02151 0.0719063 
0.0426209 -0.11918 1.19959 

rotation R0.991441 0.127757 -0.0268806 
-0.123876 0.985578 0.115284 
0.0412213 -0.110968 0.992969 

upper R1.03395 -0.152793 -0.0124942 
0 1.01725 -0.0690809 
0 0 1.20089 

s=0.250943 u=-0.0567764 v=-0.0170897 w-0.0631457 r=0.996241
m_Rotation from vnl-0.0567764 -0.0170897 -0.0631457 0.996241
 new params [-0.05677640864710401, -0.017089718368801115, -0.06314569408962073, 0.9962414377374352, 1.0339525330307773, 1.017249438847915, 1.2008853772223025, -0.14777569440892122, -0.012083890979823523, -0.06790954767871385, -2.2073405830196604, -23.73581771369441, 8.478220910202275]
outputput affine center: [13.9079, 10.8719, 4.79209]
output affine para: [-0.05677640864710401, -0.017089718368801115, -0.06314569408962073, 0.9962414377374352, 1.0339525330307773, 1.017249438847915, 1.2008853772223025, -0.14777569440892122, -0.012083890979823523, -0.06790954767871385, -2.2073405830196604, -23.73581771369441, 8.478220910202275]
initial measure value (MMI): rval = -0.247903
final measure value (MMI): rval = -0.409892
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -5537.47
 iteration 2 energy 0 : -5886.52
 iteration 3 energy 0 : -6172.75
 iteration 4 energy 0 : -6411.35
 iteration 5 energy 0 : -6604.46
 iteration 6 energy 0 : -6788.87
 iteration 7 energy 0 : -6939.85
 iteration 8 energy 0 : -7076.13
 iteration 9 energy 0 : -7174.08
 iteration 10 energy 0 : -7253.61
 iteration 11 energy 0 : -7318.49
 iteration 12 energy 0 : -7360.87
 E-Slope 0.0110521 iteration 13 energy 0 : -7363.1
 E-Slope 0.00880238 iteration 14 energy 0 : -7362.97
 E-Slope 0.00688042 iteration 15 energy 0 : -7372.55
 E-Slope 0.00522801 iteration 16 energy 0 : -7377.6
 E-Slope 0.0038164 iteration 17 energy 0 : -7388.27
 E-Slope 0.00268711 iteration 18 energy 0 : -7393.9
 E-Slope 0.00182606 iteration 19 energy 0 : -7404.45
 E-Slope 0.00122989 iteration 20 energy 0 : -7409.55
 E-Slope 0.000843219 iteration 21 energy 0 : -7420.01
 E-Slope 0.000623137 iteration 22 energy 0 : -7424.77
 E-Slope 0.000561714 iteration 23 energy 0 : -7435.47
 E-Slope 0.000587478 iteration 24 energy 0 : -7439.66
 E-Slope 0.000607021 iteration 25 energy 0 : -7449.93
 E-Slope 0.000591673 iteration 26 energy 0 : -7452.79
 E-Slope 0.000588074 iteration 27 energy 0 : -7462.6
 E-Slope 0.000561297 iteration 28 energy 0 : -7464.18
 E-Slope 0.000549436 iteration 29 energy 0 : -7473.35
 E-Slope 0.000516318 iteration 30 energy 0 : -7474.09
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -11995.8
 iteration 2 energy 0 : -12184.5
 iteration 3 energy 0 : -12430.7
 iteration 4 energy 0 : -12551.8
 iteration 5 energy 0 : -12606.5
 iteration 6 energy 0 : -12682
 iteration 7 energy 0 : -12713.3
 iteration 8 energy 0 : -12765.3
 iteration 9 energy 0 : -12787
 iteration 10 energy 0 : -12823.7
 iteration 11 energy 0 : -12840.9
 iteration 12 energy 0 : -12868
 E-Slope 0.00235137 iteration 13 energy 0 : -12883.9
 E-Slope 0.0017479 iteration 14 energy 0 : -12904.5
 E-Slope 0.0014321 iteration 15 energy 0 : -12917.3
 E-Slope 0.00123695 iteration 16 energy 0 : -12935.8
 E-Slope 0.00105714 iteration 17 energy 0 : -12946.4
 E-Slope 0.000946872 iteration 18 energy 0 : -12962.1
 E-Slope 0.000833407 iteration 19 energy 0 : -12971.5
 E-Slope 0.000766188 iteration 20 energy 0 : -12986.1
 E-Slope 0.000691347 iteration 21 energy 0 : -12994.1
 E-Slope 0.000649117 iteration 22 energy 0 : -13009.3
 E-Slope 0.00059858 iteration 23 energy 0 : -13016.1
 E-Slope 0.000571601 iteration 24 energy 0 : -13031.1
 E-Slope 0.000535905 iteration 25 energy 0 : -13035.4
 E-Slope 0.000516206 iteration 26 energy 0 : -13049.1
 E-Slope 0.000482604 iteration 27 energy 0 : -13050.6
 E-Slope 0.000465289 iteration 28 energy 0 : -13064.3
 E-Slope 0.00043007 iteration 29 energy 0 : -13063.2
 E-Slope 0.000414938 iteration 30 energy 0 : -13079.7
 E-Slope 0.000386842 iteration 31 energy 0 : -13080.9
 E-Slope 0.000391595 iteration 32 energy 0 : -13105
 E-Slope 0.000394598 iteration 33 energy 0 : -13114.1
 E-Slope 0.00041987 iteration 34 energy 0 : -13131.4
 E-Slope 0.000467971 iteration 35 energy 0 : -13158.9
 E-Slope 0.000536531 iteration 36 energy 0 : -13178.9
 E-Slope 0.000632219 iteration 37 energy 0 : -13217.3
 E-Slope 0.000770077 iteration 38 energy 0 : -13260.8
 E-Slope 0.000915267 iteration 39 energy 0 : -13300.3
 E-Slope 0.000998758 iteration 40 energy 0 : -13287.7
 E-Slope 0.00106145 iteration 41 energy 0 : -13319.3
 E-Slope 0.00105664 iteration 42 energy 0 : -13306.2
 E-Slope 0.0010286 iteration 43 energy 0 : -13337.7
 E-Slope 0.000951715 iteration 44 energy 0 : -13328.7
 E-Slope 0.000854611 iteration 45 energy 0 : -13349
 E-Slope 0.000712089 iteration 46 energy 0 : -13340.3
 E-Slope 0.000593901 iteration 47 energy 0 : -13360.4
 E-Slope 0.000449322 iteration 48 energy 0 : -13350.7
 E-Slope 0.000361137 iteration 49 energy 0 : -13371.3
 E-Slope 0.000293903 iteration 50 energy 0 : -13359.6
 E-Slope 0.00029666 iteration 51 energy 0 : -13379.4
 E-Slope 0.000240296 iteration 52 energy 0 : -13367
 E-Slope 0.000246584 iteration 53 energy 0 : -13387.4
 E-Slope 0.000195898 iteration 54 energy 0 : -13374.9
 E-Slope 0.000211015 iteration 55 energy 0 : -13395.7
 E-Slope 0.000179715 iteration 56 energy 0 : -13384.1
 E-Slope 0.000197262 iteration 57 energy 0 : -13404
 E-Slope 0.00016816 iteration 58 energy 0 : -13391.4
 E-Slope 0.000189602 iteration 59 energy 0 : -13412.1
 E-Slope 0.000163339 iteration 60 energy 0 : -13399.4
 E-Slope 0.00018397 iteration 61 energy 0 : -13417
 E-Slope 0.000153929 iteration 62 energy 0 : -13403.9
 E-Slope 0.000167847 iteration 63 energy 0 : -13419.8
 E-Slope 0.000130095 iteration 64 energy 0 : -13406
 E-Slope 0.000136212 iteration 65 energy 0 : -13420.2
 E-Slope 9.28864e-05 iteration 66 energy 0 : -13406.5
 Converged due to oscillation in optimization  metric 0 bad 15  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -87000.4
 iteration 2 energy 0 : -88499.2
 iteration 3 energy 0 : -89979.1
 iteration 4 energy 0 : -91353.5
 iteration 5 energy 0 : -92802
 iteration 6 energy 0 : -93986.2
 iteration 7 energy 0 : -95026.6
 iteration 8 energy 0 : -96023.7
 iteration 9 energy 0 : -96934.7
 iteration 10 energy 0 : -97810.9
 iteration 11 energy 0 : -98612.5
 iteration 12 energy 0 : -99300.5
 E-Slope 0.00623005 iteration 13 energy 0 : -99905.5
 E-Slope 0.00564591 iteration 14 energy 0 : -100468
 E-Slope 0.0050929 iteration 15 energy 0 : -100949
 E-Slope 0.00445735 iteration 16 energy 0 : -100817
 E-Slope 0.00384369 iteration 17 energy 0 : -100906
 E-Slope 0.00322299 iteration 18 energy 0 : -100939
 E-Slope 0.00260127 iteration 19 energy 0 : -100959
 E-Slope 0.00204483 iteration 20 energy 0 : -101159
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2499_08302016_Aug2_Ref_vimp2_1739_11242015/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2499_08302016_Aug2_Ref_vimp2_1739_11242015/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2499_08302016_Aug2_Ref_vimp2_1739_11242015/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2499_08302016_Aug2_Ref_vimp2_1739_11242015/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2520_09092016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2390_07272016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2520_09092016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2390_07272016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547785018
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [11.0076, -12.6729, -3.63848]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 4.166419880669595, 20.877359109125205, 22.08301624019665]
level 0, iter 644, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.08961719237816408, -0.008004943303285366, 0.0004816222431014745, 0.995943998301602, 0.9040702076454769, 1.0157150115282965, 1.0276981276916257, -0.013629862834579188, -0.010376867889883743, 0.03340654262791679, 2.311695139634192, 20.22833698189625, 21.066979449326787]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 142, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.10047341300517114, -0.008212882824244159, 0.004859141818012919, 0.994893979565461, 0.8981845323651733, 1.0094872685362386, 1.0359078033928912, -0.022775028444405366, -0.016354109580483573, 0.03698677368824981, 2.3106020635534166, 19.891114510586068, 21.047857544623177]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 125, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.09480064451633097, -0.008915636322080957, -0.0010457140999232419, 0.9954558029919168, 0.8989457635055322, 1.012005887299992, 1.0330914862612226, -0.023433092842232436, -0.01129442173452374, 0.04173123734420128, 2.3045548602281243, 20.054516335573407, 21.02954738578282]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 60, size: fix[41, 46, 33]-mov[39, 41, 32], affine para: [0.09642840718997496, -0.008984973490255191, 0.0003357656541856167, 0.9952993116643903, 0.9024524035187749, 1.0133079380226773, 1.0340050844500315, -0.024499464499996716, -0.010210770672285884, 0.04065648729356038, 2.2311689642664625, 20.05862356121537, 21.080949261295167]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 89, size: fix[82, 91, 47]-mov[78, 81, 39], affine para: [0.11061590236097296, -0.008633493792683444, 0.004573916148498704, 0.9938152062737147, 0.9031824019245822, 1.0155756931304496, 1.044299692111249, -0.018837766732384766, -0.011695816400181648, 0.041460962647070186, 2.2511843069263233, 19.828664331007488, 21.20076635011118]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 355, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.0922138377175282, 0.0024995472136328705, -0.014780222479034523, 0.9956263884713997, 1.0984230786728573, 1.0049866597791621, 0.9517041670065778, -0.0009355545062304073, 0.029188447498481672, 0.003616554902653811, -4.0568409548062485, -23.331501100384607, -16.152241431041755]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 208, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.09525550356790893, 0.002466233808708393, -0.013069884123770895, 0.995363996164125, 1.102663437805081, 1.0018924636272546, 0.9495176529572831, -0.002261363350925389, 0.027785299451992197, 0.0054122780538137264, -3.865277548617011, -23.151746411782657, -15.987704841989588]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 223, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.10030438107116019, 0.0013020696212726432, -0.017619824630929194, 0.9947999183416775, 1.1026984045303339, 0.9891242260487597, 0.94662170198402, -0.004858807946761352, 0.030404270268394755, 0.004427146328788178, -4.040574960265705, -23.005355329503452, -15.830476107875107]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 997, size: fix[39, 41, 32]-mov[41, 46, 33], affine para: [-0.0991076260459453, 0.0054274987116302385, -0.012979715215004036, 0.9949772598960288, 1.1071761876448796, 1.0112005034719294, 0.9472535476756494, 0.0008694340562152841, 0.03121013108823482, -0.0023514567795753236, -4.204515678520449, -23.390848940729672, -15.714552094117712]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 497, size: fix[78, 81, 39]-mov[82, 91, 47], affine para: [-0.10107152675692997, 0.0034515836275410025, -0.012340667831659121, 0.9947966329692486, 1.0982310215910807, 1.002577902423379, 0.9494297974325159, -0.00918421124883392, 0.031079046097245006, -0.007052572242958047, -3.8600617188205404, -23.366289990597977, -15.62417414855312]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.415604 v2 -0.423586
 last params [0.11061590236097296, -0.008633493792683444, 0.004573916148498704, 0.9938152062737147, 0.9031824019245822, 1.0155756931304496, 1.044299692111249, -0.018837766732384766, -0.011695816400181648, 0.041460962647070186, 2.2511843069263233, 19.828664331007488, 21.20076635011118]
 my params [-0.10107152675692997, 0.0034515836275410025, -0.012340667831659121, 0.9947966329692486, 1.0982310215910807, 1.002577902423379, 0.9494297974325159, -0.00918421124883392, 0.031079046097245006, -0.007052572242958047, -3.8600617188205404, -23.366289990597977, -15.62417414855312]
A=0.910169 -0.0205875 -0.0378225 
0.0238634 0.97824 -0.193383 
0.00986047 0.211712 1.03172 

rotation R0.999598 -0.0279059 -0.00503969 
0.0262081 0.977 -0.211623 
0.0108293 0.211406 0.977338 

upper R0.910535 0.00735124 -0.0317027 
0 1.00107 0.0302323 
0 0 1.04945 

s=0.251452 u=0.106372 v=-0.00399029 w0.0136071 r=0.994225
m_Rotation from vnl0.106372 -0.00399029 0.0136071 0.994225
 new params [0.1063716474939987, -0.003990293816613287, 0.013607083384258666, 0.9942253252892139, 0.9105350775615332, 1.0010718184005338, 1.0494539590379637, 0.008073541150901867, -0.03481760663007856, 0.030199960881646743, 2.4413085183419807, 19.92849844402758, 21.104760474021038]
outputput affine center: [11.0076, -12.6729, -3.63848]
output affine para: [0.1063716474939987, -0.003990293816613287, 0.013607083384258666, 0.9942253252892139, 0.9105350775615332, 1.0010718184005338, 1.0494539590379637, 0.008073541150901867, -0.03481760663007856, 0.030199960881646743, 2.4413085183419807, 19.92849844402758, 21.104760474021038]
initial measure value (MMI): rval = -0.237628
final measure value (MMI): rval = -0.416601
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -5256.96
 iteration 2 energy 0 : -5527.17
 iteration 3 energy 0 : -5766.3
 iteration 4 energy 0 : -5991.24
 iteration 5 energy 0 : -6159.83
 iteration 6 energy 0 : -6294.83
 iteration 7 energy 0 : -6416.96
 iteration 8 energy 0 : -6537.66
 iteration 9 energy 0 : -6677.14
 iteration 10 energy 0 : -6806.63
 iteration 11 energy 0 : -6890.03
 iteration 12 energy 0 : -6952.26
 E-Slope 0.0117683 iteration 13 energy 0 : -7001.26
 E-Slope 0.0101404 iteration 14 energy 0 : -7046.42
 E-Slope 0.00874671 iteration 15 energy 0 : -7091.46
 E-Slope 0.00764045 iteration 16 energy 0 : -7147.47
 E-Slope 0.00673972 iteration 17 energy 0 : -7216.09
 E-Slope 0.00594653 iteration 18 energy 0 : -7269.11
 E-Slope 0.00524054 iteration 19 energy 0 : -7312.68
 E-Slope 0.00454161 iteration 20 energy 0 : -7315.69
 E-Slope 0.00392124 iteration 21 energy 0 : -7309.33
 E-Slope 0.003414 iteration 22 energy 0 : -7312.17
 E-Slope 0.00290341 iteration 23 energy 0 : -7309.74
 E-Slope 0.00233096 iteration 24 energy 0 : -7295.42
 E-Slope 0.00175726 iteration 25 energy 0 : -7301.81
 E-Slope 0.00116952 iteration 26 energy 0 : -7293.63
 E-Slope 0.000652067 iteration 27 energy 0 : -7302.44
 E-Slope 0.000222437 iteration 28 energy 0 : -7295.63
 E-Slope -1.43498e-05 iteration 29 energy 0 : -7304.12
 Converged due to oscillation in optimization  metric 0 bad 5  
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -16036.7
 iteration 2 energy 0 : -16429.7
 iteration 3 energy 0 : -16731.8
 iteration 4 energy 0 : -17005.4
 iteration 5 energy 0 : -17215.1
 iteration 6 energy 0 : -17312.7
 iteration 7 energy 0 : -17354.8
 iteration 8 energy 0 : -17443.5
 iteration 9 energy 0 : -17454.5
 iteration 10 energy 0 : -17535.1
 iteration 11 energy 0 : -17530.7
 iteration 12 energy 0 : -17603.5
 E-Slope 0.00300572 iteration 13 energy 0 : -17582.9
 E-Slope 0.00223177 iteration 14 energy 0 : -17653
 E-Slope 0.0016259 iteration 15 energy 0 : -17629.6
 E-Slope 0.00129359 iteration 16 energy 0 : -17692.7
 E-Slope 0.00107455 iteration 17 energy 0 : -17660.8
 E-Slope 0.000964932 iteration 18 energy 0 : -17722.7
 E-Slope 0.00080128 iteration 19 energy 0 : -17693.7
 E-Slope 0.000754885 iteration 20 energy 0 : -17755.4
 E-Slope 0.000621751 iteration 21 energy 0 : -17716.2
 E-Slope 0.000610419 iteration 22 energy 0 : -17779.1
 E-Slope 0.00051073 iteration 23 energy 0 : -17745
 E-Slope 0.000530198 iteration 24 energy 0 : -17806.9
 E-Slope 0.000440829 iteration 25 energy 0 : -17766.1
 E-Slope 0.00047303 iteration 26 energy 0 : -17828.6
 E-Slope 0.000394985 iteration 27 energy 0 : -17785.4
 E-Slope 0.000431336 iteration 28 energy 0 : -17845.7
 E-Slope 0.000352971 iteration 29 energy 0 : -17804.6
 E-Slope 0.000385687 iteration 30 energy 0 : -17861
 E-Slope 0.000306129 iteration 31 energy 0 : -17816.1
 E-Slope 0.000346296 iteration 32 energy 0 : -17877.2
 E-Slope 0.000265069 iteration 33 energy 0 : -17832.1
 E-Slope 0.00030227 iteration 34 energy 0 : -17888.8
 E-Slope 0.000225388 iteration 35 energy 0 : -17842.2
 E-Slope 0.000272349 iteration 36 energy 0 : -17902.2
 E-Slope 0.000201687 iteration 37 energy 0 : -17857.3
 E-Slope 0.000255667 iteration 38 energy 0 : -17916.1
 E-Slope 0.000186965 iteration 39 energy 0 : -17868
 E-Slope 0.000244707 iteration 40 energy 0 : -17929.7
 E-Slope 0.000182062 iteration 41 energy 0 : -17880.8
 E-Slope 0.000240549 iteration 42 energy 0 : -17941.4
 E-Slope 0.000174955 iteration 43 energy 0 : -17892.8
 E-Slope 0.000238121 iteration 44 energy 0 : -17955.2
 E-Slope 0.000174537 iteration 45 energy 0 : -17904.1
 E-Slope 0.000232011 iteration 46 energy 0 : -17963.8
 E-Slope 0.000162795 iteration 47 energy 0 : -17913.8
 E-Slope 0.000221267 iteration 48 energy 0 : -17975.8
 E-Slope 0.000149734 iteration 49 energy 0 : -17920.3
 E-Slope 0.00020472 iteration 50 energy 0 : -17981.4
 E-Slope 0.000133425 iteration 51 energy 0 : -17931.6
 E-Slope 0.000191212 iteration 52 energy 0 : -17991.3
 E-Slope 0.000116944 iteration 53 energy 0 : -17936.2
 E-Slope 0.000172481 iteration 54 energy 0 : -17996.6
 E-Slope 9.09716e-05 iteration 55 energy 0 : -17935.4
 Converged due to oscillation in optimization  metric 0 bad 23  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -118326
 iteration 2 energy 0 : -121333
 iteration 3 energy 0 : -124088
 iteration 4 energy 0 : -126343
 iteration 5 energy 0 : -128250
 iteration 6 energy 0 : -129958
 iteration 7 energy 0 : -131457
 iteration 8 energy 0 : -132773
 iteration 9 energy 0 : -134026
 iteration 10 energy 0 : -135158
 iteration 11 energy 0 : -136148
 iteration 12 energy 0 : -137139
 E-Slope 0.00636026 iteration 13 energy 0 : -137966
 E-Slope 0.00559995 iteration 14 energy 0 : -138697
 E-Slope 0.00497545 iteration 15 energy 0 : -139298
 E-Slope 0.00441309 iteration 16 energy 0 : -139676
 E-Slope 0.00390353 iteration 17 energy 0 : -140118
 E-Slope 0.00343314 iteration 18 energy 0 : -140461
 E-Slope 0.0030084 iteration 19 energy 0 : -140862
 E-Slope 0.00262157 iteration 20 energy 0 : -141215
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2520_09092016_Aug1_Ref_vimp2_2390_07272016/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2520_09092016_Aug1_Ref_vimp2_2390_07272016/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2520_09092016_Aug1_Ref_vimp2_2390_07272016/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2520_09092016_Aug1_Ref_vimp2_2390_07272016/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2520_09092016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2450_08172016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2520_09092016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2450_08172016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547785151
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [11.0076, -12.6729, -3.63848]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 2.6362029891010827, 16.818789937090497, 15.62278988700646]
level 0, iter 737, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.07918953608336333, 0.0009733940406280122, 0.00621705223436251, 0.9968397153707604, 0.9214808018840772, 0.9564192777416933, 0.988995523526499, -0.02718085436887395, 0.01904603012357566, 0.09201915868943349, 3.0074176822760155, 16.282456716541503, 14.34973985603]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 35, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.08305942846397185, 0.0009068089372799637, 0.00454016187616479, 0.9965338408558576, 0.9276535141551939, 0.962850903598476, 0.9935917803839034, -0.02399349979234852, 0.02221491475722735, 0.10654567009597055, 3.057961875766588, 16.220546538748025, 14.434386445653493]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 90, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.08595607410697219, 0.0017033889987444922, 0.002611898641702001, 0.9962940478470806, 0.9213245897042431, 0.9563201753751501, 0.9924603896116765, -0.02744423804199631, 0.024854334711256493, 0.11615727998354565, 3.167021715641224, 16.403071916358876, 14.37129363903081]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 63, size: fix[41, 46, 33]-mov[36, 38, 32], affine para: [0.08782756427142095, -0.0000974641263603414, 0.0017504394405999477, 0.9961341503114218, 0.9220236976160716, 0.96365000412832, 0.9963119244966873, -0.025485007791630616, 0.02691292847183854, 0.1214720599682002, 3.0534016021939756, 16.393574571639093, 14.280871728673297]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 289, size: fix[82, 91, 47]-mov[71, 76, 40], affine para: [0.09085724810086626, -0.0009528062692436052, 0.0021099264185430082, 0.9958612357343062, 0.9146605498496204, 0.9591919574490616, 1.0002592509603514, -0.02497315191638879, 0.02739471489463478, 0.12811465780123701, 3.0664363837793327, 16.40435966649987, 14.348008106893522]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 847, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.0933262818151324, -0.0005616412367272613, -0.007930205682228844, 0.9956038376380041, 1.0737606504436776, 1.062845028007447, 0.9633429522040766, 0.019259693456481417, -0.016484685317525175, -0.12028944580214404, -3.6609554842821885, -17.60226189359243, -10.490762561761239]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 214, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.09531310364969187, 0.003683795729271316, -0.006420882255052454, 0.9954198180630898, 1.0810854737131288, 1.0601574730509664, 0.9534738804490255, 0.020490868584928424, -0.028287463671808778, -0.12337619709524644, -3.6431980717555983, -17.50167078944114, -10.20000376576921]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 399, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.09525179936822792, 0.0013083861821831125, -0.003142016791637238, 0.9954473921675591, 1.0794216974515178, 1.0743939032663732, 0.954863718975493, 0.030389074381255647, -0.026771440253715216, -0.13575674136699428, -3.6169267370094804, -17.60039457737515, -10.273253415131139]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 414, size: fix[36, 38, 32]-mov[41, 46, 33], affine para: [-0.087326732545367, 0.004717047330795993, -0.0048459446278551034, 0.9961567688210992, 1.0787238293866999, 1.079244984108962, 0.9614404439685392, 0.0275009976875048, -0.03787775326216397, -0.11570259896103641, -3.5684865585012644, -17.96930371124931, -10.637311185827036]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 1798, size: fix[71, 76, 40]-mov[82, 91, 47], affine para: [-0.09582868401081299, 0.0007970196438657833, 0.004810726300467694, 0.9953858975256304, 1.0750159389657592, 1.046805625083514, 0.945799970254152, 0.04237491996292032, -0.026082683058107254, -0.1374820749559834, -3.550409982770399, -17.13217381261347, -10.14681754501624]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.434953 v2 -0.4327
final [0.09085724810086626, -0.0009528062692436052, 0.0021099264185430082, 0.9958612357343062, 0.9146605498496204, 0.9591919574490616, 1.0002592509603514, -0.02497315191638879, 0.02739471489463478, 0.12811465780123701, 3.0664363837793327, 16.40435966649987, 14.348008106893522]
outputput affine center: [11.0076, -12.6729, -3.63848]
output affine para: [0.09085724810086626, -0.0009528062692436052, 0.0021099264185430082, 0.9958612357343062, 0.9146605498496204, 0.9591919574490616, 1.0002592509603514, -0.02497315191638879, 0.02739471489463478, 0.12811465780123701, 3.0664363837793327, 16.40435966649987, 14.348008106893522]
initial measure value (MMI): rval = -0.275114
final measure value (MMI): rval = -0.42769
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -5314.89
 iteration 2 energy 0 : -5730.94
 iteration 3 energy 0 : -6054.58
 iteration 4 energy 0 : -6311.43
 iteration 5 energy 0 : -6498.67
 iteration 6 energy 0 : -6614.33
 iteration 7 energy 0 : -6691.11
 iteration 8 energy 0 : -6749.48
 iteration 9 energy 0 : -6803.27
 iteration 10 energy 0 : -6854.46
 iteration 11 energy 0 : -6906.66
 iteration 12 energy 0 : -6968.23
 E-Slope 0.00872844 iteration 13 energy 0 : -7045.07
 E-Slope 0.00698194 iteration 14 energy 0 : -7138.87
 E-Slope 0.00596549 iteration 15 energy 0 : -7207.62
 E-Slope 0.00547518 iteration 16 energy 0 : -7263.68
 E-Slope 0.00529359 iteration 17 energy 0 : -7309.63
 E-Slope 0.00515905 iteration 18 energy 0 : -7335.47
 E-Slope 0.00490394 iteration 19 energy 0 : -7338.95
 E-Slope 0.00443963 iteration 20 energy 0 : -7322.66
 E-Slope 0.00385564 iteration 21 energy 0 : -7331.14
 E-Slope 0.00312922 iteration 22 energy 0 : -7320.34
 E-Slope 0.00237018 iteration 23 energy 0 : -7330.79
 E-Slope 0.001624 iteration 24 energy 0 : -7331.24
 E-Slope 0.00100589 iteration 25 energy 0 : -7341.01
 E-Slope 0.000549033 iteration 26 energy 0 : -7331.11
 E-Slope 0.000274129 iteration 27 energy 0 : -7343.04
 E-Slope 0.000115283 iteration 28 energy 0 : -7337.98
 E-Slope 9.12994e-05 iteration 29 energy 0 : -7345.36
 Converged due to oscillation in optimization  metric 0 bad 4  
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -16359.5
 iteration 2 energy 0 : -16716.7
 iteration 3 energy 0 : -17006.4
 iteration 4 energy 0 : -17231.8
 iteration 5 energy 0 : -17410.5
 iteration 6 energy 0 : -17563
 iteration 7 energy 0 : -17699.4
 iteration 8 energy 0 : -17807.2
 iteration 9 energy 0 : -17833.4
 iteration 10 energy 0 : -17845.7
 iteration 11 energy 0 : -17864.5
 iteration 12 energy 0 : -17913.8
 E-Slope 0.00327814 iteration 13 energy 0 : -17918.1
 E-Slope 0.00247516 iteration 14 energy 0 : -17951.5
 E-Slope 0.00184234 iteration 15 energy 0 : -17957.3
 E-Slope 0.00136726 iteration 16 energy 0 : -17981.1
 E-Slope 0.00100266 iteration 17 energy 0 : -17984.6
 E-Slope 0.000762925 iteration 18 energy 0 : -18007.5
 E-Slope 0.000625253 iteration 19 energy 0 : -18012.2
 E-Slope 0.000588223 iteration 20 energy 0 : -18033.1
 E-Slope 0.000545964 iteration 21 energy 0 : -18038.3
 E-Slope 0.000507407 iteration 22 energy 0 : -18063
 E-Slope 0.000452906 iteration 23 energy 0 : -18062.6
 E-Slope 0.000446148 iteration 24 energy 0 : -18083.8
 E-Slope 0.000407696 iteration 25 energy 0 : -18079.4
 E-Slope 0.000401028 iteration 26 energy 0 : -18099.5
 E-Slope 0.000378288 iteration 27 energy 0 : -18104.8
 E-Slope 0.000360511 iteration 28 energy 0 : -18108.9
 E-Slope 0.000320174 iteration 29 energy 0 : -18107.4
 E-Slope 0.000292145 iteration 30 energy 0 : -18115.1
 E-Slope 0.000240184 iteration 31 energy 0 : -18107.1
 E-Slope 0.000204794 iteration 32 energy 0 : -18115.8
 E-Slope 0.000166446 iteration 33 energy 0 : -18121.4
 E-Slope 0.000159107 iteration 34 energy 0 : -18135.1
 E-Slope 0.000132538 iteration 35 energy 0 : -18128.5
 E-Slope 0.000129037 iteration 36 energy 0 : -18135.7
 E-Slope 0.000110224 iteration 37 energy 0 : -18134.6
 E-Slope 0.000119716 iteration 38 energy 0 : -18147.1
 E-Slope 0.000119284 iteration 39 energy 0 : -18140.7
 E-Slope 0.00012619 iteration 40 energy 0 : -18150.5
 E-Slope 0.000120789 iteration 41 energy 0 : -18148.7
 E-Slope 0.000124447 iteration 42 energy 0 : -18156.1
 E-Slope 0.000107624 iteration 43 energy 0 : -18153.4
 E-Slope 0.000103161 iteration 44 energy 0 : -18162.6
 E-Slope 9.46447e-05 iteration 45 energy 0 : -18160.2
 Converged due to oscillation in optimization  metric 0 bad 10  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -120766
 iteration 2 energy 0 : -123626
 iteration 3 energy 0 : -125816
 iteration 4 energy 0 : -127520
 iteration 5 energy 0 : -129091
 iteration 6 energy 0 : -130689
 iteration 7 energy 0 : -131991
 iteration 8 energy 0 : -133094
 iteration 9 energy 0 : -134089
 iteration 10 energy 0 : -135099
 iteration 11 energy 0 : -136033
 iteration 12 energy 0 : -136855
 E-Slope 0.00538995 iteration 13 energy 0 : -137665
 E-Slope 0.00484466 iteration 14 energy 0 : -138460
 E-Slope 0.00442269 iteration 15 energy 0 : -139254
 E-Slope 0.00405845 iteration 16 energy 0 : -139953
 E-Slope 0.00373606 iteration 17 energy 0 : -140537
 E-Slope 0.00346567 iteration 18 energy 0 : -141023
 E-Slope 0.00320984 iteration 19 energy 0 : -141434
 E-Slope 0.00294679 iteration 20 energy 0 : -141789
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2520_09092016_Aug2_Ref_vimp2_2450_08172016/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2520_09092016_Aug2_Ref_vimp2_2450_08172016/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2520_09092016_Aug2_Ref_vimp2_2450_08172016/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2520_09092016_Aug2_Ref_vimp2_2450_08172016/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2530_09142016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2554_09282016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2530_09142016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2554_09282016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547785289
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [12.9222, -8.9463, 15.1398]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -0.5916564554922665, 18.577149726860817, -6.399104738458298]
level 0, iter 878, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.05764319942866246, 0.003617703932175615, -0.017723572045917842, 0.9981733560718898, 1.0339779829789382, 0.9805177244719085, 0.9285950796719588, 0.024953452592597757, 0.06208097315535538, -0.09183075893616764, -0.6610003962116703, 17.66489558488836, -7.117291145793496]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 58, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.05724752854741754, 0.003560747839662708, -0.020902358710896622, 0.9981348270400929, 1.0385731013132549, 0.9843798969251698, 0.9343305862344768, 0.0243990230080942, 0.05969559658437181, -0.09881776031806006, -0.6787279896536658, 17.66473794393383, -7.146999693289129]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 54, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.058177247593181464, 0.004554196014150817, -0.020445611261763568, 0.9980864913128916, 1.0416361547437885, 0.9880354437080232, 0.9323472163612946, 0.02394932411031104, 0.06170569634246978, -0.10256130861733738, -0.5962668782050944, 17.737070644278113, -7.10492616604473]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 58, size: fix[38, 37, 32]-mov[36, 39, 32], affine para: [-0.05694506377028754, 0.0047039503784819464, -0.019244662509967026, 0.9981807328975612, 1.0378708822954776, 0.9854907036770941, 0.9300649616710205, 0.02199162095352979, 0.056046815851348755, -0.10267243383979546, -0.7056146186419644, 17.70465258701632, -7.122718970934182]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 287, size: fix[75, 74, 37]-mov[72, 78, 38], affine para: [-0.06495648641126826, 0.006302516452663915, -0.025287903424166036, 0.997547720713088, 1.0456953901466761, 0.991411520579182, 0.9276006417444426, 0.01418848306806419, 0.05623303097520118, -0.09703282278927053, -0.6436164422383925, 17.70327367570083, -7.072146334663328]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 2281, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.06457097496792415, -0.006675859781345992, 0.023588100747672838, 0.9976119604289982, 0.9589806147269525, 1.0501692981681294, 1.057358989584524, -0.016690468154006217, -0.05841312452228238, 0.12756381190838129, 1.3002554271705915, -18.30494937370576, 5.306777167594213]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 399, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.06660272522254657, -0.005918222484135892, 0.024297627010362952, 0.997466128225527, 0.9532648122683555, 1.040073015996741, 1.0574014193026666, -0.020095804548651387, -0.05867357281936579, 0.12990197279263085, 1.350518225781401, -18.124760859049772, 5.205860054778097]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 69, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.0661826722262534, -0.006782364066829704, 0.022088370335631984, 0.9975399527490482, 0.9552957212905956, 1.0421689361270494, 1.0542998316267969, -0.021672181679846626, -0.057646018909907566, 0.1322753547733828, 1.3100367943105815, -18.18836741365956, 5.137050749846817]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 999, size: fix[36, 39, 32]-mov[38, 37, 32], affine para: [0.06620665775357647, -0.008949925289796342, 0.018314922534747823, 0.9975976849005584, 0.9573120534846805, 1.0317798683311397, 1.0561345964503726, -0.02937265509748955, -0.05557195308783198, 0.1375088423000441, 1.2550883840672475, -17.983931057833463, 5.097889151846655]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 145, size: fix[72, 78, 38]-mov[75, 74, 37], affine para: [0.06255215167688952, -0.005552095752224564, 0.01570447050563575, 0.9979026867182427, 0.953722263701954, 1.029785197418305, 1.0410648605742836, -0.02872266349303356, -0.05521638636945153, 0.14320630390168282, 1.2432898864776163, -17.895658765650865, 5.057155313138343]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.494641 v2 -0.499841
 last params [-0.06495648641126826, 0.006302516452663915, -0.025287903424166036, 0.997547720713088, 1.0456953901466761, 0.991411520579182, 0.9276006417444426, 0.01418848306806419, 0.05623303097520118, -0.09703282278927053, -0.6436164422383925, 17.70327367570083, -7.072146334663328]
 my params [0.06255215167688952, -0.005552095752224564, 0.01570447050563575, 0.9979026867182427, 0.953722263701954, 1.029785197418305, 1.0410648605742836, -0.02872266349303356, -0.05521638636945153, 0.14320630390168282, 1.2432898864776163, -17.895658765650865, 5.057155313138343]
A=1.0466 0.0536588 0.065856 
-0.029857 0.980195 -0.0154109 
-0.00875662 -0.120085 0.952979 

rotation R0.999558 0.0272921 0.0117554 
-0.028515 0.992248 0.12096 
-0.00836303 -0.121242 0.992588 

upper R1.04706 0.0266891 0.0582966 
0 0.98862 -0.129035 
0 0 0.944825 

s=0.250489 u=-0.0606688 v=0.00503945 w-0.0139791 r=0.998047
m_Rotation from vnl-0.0606688 0.00503945 -0.0139791 0.998047
 new params [-0.06066879220136753, 0.005039447921061051, -0.01397906519458128, 0.9980473372309371, 1.0470627685416318, 0.9886200939546688, 0.944825260419237, 0.02548948955287853, 0.05567630898431181, -0.13052001259617438, -0.6740123635711411, 17.656292157483815, -6.957475832480979]
outputput affine center: [12.9222, -8.9463, 15.1398]
output affine para: [-0.06066879220136753, 0.005039447921061051, -0.01397906519458128, 0.9980473372309371, 1.0470627685416318, 0.9886200939546688, 0.944825260419237, 0.02548948955287853, 0.05567630898431181, -0.13052001259617438, -0.6740123635711411, 17.656292157483815, -6.957475832480979]
initial measure value (MMI): rval = -0.34004
final measure value (MMI): rval = -0.521463
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -6365.45
 iteration 2 energy 0 : -6721.7
 iteration 3 energy 0 : -7011.08
 iteration 4 energy 0 : -7224.05
 iteration 5 energy 0 : -7399.02
 iteration 6 energy 0 : -7534.45
 iteration 7 energy 0 : -7645.93
 iteration 8 energy 0 : -7760.94
 iteration 9 energy 0 : -7871.8
 iteration 10 energy 0 : -7962.95
 iteration 11 energy 0 : -8040.46
 iteration 12 energy 0 : -8080.11
 E-Slope 0.00896247 iteration 13 energy 0 : -8064.76
 E-Slope 0.0072183 iteration 14 energy 0 : -8082.28
 E-Slope 0.00575 iteration 15 energy 0 : -8070.19
 E-Slope 0.00449958 iteration 16 energy 0 : -8084.68
 E-Slope 0.00338555 iteration 17 energy 0 : -8077.3
 E-Slope 0.00242548 iteration 18 energy 0 : -8089.49
 E-Slope 0.00157828 iteration 19 energy 0 : -8086.39
 E-Slope 0.000935726 iteration 20 energy 0 : -8095.77
 E-Slope 0.000503838 iteration 21 energy 0 : -8096.62
 E-Slope 0.000274755 iteration 22 energy 0 : -8103.29
 E-Slope 0.000226311 iteration 23 energy 0 : -8107.65
 E-Slope 0.000272401 iteration 24 energy 0 : -8112.17
 E-Slope 0.000279419 iteration 25 energy 0 : -8119.73
 E-Slope 0.000317484 iteration 26 energy 0 : -8122.28
 E-Slope 0.00032521 iteration 27 energy 0 : -8131.2
 E-Slope 0.000349827 iteration 28 energy 0 : -8132.46
 E-Slope 0.000351653 iteration 29 energy 0 : -8140.53
 E-Slope 0.000362523 iteration 30 energy 0 : -8141.72
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -12240.9
 iteration 2 energy 0 : -12406.4
 iteration 3 energy 0 : -12513.6
 iteration 4 energy 0 : -12609
 iteration 5 energy 0 : -12700.7
 iteration 6 energy 0 : -12793.2
 iteration 7 energy 0 : -12867.2
 iteration 8 energy 0 : -12869.7
 iteration 9 energy 0 : -12888
 iteration 10 energy 0 : -12891.7
 iteration 11 energy 0 : -12912.8
 iteration 12 energy 0 : -12917.1
 E-Slope 0.0019806 iteration 13 energy 0 : -12925.1
 E-Slope 0.0014837 iteration 14 energy 0 : -12931.5
 E-Slope 0.00105103 iteration 15 energy 0 : -12929.1
 E-Slope 0.000710852 iteration 16 energy 0 : -12939.6
 E-Slope 0.000457712 iteration 17 energy 0 : -12937.5
 E-Slope 0.000331223 iteration 18 energy 0 : -12948.9
 E-Slope 0.000294484 iteration 19 energy 0 : -12947.5
 E-Slope 0.000257038 iteration 20 energy 0 : -12957.7
 E-Slope 0.000230037 iteration 21 energy 0 : -12957.6
 E-Slope 0.00020732 iteration 22 energy 0 : -12967.3
 E-Slope 0.00020197 iteration 23 energy 0 : -12966.9
 E-Slope 0.000202388 iteration 24 energy 0 : -12975.4
 E-Slope 0.000200391 iteration 25 energy 0 : -12975
 E-Slope 0.000206493 iteration 26 energy 0 : -12982.5
 E-Slope 0.00019414 iteration 27 energy 0 : -12982.3
 E-Slope 0.000195839 iteration 28 energy 0 : -12989.3
 E-Slope 0.000180267 iteration 29 energy 0 : -12989.2
 E-Slope 0.000180312 iteration 30 energy 0 : -12995.8
 E-Slope 0.000166133 iteration 31 energy 0 : -12996.1
 E-Slope 0.000165477 iteration 32 energy 0 : -13002
 E-Slope 0.000152469 iteration 33 energy 0 : -13001.6
 E-Slope 0.000153482 iteration 34 energy 0 : -13007.7
 E-Slope 0.000142172 iteration 35 energy 0 : -13007.1
 E-Slope 0.000143461 iteration 36 energy 0 : -13013
 E-Slope 0.000132911 iteration 37 energy 0 : -13012.3
 E-Slope 0.000133842 iteration 38 energy 0 : -13018
 E-Slope 0.000122614 iteration 39 energy 0 : -13016.4
 E-Slope 0.000122979 iteration 40 energy 0 : -13022.2
 E-Slope 0.000113025 iteration 41 energy 0 : -13021.3
 E-Slope 0.000113174 iteration 42 energy 0 : -13026.2
 E-Slope 0.000104971 iteration 43 energy 0 : -13025.5
 E-Slope 0.000106156 iteration 44 energy 0 : -13030.3
 E-Slope 9.91002e-05 iteration 45 energy 0 : -13030.1
 Converged due to oscillation in optimization  metric 0 bad 15  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -74938.6
 iteration 2 energy 0 : -76427.5
 iteration 3 energy 0 : -77607
 iteration 4 energy 0 : -78536.9
 iteration 5 energy 0 : -79328.2
 iteration 6 energy 0 : -80006
 iteration 7 energy 0 : -80584.6
 iteration 8 energy 0 : -81081.4
 iteration 9 energy 0 : -81570
 iteration 10 energy 0 : -82011.1
 iteration 11 energy 0 : -82424.4
 iteration 12 energy 0 : -82742.6
 E-Slope 0.00408504 iteration 13 energy 0 : -82995.9
 E-Slope 0.00352592 iteration 14 energy 0 : -83205.9
 E-Slope 0.00307117 iteration 15 energy 0 : -83408.1
 E-Slope 0.00268386 iteration 16 energy 0 : -83601.6
 E-Slope 0.00235589 iteration 17 energy 0 : -83803.2
 E-Slope 0.00208626 iteration 18 energy 0 : -84029
 E-Slope 0.00187426 iteration 19 energy 0 : -84280.7
 E-Slope 0.00171427 iteration 20 energy 0 : -84537.9
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2530_09142016_Aug1_Ref_vimp2_2554_09282016/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2530_09142016_Aug1_Ref_vimp2_2554_09282016/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2530_09142016_Aug1_Ref_vimp2_2554_09282016/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2530_09142016_Aug1_Ref_vimp2_2554_09282016/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2530_09142016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2926_02222017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2530_09142016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2926_02222017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547785397
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [12.9222, -8.9463, 15.1398]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 1.4470278322296917, 20.878254970619434, -2.967387348739747]
level 0, iter 618, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.038444959510734074, -0.002325350185906728, -0.014674515722783785, 0.9991502571800863, 1.0814045716657343, 0.9677566017126948, 1.0323392100821143, 0.03628166270937107, 0.07849787290187768, -0.09590508444025589, 1.791471746433222, 19.870190843136367, -2.0318563060812282]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 64, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.03696481254427471, -0.005482886501151991, -0.014159492083314441, 0.9992012056503559, 1.0808337053658708, 0.9653848786780299, 1.034180310593483, 0.035659545994537876, 0.08257377552750676, -0.1015078480187137, 1.7088061710815703, 19.758142480676206, -1.8794201120049525]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 29, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.03972157545342097, -0.004593590083383882, -0.01336146031910683, 0.9991108881159213, 1.0740939594910826, 0.9609425602792795, 1.026347326086334, 0.03416547697179696, 0.08515256549367542, -0.10567969887962908, 1.8228134658633757, 19.923078587965918, -1.9643548963560793]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 66, size: fix[38, 37, 32]-mov[37, 42, 32], affine para: [-0.03930197897017964, -0.00815772116507811, -0.014530989405900328, 0.9990884126949456, 1.0762679262151182, 0.9643205387118854, 1.0254605573339481, 0.032839949978008105, 0.09172994954844697, -0.10915757888209551, 1.7280412667927567, 19.876015660334822, -1.8389485177572766]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 136, size: fix[75, 74, 37]-mov[74, 83, 37], affine para: [-0.03275744198065038, -0.009500385266156946, -0.012099611349875583, 0.9993449314825491, 1.0806493099845849, 0.9760260833795485, 1.035408457338563, 0.033361628293959784, 0.09705371598431453, -0.11184861127264596, 1.8035641555492394, 19.90773064216784, -1.7725085395877453]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 769, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.036011126081812096, 0.009550639331574167, 0.01737311788366944, 0.9991547221835455, 0.9269497851506306, 1.0600920902448878, 0.9433400323071319, -0.0329082579275552, -0.09659035653546805, 0.09989616357400997, -0.47090208938256944, -20.874042172887417, 0.47758995821760236]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 68, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.03757795277128118, 0.009891587979091357, 0.014103281266153412, 0.9991452103724958, 0.9237473829747918, 1.0591705044143858, 0.9420876391591628, -0.034577363152498604, -0.09980163841348329, 0.09997265463614662, -0.5742326121223411, -20.870622328185817, 0.3457363186243238]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 197, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.03499998918725621, 0.012697022380838927, 0.012895699715821262, 0.9992234421331355, 0.9280895977501669, 1.0561082234180081, 0.9431666055611073, -0.0394559649345599, -0.10853581624805834, 0.09841917123607814, -0.5469618093793718, -20.945125857375718, 0.4231034654862167]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 82, size: fix[37, 42, 32]-mov[38, 37, 32], affine para: [0.03658633973479949, 0.013000701198994616, 0.014925553012460928, 0.9991344501018953, 0.9246972898600597, 1.0529743639392413, 0.9416093116595912, -0.039526293976659924, -0.10947199539361618, 0.09810718108220759, -0.5173929146779968, -20.808979448431888, 0.41490733744857927]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 290, size: fix[74, 83, 37]-mov[75, 74, 37], affine para: [0.03567755138989891, 0.0115757040773772, 0.010937516438118487, 0.9992364515649437, 0.9272277436566171, 1.0494157778539102, 0.9442911250912281, -0.04261112302930918, -0.10758266859139123, 0.094726500704183, -0.56662201529481, -20.91007424605636, 0.5330774613145906]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.51439 v2 -0.514206
final [-0.03275744198065038, -0.009500385266156946, -0.012099611349875583, 0.9993449314825491, 1.0806493099845849, 0.9760260833795485, 1.035408457338563, 0.033361628293959784, 0.09705371598431453, -0.11184861127264596, 1.8035641555492394, 19.90773064216784, -1.7725085395877453]
outputput affine center: [12.9222, -8.9463, 15.1398]
output affine para: [-0.03275744198065038, -0.009500385266156946, -0.012099611349875583, 0.9993449314825491, 1.0806493099845849, 0.9760260833795485, 1.035408457338563, 0.033361628293959784, 0.09705371598431453, -0.11184861127264596, 1.8035641555492394, 19.90773064216784, -1.7725085395877453]
initial measure value (MMI): rval = -0.293285
final measure value (MMI): rval = -0.528469
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -6891.99
 iteration 2 energy 0 : -7271.16
 iteration 3 energy 0 : -7568.62
 iteration 4 energy 0 : -7759.2
 iteration 5 energy 0 : -7881.71
 iteration 6 energy 0 : -7977.63
 iteration 7 energy 0 : -8070.53
 iteration 8 energy 0 : -8152.58
 iteration 9 energy 0 : -8230.7
 iteration 10 energy 0 : -8311
 iteration 11 energy 0 : -8386.05
 iteration 12 energy 0 : -8445.58
 E-Slope 0.00705199 iteration 13 energy 0 : -8475.93
 E-Slope 0.00567873 iteration 14 energy 0 : -8457.9
 E-Slope 0.00467949 iteration 15 energy 0 : -8457.08
 E-Slope 0.00383239 iteration 16 energy 0 : -8453.11
 E-Slope 0.00303082 iteration 17 energy 0 : -8454.11
 E-Slope 0.00227394 iteration 18 energy 0 : -8460.95
 E-Slope 0.00159298 iteration 19 energy 0 : -8462.91
 E-Slope 0.00106087 iteration 20 energy 0 : -8487.8
 E-Slope 0.000634402 iteration 21 energy 0 : -8485.19
 E-Slope 0.000356875 iteration 22 energy 0 : -8487.25
 E-Slope 0.000229314 iteration 23 energy 0 : -8487.64
 E-Slope 0.000278808 iteration 24 energy 0 : -8510.82
 E-Slope 0.000368796 iteration 25 energy 0 : -8506.1
 E-Slope 0.000383496 iteration 26 energy 0 : -8502.76
 E-Slope 0.000370063 iteration 27 energy 0 : -8502.07
 E-Slope 0.000368454 iteration 28 energy 0 : -8521.39
 E-Slope 0.000335179 iteration 29 energy 0 : -8518.25
 E-Slope 0.000292905 iteration 30 energy 0 : -8517.46
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -12663.3
 iteration 2 energy 0 : -12796.2
 iteration 3 energy 0 : -12908.4
 iteration 4 energy 0 : -12993
 iteration 5 energy 0 : -13023.3
 iteration 6 energy 0 : -13061.5
 iteration 7 energy 0 : -13078.4
 iteration 8 energy 0 : -13106.8
 iteration 9 energy 0 : -13117.5
 iteration 10 energy 0 : -13140.2
 iteration 11 energy 0 : -13147.4
 iteration 12 energy 0 : -13165.7
 E-Slope 0.00125487 iteration 13 energy 0 : -13170.5
 E-Slope 0.000952557 iteration 14 energy 0 : -13186
 E-Slope 0.000759192 iteration 15 energy 0 : -13189.3
 E-Slope 0.000661664 iteration 16 energy 0 : -13201.8
 E-Slope 0.000563443 iteration 17 energy 0 : -13201.5
 E-Slope 0.00050316 iteration 18 energy 0 : -13213.7
 E-Slope 0.000437707 iteration 19 energy 0 : -13216.7
 E-Slope 0.000401542 iteration 20 energy 0 : -13227.4
 E-Slope 0.000349551 iteration 21 energy 0 : -13225
 E-Slope 0.00032533 iteration 22 energy 0 : -13236.2
 E-Slope 0.000291765 iteration 23 energy 0 : -13238
 E-Slope 0.000280991 iteration 24 energy 0 : -13248
 E-Slope 0.000255644 iteration 25 energy 0 : -13246.7
 E-Slope 0.000250906 iteration 26 energy 0 : -13256.3
 E-Slope 0.000235081 iteration 27 energy 0 : -13257.3
 E-Slope 0.00023447 iteration 28 energy 0 : -13265.3
 E-Slope 0.000213549 iteration 29 energy 0 : -13263.1
 E-Slope 0.000207506 iteration 30 energy 0 : -13270.4
 E-Slope 0.000191994 iteration 31 energy 0 : -13270.8
 E-Slope 0.000191011 iteration 32 energy 0 : -13278.2
 E-Slope 0.000167497 iteration 33 energy 0 : -13274.6
 E-Slope 0.000161976 iteration 34 energy 0 : -13282.8
 E-Slope 0.000146031 iteration 35 energy 0 : -13281.6
 E-Slope 0.000147015 iteration 36 energy 0 : -13289.3
 E-Slope 0.000130348 iteration 37 energy 0 : -13285.9
 E-Slope 0.00013151 iteration 38 energy 0 : -13293.8
 E-Slope 0.000123188 iteration 39 energy 0 : -13292.8
 E-Slope 0.00012967 iteration 40 energy 0 : -13300
 E-Slope 0.000116609 iteration 41 energy 0 : -13295.3
 E-Slope 0.000118971 iteration 42 energy 0 : -13303.4
 E-Slope 0.000106126 iteration 43 energy 0 : -13298.5
 E-Slope 0.000110999 iteration 44 energy 0 : -13307.4
 E-Slope 9.9048e-05 iteration 45 energy 0 : -13305.1
 Converged due to oscillation in optimization  metric 0 bad 11  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -76455.4
 iteration 2 energy 0 : -78025.3
 iteration 3 energy 0 : -79294.9
 iteration 4 energy 0 : -80160.2
 iteration 5 energy 0 : -80830.1
 iteration 6 energy 0 : -81402.6
 iteration 7 energy 0 : -81914.4
 iteration 8 energy 0 : -82406
 iteration 9 energy 0 : -82853.3
 iteration 10 energy 0 : -83300.6
 iteration 11 energy 0 : -83839.2
 iteration 12 energy 0 : -84338
 E-Slope 0.00394124 iteration 13 energy 0 : -84723.1
 E-Slope 0.00354355 iteration 14 energy 0 : -85077.5
 E-Slope 0.0032943 iteration 15 energy 0 : -85412.7
 E-Slope 0.00309839 iteration 16 energy 0 : -85704.7
 E-Slope 0.00290729 iteration 17 energy 0 : -85942.9
 E-Slope 0.0027031 iteration 18 energy 0 : -86151.1
 E-Slope 0.00248142 iteration 19 energy 0 : -86344
 E-Slope 0.00224832 iteration 20 energy 0 : -86519.4
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2530_09142016_Aug2_Ref_vimp2_2926_02222017_Test_NewCases/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2530_09142016_Aug2_Ref_vimp2_2926_02222017_Test_NewCases/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2530_09142016_Aug2_Ref_vimp2_2926_02222017_Test_NewCases/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2530_09142016_Aug2_Ref_vimp2_2926_02222017_Test_NewCases/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2551_09232016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2119_04142016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2551_09232016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2119_04142016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547785486
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [16.6004, 10.0744, -17.9039]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -0.7692086915487906, -3.6387416815590043, 21.046102253479134]
level 0, iter 250, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.04736059597584485, -0.05835995653703885, -0.09844275673229073, 0.9923004147276947, 0.9950255877634007, 0.9339508206064652, 1.0109103423293764, -0.03396681194953045, 0.057679175389418164, 0.0689327366240698, -0.01512023098132985, -4.392391447742757, 22.744700676327433]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 1317, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.054103270736581374, -0.06721521760825414, -0.1036261728879576, 0.9908665737172054, 1.0012190054818693, 0.919499315888985, 1.025968517905161, -0.05950262949087723, 0.08036981542549579, 0.11415484711581701, -0.1643886339516156, -4.43707692931791, 22.5323896497203]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 162, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.05331942365463777, -0.06577652315392295, -0.10806732687865928, 0.990531140814977, 1.0055233006634958, 0.9133525213436938, 1.0304481248293977, -0.060128143183748387, 0.08382300186815096, 0.1350974839590582, -0.073641863010229, -4.42963578218298, 22.53909546560312]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 44, size: fix[42, 46, 34]-mov[42, 43, 32], affine para: [0.06112169949258329, -0.07031364124204036, -0.10070430051891892, 0.9905446852936113, 1.0008332441840195, 0.9087897901821218, 1.0293209533262846, -0.06275218201576443, 0.08752069239298726, 0.13612657097397476, -0.12396481930166352, -4.41806210786052, 22.716167254038517]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 138, size: fix[83, 92, 48]-mov[83, 85, 45], affine para: [0.06250481800421406, -0.06706343634069334, -0.09817778292721334, 0.990937316974154, 1.0049978033436726, 0.9140754056718943, 1.0383518593124492, -0.06051057616739822, 0.08791450286359041, 0.14007202087474982, -0.0736923528451871, -4.423618065746745, 22.670384656006263]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 559, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.05330974161963637, 0.06376629651014631, 0.11772996879513838, 0.9895613095333323, 1.0276119075489456, 1.0851156373289397, 0.9223820173742685, 0.10479647884408347, -0.08237437645288767, -0.07191143109388633, -1.7012744093956733, 4.543980068260217, -21.469491656800095]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 577, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.05875895904705155, 0.06646209662209655, 0.11845474832291446, 0.9889886991488108, 1.027499681738834, 1.0962189607300952, 0.9234908007918654, 0.12247677777535726, -0.09664080136882998, -0.08164953351976463, -1.4180503792539283, 4.67347286166338, -21.601129107660295]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 284, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.05284124213377032, 0.06709611275996823, 0.11954219747312717, 0.9891489158895933, 1.0305864185761584, 1.097316114878599, 0.9207664147134917, 0.12519727973142522, -0.09072600053808894, -0.07454840466370086, -1.6159347971336715, 4.737369697698645, -21.489787512764092]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 199, size: fix[42, 43, 32]-mov[42, 46, 34], affine para: [-0.062423633445833744, 0.06871745141805426, 0.1236463598152288, 0.987974078385901, 1.0300575703775086, 1.090321145063434, 0.9118881461970645, 0.12783632972064773, -0.10104048879333964, -0.07508303433053753, -1.3475816932517024, 4.6294679292215415, -21.574701557812926]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 340, size: fix[83, 85, 45]-mov[83, 92, 48], affine para: [-0.05763873235502002, 0.07011886838978464, 0.11945147988747683, 0.9886821859328377, 1.041941982895913, 1.0842163696842089, 0.9104416496621267, 0.13375983591252372, -0.09631629441512313, -0.07872861393370408, -1.4998964012482034, 4.4088240111425545, -21.387823221456124]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.408071 v2 -0.401094
final [0.06250481800421406, -0.06706343634069334, -0.09817778292721334, 0.990937316974154, 1.0049978033436726, 0.9140754056718943, 1.0383518593124492, -0.06051057616739822, 0.08791450286359041, 0.14007202087474982, -0.0736923528451871, -4.423618065746745, 22.670384656006263]
outputput affine center: [16.6004, 10.0744, -17.9039]
output affine para: [0.06250481800421406, -0.06706343634069334, -0.09817778292721334, 0.990937316974154, 1.0049978033436726, 0.9140754056718943, 1.0383518593124492, -0.06051057616739822, 0.08791450286359041, 0.14007202087474982, -0.0736923528451871, -4.423618065746745, 22.670384656006263]
initial measure value (MMI): rval = -0.147733
final measure value (MMI): rval = -0.408037
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -5588.56
 iteration 2 energy 0 : -6071.45
 iteration 3 energy 0 : -6472.16
 iteration 4 energy 0 : -6732.16
 iteration 5 energy 0 : -6911.59
 iteration 6 energy 0 : -7040.2
 iteration 7 energy 0 : -7137.4
 iteration 8 energy 0 : -7225.07
 iteration 9 energy 0 : -7322.2
 iteration 10 energy 0 : -7444.17
 iteration 11 energy 0 : -7549.66
 iteration 12 energy 0 : -7628.28
 E-Slope 0.0102873 iteration 13 energy 0 : -7620.47
 E-Slope 0.00810463 iteration 14 energy 0 : -7617.9
 E-Slope 0.00656866 iteration 15 energy 0 : -7622.33
 E-Slope 0.00532039 iteration 16 energy 0 : -7618.61
 E-Slope 0.00424588 iteration 17 energy 0 : -7630.7
 E-Slope 0.00323176 iteration 18 energy 0 : -7627.06
 E-Slope 0.0022999 iteration 19 energy 0 : -7638.19
 E-Slope 0.00144436 iteration 20 energy 0 : -7635.31
 E-Slope 0.000772007 iteration 21 energy 0 : -7644.93
 E-Slope 0.000353746 iteration 22 energy 0 : -7642.03
 E-Slope 0.000207588 iteration 23 energy 0 : -7651.76
 E-Slope 0.000245728 iteration 24 energy 0 : -7648.96
 E-Slope 0.000272505 iteration 25 energy 0 : -7658.6
 E-Slope 0.000268713 iteration 26 energy 0 : -7656.8
 E-Slope 0.000282712 iteration 27 energy 0 : -7665.95
 E-Slope 0.000259869 iteration 28 energy 0 : -7663.37
 E-Slope 0.000273652 iteration 29 energy 0 : -7671.82
 E-Slope 0.000252023 iteration 30 energy 0 : -7669.45
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -18016.7
 iteration 2 energy 0 : -18347.5
 iteration 3 energy 0 : -18794.2
 iteration 4 energy 0 : -19175.7
 iteration 5 energy 0 : -19466.3
 iteration 6 energy 0 : -19670.8
 iteration 7 energy 0 : -19794.9
 iteration 8 energy 0 : -19837.2
 iteration 9 energy 0 : -19898.3
 iteration 10 energy 0 : -19942.8
 iteration 11 energy 0 : -19964.6
 iteration 12 energy 0 : -20018.5
 E-Slope 0.00383411 iteration 13 energy 0 : -20020.7
 E-Slope 0.00273909 iteration 14 energy 0 : -20073.8
 E-Slope 0.0019269 iteration 15 energy 0 : -20084
 E-Slope 0.00139888 iteration 16 energy 0 : -20114.3
 E-Slope 0.00107922 iteration 17 energy 0 : -20128.6
 E-Slope 0.000914581 iteration 18 energy 0 : -20154.2
 E-Slope 0.000820413 iteration 19 energy 0 : -20163.4
 E-Slope 0.000736743 iteration 20 energy 0 : -20189.1
 E-Slope 0.000667363 iteration 21 energy 0 : -20193.8
 E-Slope 0.000621207 iteration 22 energy 0 : -20218.5
 E-Slope 0.000556089 iteration 23 energy 0 : -20221.7
 E-Slope 0.000529103 iteration 24 energy 0 : -20244
 E-Slope 0.000467539 iteration 25 energy 0 : -20244.9
 E-Slope 0.00044769 iteration 26 energy 0 : -20266
 E-Slope 0.000406586 iteration 27 energy 0 : -20266
 E-Slope 0.000386603 iteration 28 energy 0 : -20285.3
 E-Slope 0.000351124 iteration 29 energy 0 : -20282.7
 E-Slope 0.000336505 iteration 30 energy 0 : -20302.4
 E-Slope 0.000303902 iteration 31 energy 0 : -20299
 E-Slope 0.000295699 iteration 32 energy 0 : -20318.8
 E-Slope 0.000268623 iteration 33 energy 0 : -20316.3
 E-Slope 0.00026568 iteration 34 energy 0 : -20334.4
 E-Slope 0.000244707 iteration 35 energy 0 : -20332
 E-Slope 0.000246987 iteration 36 energy 0 : -20350
 E-Slope 0.000228807 iteration 37 energy 0 : -20346.2
 E-Slope 0.000231579 iteration 38 energy 0 : -20362
 E-Slope 0.000213958 iteration 39 energy 0 : -20357.9
 E-Slope 0.000218175 iteration 40 energy 0 : -20375.3
 E-Slope 0.000198461 iteration 41 energy 0 : -20369.4
 E-Slope 0.000200734 iteration 42 energy 0 : -20385.5
 E-Slope 0.000178568 iteration 43 energy 0 : -20378.6
 E-Slope 0.000178769 iteration 44 energy 0 : -20393.4
 E-Slope 0.000158116 iteration 45 energy 0 : -20387.7
 E-Slope 0.00015977 iteration 46 energy 0 : -20403
 E-Slope 0.00014092 iteration 47 energy 0 : -20396.2
 E-Slope 0.000145033 iteration 48 energy 0 : -20411
 E-Slope 0.000127554 iteration 49 energy 0 : -20403.3
 E-Slope 0.000131384 iteration 50 energy 0 : -20417.7
 E-Slope 0.000115126 iteration 51 energy 0 : -20411.1
 E-Slope 0.000122078 iteration 52 energy 0 : -20424.9
 E-Slope 0.000108682 iteration 53 energy 0 : -20419.1
 E-Slope 0.000115357 iteration 54 energy 0 : -20430.6
 E-Slope 0.000101954 iteration 55 energy 0 : -20425.5
 E-Slope 0.000108451 iteration 56 energy 0 : -20437.6
 E-Slope 9.5427e-05 iteration 57 energy 0 : -20431.4
 Converged due to oscillation in optimization  metric 0 bad 15  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -135820
 iteration 2 energy 0 : -138563
 iteration 3 energy 0 : -141055
 iteration 4 energy 0 : -143311
 iteration 5 energy 0 : -145301
 iteration 6 energy 0 : -146826
 iteration 7 energy 0 : -148188
 iteration 8 energy 0 : -149346
 iteration 9 energy 0 : -150401
 iteration 10 energy 0 : -151265
 iteration 11 energy 0 : -152088
 iteration 12 energy 0 : -152832
 E-Slope 0.00508889 iteration 13 energy 0 : -153765
 E-Slope 0.00449751 iteration 14 energy 0 : -154963
 E-Slope 0.00409302 iteration 15 energy 0 : -156149
 E-Slope 0.00384024 iteration 16 energy 0 : -157148
 E-Slope 0.00370781 iteration 17 energy 0 : -158066
 E-Slope 0.00362014 iteration 18 energy 0 : -158831
 E-Slope 0.00356222 iteration 19 energy 0 : -159618
 E-Slope 0.00350334 iteration 20 energy 0 : -160363
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2551_09232016_Test_NewCases_Aug1_Ref_vimp2_2119_04142016_Test_NewCases/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2551_09232016_Test_NewCases_Aug1_Ref_vimp2_2119_04142016_Test_NewCases/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2551_09232016_Test_NewCases_Aug1_Ref_vimp2_2119_04142016_Test_NewCases/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2551_09232016_Test_NewCases_Aug1_Ref_vimp2_2119_04142016_Test_NewCases/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2551_09232016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1724_11202015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2551_09232016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1724_11202015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547785627
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [16.6004, 10.0744, -17.9039]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -6.025791023507789, -19.614343602698952, 31.33216113822181]
level 0, iter 1049, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.0605358752046649, -0.03269202898045698, -0.058989188101761174, 0.9958849907200334, 0.8885990497447601, 0.9158038565902522, 0.9616135064271187, -0.06913771053108075, 0.01672668384566994, -0.02530871654211613, -4.847797311147495, -19.71669293995962, 32.76515710041388]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 213, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.063020660081655, -0.035393450788287976, -0.06384274029759929, 0.9953390400036878, 0.8987282219657521, 0.9229532087136507, 0.9759976421884338, -0.08127787261944433, 0.027090789704279104, -0.025935482759677067, -4.822305019539181, -19.98388432343528, 32.805397809540445]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 91, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.0605285784658596, -0.03680827239764162, -0.07340386875820717, 0.9947830488721303, 0.8954902579864309, 0.9230013818681161, 0.979848560851222, -0.0959563553561032, 0.03193963738890504, -0.023836556764402484, -4.894556666363953, -20.023609931302342, 32.67888234083341]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 96, size: fix[42, 46, 34]-mov[37, 41, 32], affine para: [0.06178084941544784, -0.040397000731361446, -0.07689756046176908, 0.9943027578018905, 0.8973143916668892, 0.920655446032241, 0.9933365174069745, -0.10046003305910464, 0.041315587536957556, -0.026673400944693917, -4.958188191579021, -20.08098840722066, 32.66529852016057]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 436, size: fix[83, 92, 48]-mov[74, 81, 39], affine para: [0.0631617549298243, -0.04311243660845977, -0.0727813057161476, 0.9944117819405194, 0.88777028360361, 0.9101922221889708, 0.9823714392191971, -0.10588004782723648, 0.05658004821634219, -0.02298317814712648, -4.998577055720758, -19.935692622326744, 32.89682586329827]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 855, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.055702997969575195, 0.047517156290669604, 0.07875661575855586, 0.9942015345741068, 1.130984005749393, 1.06213750488935, 0.9999544286864451, 0.12356752533693433, -0.0268337490848979, 0.03669217765957164, 2.978802847890367, 17.17911472671706, -35.07461314286191]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 391, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.06371429854312063, 0.046990908207302604, 0.07431713984647714, 0.9940871719482401, 1.1403368739195887, 1.0703418466658006, 0.9895896155014975, 0.11892805063416548, -0.0298072388514319, 0.03171766020158635, 3.469810940615112, 16.948309163606943, -35.30661509807049]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 273, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.06504135722398947, 0.045841703880389294, 0.07575174366827635, 0.9939465948264121, 1.1355046398767894, 1.0715954507094532, 0.9845212470546794, 0.11865564672673623, -0.03043127542596048, 0.0335675930347068, 3.3112678013534738, 16.85338281138851, -35.17969734717352]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 524, size: fix[37, 41, 32]-mov[42, 46, 34], affine para: [-0.06515137531476561, 0.0479999891130271, 0.08153803333040166, 0.9933795087781679, 1.138794332072548, 1.0626175018198085, 0.9876283659947476, 0.11485194682030117, -0.030567769624274068, 0.02976437809305125, 3.022098200803229, 16.920277732167506, -35.20059957325087]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 534, size: fix[74, 81, 39]-mov[83, 92, 48], affine para: [-0.051807666437842896, 0.04694764773106341, 0.07605526517222379, 0.9946494260343027, 1.1301164948110503, 1.071942252493653, 0.9798559807299376, 0.11019431329862041, -0.03258961045986767, 0.03939979593745221, 3.0291549730287173, 17.574739078130246, -34.733346743357345]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.386367 v2 -0.388319
 last params [0.0631617549298243, -0.04311243660845977, -0.0727813057161476, 0.9944117819405194, 0.88777028360361, 0.9101922221889708, 0.9823714392191971, -0.10588004782723648, 0.05658004821634219, -0.02298317814712648, -4.998577055720758, -19.935692622326744, 32.89682586329827]
 my params [-0.051807666437842896, 0.04694764773106341, 0.07605526517222379, 0.9946494260343027, 1.1301164948110503, 1.071942252493653, 0.9798559807299376, 0.11019431329862041, -0.03258961045986767, 0.03939979593745221, 3.0291549730287173, 17.574739078130246, -34.733346743357345]
A=0.890003 0.0326685 -0.0424308 
-0.149119 0.912655 -0.129299 
0.0872704 0.112468 1.01058 

rotation R0.981673 0.150918 -0.116373 
-0.164478 0.979373 -0.117371 
0.0962591 0.134361 0.986246 

upper R0.906619 -0.107216 0.0768913 
0 0.913871 0.00274695 
0 0 1.0168 

s=0.251664 u=0.0633517 v=-0.0535118 w-0.0793737 r=0.99339
m_Rotation from vnl0.0633517 -0.0535118 -0.0793737 0.99339
 new params [0.06335166077985306, -0.0535117600561844, -0.07937367920502804, 0.9933895900710762, 0.9066192018667728, 0.9138706553113021, 1.0167952377017906, -0.11825895882257656, 0.08481104907179852, 0.003005839180499486, -4.743862501445227, -20.078944830110643, 32.85991158211688]
outputput affine center: [16.6004, 10.0744, -17.9039]
output affine para: [0.06335166077985306, -0.0535117600561844, -0.07937367920502804, 0.9933895900710762, 0.9066192018667728, 0.9138706553113021, 1.0167952377017906, -0.11825895882257656, 0.08481104907179852, 0.003005839180499486, -4.743862501445227, -20.078944830110643, 32.85991158211688]
initial measure value (MMI): rval = -0.194788
final measure value (MMI): rval = -0.410113
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -5036.59
 iteration 2 energy 0 : -5476.72
 iteration 3 energy 0 : -5786.19
 iteration 4 energy 0 : -5980.89
 iteration 5 energy 0 : -6117.35
 iteration 6 energy 0 : -6220.24
 iteration 7 energy 0 : -6304.71
 iteration 8 energy 0 : -6371.04
 iteration 9 energy 0 : -6435.28
 iteration 10 energy 0 : -6505.52
 iteration 11 energy 0 : -6592.9
 iteration 12 energy 0 : -6671.54
 E-Slope 0.00909199 iteration 13 energy 0 : -6739.96
 E-Slope 0.0075931 iteration 14 energy 0 : -6793.19
 E-Slope 0.00672222 iteration 15 energy 0 : -6834.59
 E-Slope 0.00605767 iteration 16 energy 0 : -6847.62
 E-Slope 0.00541359 iteration 17 energy 0 : -6847.78
 E-Slope 0.00478975 iteration 18 energy 0 : -6869.85
 E-Slope 0.00409703 iteration 19 energy 0 : -6868.07
 E-Slope 0.00331256 iteration 20 energy 0 : -6861.15
 E-Slope 0.00251555 iteration 21 energy 0 : -6865.74
 E-Slope 0.0017608 iteration 22 energy 0 : -6866.38
 E-Slope 0.00115894 iteration 23 energy 0 : -6871.3
 E-Slope 0.000718154 iteration 24 energy 0 : -6875.26
 E-Slope 0.000438809 iteration 25 energy 0 : -6879.95
 E-Slope 0.000294097 iteration 26 energy 0 : -6884.1
 E-Slope 0.000259675 iteration 27 energy 0 : -6887.59
 E-Slope 0.000262782 iteration 28 energy 0 : -6893.66
 E-Slope 0.000253461 iteration 29 energy 0 : -6896.3
 E-Slope 0.000304759 iteration 30 energy 0 : -6901
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -16283.2
 iteration 2 energy 0 : -16606.6
 iteration 3 energy 0 : -16951.3
 iteration 4 energy 0 : -17240
 iteration 5 energy 0 : -17486
 iteration 6 energy 0 : -17688.2
 iteration 7 energy 0 : -17855
 iteration 8 energy 0 : -18004.7
 iteration 9 energy 0 : -18132.4
 iteration 10 energy 0 : -18230.9
 iteration 11 energy 0 : -18235.8
 iteration 12 energy 0 : -18325.9
 E-Slope 0.0048816 iteration 13 energy 0 : -18306.7
 E-Slope 0.00397123 iteration 14 energy 0 : -18416.2
 E-Slope 0.00317356 iteration 15 energy 0 : -18407.7
 E-Slope 0.00250447 iteration 16 energy 0 : -18423.8
 E-Slope 0.00191875 iteration 17 energy 0 : -18403.4
 E-Slope 0.00154411 iteration 18 energy 0 : -18511
 E-Slope 0.0012235 iteration 19 energy 0 : -18494
 E-Slope 0.000985958 iteration 20 energy 0 : -18499
 E-Slope 0.000792518 iteration 21 energy 0 : -18473.7
 E-Slope 0.00074584 iteration 22 energy 0 : -18557.7
 E-Slope 0.000613466 iteration 23 energy 0 : -18524.7
 E-Slope 0.000582799 iteration 24 energy 0 : -18566.5
 E-Slope 0.000461064 iteration 25 energy 0 : -18542.1
 E-Slope 0.000510126 iteration 26 energy 0 : -18617.6
 E-Slope 0.000481375 iteration 27 energy 0 : -18587.4
 E-Slope 0.000502668 iteration 28 energy 0 : -18647.3
 E-Slope 0.000440538 iteration 29 energy 0 : -18626.8
 E-Slope 0.000560269 iteration 30 energy 0 : -18714.6
 E-Slope 0.000577703 iteration 31 energy 0 : -18673.6
 E-Slope 0.000567771 iteration 32 energy 0 : -18677.8
 E-Slope 0.000463784 iteration 33 energy 0 : -18653
 E-Slope 0.000512801 iteration 34 energy 0 : -18739.3
 E-Slope 0.000441782 iteration 35 energy 0 : -18696.7
 E-Slope 0.000400692 iteration 36 energy 0 : -18709.4
 E-Slope 0.000280418 iteration 37 energy 0 : -18686.2
 E-Slope 0.000324897 iteration 38 energy 0 : -18780
 E-Slope 0.0002639 iteration 39 energy 0 : -18736.4
 E-Slope 0.000251338 iteration 40 energy 0 : -18737.8
 E-Slope 0.000168674 iteration 41 energy 0 : -18710.4
 E-Slope 0.000268884 iteration 42 energy 0 : -18801.9
 E-Slope 0.000259727 iteration 43 energy 0 : -18760.2
 E-Slope 0.000245109 iteration 44 energy 0 : -18766.7
 E-Slope 0.000154488 iteration 45 energy 0 : -18737.6
 E-Slope 0.000248492 iteration 46 energy 0 : -18831.2
 E-Slope 0.000228301 iteration 47 energy 0 : -18785.2
 E-Slope 0.000217192 iteration 48 energy 0 : -18794.8
 E-Slope 0.000138894 iteration 49 energy 0 : -18771.1
 E-Slope 0.000249349 iteration 50 energy 0 : -18860.8
 E-Slope 0.000250697 iteration 51 energy 0 : -18819.9
 E-Slope 0.000242747 iteration 52 energy 0 : -18824.9
 E-Slope 0.000159487 iteration 53 energy 0 : -18799
 E-Slope 0.000263564 iteration 54 energy 0 : -18891.2
 E-Slope 0.000258707 iteration 55 energy 0 : -18849.8
 E-Slope 0.000226557 iteration 56 energy 0 : -18833.2
 E-Slope 0.000121608 iteration 57 energy 0 : -18809.5
 E-Slope 0.000197895 iteration 58 energy 0 : -18891.4
 E-Slope 0.000177138 iteration 59 energy 0 : -18861.4
 E-Slope 0.000186399 iteration 60 energy 0 : -18891.3
 E-Slope 0.000126392 iteration 61 energy 0 : -18864.4
 E-Slope 0.000239499 iteration 62 energy 0 : -18942.9
 E-Slope 0.000252113 iteration 63 energy 0 : -18905.7
 E-Slope 0.000255346 iteration 64 energy 0 : -18907.3
 E-Slope 0.000185139 iteration 65 energy 0 : -18882.9
 E-Slope 0.000283539 iteration 66 energy 0 : -18959.6
 E-Slope 0.000279002 iteration 67 energy 0 : -18923.2
 E-Slope 0.000239216 iteration 68 energy 0 : -18923.4
 E-Slope 0.000126451 iteration 69 energy 0 : -18894.7
 E-Slope 0.000176251 iteration 70 energy 0 : -18972.2
 E-Slope 0.000138454 iteration 71 energy 0 : -18933.6
 E-Slope 0.000132762 iteration 72 energy 0 : -18942.3
 E-Slope 5.83157e-05 iteration 73 energy 0 : -18914.5
 Converged due to oscillation in optimization  metric 0 bad 32  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -129544
 iteration 2 energy 0 : -131885
 iteration 3 energy 0 : -133902
 iteration 4 energy 0 : -135602
 iteration 5 energy 0 : -137040
 iteration 6 energy 0 : -138334
 iteration 7 energy 0 : -139499
 iteration 8 energy 0 : -140540
 iteration 9 energy 0 : -141525
 iteration 10 energy 0 : -142369
 iteration 11 energy 0 : -143020
 iteration 12 energy 0 : -143676
 E-Slope 0.00453103 iteration 13 energy 0 : -144435
 E-Slope 0.00405947 iteration 14 energy 0 : -145354
 E-Slope 0.00373666 iteration 15 energy 0 : -146331
 E-Slope 0.00352251 iteration 16 energy 0 : -147219
 E-Slope 0.00338146 iteration 17 energy 0 : -148031
 E-Slope 0.00329179 iteration 18 energy 0 : -148777
 E-Slope 0.00321853 iteration 19 energy 0 : -149370
 E-Slope 0.00313713 iteration 20 energy 0 : -149885
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2551_09232016_Test_NewCases_Aug2_Ref_vimp2_1724_11202015/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2551_09232016_Test_NewCases_Aug2_Ref_vimp2_1724_11202015/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2551_09232016_Test_NewCases_Aug2_Ref_vimp2_1724_11202015/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2551_09232016_Test_NewCases_Aug2_Ref_vimp2_1724_11202015/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2553_09232016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1709_07072015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2553_09232016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1709_07072015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547785785
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [15.343, 5.16199, 17.8287]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -1.5821646237968405, -21.858338210814757, -3.391671494365813]
level 0, iter 1460, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.055632191888067985, 0.012185829040139665, 0.0035408839417057944, 0.99837068613679, 0.9206224579910617, 1.046305499518565, 1.0865951296868224, -0.03578144639798587, 0.017308112326613778, 0.06754253351676705, 1.7941770513339543, -23.421133696639878, -4.335058714049933]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 98, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.058818360512739684, 0.01889542924789382, -0.001930285681138076, 0.9980879907189147, 0.9157358037789287, 1.0496681511892811, 1.0915430565765787, -0.04675616300148802, 0.008027632411441676, 0.07315101975740188, 1.683329382706344, -23.462912007159865, -4.390524620405773]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 628, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.051338987260655417, 0.014630166781575818, -0.0024666021010315642, 0.99857107032052, 0.9181213565906043, 1.0601209040046407, 1.0969798760914828, -0.05612704872837122, 0.0027106012281530693, 0.0811712653888593, 1.7519397795936063, -23.826489039131086, -4.567767179620144]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 244, size: fix[42, 40, 32]-mov[37, 43, 35], affine para: [-0.06223718123752561, 0.017875910489845635, -0.008788226620584157, 0.9978625918274677, 0.9211609398866116, 1.0517737460851144, 1.086819813349678, -0.06554487887649496, -0.0008558930623586822, 0.0914489518725964, 1.8407722898727477, -23.6990407323325, -4.25463724803602]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 81, size: fix[84, 79, 41]-mov[73, 86, 49], affine para: [-0.06321597632208945, 0.017594895590514845, -0.007154098134035342, 0.9978191112955757, 0.9223697024442215, 1.047789246587227, 1.0854526020043933, -0.0628536072722102, -0.001265547799457278, 0.09373869139381737, 1.9654315193068324, -23.539890598951263, -4.618013542397822]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 635, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.05123616641577543, -0.02197239711507107, -0.00427641542107692, 0.9984356670748391, 1.0426969090337608, 0.9220284044286596, 0.9063656215174143, 0.043138690523047765, -0.006213366906215837, -0.10960872584325233, -1.4747888383349357, 20.420698458068554, 6.612875275222989]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 571, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.056676103438822345, -0.014192632068264323, 0.0011998313973961856, 0.9982910141329454, 1.0514604804412988, 0.9189855963220084, 0.9212512692939518, 0.04509296214901116, -0.029748572595235872, -0.12501724608823817, -1.5079771685263332, 20.425155789159945, 6.676589485235634]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 300, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.04834109328307009, -0.009788414435069025, -0.005242788765022033, 0.9987691619233197, 1.0533198710979008, 0.9268243833378084, 0.9081838445097105, 0.042860815434099496, -0.033124596753093184, -0.1197052230249229, -1.1839979351951222, 20.624559023181423, 6.187617925366538]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 403, size: fix[37, 43, 35]-mov[42, 40, 32], affine para: [0.03938988873811688, -0.008521542876785493, 0.0041451548361183315, 0.9991789817963458, 1.0485847523343224, 0.9203645117560181, 0.8924572163767484, 0.04912037511752654, -0.03753596854574691, -0.12430612388925118, -1.570495360312282, 20.88389686996486, 5.772394279629253]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 66, size: fix[73, 86, 49]-mov[84, 79, 41], affine para: [0.040468797695992056, -0.007235214726461654, 0.00410262364675991, 0.9991461837789883, 1.0584494607917423, 0.9271271691892726, 0.9041097244998815, 0.05033578318831023, -0.0332183680901791, -0.1251716431303028, -1.5032315720681575, 21.000710669037687, 5.937235736948798]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.333758 v2 -0.335889
 last params [-0.06321597632208945, 0.017594895590514845, -0.007154098134035342, 0.9978191112955757, 0.9223697024442215, 1.047789246587227, 1.0854526020043933, -0.0628536072722102, -0.001265547799457278, 0.09373869139381737, 1.9654315193068324, -23.539890598951263, -4.618013542397822]
 my params [0.040468797695992056, -0.007235214726461654, 0.00410262364675991, 0.9991461837789883, 1.0584494607917423, 0.9271271691892726, 0.9041097244998815, 0.05033578318831023, -0.0332183680901791, -0.1251716431303028, -1.5032315720681575, 21.000710669037687, 5.937235736948798]
A=0.944704 -0.0493297 0.0392581 
-0.01143 1.06383 0.22514 
-0.0156242 -0.0895111 1.10232 

rotation R0.99979 0.0106517 0.0175009 
-0.0120965 0.996338 0.0846373 
-0.0165353 -0.0848312 0.996258 

upper R0.944902 -0.0607078 0.0182993 
0 1.067 0.131223 
0 0 1.11794 

s=0.250238 u=-0.0424075 v=0.00851716 w-0.00569246 r=0.999048
m_Rotation from vnl-0.0424075 0.00851716 -0.00569246 0.999048
 new params [-0.04240751615776047, 0.008517156518101959, -0.005692457309172669, 0.9990478750029745, 0.9449021555800036, 1.066999805209591, 1.117939356366245, -0.06424773931339844, 0.019366310483241753, 0.12298284047563779, 2.2229833626951567, -23.695020124230332, -4.6884344813605345]
outputput affine center: [15.343, 5.16199, 17.8287]
output affine para: [-0.04240751615776047, 0.008517156518101959, -0.005692457309172669, 0.9990478750029745, 0.9449021555800036, 1.066999805209591, 1.117939356366245, -0.06424773931339844, 0.019366310483241753, 0.12298284047563779, 2.2229833626951567, -23.695020124230332, -4.6884344813605345]
initial measure value (MMI): rval = -0.139314
final measure value (MMI): rval = -0.353024
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -5178.75
 iteration 2 energy 0 : -5605.57
 iteration 3 energy 0 : -5967.86
 iteration 4 energy 0 : -6270.65
 iteration 5 energy 0 : -6533.03
 iteration 6 energy 0 : -6751.59
 iteration 7 energy 0 : -6947.14
 iteration 8 energy 0 : -7086.11
 iteration 9 energy 0 : -7195.24
 iteration 10 energy 0 : -7301.09
 iteration 11 energy 0 : -7414.46
 iteration 12 energy 0 : -7501.26
 E-Slope 0.0142271 iteration 13 energy 0 : -7575.66
 E-Slope 0.0117771 iteration 14 energy 0 : -7639.78
 E-Slope 0.00982533 iteration 15 energy 0 : -7691.85
 E-Slope 0.00823627 iteration 16 energy 0 : -7731.41
 E-Slope 0.00685677 iteration 17 energy 0 : -7730.62
 E-Slope 0.00564978 iteration 18 energy 0 : -7735.07
 E-Slope 0.00460257 iteration 19 energy 0 : -7732.89
 E-Slope 0.00369688 iteration 20 energy 0 : -7759.56
 E-Slope 0.00282367 iteration 21 energy 0 : -7755.54
 E-Slope 0.00209845 iteration 22 energy 0 : -7777.96
 E-Slope 0.0015236 iteration 23 energy 0 : -7776
 E-Slope 0.00109596 iteration 24 energy 0 : -7785.23
 E-Slope 0.000784837 iteration 25 energy 0 : -7785.35
 E-Slope 0.000610985 iteration 26 energy 0 : -7796.45
 E-Slope 0.00051754 iteration 27 energy 0 : -7793.2
 E-Slope 0.000540778 iteration 28 energy 0 : -7812.51
 E-Slope 0.000514977 iteration 29 energy 0 : -7808.86
 E-Slope 0.000498131 iteration 30 energy 0 : -7821.2
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -14428.2
 iteration 2 energy 0 : -14702.9
 iteration 3 energy 0 : -14880
 iteration 4 energy 0 : -15016.5
 iteration 5 energy 0 : -15144.8
 iteration 6 energy 0 : -15266.4
 iteration 7 energy 0 : -15355.8
 iteration 8 energy 0 : -15384.1
 iteration 9 energy 0 : -15400.3
 iteration 10 energy 0 : -15449.9
 iteration 11 energy 0 : -15475.5
 iteration 12 energy 0 : -15505.2
 E-Slope 0.0025584 iteration 13 energy 0 : -15503.6
 E-Slope 0.00203325 iteration 14 energy 0 : -15561.3
 E-Slope 0.00160193 iteration 15 energy 0 : -15561.7
 E-Slope 0.00126617 iteration 16 energy 0 : -15583.3
 E-Slope 0.00100285 iteration 17 energy 0 : -15579.6
 E-Slope 0.000874572 iteration 18 energy 0 : -15616.8
 E-Slope 0.000792518 iteration 19 energy 0 : -15610.1
 E-Slope 0.000733264 iteration 20 energy 0 : -15641.5
 E-Slope 0.000635758 iteration 21 energy 0 : -15636.1
 E-Slope 0.000577144 iteration 22 energy 0 : -15650.5
 E-Slope 0.00050316 iteration 23 energy 0 : -15643.7
 E-Slope 0.000468709 iteration 24 energy 0 : -15671.2
 E-Slope 0.0003905 iteration 25 energy 0 : -15666.1
 E-Slope 0.000380307 iteration 26 energy 0 : -15682
 E-Slope 0.000335656 iteration 27 energy 0 : -15675.4
 E-Slope 0.000338577 iteration 28 energy 0 : -15708.3
 E-Slope 0.000305042 iteration 29 energy 0 : -15703.1
 E-Slope 0.000307687 iteration 30 energy 0 : -15710.2
 E-Slope 0.00027056 iteration 31 energy 0 : -15702.8
 E-Slope 0.000286661 iteration 32 energy 0 : -15727
 E-Slope 0.000267573 iteration 33 energy 0 : -15720.9
 E-Slope 0.000263602 iteration 34 energy 0 : -15732.6
 E-Slope 0.000220381 iteration 35 energy 0 : -15723.4
 E-Slope 0.000225164 iteration 36 energy 0 : -15744.6
 E-Slope 0.000198707 iteration 37 energy 0 : -15737.9
 E-Slope 0.000188649 iteration 38 energy 0 : -15745.2
 E-Slope 0.000145905 iteration 39 energy 0 : -15737.2
 E-Slope 0.000157185 iteration 40 energy 0 : -15754
 E-Slope 0.000141792 iteration 41 energy 0 : -15747
 E-Slope 0.000141568 iteration 42 energy 0 : -15759
 E-Slope 0.000114784 iteration 43 energy 0 : -15754
 E-Slope 0.000119247 iteration 44 energy 0 : -15760.1
 E-Slope 9.92864e-05 iteration 45 energy 0 : -15753.4
 Converged due to oscillation in optimization  metric 0 bad 16  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -97014.8
 iteration 2 energy 0 : -99152.3
 iteration 3 energy 0 : -100917
 iteration 4 energy 0 : -102329
 iteration 5 energy 0 : -103521
 iteration 6 energy 0 : -104482
 iteration 7 energy 0 : -105261
 iteration 8 energy 0 : -105864
 iteration 9 energy 0 : -106392
 iteration 10 energy 0 : -106804
 iteration 11 energy 0 : -107159
 iteration 12 energy 0 : -107511
 E-Slope 0.00402771 iteration 13 energy 0 : -107853
 E-Slope 0.00332271 iteration 14 energy 0 : -108165
 E-Slope 0.00279334 iteration 15 energy 0 : -108502
 E-Slope 0.0024086 iteration 16 energy 0 : -108865
 E-Slope 0.00215066 iteration 17 energy 0 : -109234
 E-Slope 0.00199335 iteration 18 energy 0 : -109611
 E-Slope 0.00190289 iteration 19 energy 0 : -109937
 E-Slope 0.00184582 iteration 20 energy 0 : -110228
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2553_09232016_Test_NewCases_Aug1_Ref_vimp2_1709_07072015/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2553_09232016_Test_NewCases_Aug1_Ref_vimp2_1709_07072015/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2553_09232016_Test_NewCases_Aug1_Ref_vimp2_1709_07072015/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2553_09232016_Test_NewCases_Aug1_Ref_vimp2_1709_07072015/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2553_09232016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2551_09232016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2553_09232016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2551_09232016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547785903
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [15.343, 5.16199, 17.8287]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 1.24777241615441, 4.886032653476611, -35.772293645343055]
level 0, iter 332, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.10731841057986878, 0.03115852948270299, 0.08536772738027265, 0.9900627535227319, 1.0687853575603274, 1.0121672583113237, 1.0156463462846603, 0.01771706900219569, 0.0209883273875894, -0.02129176843075241, 2.903678687755296, 6.522960898438343, -36.8078495401212]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 38, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.10506965629764026, 0.03199429175092219, 0.08850194822205991, 0.9900020897865581, 1.0689512478061935, 1.0067445499991625, 1.0122328239802831, 0.02107053780350753, 0.023029282297149147, -0.025245953618526915, 2.932021707749779, 6.573510863122138, -36.73491248493566]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 139, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.10742375328494473, 0.03212538118297391, 0.09437764343450197, 0.9892021823337098, 1.07031311835477, 1.0018980150367267, 1.0135735337971843, 0.03253918307611375, 0.02373445620337194, -0.034184933031583466, 2.9354803013397164, 6.6659661432216515, -36.78465498488499]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 72, size: fix[42, 40, 32]-mov[42, 46, 34], affine para: [-0.11203012711805449, 0.03256093510122905, 0.0910705161289076, 0.9889869550278508, 1.070580862587135, 1.0035571890565362, 1.0103273002524895, 0.033991959853765144, 0.023603811227735194, -0.036711979954096446, 2.8976395453528307, 6.743940096219943, -36.74690022067007]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 22, size: fix[84, 79, 41]-mov[83, 92, 48], affine para: [-0.11335970062573715, 0.03247747244848982, 0.09200860912784031, 0.9887513377506809, 1.075648350732286, 1.0077614845473344, 1.0152345385606236, 0.03276835628034408, 0.02171096337412991, -0.03626515385314565, 3.0617445585404193, 6.90212232301908, -36.935141042770496]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 344, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.1008463359403786, -0.0338819215067608, -0.08758511152223823, 0.9904599336480234, 0.9323656924889305, 0.9739116603303767, 0.9578283852120815, -0.023610720559881324, -0.005293791905805602, 0.0168680838455877, -6.690819486800066, -11.748871497122304, 33.122190348527994]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 220, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.09944273057355799, -0.034437380541240736, -0.09510807417990158, 0.9898887131305835, 0.9310590993469845, 0.9790518209853772, 0.9603735241925554, -0.04360281637356873, -0.00611313817123051, 0.015123635756212589, -6.872582095060005, -11.893944672197604, 33.19868888821533]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 634, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.10125949696785745, -0.03624765494478957, -0.0977430096167114, 0.989383103684254, 0.923437602172852, 0.9958705446344176, 0.9653219110525508, -0.05374776299411311, -0.007324878699537949, 0.02237606679136345, -6.893472516925696, -11.720033333506905, 33.39814089046618]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 242, size: fix[42, 46, 34]-mov[42, 40, 32], affine para: [0.10172166964912822, -0.03578175567491557, -0.10088220849042998, 0.9890374855862177, 0.9292031625301322, 0.9825799505469229, 0.9590613150694719, -0.06778263030177444, -0.003051992565214297, 0.013396350079337099, -6.936711412664628, -12.308943636739329, 33.096322599382816]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 513, size: fix[83, 92, 48]-mov[84, 79, 41], affine para: [0.10450402023050682, -0.026882160301581987, -0.09267045672788823, 0.9898325341506141, 0.9363018222573309, 0.9692039881843565, 0.965092311143652, -0.058421256658938964, -0.025767186068778918, 0.007395981033144501, -6.874466707563382, -12.741747079898753, 33.3784693179544]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.389853 v2 -0.392382
 last params [-0.11335970062573715, 0.03247747244848982, 0.09200860912784031, 0.9887513377506809, 1.075648350732286, 1.0077614845473344, 1.0152345385606236, 0.03276835628034408, 0.02171096337412991, -0.03626515385314565, 3.0617445585404193, 6.90212232301908, -36.935141042770496]
 my params [0.10450402023050682, -0.026882160301581987, -0.09267045672788823, 0.9898325341506141, 0.9363018222573309, 0.9692039881843565, 0.965092311143652, -0.058421256658938964, -0.025767186068778918, 0.007395981033144501, -6.874466707563382, -12.741747079898753, 33.3784693179544]
A=1.05696 -0.149313 0.0745625 
0.184045 0.993064 0.211112 
-0.075212 -0.209203 1.01204 

rotation R0.982764 -0.181926 0.0328239 
0.171126 0.962445 0.210752 
-0.0699325 -0.201503 0.976988 

upper R1.0755 0.0378298 0.0386296 
0 1.02509 -0.0143098 
0 0 1.03569 

s=0.252467 u=-0.104081 v=0.0259426 w0.0891341 r=0.990227
m_Rotation from vnl-0.104081 0.0259426 0.0891341 0.990227
 new params [-0.10408083541456685, 0.025942620502302068, 0.08913410309778041, 0.9902268789554408, 1.0754950954775255, 1.0250881903622315, 1.035691516164047, 0.035174300028026614, 0.03591793819688341, -0.013959573802765822, 2.8747375920490175, 6.871980925543417, -36.96302260986954]
outputput affine center: [15.343, 5.16199, 17.8287]
output affine para: [-0.10408083541456685, 0.025942620502302068, 0.08913410309778041, 0.9902268789554408, 1.0754950954775255, 1.0250881903622315, 1.035691516164047, 0.035174300028026614, 0.03591793819688341, -0.013959573802765822, 2.8747375920490175, 6.871980925543417, -36.96302260986954]
initial measure value (MMI): rval = -0.146272
final measure value (MMI): rval = -0.383573
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -5941.88
 iteration 2 energy 0 : -6446.48
 iteration 3 energy 0 : -6801.08
 iteration 4 energy 0 : -7059.54
 iteration 5 energy 0 : -7262.06
 iteration 6 energy 0 : -7456.18
 iteration 7 energy 0 : -7604.48
 iteration 8 energy 0 : -7732.16
 iteration 9 energy 0 : -7829.05
 iteration 10 energy 0 : -7906.19
 iteration 11 energy 0 : -7943.05
 iteration 12 energy 0 : -7947.25
 E-Slope 0.0101106 iteration 13 energy 0 : -7986.05
 E-Slope 0.00776955 iteration 14 energy 0 : -7987.24
 E-Slope 0.00597431 iteration 15 energy 0 : -8014.94
 E-Slope 0.00447232 iteration 16 energy 0 : -8011.22
 E-Slope 0.00330158 iteration 17 energy 0 : -8048.54
 E-Slope 0.00239542 iteration 18 energy 0 : -8042.67
 E-Slope 0.00174567 iteration 19 energy 0 : -8058.94
 E-Slope 0.00127897 iteration 20 energy 0 : -8051.82
 E-Slope 0.00103778 iteration 21 energy 0 : -8080.79
 E-Slope 0.000893578 iteration 22 energy 0 : -8071.9
 E-Slope 0.000830628 iteration 23 energy 0 : -8091.83
 E-Slope 0.000698768 iteration 24 energy 0 : -8083.83
 E-Slope 0.000674792 iteration 25 energy 0 : -8107.04
 E-Slope 0.000584751 iteration 26 energy 0 : -8098.69
 E-Slope 0.000555702 iteration 27 energy 0 : -8111.31
 E-Slope 0.00045611 iteration 28 energy 0 : -8103.02
 E-Slope 0.000452101 iteration 29 energy 0 : -8116.31
 E-Slope 0.000381261 iteration 30 energy 0 : -8108.13
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -14955.8
 iteration 2 energy 0 : -15153.7
 iteration 3 energy 0 : -15384.6
 iteration 4 energy 0 : -15563.5
 iteration 5 energy 0 : -15669.5
 iteration 6 energy 0 : -15685.8
 iteration 7 energy 0 : -15804.4
 iteration 8 energy 0 : -15804.9
 iteration 9 energy 0 : -15879.6
 iteration 10 energy 0 : -15858.8
 iteration 11 energy 0 : -15954
 iteration 12 energy 0 : -15924
 E-Slope 0.00231054 iteration 13 energy 0 : -15999
 E-Slope 0.00172047 iteration 14 energy 0 : -15965.2
 E-Slope 0.00140256 iteration 15 energy 0 : -16042.3
 E-Slope 0.00116614 iteration 16 energy 0 : -16005.3
 E-Slope 0.00106638 iteration 17 energy 0 : -16069.8
 E-Slope 0.000860192 iteration 18 energy 0 : -16030.5
 E-Slope 0.000833027 iteration 19 energy 0 : -16099.8
 E-Slope 0.000695795 iteration 20 energy 0 : -16059.5
 E-Slope 0.000680573 iteration 21 energy 0 : -16118.6
 E-Slope 0.000537314 iteration 22 energy 0 : -16077.4
 E-Slope 0.000556529 iteration 23 energy 0 : -16139.7
 E-Slope 0.000444755 iteration 24 energy 0 : -16098
 E-Slope 0.000468187 iteration 25 energy 0 : -16154
 E-Slope 0.000362203 iteration 26 energy 0 : -16112.4
 E-Slope 0.00040333 iteration 27 energy 0 : -16171.4
 E-Slope 0.00031358 iteration 28 energy 0 : -16127.8
 E-Slope 0.000353798 iteration 29 energy 0 : -16183.1
 E-Slope 0.000263534 iteration 30 energy 0 : -16139.5
 E-Slope 0.000311285 iteration 31 energy 0 : -16193.7
 E-Slope 0.000230454 iteration 32 energy 0 : -16149.9
 E-Slope 0.000276387 iteration 33 energy 0 : -16203.7
 E-Slope 0.000194453 iteration 34 energy 0 : -16159.6
 E-Slope 0.000244886 iteration 35 energy 0 : -16212.6
 E-Slope 0.000170663 iteration 36 energy 0 : -16169.5
 E-Slope 0.000219733 iteration 37 energy 0 : -16220.4
 E-Slope 0.000146359 iteration 38 energy 0 : -16177.6
 E-Slope 0.000200309 iteration 39 energy 0 : -16227.4
 E-Slope 0.000133544 iteration 40 energy 0 : -16186.8
 E-Slope 0.000192121 iteration 41 energy 0 : -16238.2
 E-Slope 0.000131577 iteration 42 energy 0 : -16198.3
 E-Slope 0.000193335 iteration 43 energy 0 : -16248.3
 E-Slope 0.000135481 iteration 44 energy 0 : -16208.2
 E-Slope 0.000198878 iteration 45 energy 0 : -16258
 E-Slope 0.000141829 iteration 46 energy 0 : -16217.8
 E-Slope 0.00020203 iteration 47 energy 0 : -16265.6
 E-Slope 0.000143193 iteration 48 energy 0 : -16225.5
 E-Slope 0.000197522 iteration 49 energy 0 : -16272.2
 E-Slope 0.000133127 iteration 50 energy 0 : -16231.8
 E-Slope 0.000179559 iteration 51 energy 0 : -16277.2
 E-Slope 0.000111125 iteration 52 energy 0 : -16236.6
 E-Slope 0.000156976 iteration 53 energy 0 : -16282.1
 E-Slope 8.91238e-05 iteration 54 energy 0 : -16240.5
 Converged due to oscillation in optimization  metric 0 bad 23  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -101598
 iteration 2 energy 0 : -103388
 iteration 3 energy 0 : -105108
 iteration 4 energy 0 : -106550
 iteration 5 energy 0 : -107865
 iteration 6 energy 0 : -109030
 iteration 7 energy 0 : -109967
 iteration 8 energy 0 : -110740
 iteration 9 energy 0 : -111438
 iteration 10 energy 0 : -112076
 iteration 11 energy 0 : -112680
 iteration 12 energy 0 : -113239
 E-Slope 0.00473271 iteration 13 energy 0 : -113794
 E-Slope 0.00415838 iteration 14 energy 0 : -114391
 E-Slope 0.00370646 iteration 15 energy 0 : -114895
 E-Slope 0.00333545 iteration 16 energy 0 : -115305
 E-Slope 0.00303809 iteration 17 energy 0 : -115677
 E-Slope 0.0027962 iteration 18 energy 0 : -115993
 E-Slope 0.00257693 iteration 19 energy 0 : -116268
 E-Slope 0.0023516 iteration 20 energy 0 : -116465
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2553_09232016_Test_NewCases_Aug2_Ref_vimp2_2551_09232016_Test_NewCases/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2553_09232016_Test_NewCases_Aug2_Ref_vimp2_2551_09232016_Test_NewCases/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2553_09232016_Test_NewCases_Aug2_Ref_vimp2_2551_09232016_Test_NewCases/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2553_09232016_Test_NewCases_Aug2_Ref_vimp2_2551_09232016_Test_NewCases/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2554_09282016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2966_03092017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2554_09282016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2966_03092017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547786012
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [12.3072, 9.56498, 8.81046]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 3.3663449159600933, 6.49976044537549, -29.940159426255025]
level 0, iter 315, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.03129275473113579, -0.020786506622821974, 0.05184401676925758, 0.9979483366231867, 1.0783720175818274, 0.9968646748766076, 1.0478905597444006, -0.03861860138399104, 0.03455457242700642, -0.0007532328585927642, 3.5608770309657585, 6.059435293723008, -30.515961120778357]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 144, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.0337835105910804, -0.021422943159271617, 0.052544504565141474, 0.9978170207801332, 1.081136024102894, 0.9815875793398295, 1.0515560263597556, -0.03928577942292255, 0.03888438581778404, -0.003437683486843546, 3.6244469333664266, 6.146018933228393, -30.509057102051184]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 51, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.03437876494622907, -0.021503234569530145, 0.0550737289052137, 0.9976585567258444, 1.0755413565003247, 0.9809161365571238, 1.0447337251271813, -0.03725868389427276, 0.0442169392970951, -0.0028071672007386134, 3.5046303922005273, 6.155637825911946, -30.452057376972533]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 51, size: fix[36, 39, 32]-mov[39, 40, 32], affine para: [-0.030545498204634276, -0.019776637180229366, 0.0539010850461291, 0.9978830243030103, 1.0759687246386251, 0.9820192013634411, 1.0516662298203319, -0.03937049796275203, 0.03546851062913099, -0.0037937126944935676, 3.6513689926789445, 6.03377603947369, -30.472718880390143]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 67, size: fix[72, 78, 38]-mov[78, 80, 43], affine para: [-0.029978157336644315, -0.02067187637689863, 0.05561640841645678, 0.997787952785867, 1.0705616012749475, 0.9762496364108743, 1.0444077246039587, -0.03500525755138808, 0.0394097016954655, -0.0001759388897006992, 3.554014132966157, 5.937647674220189, -30.528869133848282]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 440, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.02958528797186823, 0.01532862509031205, -0.05913236641073379, 0.9976938945544014, 0.9208858671721805, 1.0154002332592544, 0.9389696833186468, 0.008576445118997916, -0.02739215670735163, -0.009491390827183869, -4.223743784432886, -7.576609553102187, 28.396212252546356]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 83, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.0277602678580417, 0.016071548531964984, -0.06018442657278707, 0.99767174343786, 0.9165945273861912, 1.0183527007624815, 0.9434330778762335, 0.01202566367121913, -0.026205664566476505, -0.009716269602902942, -4.138712120239239, -7.49719223004837, 28.50559676415148]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 208, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.028221595317222254, 0.018227069665389166, -0.05712280561077948, 0.9978017340976698, 0.9108220145043092, 1.0149983933551057, 0.9345858527946138, 0.012680595712318884, -0.03165755672174003, -0.006900889698077112, -4.1533806769517785, -7.413110481338889, 28.336573657572924]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 288, size: fix[39, 40, 32]-mov[36, 39, 32], affine para: [0.025981246413160766, 0.019880927467324467, -0.06651755894876847, 0.9972487843609309, 0.9249001604142747, 1.0208114700516389, 0.9390424954341016, 0.0034664880139385276, -0.03661063809716801, -0.0033215770627970237, -4.175429151731573, -7.135460750292605, 28.36339139733672]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 111, size: fix[78, 80, 43]-mov[72, 78, 38], affine para: [0.028110054862711707, 0.02311395843078948, -0.06498006584475038, 0.997222723760388, 0.9305814294349567, 1.0208348226612596, 0.9418475872666453, 0.0013060823616516074, -0.03925994366789372, -0.002683455224657847, -4.0723483920346055, -7.223568187790435, 28.527186355273393]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.471455 v2 -0.480976
 last params [-0.029978157336644315, -0.02067187637689863, 0.05561640841645678, 0.997787952785867, 1.0705616012749475, 0.9762496364108743, 1.0444077246039587, -0.03500525755138808, 0.0394097016954655, -0.0001759388897006992, 3.554014132966157, 5.937647674220189, -30.528869133848282]
 my params [0.028110054862711707, 0.02311395843078948, -0.06498006584475038, 0.997222723760388, 0.9305814294349567, 1.0208348226612596, 0.9418475872666453, 0.0013060823616516074, -0.03925994366789372, -0.002683455224657847, -4.0723483920346055, -7.223568187790435, 28.527186355273393]
A=1.06598 -0.141599 -0.0119622 
0.128348 0.969602 0.0548187 
0.0450671 -0.0627149 1.05893 

rotation R0.991956 -0.116691 -0.0490603 
0.119436 0.991185 0.057332 
0.0419377 -0.0627304 0.997149 

upper R1.07462 -0.0272851 0.0390905 
0 0.981512 -0.0106957 
0 0 1.05964 

s=0.250618 u=-0.0300898 v=-0.0228058 w0.0591776 r=0.997533
m_Rotation from vnl-0.0300898 -0.0228058 0.0591776 0.997533
 new params [-0.030089815076295042, -0.02280575341818534, 0.05917760997974279, 0.99753321303944, 1.0746201338512729, 0.9815121769370805, 1.0596412285256263, -0.025390448463396532, 0.03637610280713112, -0.010897160284375318, 3.659420796463213, 5.962836486294889, -30.47780410939803]
outputput affine center: [12.3072, 9.56498, 8.81046]
output affine para: [-0.030089815076295042, -0.02280575341818534, 0.05917760997974279, 0.99753321303944, 1.0746201338512729, 0.9815121769370805, 1.0596412285256263, -0.025390448463396532, 0.03637610280713112, -0.010897160284375318, 3.659420796463213, 5.962836486294889, -30.47780410939803]
initial measure value (MMI): rval = -0.289642
final measure value (MMI): rval = -0.483939
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -6685.75
 iteration 2 energy 0 : -7133.74
 iteration 3 energy 0 : -7483.17
 iteration 4 energy 0 : -7734.31
 iteration 5 energy 0 : -7935.79
 iteration 6 energy 0 : -8076.12
 iteration 7 energy 0 : -8197.21
 iteration 8 energy 0 : -8276.84
 iteration 9 energy 0 : -8278.97
 iteration 10 energy 0 : -8283.4
 iteration 11 energy 0 : -8289.48
 iteration 12 energy 0 : -8299.22
 E-Slope 0.00653962 iteration 13 energy 0 : -8304.46
 E-Slope 0.00439446 iteration 14 energy 0 : -8317.92
 E-Slope 0.00285503 iteration 15 energy 0 : -8320.42
 E-Slope 0.00179089 iteration 16 energy 0 : -8337.58
 E-Slope 0.00109618 iteration 17 energy 0 : -8337.66
 E-Slope 0.000711434 iteration 18 energy 0 : -8358.63
 E-Slope 0.00056006 iteration 19 energy 0 : -8357.02
 E-Slope 0.000622399 iteration 20 energy 0 : -8382.05
 E-Slope 0.000637889 iteration 21 energy 0 : -8378.66
 E-Slope 0.000679582 iteration 22 energy 0 : -8403.27
 E-Slope 0.000668921 iteration 23 energy 0 : -8395.3
 E-Slope 0.000654519 iteration 24 energy 0 : -8402.75
 E-Slope 0.000595152 iteration 25 energy 0 : -8397.54
 E-Slope 0.000572875 iteration 26 energy 0 : -8416.46
 E-Slope 0.000498354 iteration 27 energy 0 : -8409.34
 E-Slope 0.000457853 iteration 28 energy 0 : -8420.42
 E-Slope 0.000371486 iteration 29 energy 0 : -8414.6
 E-Slope 0.000351392 iteration 30 energy 0 : -8431.6
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -12723.5
 iteration 2 energy 0 : -12851.5
 iteration 3 energy 0 : -12974.2
 iteration 4 energy 0 : -13074.9
 iteration 5 energy 0 : -13078.5
 iteration 6 energy 0 : -13157.1
 iteration 7 energy 0 : -13151.1
 iteration 8 energy 0 : -13188.3
 iteration 9 energy 0 : -13181.5
 iteration 10 energy 0 : -13238.6
 iteration 11 energy 0 : -13222.4
 iteration 12 energy 0 : -13229
 E-Slope 0.00124922 iteration 13 energy 0 : -13219.1
 E-Slope 0.000908926 iteration 14 energy 0 : -13254.9
 E-Slope 0.000671543 iteration 15 energy 0 : -13243.4
 E-Slope 0.000599213 iteration 16 energy 0 : -13281.6
 E-Slope 0.000464626 iteration 17 energy 0 : -13266.6
 E-Slope 0.000453614 iteration 18 energy 0 : -13289.2
 E-Slope 0.000381649 iteration 19 energy 0 : -13276
 E-Slope 0.000389703 iteration 20 energy 0 : -13308.7
 E-Slope 0.000332594 iteration 21 energy 0 : -13292.7
 E-Slope 0.000365652 iteration 22 energy 0 : -13309.5
 E-Slope 0.000327244 iteration 23 energy 0 : -13294.8
 E-Slope 0.000314936 iteration 24 energy 0 : -13319.4
 E-Slope 0.000240102 iteration 25 energy 0 : -13303.3
 E-Slope 0.000233367 iteration 26 energy 0 : -13323.1
 E-Slope 0.000170968 iteration 27 energy 0 : -13309.5
 E-Slope 0.000205301 iteration 28 energy 0 : -13342.5
 E-Slope 0.000173241 iteration 29 energy 0 : -13323.8
 E-Slope 0.000168376 iteration 30 energy 0 : -13326.3
 E-Slope 0.000112407 iteration 31 energy 0 : -13313.6
 E-Slope 0.000139482 iteration 32 energy 0 : -13340.4
 E-Slope 0.000107355 iteration 33 energy 0 : -13324.7
 E-Slope 0.000116542 iteration 34 energy 0 : -13339.7
 E-Slope 7.22483e-05 iteration 35 energy 0 : -13324.6
 Converged due to oscillation in optimization  metric 0 bad 15  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -80498.5
 iteration 2 energy 0 : -81974.5
 iteration 3 energy 0 : -83329.8
 iteration 4 energy 0 : -84486
 iteration 5 energy 0 : -85351.5
 iteration 6 energy 0 : -86071.4
 iteration 7 energy 0 : -86733.3
 iteration 8 energy 0 : -87303.9
 iteration 9 energy 0 : -87890.1
 iteration 10 energy 0 : -88364.7
 iteration 11 energy 0 : -88747.3
 iteration 12 energy 0 : -89088.2
 E-Slope 0.00425549 iteration 13 energy 0 : -89379.4
 E-Slope 0.00364332 iteration 14 energy 0 : -89649.6
 E-Slope 0.00314773 iteration 15 energy 0 : -89871.4
 E-Slope 0.00274552 iteration 16 energy 0 : -90056.7
 E-Slope 0.00238859 iteration 17 energy 0 : -90210.8
 E-Slope 0.00206443 iteration 18 energy 0 : -90355.1
 E-Slope 0.00177909 iteration 19 energy 0 : -90492.6
 E-Slope 0.00152862 iteration 20 energy 0 : -90625.4
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2554_09282016_Aug1_Ref_vimp2_2966_03092017_Test_NewCases/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2554_09282016_Aug1_Ref_vimp2_2966_03092017_Test_NewCases/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2554_09282016_Aug1_Ref_vimp2_2966_03092017_Test_NewCases/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2554_09282016_Aug1_Ref_vimp2_2966_03092017_Test_NewCases/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2554_09282016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2587_10132016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2554_09282016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2587_10132016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547786094
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [12.3072, 9.56498, 8.81046]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -1.5120707143153354, 4.492937704800603, -0.2748190226394982]
level 0, iter 997, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.03522500912070677, -0.004442294813648666, 0.03259385250063697, 0.9988378774998481, 1.027196351987535, 1.0308080749597184, 1.0345971433322698, 0.017132490802412078, -0.02441399585328542, 0.05027390609486415, 1.1278662449892451, 4.827859159842594, -1.7293471519669255]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 259, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.026310585201483303, -0.005201859777013698, 0.03114400969059244, 0.9991550152111573, 1.031434989930721, 1.0330306677882817, 1.0414069837925366, 0.018276146765555685, -0.025519015939187942, 0.06110296643495704, 1.0453693274320188, 4.809736120346383, -1.9234463047171788]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 43, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.026338436042719692, -0.0069203543175717945, 0.032519903406546154, 0.9991000207013169, 1.030490073179134, 1.0334056058085372, 1.0442411985143507, 0.02001032149389817, -0.02905072098345258, 0.06375525253400309, 1.0680072984452949, 4.811147270043936, -1.8172722430765769]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 67, size: fix[36, 39, 32]-mov[37, 38, 32], affine para: [-0.031324045210596, -0.005001376832703007, 0.03197557817636814, 0.9989851614622256, 1.0268262218786834, 1.025755134977038, 1.0379096606580678, 0.023851190704155874, -0.02771070153817609, 0.0732213610463129, 1.101719519455468, 4.905765742191683, -1.8350147953673102]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 1164, size: fix[72, 78, 38]-mov[73, 76, 40], affine para: [-0.02958567337589261, -0.002125908599374966, 0.020711197648590553, 0.9993453931126531, 1.0270594821402301, 1.0376181615828193, 1.03937516319174, 0.016108163292088314, -0.0473387031503428, 0.09493351308443715, 1.008468167823153, 4.848652890649207, -1.9386379685550772]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 811, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.020872915559239945, 0.0076990539698691554, -0.05159327959640943, 0.9984203420726726, 0.9806236517878513, 0.9768146611875043, 0.9487277147663505, -0.034371083854126155, 0.03140295663065317, -0.029784623716902818, -1.2124444959063798, -4.3940009372571325, 1.195338039706489]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 454, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.03037654994232492, 0.0063549041924024245, -0.04011515150384699, 0.9987129993276999, 0.9715077257011275, 0.9645631550375586, 0.9513033713788083, -0.037591699745681516, 0.03725003159867651, -0.0469970608120153, -1.1529675778303612, -4.721781435865856, 1.2988673753288646]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 523, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.03113850913356197, 0.0028413100074201588, -0.03487989065163844, 0.9989022541943283, 0.9725285977420689, 0.954299125121783, 0.9679851117679417, -0.02762607570046159, 0.04921128023011073, -0.053955007995027275, -1.076594879271537, -4.543513170054931, 1.3662589251913912]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 1072, size: fix[37, 38, 32]-mov[36, 39, 32], affine para: [0.026322522321682588, 0.001399583227487646, -0.03188248278066758, 0.9991439702451064, 0.9669891871356701, 0.9541665703084011, 0.9523049000046518, -0.026807123370248293, 0.05023049582590874, -0.07842625612010454, -1.0905514046188425, -4.798958769271951, 1.3996539879256025]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 174, size: fix[73, 76, 40]-mov[72, 78, 38], affine para: [0.0259066087523677, 0.003131794270553047, -0.03153539398107435, 0.9991619280247106, 0.9670841761177889, 0.9554514029514882, 0.9613167110089029, -0.02403281454744313, 0.04922726015264947, -0.09389138436540323, -1.0842746307348277, -5.014198673121135, 1.768613240871991]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.383015 v2 -0.372191
final [-0.02958567337589261, -0.002125908599374966, 0.020711197648590553, 0.9993453931126531, 1.0270594821402301, 1.0376181615828193, 1.03937516319174, 0.016108163292088314, -0.0473387031503428, 0.09493351308443715, 1.008468167823153, 4.848652890649207, -1.9386379685550772]
outputput affine center: [12.3072, 9.56498, 8.81046]
output affine para: [-0.02958567337589261, -0.002125908599374966, 0.020711197648590553, 0.9993453931126531, 1.0270594821402301, 1.0376181615828193, 1.03937516319174, 0.016108163292088314, -0.0473387031503428, 0.09493351308443715, 1.008468167823153, 4.848652890649207, -1.9386379685550772]
initial measure value (MMI): rval = -0.215185
final measure value (MMI): rval = -0.414212
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -5217.65
 iteration 2 energy 0 : -5569.91
 iteration 3 energy 0 : -5855.79
 iteration 4 energy 0 : -6095.11
 iteration 5 energy 0 : -6292.42
 iteration 6 energy 0 : -6467.01
 iteration 7 energy 0 : -6629.25
 iteration 8 energy 0 : -6763.46
 iteration 9 energy 0 : -6882.35
 iteration 10 energy 0 : -6992.85
 iteration 11 energy 0 : -7097.61
 iteration 12 energy 0 : -7210.13
 E-Slope 0.0130735 iteration 13 energy 0 : -7302.71
 E-Slope 0.0113773 iteration 14 energy 0 : -7374.75
 E-Slope 0.0100001 iteration 15 energy 0 : -7432.22
 E-Slope 0.00884101 iteration 16 energy 0 : -7484.07
 E-Slope 0.00780857 iteration 17 energy 0 : -7529.36
 E-Slope 0.00688337 iteration 18 energy 0 : -7573.07
 E-Slope 0.00607286 iteration 19 energy 0 : -7613.99
 E-Slope 0.00533376 iteration 20 energy 0 : -7651.1
 E-Slope 0.00466368 iteration 21 energy 0 : -7687.06
 E-Slope 0.0040016 iteration 22 energy 0 : -7693.94
 E-Slope 0.00338487 iteration 23 energy 0 : -7705.51
 E-Slope 0.00279705 iteration 24 energy 0 : -7688.35
 E-Slope 0.00234062 iteration 25 energy 0 : -7716.15
 E-Slope 0.00186975 iteration 26 energy 0 : -7699.3
 E-Slope 0.00146575 iteration 27 energy 0 : -7715.48
 E-Slope 0.00106819 iteration 28 energy 0 : -7704.22
 E-Slope 0.00075487 iteration 29 energy 0 : -7718.71
 E-Slope 0.000476174 iteration 30 energy 0 : -7708.61
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -11487.3
 iteration 2 energy 0 : -11579.8
 iteration 3 energy 0 : -11700.8
 iteration 4 energy 0 : -11826.6
 iteration 5 energy 0 : -11917.4
 iteration 6 energy 0 : -11991.8
 iteration 7 energy 0 : -12011.2
 iteration 8 energy 0 : -12025.7
 iteration 9 energy 0 : -12050.3
 iteration 10 energy 0 : -12062.2
 iteration 11 energy 0 : -12079
 iteration 12 energy 0 : -12088
 E-Slope 0.00196271 iteration 13 energy 0 : -12100.8
 E-Slope 0.00143553 iteration 14 energy 0 : -12109.7
 E-Slope 0.00102927 iteration 15 energy 0 : -12121
 E-Slope 0.000767946 iteration 16 energy 0 : -12126.3
 E-Slope 0.000617087 iteration 17 energy 0 : -12135.3
 E-Slope 0.000555106 iteration 18 energy 0 : -12140.3
 E-Slope 0.000501908 iteration 19 energy 0 : -12149.3
 E-Slope 0.000443168 iteration 20 energy 0 : -12152.7
 E-Slope 0.000408582 iteration 21 energy 0 : -12161.3
 E-Slope 0.000369817 iteration 22 energy 0 : -12164.2
 E-Slope 0.000348143 iteration 23 energy 0 : -12173.2
 E-Slope 0.000314854 iteration 24 energy 0 : -12171.9
 E-Slope 0.000293665 iteration 25 energy 0 : -12179.5
 E-Slope 0.000272393 iteration 26 energy 0 : -12183
 E-Slope 0.00026188 iteration 27 energy 0 : -12189.7
 E-Slope 0.000239551 iteration 28 energy 0 : -12188.4
 E-Slope 0.0002281 iteration 29 energy 0 : -12195.8
 E-Slope 0.000213675 iteration 30 energy 0 : -12198.7
 E-Slope 0.000202782 iteration 31 energy 0 : -12200.8
 E-Slope 0.000183873 iteration 32 energy 0 : -12201.1
 E-Slope 0.0001821 iteration 33 energy 0 : -12210.5
 E-Slope 0.000170536 iteration 34 energy 0 : -12209.6
 E-Slope 0.000170343 iteration 35 energy 0 : -12214.5
 E-Slope 0.000153989 iteration 36 energy 0 : -12213.1
 E-Slope 0.000154518 iteration 37 energy 0 : -12222.2
 E-Slope 0.000141487 iteration 38 energy 0 : -12217.1
 E-Slope 0.000142209 iteration 39 energy 0 : -12224.4
 E-Slope 0.000131309 iteration 40 energy 0 : -12224.9
 E-Slope 0.000129692 iteration 41 energy 0 : -12228.6
 E-Slope 0.000121869 iteration 42 energy 0 : -12227.2
 E-Slope 0.000125371 iteration 43 energy 0 : -12237
 E-Slope 0.000115119 iteration 44 energy 0 : -12234
 E-Slope 0.000120766 iteration 45 energy 0 : -12238.9
 E-Slope 0.000111736 iteration 46 energy 0 : -12235.9
 E-Slope 0.000119239 iteration 47 energy 0 : -12245.6
 E-Slope 0.000103526 iteration 48 energy 0 : -12238.1
 E-Slope 0.000109337 iteration 49 energy 0 : -12246.1
 E-Slope 9.55313e-05 iteration 50 energy 0 : -12244.1
 Converged due to oscillation in optimization  metric 0 bad 10  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -70099.7
 iteration 2 energy 0 : -71201.6
 iteration 3 energy 0 : -72422.9
 iteration 4 energy 0 : -73624
 iteration 5 energy 0 : -74705.3
 iteration 6 energy 0 : -75563.2
 iteration 7 energy 0 : -76272.9
 iteration 8 energy 0 : -76874.1
 iteration 9 energy 0 : -77468.9
 iteration 10 energy 0 : -78053.6
 iteration 11 energy 0 : -78629.8
 iteration 12 energy 0 : -79246.2
 E-Slope 0.00563435 iteration 13 energy 0 : -79885.1
 E-Slope 0.00515106 iteration 14 energy 0 : -80544.3
 E-Slope 0.00480217 iteration 15 energy 0 : -81190.3
 E-Slope 0.00459254 iteration 16 energy 0 : -81811
 E-Slope 0.00448599 iteration 17 energy 0 : -82373.7
 E-Slope 0.00439201 iteration 18 energy 0 : -82785.6
 E-Slope 0.00426003 iteration 19 energy 0 : -83121.8
 E-Slope 0.00405656 iteration 20 energy 0 : -83400.1
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2554_09282016_Aug2_Ref_vimp2_2587_10132016_Test_NewCases/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2554_09282016_Aug2_Ref_vimp2_2587_10132016_Test_NewCases/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2554_09282016_Aug2_Ref_vimp2_2587_10132016_Test_NewCases/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2554_09282016_Aug2_Ref_vimp2_2587_10132016_Test_NewCases/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2587_10132016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_676_04252014/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2587_10132016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_676_04252014/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547786209
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [10.8711, 13.9725, 8.57185]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 6.21207221234951, -30.578047634062102, -14.404576902680983]
level 0, iter 1021, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.05791217890203794, 0.026975101627413196, -0.018577125030969224, 0.9977842521570446, 1.0266765201481327, 0.9980403876732418, 1.0744976738633827, 0.021520787533499595, 0.07616845349740946, -0.12299454136329203, 5.880877837592711, -29.550259770011433, -11.105864345043539]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 66, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.0534384481126475, 0.028901136739343674, -0.01648458976874721, 0.9980166906713743, 1.0231690258734805, 0.9982685657788485, 1.075788593530046, 0.026377714901913853, 0.07628383003973335, -0.12763641329124298, 5.869508609832566, -29.51200309283261, -11.066346152064309]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 359, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.049369482910237704, 0.02727741580573075, -0.017868156421539497, 0.998248128337956, 1.0185758133853842, 0.9768251864534796, 1.0863042790103277, 0.027567063611855302, 0.07851877878346866, -0.14171461398386845, 5.8331920487981055, -29.544527184742588, -11.159854094356543]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 28, size: fix[37, 38, 32]-mov[40, 45, 32], affine para: [-0.04944842948870814, 0.02652291420986896, -0.014573421364604449, 0.9983180872009914, 1.020477114868946, 0.977560859758472, 1.0859333528875934, 0.028654417374434454, 0.07855476948428364, -0.1433870301270767, 5.845054816816326, -29.60111934335782, -11.036489967098323]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 522, size: fix[73, 76, 40]-mov[79, 89, 45], affine para: [-0.047421019409072326, 0.025511157230622996, -0.016688950554924975, 0.9984096888073223, 1.0223758555273086, 0.9832122480816377, 1.0755723449241088, 0.032506909243584264, 0.08233389273009162, -0.13761855437926965, 5.9278591904788245, -29.558427990225415, -11.200391600275445]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 1099, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.04651952881516987, -0.021387660610297846, 0.023587184281677227, 0.9984098087208957, 0.9769752042823864, 1.0105816542550117, 0.9080066401275163, -0.011419816151603264, -0.07730027810660307, 0.10804077875212872, -8.789593017576584, 29.561256360364876, 12.63444816350689]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 527, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.04198319682990014, -0.02425666944402967, 0.027064855097127367, 0.9984570690770818, 0.9756153299934747, 1.022801337356755, 0.8990965856589658, -0.014328950294955775, -0.07074479112800793, 0.12673006665198838, -9.126749684981828, 30.677981477098914, 12.188438249342783]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 169, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.04586942000694448, -0.02320487257449821, 0.024460478163163126, 0.9983782926351399, 0.9821918536788042, 1.0285794337274985, 0.9025746707954694, -0.017418274908511895, -0.07302793366969167, 0.11951481949941933, -9.045242015510938, 30.482570570666752, 12.51852835466778]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 376, size: fix[40, 45, 32]-mov[37, 38, 32], affine para: [0.05234912777181206, -0.02232833677525468, 0.026645127357473004, 0.998023572560531, 0.9718772904266082, 1.0104225829736124, 0.907121537745679, -0.010088809711924038, -0.07666918031080042, 0.11934771756810866, -8.969687783780476, 29.602934218048727, 12.94700723406815]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 523, size: fix[79, 89, 45]-mov[73, 76, 40], affine para: [0.04646783675412366, -0.022010512175910317, 0.021573456017240252, 0.9984442215249776, 0.9722031119149435, 1.014000949326096, 0.9047993193330967, -0.025951469384278027, -0.0767927900739613, 0.11422522476176741, -9.134066371865076, 29.859350047250736, 12.586295866502002]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.450524 v2 -0.451822
 last params [-0.047421019409072326, 0.025511157230622996, -0.016688950554924975, 0.9984096888073223, 1.0223758555273086, 0.9832122480816377, 1.0755723449241088, 0.032506909243584264, 0.08233389273009162, -0.13761855437926965, 5.9278591904788245, -29.558427990225415, -11.200391600275445]
 my params [0.04646783675412366, -0.022010512175910317, 0.021573456017240252, 0.9984442215249776, 0.9722031119149435, 1.014000949326096, 0.9047993193330967, -0.025951469384278027, -0.0767927900739613, 0.11422522476176741, -9.134066371865076, 29.859350047250736, 12.586295866502002]
A=1.02206 0.0600173 0.130787 
-0.0392067 0.99285 -0.0350029 
-0.0463612 -0.103604 1.09937 

rotation R0.99824 0.0334906 0.0489394 
-0.0382929 0.994176 0.100735 
-0.0452807 -0.102432 0.993709 

upper R1.02386 0.0265839 0.0821168 
0 0.99969 -0.14303 
0 0 1.09533 

s=0.250435 u=-0.0508801 v=0.023596 w-0.0179771 r=0.998264
m_Rotation from vnl-0.0508801 0.023596 -0.0179771 0.998264
 new params [-0.05088012231456466, 0.023596003258601787, -0.017977096097388245, 0.9982641262708885, 1.0238617883337455, 0.9996897794409049, 1.0953320092035428, 0.02596430640816166, 0.08020303399346812, -0.14307432267821585, 5.897359594615231, -29.56340544717478, -11.166962539896915]
outputput affine center: [10.8711, 13.9725, 8.57185]
output affine para: [-0.05088012231456466, 0.023596003258601787, -0.017977096097388245, 0.9982641262708885, 1.0238617883337455, 0.9996897794409049, 1.0953320092035428, 0.02596430640816166, 0.08020303399346812, -0.14307432267821585, 5.897359594615231, -29.56340544717478, -11.166962539896915]
initial measure value (MMI): rval = -0.206711
final measure value (MMI): rval = -0.457792
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -6242.34
 iteration 2 energy 0 : -6547.61
 iteration 3 energy 0 : -6829.63
 iteration 4 energy 0 : -7060.34
 iteration 5 energy 0 : -7226.48
 iteration 6 energy 0 : -7344.37
 iteration 7 energy 0 : -7438.67
 iteration 8 energy 0 : -7526.13
 iteration 9 energy 0 : -7604.9
 iteration 10 energy 0 : -7670.41
 iteration 11 energy 0 : -7727.67
 iteration 12 energy 0 : -7773.44
 E-Slope 0.00812161 iteration 13 energy 0 : -7809.69
 E-Slope 0.00649919 iteration 14 energy 0 : -7842.76
 E-Slope 0.00530684 iteration 15 energy 0 : -7874.11
 E-Slope 0.00445057 iteration 16 energy 0 : -7900.34
 E-Slope 0.00375827 iteration 17 energy 0 : -7908.42
 E-Slope 0.00312773 iteration 18 energy 0 : -7909.66
 E-Slope 0.00256956 iteration 19 energy 0 : -7924.1
 E-Slope 0.00206898 iteration 20 energy 0 : -7926.68
 E-Slope 0.00166357 iteration 21 energy 0 : -7940.31
 E-Slope 0.00131647 iteration 22 energy 0 : -7942.65
 E-Slope 0.00105308 iteration 23 energy 0 : -7953.73
 E-Slope 0.000839397 iteration 24 energy 0 : -7956.1
 E-Slope 0.000682764 iteration 25 energy 0 : -7965.46
 E-Slope 0.000570238 iteration 26 energy 0 : -7969.23
 E-Slope 0.000513308 iteration 27 energy 0 : -7976.13
 E-Slope 0.000499114 iteration 28 energy 0 : -7980.97
 E-Slope 0.000482365 iteration 29 energy 0 : -7985.39
 E-Slope 0.000450015 iteration 30 energy 0 : -7991.34
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -11888.4
 iteration 2 energy 0 : -11978.9
 iteration 3 energy 0 : -12062.7
 iteration 4 energy 0 : -12151.1
 iteration 5 energy 0 : -12251.2
 iteration 6 energy 0 : -12343.8
 iteration 7 energy 0 : -12428.7
 iteration 8 energy 0 : -12485.1
 iteration 9 energy 0 : -12474
 iteration 10 energy 0 : -12462.5
 iteration 11 energy 0 : -12465.9
 iteration 12 energy 0 : -12458.4
 E-Slope 0.00206286 iteration 13 energy 0 : -12470
 E-Slope 0.0014998 iteration 14 energy 0 : -12461
 E-Slope 0.000997499 iteration 15 energy 0 : -12476.3
 E-Slope 0.000554368 iteration 16 energy 0 : -12466.7
 E-Slope 0.000257961 iteration 17 energy 0 : -12482.4
 E-Slope 7.23153e-05 iteration 18 energy 0 : -12472.7
 Converged due to oscillation in optimization  metric 0 bad 6  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -76171.4
 iteration 2 energy 0 : -77759
 iteration 3 energy 0 : -79191.7
 iteration 4 energy 0 : -80340.2
 iteration 5 energy 0 : -81313.9
 iteration 6 energy 0 : -82206.3
 iteration 7 energy 0 : -83050.5
 iteration 8 energy 0 : -83947.6
 iteration 9 energy 0 : -85008.2
 iteration 10 energy 0 : -85890.4
 iteration 11 energy 0 : -86632.8
 iteration 12 energy 0 : -87273.3
 E-Slope 0.00626089 iteration 13 energy 0 : -87846
 E-Slope 0.00576282 iteration 14 energy 0 : -88276.4
 E-Slope 0.00530349 iteration 15 energy 0 : -88635.1
 E-Slope 0.00483139 iteration 16 energy 0 : -88945.7
 E-Slope 0.00432641 iteration 17 energy 0 : -89218.2
 E-Slope 0.00379473 iteration 18 energy 0 : -89459.1
 E-Slope 0.00324646 iteration 19 energy 0 : -89649
 E-Slope 0.00272116 iteration 20 energy 0 : -89811.6
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2587_10132016_Test_NewCases_Aug1_Ref_vimp2_676_04252014/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2587_10132016_Test_NewCases_Aug1_Ref_vimp2_676_04252014/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2587_10132016_Test_NewCases_Aug1_Ref_vimp2_676_04252014/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2587_10132016_Test_NewCases_Aug1_Ref_vimp2_676_04252014/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2587_10132016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2914_02162017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2587_10132016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2914_02162017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547786302
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [10.8711, 13.9725, 8.57185]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0.2489667392745396, -3.5930502053553965, 4.885596446860358]
level 0, iter 970, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.0639144178522564, -0.027761888856225245, -0.019353626068458314, 0.9973814024112061, 0.9741326617847692, 0.926992962717003, 0.906802383964767, -0.0059409702599736505, 0.10156496078664835, -0.1450877995670485, -1.2765894134551758, -5.138972239288747, 6.014685673363935]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 647, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.05246276517805945, -0.0317410215402629, -0.025544200578871502, 0.9977913908419127, 0.9739595750441115, 0.9533264281264695, 0.9164047144969998, -0.008164033475020309, 0.11136837906409466, -0.18713187903930759, -1.2609752313503784, -5.179913404972017, 6.00479857076948]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 84, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.05176250809950844, -0.03232717251828916, -0.022340131218437063, 0.9978860231556327, 0.9728611489890026, 0.9563779947687625, 0.915752112380485, -0.007950249667871332, 0.11849338491824753, -0.1996101606048541, -1.2554551522709274, -5.323349761649423, 6.01909389452431]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 72, size: fix[37, 38, 32]-mov[36, 38, 32], affine para: [0.047841211026555544, -0.03039825763174756, -0.023963091515361853, 0.9981046712171491, 0.9692080481445453, 0.9581451927369982, 0.9162466114231798, -0.0062751469723577, 0.11769979088990187, -0.21074551837005168, -1.155270219323185, -5.5253400073275385, 6.0318952379612885]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 241, size: fix[73, 76, 40]-mov[72, 76, 37], affine para: [0.04931333927011525, -0.029383169531039536, -0.021059553552024664, 0.998128909070632, 0.9631003271956959, 0.9676740968265617, 0.9177633645111777, -0.0053902098082646436, 0.11736360501182307, -0.2210830869939724, -1.2323006820671214, -5.545220108293878, 6.192664551894887]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 419, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.06923238073749594, 0.028503492787175597, 0.02133542625623128, 0.9969650083843539, 1.026656230508148, 1.0469855965046293, 1.116032975468666, 0.009467029294365225, -0.0991084243081139, 0.12478727548337193, 1.3595823969643448, 3.707371437638599, -7.2491156294463455]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 108, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.06774474709102049, 0.027701563541939075, 0.018998862615368168, 0.9971370597055492, 1.0269676696890282, 1.039336397727179, 1.1167769161125356, 0.010364690776688985, -0.10310453130942075, 0.14647971055645786, 1.4396374304713717, 3.643204947489816, -7.506990139207863]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 138, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.06619995529294977, 0.03020504116694392, 0.018440900048621117, 0.9971785971493328, 1.0305389019062412, 1.0352714266948007, 1.116872700734454, 0.010201577845808243, -0.10678175341033719, 0.15935768353968754, 1.4403133902544427, 3.585542435960294, -7.560370353546578]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 131, size: fix[36, 38, 32]-mov[37, 38, 32], affine para: [-0.06101742223084382, 0.028464699396696144, 0.017223388814149407, 0.9975820717867354, 1.0301338010268193, 1.0182681017281774, 1.1033830964100333, 0.009581202838825556, -0.10709683640005505, 0.173297708937598, 1.5237537804889427, 3.3960446992912288, -7.311217412277931]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 173, size: fix[72, 76, 37]-mov[73, 76, 40], affine para: [-0.05118349266563697, 0.03013307701708784, 0.019522815051450388, 0.9980436400481172, 1.035643836587167, 1.010563374370411, 1.108269359853905, 0.004103897728739462, -0.11051806153455067, 0.18703063763472486, 1.352572808414091, 3.4657314823967407, -7.322267490590346]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.438883 v2 -0.437043
final [0.04931333927011525, -0.029383169531039536, -0.021059553552024664, 0.998128909070632, 0.9631003271956959, 0.9676740968265617, 0.9177633645111777, -0.0053902098082646436, 0.11736360501182307, -0.2210830869939724, -1.2323006820671214, -5.545220108293878, 6.192664551894887]
outputput affine center: [10.8711, 13.9725, 8.57185]
output affine para: [0.04931333927011525, -0.029383169531039536, -0.021059553552024664, 0.998128909070632, 0.9631003271956959, 0.9676740968265617, 0.9177633645111777, -0.0053902098082646436, 0.11736360501182307, -0.2210830869939724, -1.2323006820671214, -5.545220108293878, 6.192664551894887]
initial measure value (MMI): rval = -0.199376
final measure value (MMI): rval = -0.435342
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -4927.4
 iteration 2 energy 0 : -5254.06
 iteration 3 energy 0 : -5536.95
 iteration 4 energy 0 : -5749.6
 iteration 5 energy 0 : -5920.44
 iteration 6 energy 0 : -6074.95
 iteration 7 energy 0 : -6208.18
 iteration 8 energy 0 : -6310.89
 iteration 9 energy 0 : -6394.02
 iteration 10 energy 0 : -6467.51
 iteration 11 energy 0 : -6543.95
 iteration 12 energy 0 : -6620.26
 E-Slope 0.0113518 iteration 13 energy 0 : -6700.39
 E-Slope 0.00962631 iteration 14 energy 0 : -6777.38
 E-Slope 0.00842153 iteration 15 energy 0 : -6844.35
 E-Slope 0.00753227 iteration 16 energy 0 : -6904.65
 E-Slope 0.00685132 iteration 17 energy 0 : -6961.82
 E-Slope 0.00634888 iteration 18 energy 0 : -7016.2
 E-Slope 0.00596645 iteration 19 energy 0 : -7065
 E-Slope 0.00562651 iteration 20 energy 0 : -7112.26
 E-Slope 0.00525033 iteration 21 energy 0 : -7145.83
 E-Slope 0.00464097 iteration 22 energy 0 : -7111.54
 E-Slope 0.00390388 iteration 23 energy 0 : -7094.75
 E-Slope 0.00318968 iteration 24 energy 0 : -7115.71
 E-Slope 0.00241257 iteration 25 energy 0 : -7088.52
 E-Slope 0.00183276 iteration 26 energy 0 : -7137.86
 E-Slope 0.00126326 iteration 27 energy 0 : -7119.08
 E-Slope 0.000785179 iteration 28 energy 0 : -7120.16
 E-Slope 0.00036063 iteration 29 energy 0 : -7100.1
 E-Slope 0.000184111 iteration 30 energy 0 : -7143.03
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -10641.6
 iteration 2 energy 0 : -10679.6
 iteration 3 energy 0 : -10747.2
 iteration 4 energy 0 : -10859.2
 iteration 5 energy 0 : -10973
 iteration 6 energy 0 : -11074.2
 iteration 7 energy 0 : -11161.5
 iteration 8 energy 0 : -11237.7
 iteration 9 energy 0 : -11247.1
 iteration 10 energy 0 : -11219.6
 iteration 11 energy 0 : -11283.7
 iteration 12 energy 0 : -11284.2
 E-Slope 0.00294497 iteration 13 energy 0 : -11280.1
 E-Slope 0.00227871 iteration 14 energy 0 : -11250.4
 E-Slope 0.00168204 iteration 15 energy 0 : -11305.3
 E-Slope 0.00112036 iteration 16 energy 0 : -11277.4
 E-Slope 0.000756353 iteration 17 energy 0 : -11318
 E-Slope 0.000461332 iteration 18 energy 0 : -11287.4
 E-Slope 0.000386231 iteration 19 energy 0 : -11342.7
 E-Slope 0.000388302 iteration 20 energy 0 : -11325.6
 E-Slope 0.000406191 iteration 21 energy 0 : -11338.9
 E-Slope 0.000280447 iteration 22 energy 0 : -11303
 E-Slope 0.000352867 iteration 23 energy 0 : -11360.8
 E-Slope 0.000346743 iteration 24 energy 0 : -11330.6
 E-Slope 0.000341661 iteration 25 energy 0 : -11347.5
 E-Slope 0.000196747 iteration 26 energy 0 : -11312.5
 E-Slope 0.000242941 iteration 27 energy 0 : -11371.4
 E-Slope 0.000171289 iteration 28 energy 0 : -11344.2
 E-Slope 0.000190169 iteration 29 energy 0 : -11360.5
 E-Slope 6.83516e-05 iteration 30 energy 0 : -11320.2
 Converged due to oscillation in optimization  metric 0 bad 11  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -67739.9
 iteration 2 energy 0 : -68956.3
 iteration 3 energy 0 : -70312.7
 iteration 4 energy 0 : -71674.5
 iteration 5 energy 0 : -73100.7
 iteration 6 energy 0 : -74276.1
 iteration 7 energy 0 : -75297.1
 iteration 8 energy 0 : -76108.7
 iteration 9 energy 0 : -76830.7
 iteration 10 energy 0 : -77430.2
 iteration 11 energy 0 : -77957.2
 iteration 12 energy 0 : -78434.8
 E-Slope 0.0068439 iteration 13 energy 0 : -78813.3
 E-Slope 0.00591311 iteration 14 energy 0 : -79104.6
 E-Slope 0.00502404 iteration 15 energy 0 : -79366.5
 E-Slope 0.00422598 iteration 16 energy 0 : -79618.9
 E-Slope 0.00357561 iteration 17 energy 0 : -79843.8
 E-Slope 0.00303683 iteration 18 energy 0 : -80034.6
 E-Slope 0.00260001 iteration 19 energy 0 : -80213
 E-Slope 0.00223538 iteration 20 energy 0 : -80379.6
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2587_10132016_Test_NewCases_Aug2_Ref_vimp2_2914_02162017_Test_NewCases/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2587_10132016_Test_NewCases_Aug2_Ref_vimp2_2914_02162017_Test_NewCases/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2587_10132016_Test_NewCases_Aug2_Ref_vimp2_2914_02162017_Test_NewCases/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2587_10132016_Test_NewCases_Aug2_Ref_vimp2_2914_02162017_Test_NewCases/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2594_10172016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2554_09282016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2594_10172016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2554_09282016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547786390
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [12.0995, -10.2281, -5.47888]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0.19450654878286144, 19.87119073338961, 14.250689018567112]
level 0, iter 183, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.051736838373877395, 0.018448151435522343, -0.04653436361591238, 0.997405393140898, 0.9625313418302576, 0.9860046034120975, 1.0184274105911704, -0.01763993976717485, -0.009303280562619384, -0.026618592050824882, 0.0028739285221552257, 17.754561088704005, 12.173400307566286]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 181, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.049717848740129834, 0.018872122691581217, -0.050332198113135045, 0.9973157214918792, 0.9577336422129363, 0.9875757372818169, 1.0233016656358724, -0.03315995352111419, -0.009322856561780706, -0.0379900070057937, 0.001941762173607865, 17.61415351594658, 12.115609348343032]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 39, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.04822380661946948, 0.01745343456605355, -0.05101350750035745, 0.9973803006624341, 0.9553654489314983, 0.9877075768337317, 1.0236781489568436, -0.03521484210343433, -0.009361704418196207, -0.03949715410961129, 0.0063049090644913385, 17.718391321266292, 12.068862397362793]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 188, size: fix[38, 39, 32]-mov[36, 39, 32], affine para: [0.0486025502162389, 0.02057490162027066, -0.05073243353810598, 0.9973167429272889, 0.9575203007287747, 0.9871570233744807, 1.017384707140825, -0.04331354249277204, -0.014039574276023384, -0.04020420221137328, 0.07729090781540263, 17.79751969344182, 12.1255048627534]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 74, size: fix[75, 77, 42]-mov[72, 78, 38], affine para: [0.05183966747824285, 0.018677544776880797, -0.05188586538879365, 0.9971317140527167, 0.9578680254090927, 0.9865927278917108, 1.0205967618088538, -0.050479484267972746, -0.013746051812565073, -0.040833197873531756, 0.007072523358299543, 17.70518868106693, 12.10304905347723]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 816, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.05554923133302917, -0.0155273933050196, 0.039767790614684904, 0.9975428340603162, 1.0469475054415645, 0.9867262494908607, 0.9736911294618721, 0.016744727372348608, 0.00902106345051614, 0.04492667342139394, 1.2862089839210227, -19.16588436183519, -9.7711179884866]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 102, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.054108317897727555, -0.01461283172534839, 0.043142018527641865, 0.9974956247125124, 1.0445480686057682, 0.9872400762300192, 0.9746770202415278, 0.019513862939026513, 0.00827161996090857, 0.04552109464183831, 1.4006477944376154, -19.148244651320674, -9.821532498675905]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 107, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.052639961753141194, -0.016968663421655466, 0.04563856851121085, 0.9974257967150026, 1.0436869690709163, 0.9843169208904619, 0.9785939869071426, 0.02404480849318173, 0.011628543694190523, 0.045187001720924706, 1.4458036936364658, -19.012904026962786, -9.873047298837522]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 136, size: fix[36, 39, 32]-mov[38, 39, 32], affine para: [-0.056007153747495944, -0.016725114373299634, 0.043965465640951475, 0.9973216668203287, 1.0493868568266131, 0.9813067973086581, 0.9734839878817976, 0.028149500005619457, 0.013399767868696653, 0.047829609182102446, 1.2357210071139841, -19.03142882962363, -9.69311701901657]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 186, size: fix[72, 78, 38]-mov[75, 77, 42], affine para: [-0.06016623943421337, -0.01716094452471186, 0.0435482977226527, 0.9970903025207014, 1.0486568720046807, 0.9842203126586967, 0.9709665732593807, 0.027643979462097235, 0.018345403353159217, 0.045833925476204705, 1.1490406799173616, -19.19621895830876, -9.510066252783702]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.5389 v2 -0.535182
final [0.05183966747824285, 0.018677544776880797, -0.05188586538879365, 0.9971317140527167, 0.9578680254090927, 0.9865927278917108, 1.0205967618088538, -0.050479484267972746, -0.013746051812565073, -0.040833197873531756, 0.007072523358299543, 17.70518868106693, 12.10304905347723]
outputput affine center: [12.0995, -10.2281, -5.47888]
output affine para: [0.05183966747824285, 0.018677544776880797, -0.05188586538879365, 0.9971317140527167, 0.9578680254090927, 0.9865927278917108, 1.0205967618088538, -0.050479484267972746, -0.013746051812565073, -0.040833197873531756, 0.007072523358299543, 17.70518868106693, 12.10304905347723]
initial measure value (MMI): rval = -0.284233
final measure value (MMI): rval = -0.545404
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -6408.77
 iteration 2 energy 0 : -7004.13
 iteration 3 energy 0 : -7397.61
 iteration 4 energy 0 : -7647.26
 iteration 5 energy 0 : -7817.43
 iteration 6 energy 0 : -7943.83
 iteration 7 energy 0 : -8044.22
 iteration 8 energy 0 : -8081.81
 iteration 9 energy 0 : -8087.09
 iteration 10 energy 0 : -8113.2
 iteration 11 energy 0 : -8116.04
 iteration 12 energy 0 : -8131.72
 E-Slope 0.00605597 iteration 13 energy 0 : -8135.79
 E-Slope 0.00391705 iteration 14 energy 0 : -8150.56
 E-Slope 0.00254343 iteration 15 energy 0 : -8154.7
 E-Slope 0.00165685 iteration 16 energy 0 : -8166.28
 E-Slope 0.00108603 iteration 17 energy 0 : -8169.63
 E-Slope 0.00077267 iteration 18 energy 0 : -8179.41
 E-Slope 0.000658885 iteration 19 energy 0 : -8182.25
 E-Slope 0.000614204 iteration 20 energy 0 : -8191.09
 E-Slope 0.000541486 iteration 21 energy 0 : -8192.21
 E-Slope 0.000514522 iteration 22 energy 0 : -8199.72
 E-Slope 0.000462592 iteration 23 energy 0 : -8201.43
 E-Slope 0.000435717 iteration 24 energy 0 : -8208.87
 E-Slope 0.000387914 iteration 25 energy 0 : -8208.84
 E-Slope 0.00037045 iteration 26 energy 0 : -8217.3
 E-Slope 0.000333257 iteration 27 energy 0 : -8215.79
 E-Slope 0.000322193 iteration 28 energy 0 : -8224.16
 E-Slope 0.000291854 iteration 29 energy 0 : -8222.26
 E-Slope 0.000282735 iteration 30 energy 0 : -8229.29
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -13224.6
 iteration 2 energy 0 : -13439.2
 iteration 3 energy 0 : -13594.5
 iteration 4 energy 0 : -13672.4
 iteration 5 energy 0 : -13714.4
 iteration 6 energy 0 : -13752.3
 iteration 7 energy 0 : -13782.1
 iteration 8 energy 0 : -13802
 iteration 9 energy 0 : -13823.1
 iteration 10 energy 0 : -13837.1
 iteration 11 energy 0 : -13853.1
 iteration 12 energy 0 : -13862.3
 E-Slope 0.00133219 iteration 13 energy 0 : -13872.5
 E-Slope 0.000962026 iteration 14 energy 0 : -13879.6
 E-Slope 0.000766031 iteration 15 energy 0 : -13890.5
 E-Slope 0.000637501 iteration 16 energy 0 : -13896
 E-Slope 0.000537343 iteration 17 energy 0 : -13904.5
 E-Slope 0.000460923 iteration 18 energy 0 : -13908.9
 E-Slope 0.000407971 iteration 19 energy 0 : -13917.5
 E-Slope 0.00035838 iteration 20 energy 0 : -13919.8
 E-Slope 0.000326209 iteration 21 energy 0 : -13927.9
 E-Slope 0.000295736 iteration 22 energy 0 : -13931
 E-Slope 0.000278279 iteration 23 energy 0 : -13938.3
 E-Slope 0.000258856 iteration 24 energy 0 : -13941.2
 E-Slope 0.000248209 iteration 25 energy 0 : -13949.5
 E-Slope 0.000230387 iteration 26 energy 0 : -13949.5
 E-Slope 0.000223704 iteration 27 energy 0 : -13957.2
 E-Slope 0.000210926 iteration 28 energy 0 : -13958.4
 E-Slope 0.000206508 iteration 29 energy 0 : -13965.8
 E-Slope 0.000194259 iteration 30 energy 0 : -13966
 E-Slope 0.000192627 iteration 31 energy 0 : -13973.9
 E-Slope 0.00017982 iteration 32 energy 0 : -13973.2
 E-Slope 0.00017558 iteration 33 energy 0 : -13979.5
 E-Slope 0.000164635 iteration 34 energy 0 : -13980.3
 E-Slope 0.000160493 iteration 35 energy 0 : -13985.6
 E-Slope 0.000150152 iteration 36 energy 0 : -13986.2
 E-Slope 0.000150822 iteration 37 energy 0 : -13992.7
 E-Slope 0.000141129 iteration 38 energy 0 : -13992.9
 E-Slope 0.000142202 iteration 39 energy 0 : -13999.3
 E-Slope 0.000134602 iteration 40 energy 0 : -13999.1
 E-Slope 0.000133753 iteration 41 energy 0 : -14002.7
 E-Slope 0.000127919 iteration 42 energy 0 : -14005.5
 E-Slope 0.000130825 iteration 43 energy 0 : -14009.8
 E-Slope 0.00012359 iteration 44 energy 0 : -14009.7
 E-Slope 0.000125512 iteration 45 energy 0 : -14015.7
 E-Slope 0.000119559 iteration 46 energy 0 : -14015.5
 E-Slope 0.000118837 iteration 47 energy 0 : -14019.4
 E-Slope 0.000111885 iteration 48 energy 0 : -14020.2
 E-Slope 0.000113018 iteration 49 energy 0 : -14024.7
 E-Slope 0.000106968 iteration 50 energy 0 : -14025.1
 E-Slope 0.00011453 iteration 51 energy 0 : -14033.2
 E-Slope 0.000110269 iteration 52 energy 0 : -14030.8
 E-Slope 0.000112854 iteration 53 energy 0 : -14037.1
 E-Slope 0.000106625 iteration 54 energy 0 : -14033.5
 E-Slope 0.000113636 iteration 55 energy 0 : -14043.5
 E-Slope 0.000105448 iteration 56 energy 0 : -14038.7
 E-Slope 0.00010775 iteration 57 energy 0 : -14044.9
 E-Slope 9.61646e-05 iteration 58 energy 0 : -14040.6
 Converged due to oscillation in optimization  metric 0 bad 9  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -94816
 iteration 2 energy 0 : -96320
 iteration 3 energy 0 : -97842.1
 iteration 4 energy 0 : -99385.4
 iteration 5 energy 0 : -100514
 iteration 6 energy 0 : -101347
 iteration 7 energy 0 : -102191
 iteration 8 energy 0 : -103037
 iteration 9 energy 0 : -103729
 iteration 10 energy 0 : -104319
 iteration 11 energy 0 : -104842
 iteration 12 energy 0 : -105341
 E-Slope 0.00463457 iteration 13 energy 0 : -105750
 E-Slope 0.00402499 iteration 14 energy 0 : -106129
 E-Slope 0.00351206 iteration 15 energy 0 : -106501
 E-Slope 0.00312459 iteration 16 energy 0 : -106835
 E-Slope 0.00280102 iteration 17 energy 0 : -107140
 E-Slope 0.0024985 iteration 18 energy 0 : -107419
 E-Slope 0.00223797 iteration 19 energy 0 : -107700
 E-Slope 0.0020285 iteration 20 energy 0 : -107935
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2594_10172016_Aug1_Ref_vimp2_2554_09282016/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2594_10172016_Aug1_Ref_vimp2_2554_09282016/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2594_10172016_Aug1_Ref_vimp2_2554_09282016/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2594_10172016_Aug1_Ref_vimp2_2554_09282016/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2594_10172016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2966_03092017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2594_10172016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2966_03092017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547786492
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [12.0995, -10.2281, -5.47888]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 3.493998447722616, 26.331815988602607, -15.607229625572774]
level 0, iter 1012, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.04271574246161193, 0.0037457670065872153, 0.017562201570787726, 0.9989258749534287, 1.0191419930402084, 1.0069374731715732, 1.075772107028071, -0.0338623749320891, 0.04089000108834736, -0.02941486977259116, 4.168703776955494, 23.237241195151842, -18.435724940872596]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 122, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.042091938111244384, 0.004703536859372397, 0.02258279113747525, 0.9988474172922974, 1.0189662526536043, 1.0086083827374406, 1.0737452111428936, -0.034747229382477283, 0.04009769392905286, -0.032159368269670384, 4.165837969779066, 23.29604305318289, -18.499884945792807]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 52, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.03743121911659856, 0.0044935032651777776, 0.022642631679454923, 0.999032543761453, 1.0124174634019836, 1.0036714267044324, 1.0740819771072465, -0.03303721245488955, 0.034777597591393046, -0.035235181977129736, 4.175008172352489, 23.367486911696133, -18.441572761856257]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 94, size: fix[38, 39, 32]-mov[39, 40, 32], affine para: [0.03939783179065701, 0.0026449453815111266, 0.01783667096145769, 0.9990608931807593, 1.018319305168748, 1.0103202671011062, 1.0855253232282767, -0.036094337427440504, 0.0369710943869869, -0.034468791876558234, 4.158932442297102, 23.304631888204856, -18.54610429884849]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 85, size: fix[75, 77, 42]-mov[78, 80, 43], affine para: [0.03908562592380034, 0.0028901572838195876, 0.019727111427039846, 0.9990369372109144, 1.0181555548067742, 1.0069925837263005, 1.086526754278327, -0.04025628569341619, 0.037043005945515475, -0.03476499025668671, 4.185333696581619, 23.389064471890947, -18.74293484857353]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 1010, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.04618676490503938, -0.0028300023449171225, -0.024287854132434814, 0.9986335033314154, 0.9771252946907322, 1.013899073477647, 0.906929946844087, 0.03617908154471692, -0.031693561773434346, 0.023391073040910378, -6.791573285065454, -21.166743858698467, 18.829023635781972]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 953, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.043191619298439295, -0.003080495499546114, -0.028238720190421094, 0.9986628906952851, 0.9694629244519639, 0.9850659947543005, 0.9078288302730202, 0.027035036846014576, -0.019605338043105942, 0.03853996912670331, -6.409939030402449, -20.357094596224922, 18.57170175792202]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 285, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.04204321776100189, -0.004277782526093, -0.02496538944082221, 0.9987946724662826, 0.9694872307818139, 1.000318828300532, 0.9028024595701495, 0.0314348927286669, -0.021643174782126427, 0.03963478001517575, -6.570750360134419, -20.74668390916453, 18.53254443998902]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 203, size: fix[39, 40, 32]-mov[38, 39, 32], affine para: [-0.04319654240380942, -0.004147862019868974, -0.02568308243417546, 0.9987278073838234, 0.9761003720440322, 1.0005364342944119, 0.9035656861762674, 0.027524022299770936, -0.019149705800903912, 0.03982037132335233, -6.436827468119223, -20.654368417888538, 18.486950041678018]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 776, size: fix[78, 80, 43]-mov[75, 77, 42], affine para: [-0.04926000419297732, -0.008123375410556322, -0.03237343322796719, 0.9982281420496426, 0.9726681622242097, 1.0136011196334709, 0.8938177138266523, 0.017742716783587704, -0.01057570027812422, 0.04288327355655501, -6.471402577363689, -20.69660384812967, 18.548278954865232]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.401465 v2 -0.427158
 last params [0.03908562592380034, 0.0028901572838195876, 0.019727111427039846, 0.9990369372109144, 1.0181555548067742, 1.0069925837263005, 1.086526754278327, -0.04025628569341619, 0.037043005945515475, -0.03476499025668671, 4.185333696581619, 23.389064471890947, -18.74293484857353]
 my params [-0.04926000419297732, -0.008123375410556322, -0.03237343322796719, 0.9982281420496426, 0.9726681622242097, 1.0136011196334709, 0.8938177138266523, 0.017742716783587704, -0.01057570027812422, 0.04288327355655501, -6.471402577363689, -20.69660384812967, 18.548278954865232]
A=1.0245 -0.0817545 0.0342851 
0.0651795 0.974982 -0.144245 
-0.0145763 0.110617 1.11322 

rotation R0.997882 -0.0615046 0.0211955 
0.0634861 0.991796 -0.110952 
-0.0141976 0.112063 0.9936 

upper R1.02667 -0.021254 0.0092499 
0 0.984407 -0.0204205 
0 0 1.12283 

s=0.250524 u=0.0558705 v=0.00886683 w0.0313132 r=0.997907
m_Rotation from vnl0.0558705 0.00886683 0.0313132 0.997907
 new params [0.055870547259515894, 0.008866828544108215, 0.031313197197661374, 0.9979074831775498, 1.0266733528909096, 0.9844073212949014, 1.122825159185529, -0.02070176784188277, 0.00900957933671706, -0.02074391113433544, 4.3019729807626375, 23.276119082771274, -18.453231196469545]
outputput affine center: [12.0995, -10.2281, -5.47888]
output affine para: [0.055870547259515894, 0.008866828544108215, 0.031313197197661374, 0.9979074831775498, 1.0266733528909096, 0.9844073212949014, 1.122825159185529, -0.02070176784188277, 0.00900957933671706, -0.02074391113433544, 4.3019729807626375, 23.276119082771274, -18.453231196469545]
initial measure value (MMI): rval = -0.18822
final measure value (MMI): rval = -0.424287
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -5635.1
 iteration 2 energy 0 : -6031.07
 iteration 3 energy 0 : -6388.2
 iteration 4 energy 0 : -6624.19
 iteration 5 energy 0 : -6792.21
 iteration 6 energy 0 : -6929.53
 iteration 7 energy 0 : -7047.45
 iteration 8 energy 0 : -7158.6
 iteration 9 energy 0 : -7256.34
 iteration 10 energy 0 : -7340.01
 iteration 11 energy 0 : -7416.15
 iteration 12 energy 0 : -7485.66
 E-Slope 0.010162 iteration 13 energy 0 : -7528.91
 E-Slope 0.00813001 iteration 14 energy 0 : -7524.44
 E-Slope 0.00660323 iteration 15 energy 0 : -7518.23
 E-Slope 0.00531671 iteration 16 energy 0 : -7516.56
 E-Slope 0.004205 iteration 17 energy 0 : -7536.55
 E-Slope 0.00319401 iteration 18 energy 0 : -7537.39
 E-Slope 0.00230429 iteration 19 energy 0 : -7541.9
 E-Slope 0.00158142 iteration 20 energy 0 : -7549.02
 E-Slope 0.00101787 iteration 21 energy 0 : -7550.06
 E-Slope 0.00062374 iteration 22 energy 0 : -7556.66
 E-Slope 0.000377916 iteration 23 energy 0 : -7554.45
 E-Slope 0.000304386 iteration 24 energy 0 : -7560.98
 E-Slope 0.000319541 iteration 25 energy 0 : -7558.9
 E-Slope 0.000323012 iteration 26 energy 0 : -7566.65
 E-Slope 0.00028415 iteration 27 energy 0 : -7565.25
 E-Slope 0.000244156 iteration 28 energy 0 : -7574.27
 E-Slope 0.000236064 iteration 29 energy 0 : -7572.75
 E-Slope 0.000237159 iteration 30 energy 0 : -7581.45
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -12004.5
 iteration 2 energy 0 : -12164.9
 iteration 3 energy 0 : -12326.6
 iteration 4 energy 0 : -12462.6
 iteration 5 energy 0 : -12554.9
 iteration 6 energy 0 : -12624.9
 iteration 7 energy 0 : -12672.7
 iteration 8 energy 0 : -12684
 iteration 9 energy 0 : -12720.5
 iteration 10 energy 0 : -12733.1
 iteration 11 energy 0 : -12760.7
 iteration 12 energy 0 : -12771.3
 E-Slope 0.00221327 iteration 13 energy 0 : -12787.4
 E-Slope 0.00162598 iteration 14 energy 0 : -12788.5
 E-Slope 0.00122391 iteration 15 energy 0 : -12814.5
 E-Slope 0.000948928 iteration 16 energy 0 : -12813.7
 E-Slope 0.000779733 iteration 17 energy 0 : -12831.2
 E-Slope 0.000659756 iteration 18 energy 0 : -12827.5
 E-Slope 0.000608139 iteration 19 energy 0 : -12851.8
 E-Slope 0.000525258 iteration 20 energy 0 : -12848.2
 E-Slope 0.000492796 iteration 21 energy 0 : -12867
 E-Slope 0.000435993 iteration 22 energy 0 : -12861.3
 E-Slope 0.000428312 iteration 23 energy 0 : -12884.1
 E-Slope 0.000391446 iteration 24 energy 0 : -12874.2
 E-Slope 0.000395536 iteration 25 energy 0 : -12901.2
 E-Slope 0.000357494 iteration 26 energy 0 : -12891.6
 E-Slope 0.000363648 iteration 27 energy 0 : -12909.3
 E-Slope 0.000327297 iteration 28 energy 0 : -12899.1
 E-Slope 0.000333659 iteration 29 energy 0 : -12923
 E-Slope 0.000289813 iteration 30 energy 0 : -12910.2
 E-Slope 0.000306703 iteration 31 energy 0 : -12937.4
 E-Slope 0.0002748 iteration 32 energy 0 : -12923.9
 E-Slope 0.000280216 iteration 33 energy 0 : -12940.6
 E-Slope 0.000237048 iteration 34 energy 0 : -12927.9
 E-Slope 0.000244342 iteration 35 energy 0 : -12947.4
 E-Slope 0.000200383 iteration 36 energy 0 : -12936.2
 E-Slope 0.000217021 iteration 37 energy 0 : -12956.6
 E-Slope 0.00018242 iteration 38 energy 0 : -12943.4
 E-Slope 0.000195548 iteration 39 energy 0 : -12963.8
 E-Slope 0.000157699 iteration 40 energy 0 : -12950.5
 E-Slope 0.000177987 iteration 41 energy 0 : -12970.5
 E-Slope 0.000143394 iteration 42 energy 0 : -12956.8
 E-Slope 0.000172362 iteration 43 energy 0 : -12976.3
 E-Slope 0.000141822 iteration 44 energy 0 : -12959.6
 E-Slope 0.000147022 iteration 45 energy 0 : -12971.4
 E-Slope 0.000103757 iteration 46 energy 0 : -12959.7
 E-Slope 0.000111796 iteration 47 energy 0 : -12977.5
 E-Slope 6.90818e-05 iteration 48 energy 0 : -12961.7
 Converged due to oscillation in optimization  metric 0 bad 17  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -86756.8
 iteration 2 energy 0 : -88758.6
 iteration 3 energy 0 : -90117.6
 iteration 4 energy 0 : -91126.5
 iteration 5 energy 0 : -92051.6
 iteration 6 energy 0 : -93003.4
 iteration 7 energy 0 : -93908.7
 iteration 8 energy 0 : -94656
 iteration 9 energy 0 : -95274.3
 iteration 10 energy 0 : -95810.8
 iteration 11 energy 0 : -96305.8
 iteration 12 energy 0 : -96762.6
 E-Slope 0.0046007 iteration 13 energy 0 : -97165
 E-Slope 0.00408301 iteration 14 energy 0 : -97582.9
 E-Slope 0.00366139 iteration 15 energy 0 : -97973.3
 E-Slope 0.00328474 iteration 16 energy 0 : -98357.1
 E-Slope 0.00295361 iteration 17 energy 0 : -98723.1
 E-Slope 0.00269578 iteration 18 energy 0 : -99100.6
 E-Slope 0.0025134 iteration 19 energy 0 : -99459.3
 E-Slope 0.00237986 iteration 20 energy 0 : -99793.2
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2594_10172016_Aug2_Ref_vimp2_2966_03092017_Test_NewCases/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2594_10172016_Aug2_Ref_vimp2_2966_03092017_Test_NewCases/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2594_10172016_Aug2_Ref_vimp2_2966_03092017_Test_NewCases/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2594_10172016_Aug2_Ref_vimp2_2966_03092017_Test_NewCases/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2597_10182016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2972_03102017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2597_10182016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2972_03102017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547786606
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [6.38749, -7.99249, 4.04787]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 7.309942157814713, 18.435345561508903, -2.4368191671316177]
level 0, iter 575, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.07465923964260064, -0.0554226036210454, -0.10757663582649561, 0.9898391790427912, 1.0111349136258594, 0.9593041811688103, 0.8529857537243306, -0.07621526263335415, 0.014228594659483347, -0.07297269348508634, 5.347961538858251, 16.896946090900496, -1.6394379517208655]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 183, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.07407596497146489, -0.05645414255101915, -0.10822912618416007, 0.9897535741020533, 1.005977584424242, 0.9582768705962624, 0.8498320543449807, -0.08559639372770268, 0.025020367246086937, -0.07788932311051924, 5.397754813822818, 16.922220247618256, -1.671462850045617]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 66, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.07559840056756928, -0.06010866338478501, -0.1083286431169781, 0.9894123182466218, 1.006704197232467, 0.965802751235709, 0.8478870507513706, -0.08751525287021822, 0.030091154687768767, -0.07727903178465917, 5.324282140158625, 16.951176599980197, -1.7953171057085153]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 545, size: fix[40, 43, 33]-mov[39, 39, 32], affine para: [0.07765611109833005, -0.057780012907149486, -0.10664484006883919, 0.9895745937544199, 1.004828473744089, 0.9730338292129608, 0.8410626347811392, -0.09580510460933038, 0.038764164038168444, -0.07766206178708847, 5.400441863623052, 16.804668354216062, -1.6609815160576633]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 413, size: fix[79, 85, 46]-mov[77, 77, 39], affine para: [0.0813168851218392, -0.06953936947046702, -0.10876369561016103, 0.988292618005898, 0.997613420357517, 0.972333918048848, 0.832684617645975, -0.10494845925804253, 0.05699375544984208, -0.0786836994026556, 5.539600458231259, 16.837895000821433, -2.208629772170582]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 1732, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.06687212844690431, 0.0506335020333142, 0.09890602903056456, 0.9915553259048271, 1.0072066814360647, 0.9689046026711673, 1.139443527108825, 0.08051830419162775, 0.01959907584851555, 0.13436100049705363, -3.3768711378207033, -16.231167235860024, 4.239986956088731]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 817, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.0711675677515322, 0.05699395994388346, 0.09251430551268448, 0.9915280979910512, 1.0125989475990584, 0.9566645948113491, 1.148606337693804, 0.07273768764354954, 0.010019407585991742, 0.15540751073867073, -3.579829182286136, -15.807717918073495, 4.498401312055148]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 344, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.07411426116124256, 0.05533193991879738, 0.0816915656950334, 0.9923567608534946, 1.0133628072063607, 0.9546600760729589, 1.1556446866398342, 0.06374386214050763, 0.004197585754408785, 0.16541903647229197, -3.8596191588324484, -15.482463555328275, 4.55856782758526]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 536, size: fix[39, 39, 32]-mov[40, 43, 33], affine para: [-0.07436924283083901, 0.058798008609859585, 0.08436748085833279, 0.9919143804169296, 1.0156009734885212, 0.9474062934899046, 1.144029250101157, 0.0650672820210094, -0.006145469172339416, 0.16258791542780102, -3.6360698900521333, -15.247806028626503, 4.43570715713532]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 865, size: fix[77, 77, 39]-mov[79, 85, 46], affine para: [-0.06571070580004981, 0.057898795524638266, 0.09559456519709907, 0.9915601402460835, 1.0093232622494814, 0.9454551555543733, 1.1442062454015665, 0.06611416979364472, 0.006615510571523536, 0.16126417301416135, -3.2126111174807086, -15.595006600777632, 4.393533425940158]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.40391 v2 -0.394451
final [0.0813168851218392, -0.06953936947046702, -0.10876369561016103, 0.988292618005898, 0.997613420357517, 0.972333918048848, 0.832684617645975, -0.10494845925804253, 0.05699375544984208, -0.0786836994026556, 5.539600458231259, 16.837895000821433, -2.208629772170582]
outputput affine center: [6.38749, -7.99249, 4.04787]
output affine para: [0.0813168851218392, -0.06953936947046702, -0.10876369561016103, 0.988292618005898, 0.997613420357517, 0.972333918048848, 0.832684617645975, -0.10494845925804253, 0.05699375544984208, -0.0786836994026556, 5.539600458231259, 16.837895000821433, -2.208629772170582]
initial measure value (MMI): rval = -0.164565
final measure value (MMI): rval = -0.411716
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -4456.12
 iteration 2 energy 0 : -4717.67
 iteration 3 energy 0 : -4937.23
 iteration 4 energy 0 : -5125.7
 iteration 5 energy 0 : -5299.52
 iteration 6 energy 0 : -5433.91
 iteration 7 energy 0 : -5550.45
 iteration 8 energy 0 : -5656.88
 iteration 9 energy 0 : -5753.34
 iteration 10 energy 0 : -5851.87
 iteration 11 energy 0 : -5939.3
 iteration 12 energy 0 : -6017.92
 E-Slope 0.0124056 iteration 13 energy 0 : -6088.52
 E-Slope 0.0107235 iteration 14 energy 0 : -6120.23
 E-Slope 0.00916798 iteration 15 energy 0 : -6120.19
 E-Slope 0.00775079 iteration 16 energy 0 : -6134.43
 E-Slope 0.00648114 iteration 17 energy 0 : -6145.55
 E-Slope 0.00528219 iteration 18 energy 0 : -6154.43
 E-Slope 0.00415818 iteration 19 energy 0 : -6161.58
 E-Slope 0.00312591 iteration 20 energy 0 : -6163.02
 E-Slope 0.00224578 iteration 21 energy 0 : -6173.92
 E-Slope 0.0015395 iteration 22 energy 0 : -6173.59
 E-Slope 0.00106017 iteration 23 energy 0 : -6188.2
 E-Slope 0.000747316 iteration 24 energy 0 : -6184.61
 E-Slope 0.000660799 iteration 25 energy 0 : -6199.73
 E-Slope 0.000613905 iteration 26 energy 0 : -6194.12
 E-Slope 0.000589848 iteration 27 energy 0 : -6214.25
 E-Slope 0.000554629 iteration 28 energy 0 : -6209.72
 E-Slope 0.000572167 iteration 29 energy 0 : -6226.73
 E-Slope 0.000546791 iteration 30 energy 0 : -6217.04
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -12160.9
 iteration 2 energy 0 : -12357.2
 iteration 3 energy 0 : -12558
 iteration 4 energy 0 : -12723.1
 iteration 5 energy 0 : -12870.4
 iteration 6 energy 0 : -13008.6
 iteration 7 energy 0 : -13123.7
 iteration 8 energy 0 : -13238.9
 iteration 9 energy 0 : -13288.1
 iteration 10 energy 0 : -13288.9
 iteration 11 energy 0 : -13337.9
 iteration 12 energy 0 : -13332.4
 E-Slope 0.00395517 iteration 13 energy 0 : -13396.8
 E-Slope 0.00312363 iteration 14 energy 0 : -13382.5
 E-Slope 0.0025097 iteration 15 energy 0 : -13460.1
 E-Slope 0.00194544 iteration 16 energy 0 : -13439.2
 E-Slope 0.00159148 iteration 17 energy 0 : -13518.3
 E-Slope 0.00129794 iteration 18 energy 0 : -13495.2
 E-Slope 0.00117604 iteration 19 energy 0 : -13555.9
 E-Slope 0.00110915 iteration 20 energy 0 : -13532.9
 E-Slope 0.00106795 iteration 21 energy 0 : -13550.6
 E-Slope 0.000931248 iteration 22 energy 0 : -13535.3
 E-Slope 0.000828944 iteration 23 energy 0 : -13551.2
 E-Slope 0.00065814 iteration 24 energy 0 : -13550.3
 E-Slope 0.000554636 iteration 25 energy 0 : -13560.9
 E-Slope 0.000387549 iteration 26 energy 0 : -13559.4
 E-Slope 0.000329055 iteration 27 energy 0 : -13572
 E-Slope 0.00020574 iteration 28 energy 0 : -13566.1
 E-Slope 0.000210993 iteration 29 energy 0 : -13582.8
 E-Slope 0.000152752 iteration 30 energy 0 : -13574.8
 E-Slope 0.000201359 iteration 31 energy 0 : -13592.9
 E-Slope 0.000196628 iteration 32 energy 0 : -13589.7
 E-Slope 0.000236079 iteration 33 energy 0 : -13610.5
 E-Slope 0.00022582 iteration 34 energy 0 : -13603.7
 E-Slope 0.000263959 iteration 35 energy 0 : -13630.9
 E-Slope 0.000266246 iteration 36 energy 0 : -13620.4
 E-Slope 0.000311077 iteration 37 energy 0 : -13650.7
 E-Slope 0.00031063 iteration 38 energy 0 : -13636.6
 E-Slope 0.000355475 iteration 39 energy 0 : -13668.8
 E-Slope 0.000346571 iteration 40 energy 0 : -13655.6
 E-Slope 0.000384979 iteration 41 energy 0 : -13686.6
 E-Slope 0.00036867 iteration 42 energy 0 : -13676.2
 E-Slope 0.000401892 iteration 43 energy 0 : -13708.6
 E-Slope 0.000380337 iteration 44 energy 0 : -13694.2
 E-Slope 0.000417501 iteration 45 energy 0 : -13730.5
 E-Slope 0.000395946 iteration 46 energy 0 : -13718
 E-Slope 0.000441685 iteration 47 energy 0 : -13754.7
 E-Slope 0.000420094 iteration 48 energy 0 : -13741.2
 E-Slope 0.000463933 iteration 49 energy 0 : -13774.5
 E-Slope 0.000434019 iteration 50 energy 0 : -13761
 E-Slope 0.000469856 iteration 51 energy 0 : -13793.5
 E-Slope 0.000434421 iteration 52 energy 0 : -13781.1
 E-Slope 0.000462703 iteration 53 energy 0 : -13813.6
 E-Slope 0.000427544 iteration 54 energy 0 : -13803.4
 E-Slope 0.000453427 iteration 55 energy 0 : -13832.3
 E-Slope 0.000409894 iteration 56 energy 0 : -13821.5
 E-Slope 0.000425994 iteration 57 energy 0 : -13844.7
 E-Slope 0.000375725 iteration 58 energy 0 : -13832.7
 E-Slope 0.000388213 iteration 59 energy 0 : -13856.2
 E-Slope 0.000334896 iteration 60 energy 0 : -13843.8
 E-Slope 0.000343286 iteration 61 energy 0 : -13868.2
 E-Slope 0.000293456 iteration 62 energy 0 : -13858.8
 E-Slope 0.000301249 iteration 63 energy 0 : -13879.3
 E-Slope 0.000255719 iteration 64 energy 0 : -13870.1
 E-Slope 0.000271916 iteration 65 energy 0 : -13891.7
 E-Slope 0.00024049 iteration 66 energy 0 : -13882.9
 E-Slope 0.000262603 iteration 67 energy 0 : -13902
 E-Slope 0.000234723 iteration 68 energy 0 : -13891.4
 E-Slope 0.00025297 iteration 69 energy 0 : -13910.5
 E-Slope 0.000226744 iteration 70 energy 0 : -13904.5
 E-Slope 0.000235289 iteration 71 energy 0 : -13915.3
 E-Slope 0.000203587 iteration 72 energy 0 : -13911.6
 E-Slope 0.000211529 iteration 73 energy 0 : -13923.9
 E-Slope 0.000179157 iteration 74 energy 0 : -13916
 E-Slope 0.000182547 iteration 75 energy 0 : -13928.3
 E-Slope 0.000153281 iteration 76 energy 0 : -13924.1
 E-Slope 0.000160091 iteration 77 energy 0 : -13934.5
 E-Slope 0.000131637 iteration 78 energy 0 : -13926.9
 E-Slope 0.000146858 iteration 79 energy 0 : -13943.9
 E-Slope 0.000123203 iteration 80 energy 0 : -13935.2
 E-Slope 0.00013794 iteration 81 energy 0 : -13948.2
 E-Slope 0.000124693 iteration 82 energy 0 : -13941.7
 E-Slope 0.000129901 iteration 83 energy 0 : -13949.3
 E-Slope 0.000116974 iteration 84 energy 0 : -13946.8
 E-Slope 0.000118218 iteration 85 energy 0 : -13949.7
 E-Slope 9.48235e-05 iteration 86 energy 0 : -13946.3
 Converged due to oscillation in optimization  metric 0 bad 38  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -94615.3
 iteration 2 energy 0 : -96516
 iteration 3 energy 0 : -98388.5
 iteration 4 energy 0 : -100117
 iteration 5 energy 0 : -101643
 iteration 6 energy 0 : -103081
 iteration 7 energy 0 : -104158
 iteration 8 energy 0 : -105024
 iteration 9 energy 0 : -105807
 iteration 10 energy 0 : -106492
 iteration 11 energy 0 : -107106
 iteration 12 energy 0 : -107666
 E-Slope 0.00567658 iteration 13 energy 0 : -108199
 E-Slope 0.0048913 iteration 14 energy 0 : -108717
 E-Slope 0.00423142 iteration 15 energy 0 : -109198
 E-Slope 0.00369137 iteration 16 energy 0 : -109598
 E-Slope 0.00325838 iteration 17 energy 0 : -109970
 E-Slope 0.0029334 iteration 18 energy 0 : -110293
 E-Slope 0.00266301 iteration 19 energy 0 : -110586
 E-Slope 0.00241996 iteration 20 energy 0 : -110855
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2597_10182016_Test_NewCases_Aug1_Ref_vimp2_2972_03102017_Test_NewCases/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2597_10182016_Test_NewCases_Aug1_Ref_vimp2_2972_03102017_Test_NewCases/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2597_10182016_Test_NewCases_Aug1_Ref_vimp2_2972_03102017_Test_NewCases/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2597_10182016_Test_NewCases_Aug1_Ref_vimp2_2972_03102017_Test_NewCases/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2597_10182016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2998_03222017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2597_10182016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2998_03222017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547786768
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [6.38749, -7.99249, 4.04787]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 7.105565512174073, 18.270603274501486, -12.126498893567955]
level 0, iter 955, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.029731400011190463, -0.03449799575240158, -0.04874474323606615, 0.99777246010766, 0.9652973674554493, 0.933197289059783, 0.9205504542821134, -0.019136781301522916, -0.025851515955113775, -0.15899476404032925, 5.452462681551122, 14.80825165170072, -9.498477351605269]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 654, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.03447607733060275, -0.03253801440073037, -0.05213811504673694, 0.997514057379707, 0.9628582538337613, 0.9337973737977807, 0.9195505538898066, -0.030037639403933062, -0.042054250382376104, -0.17861271595404324, 5.372139378215336, 14.687830488328418, -9.383675472424835]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 110, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.035508714774010616, -0.0326782739582746, -0.05354330875583889, 0.997398804728421, 0.960845622255407, 0.9331773694301039, 0.9202775450849895, -0.030995608564132526, -0.03834696388621738, -0.17769832242724745, 5.441439863890467, 14.73174724588963, -9.413682041178548]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 127, size: fix[40, 43, 33]-mov[39, 45, 33], affine para: [-0.0358676668378123, -0.02907885036520339, -0.051179178711984186, 0.997621482629267, 0.9665066220529892, 0.9364798425581018, 0.916112963427225, -0.030647787801698446, -0.035178955262601154, -0.18770943014341784, 5.402279025300801, 14.73659530644635, -9.303762173518228]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 322, size: fix[79, 85, 46]-mov[77, 89, 47], affine para: [-0.035230399346278564, -0.02794107743397968, -0.04892954596838917, 0.9977895643296022, 0.9608768804555254, 0.9412533772718071, 0.9130770853116532, -0.03938809436866168, -0.0331814091319762, -0.19176103209717657, 5.5010173463035805, 14.670324044211327, -9.078079729519374]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 2221, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.045165301983010726, 0.033975550302325644, 0.051515619717385386, 0.9970716616189486, 1.0375228711674769, 1.0449659760486074, 0.9916204543188772, 0.03832452508327218, 0.06034075330070164, 0.261992995639993, -3.580663394625454, -13.062911957799678, 7.701407680439622]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 213, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.04571914026858616, 0.033489192476864826, 0.049796029724197555, 0.9971502342295546, 1.041585809897617, 1.040663428962583, 0.9882337505794437, 0.03306671197845107, 0.06060882658062177, 0.2658386739542817, -3.599891248078199, -12.921973953900297, 7.631705969241808]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 112, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.04537736872112828, 0.031281641606122824, 0.04835165554708343, 0.997308613575672, 1.040601256299468, 1.039263673574116, 0.9848517700776865, 0.03529300977546302, 0.06289782045764848, 0.2637260533198631, -3.7476671324972473, -12.964149851242183, 7.517087988126811]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 402, size: fix[39, 45, 33]-mov[40, 43, 33], affine para: [0.046684728795523364, 0.03316148182191588, 0.04964903344866548, 0.9971237765183801, 1.0340808256681735, 1.0334246912631262, 0.9953315395471649, 0.03535787336024991, 0.05990580848931887, 0.262973921490764, -3.6412491767870367, -12.805463159857327, 7.973440492005683]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 66, size: fix[77, 89, 47]-mov[79, 85, 46], affine para: [0.04197763439916319, 0.0344950508963656, 0.054146911321386486, 0.9970537004937404, 1.0317945844268253, 1.0325410323057846, 1.001916643595627, 0.032739632160777986, 0.05705777156032845, 0.26286209863458326, -3.4969064385254267, -12.966136131639182, 8.103860995350855]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.428463 v2 -0.412616
final [-0.035230399346278564, -0.02794107743397968, -0.04892954596838917, 0.9977895643296022, 0.9608768804555254, 0.9412533772718071, 0.9130770853116532, -0.03938809436866168, -0.0331814091319762, -0.19176103209717657, 5.5010173463035805, 14.670324044211327, -9.078079729519374]
outputput affine center: [6.38749, -7.99249, 4.04787]
output affine para: [-0.035230399346278564, -0.02794107743397968, -0.04892954596838917, 0.9977895643296022, 0.9608768804555254, 0.9412533772718071, 0.9130770853116532, -0.03938809436866168, -0.0331814091319762, -0.19176103209717657, 5.5010173463035805, 14.670324044211327, -9.078079729519374]
initial measure value (MMI): rval = -0.185829
final measure value (MMI): rval = -0.446934
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -5765.02
 iteration 2 energy 0 : -6100.2
 iteration 3 energy 0 : -6419.04
 iteration 4 energy 0 : -6660.03
 iteration 5 energy 0 : -6845
 iteration 6 energy 0 : -6995.18
 iteration 7 energy 0 : -7110.74
 iteration 8 energy 0 : -7211.37
 iteration 9 energy 0 : -7312.72
 iteration 10 energy 0 : -7403.38
 iteration 11 energy 0 : -7469.6
 iteration 12 energy 0 : -7531.28
 E-Slope 0.0101367 iteration 13 energy 0 : -7588.44
 E-Slope 0.0083204 iteration 14 energy 0 : -7638.56
 E-Slope 0.00685916 iteration 15 energy 0 : -7627.98
 E-Slope 0.00563987 iteration 16 energy 0 : -7630.28
 E-Slope 0.00453512 iteration 17 energy 0 : -7619.13
 E-Slope 0.0035729 iteration 18 energy 0 : -7630.44
 E-Slope 0.00265861 iteration 19 energy 0 : -7620.72
 E-Slope 0.00187811 iteration 20 energy 0 : -7636.96
 E-Slope 0.00121249 iteration 21 energy 0 : -7626.57
 E-Slope 0.000755675 iteration 22 energy 0 : -7645.46
 E-Slope 0.000390798 iteration 23 energy 0 : -7634.67
 E-Slope 0.000210486 iteration 24 energy 0 : -7654.87
 E-Slope 0.000129797 iteration 25 energy 0 : -7643.34
 E-Slope 0.000226773 iteration 26 energy 0 : -7664
 E-Slope 0.000248477 iteration 27 energy 0 : -7652.14
 E-Slope 0.000314839 iteration 28 energy 0 : -7672.76
 E-Slope 0.000297457 iteration 29 energy 0 : -7660.75
 E-Slope 0.000345841 iteration 30 energy 0 : -7681.76
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -14766.8
 iteration 2 energy 0 : -15028.8
 iteration 3 energy 0 : -15295.7
 iteration 4 energy 0 : -15519.7
 iteration 5 energy 0 : -15686.5
 iteration 6 energy 0 : -15825.7
 iteration 7 energy 0 : -15941.6
 iteration 8 energy 0 : -16002.5
 iteration 9 energy 0 : -15982.6
 iteration 10 energy 0 : -16043.6
 iteration 11 energy 0 : -16026.4
 iteration 12 energy 0 : -16070.4
 E-Slope 0.00303743 iteration 13 energy 0 : -16061.6
 E-Slope 0.0021826 iteration 14 energy 0 : -16091.7
 E-Slope 0.00151931 iteration 15 energy 0 : -16092.2
 E-Slope 0.00105561 iteration 16 energy 0 : -16109.2
 E-Slope 0.000738949 iteration 17 energy 0 : -16119.7
 E-Slope 0.00055071 iteration 18 energy 0 : -16127
 E-Slope 0.000498176 iteration 19 energy 0 : -16151.5
 E-Slope 0.000484139 iteration 20 energy 0 : -16148.7
 E-Slope 0.000456713 iteration 21 energy 0 : -16185.7
 E-Slope 0.000459023 iteration 22 energy 0 : -16173.9
 E-Slope 0.000467867 iteration 23 energy 0 : -16222.3
 E-Slope 0.000474811 iteration 24 energy 0 : -16203.2
 E-Slope 0.000507884 iteration 25 energy 0 : -16259.5
 E-Slope 0.000512414 iteration 26 energy 0 : -16235.5
 E-Slope 0.000558116 iteration 27 energy 0 : -16296.3
 E-Slope 0.00055059 iteration 28 energy 0 : -16268.4
 E-Slope 0.000592619 iteration 29 energy 0 : -16327.8
 E-Slope 0.000567533 iteration 30 energy 0 : -16300.6
 E-Slope 0.000591919 iteration 31 energy 0 : -16346.7
 E-Slope 0.000541471 iteration 32 energy 0 : -16323.2
 E-Slope 0.000541389 iteration 33 energy 0 : -16356
 E-Slope 0.00047075 iteration 34 energy 0 : -16342.1
 E-Slope 0.000435404 iteration 35 energy 0 : -16347.4
 E-Slope 0.000346303 iteration 36 energy 0 : -16348
 E-Slope 0.000294365 iteration 37 energy 0 : -16340.4
 E-Slope 0.000205152 iteration 38 energy 0 : -16351.5
 E-Slope 0.000196293 iteration 39 energy 0 : -16367.3
 E-Slope 0.000184335 iteration 40 energy 0 : -16405.7
 E-Slope 0.000219166 iteration 41 energy 0 : -16395
 E-Slope 0.000250392 iteration 42 energy 0 : -16431.9
 E-Slope 0.000320487 iteration 43 energy 0 : -16431.4
 E-Slope 0.000375398 iteration 44 energy 0 : -16461.4
 E-Slope 0.000455305 iteration 45 energy 0 : -16470.7
 E-Slope 0.000516243 iteration 46 energy 0 : -16495.1
 E-Slope 0.00055816 iteration 47 energy 0 : -16503.3
 E-Slope 0.000595808 iteration 48 energy 0 : -16529.9
 E-Slope 0.00060869 iteration 49 energy 0 : -16551.2
 E-Slope 0.000630014 iteration 50 energy 0 : -16582.2
 E-Slope 0.000646412 iteration 51 energy 0 : -16599.4
 E-Slope 0.00070677 iteration 52 energy 0 : -16633.4
 E-Slope 0.000722475 iteration 53 energy 0 : -16648.5
 E-Slope 0.000777543 iteration 54 energy 0 : -16685
 E-Slope 0.000796303 iteration 55 energy 0 : -16700.9
 E-Slope 0.000822045 iteration 56 energy 0 : -16722.2
 E-Slope 0.000829741 iteration 57 energy 0 : -16745.2
 E-Slope 0.000869274 iteration 58 energy 0 : -16794.9
 E-Slope 0.000928774 iteration 59 energy 0 : -16854.8
 E-Slope 0.000978671 iteration 60 energy 0 : -16875.3
 E-Slope 0.000989251 iteration 61 energy 0 : -16877.3
 E-Slope 0.000991777 iteration 62 energy 0 : -16895
 E-Slope 0.000958696 iteration 63 energy 0 : -16905.2
 E-Slope 0.000918217 iteration 64 energy 0 : -16920.8
 E-Slope 0.000812031 iteration 65 energy 0 : -16904.6
 E-Slope 0.000729881 iteration 66 energy 0 : -16934.2
 E-Slope 0.000607654 iteration 67 energy 0 : -16926.2
 E-Slope 0.000482015 iteration 68 energy 0 : -16936.4
 E-Slope 0.00035543 iteration 69 energy 0 : -16941.6
 E-Slope 0.000251956 iteration 70 energy 0 : -16933.6
 E-Slope 0.000230238 iteration 71 energy 0 : -16957.4
 E-Slope 0.000199385 iteration 72 energy 0 : -16942.9
 E-Slope 0.00017716 iteration 73 energy 0 : -16959.8
 E-Slope 0.00015346 iteration 74 energy 0 : -16951.6
 E-Slope 0.000146039 iteration 75 energy 0 : -16964
 E-Slope 0.00014025 iteration 76 energy 0 : -16957.9
 E-Slope 0.000117138 iteration 77 energy 0 : -16968.1
 E-Slope 0.000113435 iteration 78 energy 0 : -16961.6
 E-Slope 0.000104301 iteration 79 energy 0 : -16971.5
 E-Slope 9.18135e-05 iteration 80 energy 0 : -16964.6
 Converged due to oscillation in optimization  metric 0 bad 22  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -110726
 iteration 2 energy 0 : -113038
 iteration 3 energy 0 : -115183
 iteration 4 energy 0 : -117185
 iteration 5 energy 0 : -118928
 iteration 6 energy 0 : -120254
 iteration 7 energy 0 : -121407
 iteration 8 energy 0 : -122435
 iteration 9 energy 0 : -123383
 iteration 10 energy 0 : -124253
 iteration 11 energy 0 : -125051
 iteration 12 energy 0 : -125764
 E-Slope 0.00551859 iteration 13 energy 0 : -126408
 E-Slope 0.00481942 iteration 14 energy 0 : -127041
 E-Slope 0.00425059 iteration 15 energy 0 : -127664
 E-Slope 0.00380961 iteration 16 energy 0 : -128220
 E-Slope 0.00347856 iteration 17 energy 0 : -128764
 E-Slope 0.00320864 iteration 18 energy 0 : -129305
 E-Slope 0.00298481 iteration 19 energy 0 : -129825
 E-Slope 0.00278412 iteration 20 energy 0 : -130241
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2597_10182016_Test_NewCases_Aug2_Ref_vimp2_2998_03222017_Test_NewCases/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2597_10182016_Test_NewCases_Aug2_Ref_vimp2_2998_03222017_Test_NewCases/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2597_10182016_Test_NewCases_Aug2_Ref_vimp2_2998_03222017_Test_NewCases/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2597_10182016_Test_NewCases_Aug2_Ref_vimp2_2998_03222017_Test_NewCases/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2598_10192016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1709_07072015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2598_10192016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1709_07072015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547786919
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [12.1893, -0.727013, 1.25764]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 1.5366017597218402, -15.947388628354554, 13.160230862906682]
level 0, iter 376, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.007959859737581971, 0.03526542918036433, -0.007324631588783354, 0.9993194383728214, 0.8729942903289232, 0.9974571532573765, 0.8978402100891633, 0.016685039806908494, 0.00399753650597266, 0.006637762650760675, 0.7833515449350158, -20.596086655052588, 12.948152985101386]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 864, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.009083367101458881, 0.035377900641411476, -0.0070664682297505495, 0.9993077411964068, 0.8663540868208205, 1.0357456506167966, 0.8870373275846227, 0.029524487126044965, 0.0019698993338777694, -0.0006503385713281715, 0.6868175527807413, -20.69302595404939, 13.050640412707352]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 235, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.016546603723296534, 0.036435069352335515, -0.007021373823558528, 0.9991743571249938, 0.8737501013081349, 1.041222880979022, 0.8920012431794425, 0.032150324573953906, 0.003121848836982067, 0.006109529948002757, 0.8312253839801118, -20.367889876005606, 13.067618761802809]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 451, size: fix[42, 46, 32]-mov[37, 43, 35], affine para: [-0.006273383784067031, 0.03623661380909037, -0.007516117928340111, 0.9992952819096246, 0.860683244855572, 1.0482156618086773, 0.8777610317262754, 0.03289791283619922, 0.0011661032759176097, 0.009246292330787982, 0.7825091504652444, -20.472062954463176, 12.989021591169116]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 117, size: fix[83, 92, 42]-mov[73, 86, 49], affine para: [-0.020241371353592705, 0.03688146026820358, -0.005006442160198425, 0.9991020870317043, 0.8609532874673806, 1.050635510878724, 0.873034996129385, 0.0372228305107663, 0.005934938671671329, 0.007033176803107177, 0.7001997551061833, -20.6587707654826, 13.1909505025022]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 2212, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.017199296405974986, -0.038858134802189095, 0.008386854819157056, 0.9990615047278505, 1.1384229892734723, 0.9506511660777506, 1.131329644022866, -0.03464795724065254, -0.008796320926804895, -0.014578667956045222, -0.8212591509489529, 20.34886108033597, -14.17045786915038]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 94, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.016858782421431497, -0.03817378204784823, 0.006215621097848064, 0.9991095584938613, 1.1405928662175746, 0.9491630901733115, 1.1285665391322397, -0.03509882036452001, -0.01080900199376861, -0.013490005062046666, -0.7390660752548681, 20.097594504309953, -14.243605290576575]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 413, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.02488716289172249, -0.036929537235179416, -0.0008050281437761283, 0.9990076027400813, 1.1444671751020454, 0.9387372941430596, 1.1378413289611735, -0.049980930063787496, -0.017851417360678877, -0.02757625728090858, -0.9006738277740015, 19.674173733317144, -14.054894826973737]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 241, size: fix[37, 43, 35]-mov[42, 46, 32], affine para: [0.028963168513487802, -0.03580670732586077, 0.004832855531018297, 0.9989272536514137, 1.1435917831693607, 0.9296262422913483, 1.1401777769155244, -0.046131195088040554, -0.02285531671649783, -0.03057640111211395, -0.9756237173592015, 19.984947208258983, -13.90640953060857]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 903, size: fix[73, 86, 49]-mov[83, 92, 42], affine para: [0.029566787780486475, -0.041117880197210493, 0.006324413408569665, 0.9986967141146851, 1.1364309864374347, 0.9335234137232111, 1.1614080666883517, -0.04324867682045503, -0.015376762782639294, -0.024527378995653073, -0.9514737259526098, 19.93591168081296, -14.124102189464875]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.457054 v2 -0.468046
 last params [-0.020241371353592705, 0.03688146026820358, -0.005006442160198425, 0.9991020870317043, 0.8609532874673806, 1.050635510878724, 0.873034996129385, 0.0372228305107663, 0.005934938671671329, 0.007033176803107177, 0.7001997551061833, -20.6587707654826, 13.1909505025022]
 my params [0.029566787780486475, -0.041117880197210493, 0.006324413408569665, 0.9986967141146851, 1.1364309864374347, 0.9335234137232111, 1.1614080666883517, -0.04324867682045503, -0.015376762782639294, -0.024527378995653073, -0.9514737259526098, 19.93591168081296, -14.124102189464875]
A=0.875047 0.0543768 0.0893904 
-0.017863 1.06799 0.0837151 
-0.0703927 -0.0512969 0.856607 

rotation R0.996574 0.0167539 0.0809952 
-0.0203439 0.998837 0.0437034 
-0.0801688 -0.0452014 0.995756 

upper R0.878056 0.0365758 0.0187079 
0 1.06998 0.0463956 
0 0 0.86387 

s=0.250276 u=-0.0222508 v=0.0403355 w-0.00928469 r=0.998895
m_Rotation from vnl-0.0222508 0.0403355 -0.00928469 0.998895
 new params [-0.02225076189788644, 0.04033554845169102, -0.009284687842524304, 0.9988952606243219, 0.8780555728464989, 1.0699817040065556, 0.8638702634650137, 0.04165542224839862, 0.0213060004502887, 0.043361153856290635, 1.0110921736445613, -20.126022029929842, 13.054477582163443]
outputput affine center: [12.1893, -0.727013, 1.25764]
output affine para: [-0.02225076189788644, 0.04033554845169102, -0.009284687842524304, 0.9988952606243219, 0.8780555728464989, 1.0699817040065556, 0.8638702634650137, 0.04165542224839862, 0.0213060004502887, 0.043361153856290635, 1.0110921736445613, -20.126022029929842, 13.054477582163443]
initial measure value (MMI): rval = -0.192887
final measure value (MMI): rval = -0.476375
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -6188.73
 iteration 2 energy 0 : -6617.59
 iteration 3 energy 0 : -6922.04
 iteration 4 energy 0 : -7135.86
 iteration 5 energy 0 : -7294.87
 iteration 6 energy 0 : -7398.79
 iteration 7 energy 0 : -7472.68
 iteration 8 energy 0 : -7534.24
 iteration 9 energy 0 : -7593.21
 iteration 10 energy 0 : -7651.12
 iteration 11 energy 0 : -7709.17
 iteration 12 energy 0 : -7771.1
 E-Slope 0.00731806 iteration 13 energy 0 : -7833.5
 E-Slope 0.00591526 iteration 14 energy 0 : -7893.1
 E-Slope 0.00511581 iteration 15 energy 0 : -7957.62
 E-Slope 0.00472394 iteration 16 energy 0 : -8029.51
 E-Slope 0.0046218 iteration 17 energy 0 : -8106.63
 E-Slope 0.00467123 iteration 18 energy 0 : -8186.5
 E-Slope 0.00476236 iteration 19 energy 0 : -8256.79
 E-Slope 0.0048288 iteration 20 energy 0 : -8316.32
 E-Slope 0.00483433 iteration 21 energy 0 : -8365.88
 E-Slope 0.00476364 iteration 22 energy 0 : -8410.83
 E-Slope 0.0046075 iteration 23 energy 0 : -8450.49
 E-Slope 0.00430831 iteration 24 energy 0 : -8457.85
 E-Slope 0.00384175 iteration 25 energy 0 : -8444.5
 E-Slope 0.00329685 iteration 26 energy 0 : -8457.46
 E-Slope 0.00265832 iteration 27 energy 0 : -8445.19
 E-Slope 0.00202757 iteration 28 energy 0 : -8450.58
 E-Slope 0.0014277 iteration 29 energy 0 : -8443.7
 E-Slope 0.000933133 iteration 30 energy 0 : -8448.33
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -18520.2
 iteration 2 energy 0 : -18849.8
 iteration 3 energy 0 : -19147
 iteration 4 energy 0 : -19352.7
 iteration 5 energy 0 : -19538.4
 iteration 6 energy 0 : -19718.4
 iteration 7 energy 0 : -19843
 iteration 8 energy 0 : -19836.2
 iteration 9 energy 0 : -19948.8
 iteration 10 energy 0 : -19930.9
 iteration 11 energy 0 : -20019.9
 iteration 12 energy 0 : -19996.9
 E-Slope 0.00286756 iteration 13 energy 0 : -20076
 E-Slope 0.00215597 iteration 14 energy 0 : -20050.1
 E-Slope 0.00167253 iteration 15 energy 0 : -20120.1
 E-Slope 0.00125282 iteration 16 energy 0 : -20092.7
 E-Slope 0.000994012 iteration 17 energy 0 : -20154.9
 E-Slope 0.000816859 iteration 18 energy 0 : -20127.1
 E-Slope 0.00076513 iteration 19 energy 0 : -20182.2
 E-Slope 0.000622839 iteration 20 energy 0 : -20154
 E-Slope 0.000596866 iteration 21 energy 0 : -20199.1
 E-Slope 0.000481881 iteration 22 energy 0 : -20171.3
 E-Slope 0.000470042 iteration 23 energy 0 : -20217.4
 E-Slope 0.00037197 iteration 24 energy 0 : -20188.6
 E-Slope 0.00037466 iteration 25 energy 0 : -20235
 E-Slope 0.00029441 iteration 26 energy 0 : -20205.6
 E-Slope 0.000311255 iteration 27 energy 0 : -20252.2
 E-Slope 0.000247784 iteration 28 energy 0 : -20222.3
 E-Slope 0.000273786 iteration 29 energy 0 : -20266
 E-Slope 0.000221208 iteration 30 energy 0 : -20235.5
 E-Slope 0.000251949 iteration 31 energy 0 : -20278.2
 E-Slope 0.000206299 iteration 32 energy 0 : -20248.4
 E-Slope 0.000233784 iteration 33 energy 0 : -20290
 E-Slope 0.000184871 iteration 34 energy 0 : -20258.5
 E-Slope 0.00021036 iteration 35 energy 0 : -20298.8
 E-Slope 0.00015974 iteration 36 energy 0 : -20266.9
 E-Slope 0.000184804 iteration 37 energy 0 : -20306.5
 E-Slope 0.000134669 iteration 38 energy 0 : -20274.4
 E-Slope 0.000161111 iteration 39 energy 0 : -20313.1
 E-Slope 0.000113316 iteration 40 energy 0 : -20280.7
 E-Slope 0.000140548 iteration 41 energy 0 : -20319.2
 E-Slope 9.42424e-05 iteration 42 energy 0 : -20286.6
 Converged due to oscillation in optimization  metric 0 bad 18  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -126357
 iteration 2 energy 0 : -128412
 iteration 3 energy 0 : -130727
 iteration 4 energy 0 : -132614
 iteration 5 energy 0 : -134076
 iteration 6 energy 0 : -135287
 iteration 7 energy 0 : -136331
 iteration 8 energy 0 : -137345
 iteration 9 energy 0 : -138079
 iteration 10 energy 0 : -138699
 iteration 11 energy 0 : -139211
 iteration 12 energy 0 : -139787
 E-Slope 0.00429588 iteration 13 energy 0 : -140444
 E-Slope 0.00367609 iteration 14 energy 0 : -141143
 E-Slope 0.00326072 iteration 15 energy 0 : -141935
 E-Slope 0.00300224 iteration 16 energy 0 : -142669
 E-Slope 0.00284286 iteration 17 energy 0 : -143328
 E-Slope 0.00274573 iteration 18 energy 0 : -143923
 E-Slope 0.00268412 iteration 19 energy 0 : -144466
 E-Slope 0.0026516 iteration 20 energy 0 : -144967
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2598_10192016_Test_NewCases_Aug1_Ref_vimp2_1709_07072015/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2598_10192016_Test_NewCases_Aug1_Ref_vimp2_1709_07072015/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2598_10192016_Test_NewCases_Aug1_Ref_vimp2_1709_07072015/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2598_10192016_Test_NewCases_Aug1_Ref_vimp2_1709_07072015/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2598_10192016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2597_10182016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2598_10192016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2597_10182016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547787055
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [12.1893, -0.727013, 1.25764]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -5.777994164181058, -7.246988819286482, 2.7659599488217936]
level 0, iter 567, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.05040285077147234, 0.06684484746055115, 0.0658293184112703, 0.9943127374420948, 1.0301931704099427, 1.0039909393944715, 0.9190712671266481, 0.023823728467858192, 0.02715313332750508, 0.09560281521588247, -5.588861487097607, -7.1042307844506, 1.698461760299447]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 833, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.04542614622768605, 0.06867756166626195, 0.07186002184787894, 0.9940100578075153, 1.0291934727294352, 0.993792693312025, 0.9134902194194853, 0.041311527073772294, 0.028601773663056027, 0.11999156934998408, -5.591528492575521, -6.902761046040693, 1.7413326553247583]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 98, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.04237188136923068, 0.06801956437680164, 0.06701540028387987, 0.9945284805655459, 1.0352492213038644, 1.0004743635763527, 0.9157588131791455, 0.04748682566225709, 0.028985553858557587, 0.12491838126054232, -5.599080689795365, -7.129601761322404, 1.7321327422157722]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 365, size: fix[42, 46, 32]-mov[40, 43, 33], affine para: [-0.043493411088247155, 0.06705450068704041, 0.07233983206603826, 0.9941725030527538, 1.0354358177554965, 0.9874697050353076, 0.9064034467142793, 0.05909672801171731, 0.03439062041761746, 0.1276266837074791, -5.595061039246072, -6.9315209702301175, 1.6981165439283292]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 144, size: fix[83, 92, 42]-mov[79, 85, 46], affine para: [-0.04786497827110048, 0.06836775627246852, 0.0695056744881298, 0.9940843802068945, 1.0258319146821127, 0.9882981637034658, 0.9046313700472048, 0.06178708134834322, 0.03274183782000743, 0.12262076448935587, -5.563922757656009, -7.0649733222915545, 1.773273971738133]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 624, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.05298418489032187, -0.06997173181547703, -0.07458605727605065, 0.9933446295008922, 0.97188586855799, 0.9607788118589714, 1.072156624431587, -0.04110694528145861, 0.011650386443113614, -0.06763846770063735, 6.04188099403901, 6.281344103030585, -0.43305757376731907]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 265, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.05661436645690836, -0.074126623624353, -0.07888892320612974, 0.9925102493053226, 0.9731005629113715, 0.9566506114526862, 1.0869838749162748, -0.06067532554936083, 0.018534093125979787, -0.08666428124473263, 6.187079251570961, 6.285691858112641, -0.31246525066755887]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 69, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.0550788642401122, -0.07645766918322726, -0.07925728640473827, 0.9923904604987115, 0.9802625851385266, 0.9626438908155697, 1.09321226514066, -0.06944389177876106, 0.019194235355924502, -0.0890796665870408, 6.123038788157127, 6.375813762803147, -0.3789238578234617]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 66, size: fix[40, 43, 33]-mov[42, 46, 32], affine para: [0.0558398824716927, -0.07148762781306187, -0.08311214100633794, 0.9924030424240704, 0.9796936483799399, 0.9603214723066482, 1.0913639838065776, -0.07361362495439958, 0.02323591907032885, -0.09111212687733186, 6.0678038654662965, 6.237523124990369, -0.390206104708992]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 80, size: fix[79, 85, 46]-mov[83, 92, 42], affine para: [0.0541951530913314, -0.07497386910446326, -0.08713112997701014, 0.9918921163724628, 0.984924014853912, 0.9680520388167947, 1.097102645304716, -0.07490218972474974, 0.029253366684771246, -0.08908248416784667, 6.141260849347544, 6.252634009451399, -0.4231657841142715]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.53389 v2 -0.544722
 last params [-0.04786497827110048, 0.06836775627246852, 0.0695056744881298, 0.9940843802068945, 1.0258319146821127, 0.9882981637034658, 0.9046313700472048, 0.06178708134834322, 0.03274183782000743, 0.12262076448935587, -5.563922757656009, -7.0649733222915545, 1.773273971738133]
 my params [0.0541951530913314, -0.07497386910446326, -0.08713112997701014, 0.9918921163724628, 0.984924014853912, 0.9680520388167947, 1.097102645304716, -0.07490218972474974, 0.029253366684771246, -0.08908248416784667, 6.141260849347544, 6.252634009451399, -0.4231657841142715]
A=1.00448 -0.106057 0.130519 
0.157316 1.00358 0.204364 
-0.144176 -0.0860871 0.89589 

rotation R0.978171 -0.164987 0.126334 
0.153196 0.983322 0.098027 
-0.1404 -0.0765333 0.987132 

upper R1.02689 0.0620887 0.0331946 
0 1.01093 0.110856 
0 0 0.920885 

s=0.251621 u=-0.0439231 v=0.0671161 w0.0800616 r=0.993557
m_Rotation from vnl-0.0439231 0.0671161 0.0800616 0.993557
 new params [-0.04392306899683415, 0.06711606630346442, 0.08006157340897466, 0.9935574176247329, 1.0268932406121152, 1.0109293515564937, 0.9208845903756936, 0.060462689274843794, 0.03232524363852749, 0.10965760336046948, -5.450389035554242, -7.154658396528445, 1.8028051671475764]
outputput affine center: [12.1893, -0.727013, 1.25764]
output affine para: [-0.04392306899683415, 0.06711606630346442, 0.08006157340897466, 0.9935574176247329, 1.0268932406121152, 1.0109293515564937, 0.9208845903756936, 0.060462689274843794, 0.03232524363852749, 0.10965760336046948, -5.450389035554242, -7.154658396528445, 1.8028051671475764]
initial measure value (MMI): rval = -0.261223
final measure value (MMI): rval = -0.532381
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -6272.24
 iteration 2 energy 0 : -6556.41
 iteration 3 energy 0 : -6790.1
 iteration 4 energy 0 : -6949.16
 iteration 5 energy 0 : -7061.42
 iteration 6 energy 0 : -7162.16
 iteration 7 energy 0 : -7263.57
 iteration 8 energy 0 : -7353.44
 iteration 9 energy 0 : -7417.62
 iteration 10 energy 0 : -7471.26
 iteration 11 energy 0 : -7517.96
 iteration 12 energy 0 : -7557.65
 E-Slope 0.00696052 iteration 13 energy 0 : -7590.85
 E-Slope 0.00571135 iteration 14 energy 0 : -7620.99
 E-Slope 0.00475011 iteration 15 energy 0 : -7625.36
 E-Slope 0.00390282 iteration 16 energy 0 : -7621.02
 E-Slope 0.00310625 iteration 17 energy 0 : -7622.2
 E-Slope 0.00237902 iteration 18 energy 0 : -7624.73
 E-Slope 0.00175662 iteration 19 energy 0 : -7623.16
 E-Slope 0.00128366 iteration 20 energy 0 : -7634.67
 E-Slope 0.000878967 iteration 21 energy 0 : -7629.68
 E-Slope 0.000607088 iteration 22 energy 0 : -7649.23
 E-Slope 0.00039757 iteration 23 energy 0 : -7642.91
 E-Slope 0.0003336 iteration 24 energy 0 : -7669.81
 E-Slope 0.000305608 iteration 25 energy 0 : -7660.64
 E-Slope 0.000400685 iteration 26 energy 0 : -7685.4
 E-Slope 0.000449218 iteration 27 energy 0 : -7674.01
 E-Slope 0.000504747 iteration 28 energy 0 : -7692.4
 E-Slope 0.000502162 iteration 29 energy 0 : -7682.5
 E-Slope 0.000534222 iteration 30 energy 0 : -7706.1
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -16777.3
 iteration 2 energy 0 : -17082.3
 iteration 3 energy 0 : -17381.7
 iteration 4 energy 0 : -17598.4
 iteration 5 energy 0 : -17794.8
 iteration 6 energy 0 : -17932.3
 iteration 7 energy 0 : -17959.6
 iteration 8 energy 0 : -17976.1
 iteration 9 energy 0 : -18033.5
 iteration 10 energy 0 : -18039.9
 iteration 11 energy 0 : -18097.3
 iteration 12 energy 0 : -18095
 E-Slope 0.00254922 iteration 13 energy 0 : -18147.4
 E-Slope 0.00180472 iteration 14 energy 0 : -18140
 E-Slope 0.00132889 iteration 15 energy 0 : -18190.7
 E-Slope 0.000985108 iteration 16 energy 0 : -18178.5
 E-Slope 0.000840768 iteration 17 energy 0 : -18225.2
 E-Slope 0.000772856 iteration 18 energy 0 : -18209.3
 E-Slope 0.000733748 iteration 19 energy 0 : -18255.5
 E-Slope 0.00064116 iteration 20 energy 0 : -18237.8
 E-Slope 0.000641525 iteration 21 energy 0 : -18304
 E-Slope 0.000573806 iteration 22 energy 0 : -18278.3
 E-Slope 0.000577942 iteration 23 energy 0 : -18320.8
 E-Slope 0.000507534 iteration 24 energy 0 : -18292.7
 E-Slope 0.000515558 iteration 25 energy 0 : -18342.1
 E-Slope 0.000446312 iteration 26 energy 0 : -18313.4
 E-Slope 0.000457957 iteration 27 energy 0 : -18363.5
 E-Slope 0.000389025 iteration 28 energy 0 : -18332.7
 E-Slope 0.000402316 iteration 29 energy 0 : -18383.8
 E-Slope 0.000332631 iteration 30 energy 0 : -18350.6
 E-Slope 0.000349551 iteration 31 energy 0 : -18403.3
 E-Slope 0.000282645 iteration 32 energy 0 : -18368.8
 E-Slope 0.000329815 iteration 33 energy 0 : -18423.3
 E-Slope 0.000283971 iteration 34 energy 0 : -18386.4
 E-Slope 0.00032568 iteration 35 energy 0 : -18440.3
 E-Slope 0.000270888 iteration 36 energy 0 : -18402.4
 E-Slope 0.000314362 iteration 37 energy 0 : -18458.5
 E-Slope 0.000259735 iteration 38 energy 0 : -18419
 E-Slope 0.000305563 iteration 39 energy 0 : -18475.9
 E-Slope 0.00024505 iteration 40 energy 0 : -18430.3
 E-Slope 0.000289612 iteration 41 energy 0 : -18489.2
 E-Slope 0.000232272 iteration 42 energy 0 : -18449.2
 E-Slope 0.000280313 iteration 43 energy 0 : -18506.4
 E-Slope 0.000217311 iteration 44 energy 0 : -18458.6
 E-Slope 0.000265755 iteration 45 energy 0 : -18518.3
 E-Slope 0.000201918 iteration 46 energy 0 : -18470.7
 E-Slope 0.000250176 iteration 47 energy 0 : -18530.9
 E-Slope 0.000189401 iteration 48 energy 0 : -18486.5
 E-Slope 0.000244454 iteration 49 energy 0 : -18547.3
 E-Slope 0.000183105 iteration 50 energy 0 : -18497.1
 E-Slope 0.000240095 iteration 51 energy 0 : -18558.6
 E-Slope 0.000172988 iteration 52 energy 0 : -18507.3
 E-Slope 0.000226133 iteration 53 energy 0 : -18568.3
 E-Slope 0.000162125 iteration 54 energy 0 : -18516.8
 E-Slope 0.000217795 iteration 55 energy 0 : -18578.1
 E-Slope 0.000147566 iteration 56 energy 0 : -18525.7
 E-Slope 0.000197783 iteration 57 energy 0 : -18584.4
 E-Slope 0.00012365 iteration 58 energy 0 : -18531.8
 E-Slope 0.000176497 iteration 59 energy 0 : -18594.7
 E-Slope 0.000109218 iteration 60 energy 0 : -18541.7
 E-Slope 0.000166379 iteration 61 energy 0 : -18600.7
 E-Slope 9.72226e-05 iteration 62 energy 0 : -18546.9
 Converged due to oscillation in optimization  metric 0 bad 26  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -116543
 iteration 2 energy 0 : -117932
 iteration 3 energy 0 : -120566
 iteration 4 energy 0 : -122534
 iteration 5 energy 0 : -124098
 iteration 6 energy 0 : -125233
 iteration 7 energy 0 : -126139
 iteration 8 energy 0 : -127007
 iteration 9 energy 0 : -128001
 iteration 10 energy 0 : -128782
 iteration 11 energy 0 : -129464
 iteration 12 energy 0 : -130067
 E-Slope 0.00486625 iteration 13 energy 0 : -130744
 E-Slope 0.00413045 iteration 14 energy 0 : -131166
 E-Slope 0.00353731 iteration 15 energy 0 : -131176
 E-Slope 0.00305742 iteration 16 energy 0 : -131441
 E-Slope 0.00262937 iteration 17 energy 0 : -131530
 E-Slope 0.00222091 iteration 18 energy 0 : -131667
 E-Slope 0.00183055 iteration 19 energy 0 : -131859
 E-Slope 0.00145143 iteration 20 energy 0 : -131882
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2598_10192016_Test_NewCases_Aug2_Ref_vimp2_2597_10182016_Test_NewCases/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2598_10192016_Test_NewCases_Aug2_Ref_vimp2_2597_10182016_Test_NewCases/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2598_10192016_Test_NewCases_Aug2_Ref_vimp2_2597_10182016_Test_NewCases/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2598_10192016_Test_NewCases_Aug2_Ref_vimp2_2597_10182016_Test_NewCases/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2617_10262016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2594_10172016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2617_10262016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2594_10172016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547787187
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [11.3841, -12.7245, 8.287]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0.7607592071538143, 2.4944778897348474, -13.85871458460619]
level 0, iter 350, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.09669767394727716, -0.0251342903494052, 0.005786065998349766, 0.9949795720225018, 0.9352560931257182, 0.9330235956634367, 0.9383628120530804, 0.023264629327805722, 0.01883931778696767, -0.017967396711250524, -1.9237165523428634, 4.802996271494096, -10.444376114239542]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 62, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.09410532035634332, -0.026623645514747118, 0.007833024518434577, 0.995175368418566, 0.9360869597741832, 0.9290798694234254, 0.9380658137988324, 0.03236541903699979, 0.02669553588927902, -0.02729697325661454, -1.838324015373579, 4.758456666705006, -10.289187625395776]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 259, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.10239566401657421, -0.027557556692038195, 0.014727188873505642, 0.9942528948751691, 0.9374007191709801, 0.9304184450921303, 0.9348877150419869, 0.05475477080606534, 0.02758678422747949, -0.053715838057431964, -1.9287120724780935, 4.668686855861097, -10.329111473125066]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 95, size: fix[40, 41, 32]-mov[38, 39, 32], affine para: [-0.09851035821696871, -0.026894244668049693, 0.014375027301949703, 0.9946686722309936, 0.9364136199945949, 0.9209849815993778, 0.9345134239028648, 0.06065700123710343, 0.03452954754221872, -0.05888757461314419, -1.8100717798709902, 4.499371064298149, -10.341475663379788]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 153, size: fix[79, 82, 39]-mov[75, 77, 42], affine para: [-0.0969252728646454, -0.02943270712831358, 0.015011567342380048, 0.9947431126060328, 0.9442006467488894, 0.9277678802277892, 0.9456062255503718, 0.06326102098441105, 0.03771975748438402, -0.07147878069463079, -1.7429518941368511, 4.500057217658327, -10.047675509574145]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 232, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.09321635333195054, 0.02727601656440013, -0.015282970674883937, 0.9951548428255887, 1.0653412791357038, 1.0691595686122968, 1.0571456591703294, -0.0368462859766759, -0.0164555057225425, 0.007758375947196272, 2.42736482663619, -7.36411717402615, 9.551839438057938]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 311, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.0936399810788491, 0.029108913435654957, -0.011241580203194877, 0.9951170041641754, 1.0590424308683677, 1.0728983505665362, 1.0471065705967024, -0.055217610522298136, -0.022076652717330707, 0.01988976908898074, 2.3189669330914717, -6.979115802152876, 9.56622917854502]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 81, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.08934949571415679, 0.02745096930486722, -0.015350134828798132, 0.9955036339765853, 1.069337900165287, 1.08543581576544, 1.056932316614412, -0.05495579583840541, -0.02522862426418478, 0.02425013108151886, 2.3867946562343128, -6.749225701776958, 9.76033538316065]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 168, size: fix[38, 39, 32]-mov[40, 41, 32], affine para: [0.09019411984684968, 0.030202419016204674, -0.020146431082501807, 0.9952622548581151, 1.0641134769235732, 1.0785946111264924, 1.0518264332431269, -0.06580231336248965, -0.031045539889020847, 0.030913411889053576, 2.321617738382272, -6.687003892675796, 9.590796600785682]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 196, size: fix[75, 77, 42]-mov[79, 82, 39], affine para: [0.0932978235923175, 0.03035752917201448, -0.012783426616960445, 0.9950932220347176, 1.0610036410614816, 1.0800738691919916, 1.0337408421144767, -0.07832228995366727, -0.044456009230490486, 0.026697711772669885, 2.1067059996566417, -6.685654332762494, 9.459306818050091]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.427838 v2 -0.434021
 last params [-0.0969252728646454, -0.02943270712831358, 0.015011567342380048, 0.9947431126060328, 0.9442006467488894, 0.9277678802277892, 0.9456062255503718, 0.06326102098441105, 0.03771975748438402, -0.07147878069463079, -1.7429518941368511, 4.500057217658327, -10.047675509574145]
 my params [0.0932978235923175, 0.03035752917201448, -0.012783426616960445, 0.9950932220347176, 1.0610036410614816, 1.0800738691919916, 1.0337408421144767, -0.07832228995366727, -0.044456009230490486, 0.026697711772669885, 2.1067059996566417, -6.685654332762494, 9.459306818050091]
A=0.945093 0.0449484 -0.00558993 
0.0273011 0.914257 0.145867 
0.0561377 -0.18037 0.948737 

rotation R0.997826 -0.0165769 -0.0637886 
0.0288244 0.980144 0.196179 
0.05927 -0.197591 0.978491 

upper R0.947152 0.0605131 0.0548584 
0 0.930998 -0.044399 
0 0 0.957303 

s=0.251372 u=-0.0989827 v=-0.0309335 w0.0114126 r=0.994543
m_Rotation from vnl-0.0989827 -0.0309335 0.0114126 0.994543
 new params [-0.09898266956777868, -0.030933455613831543, 0.01141262411368044, 0.99454276150393, 0.947151901042624, 0.9309984698653321, 0.957302931829595, 0.06388955152117777, 0.05791928209617292, -0.04768963217057203, -1.6376455969318708, 4.675095727454716, -10.29855099443796]
outputput affine center: [11.3841, -12.7245, 8.287]
output affine para: [-0.09898266956777868, -0.030933455613831543, 0.01141262411368044, 0.99454276150393, 0.947151901042624, 0.9309984698653321, 0.957302931829595, 0.06388955152117777, 0.05791928209617292, -0.04768963217057203, -1.6376455969318708, 4.675095727454716, -10.29855099443796]
initial measure value (MMI): rval = -0.133663
final measure value (MMI): rval = -0.441201
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -5608.37
 iteration 2 energy 0 : -5916.27
 iteration 3 energy 0 : -6246.85
 iteration 4 energy 0 : -6587.5
 iteration 5 energy 0 : -6855.46
 iteration 6 energy 0 : -7077.27
 iteration 7 energy 0 : -7231.19
 iteration 8 energy 0 : -7367.54
 iteration 9 energy 0 : -7497.88
 iteration 10 energy 0 : -7613.48
 iteration 11 energy 0 : -7716.19
 iteration 12 energy 0 : -7812.83
 E-Slope 0.0136513 iteration 13 energy 0 : -7895.71
 E-Slope 0.0113759 iteration 14 energy 0 : -7958.42
 E-Slope 0.00946897 iteration 15 energy 0 : -8009.65
 E-Slope 0.00802048 iteration 16 energy 0 : -8054.86
 E-Slope 0.00687109 iteration 17 energy 0 : -8092.19
 E-Slope 0.00595193 iteration 18 energy 0 : -8128.42
 E-Slope 0.00510767 iteration 19 energy 0 : -8154.97
 E-Slope 0.00430836 iteration 20 energy 0 : -8167.94
 E-Slope 0.00348695 iteration 21 energy 0 : -8139.86
 E-Slope 0.00283429 iteration 22 energy 0 : -8182.82
 E-Slope 0.00217236 iteration 23 energy 0 : -8153.27
 E-Slope 0.00170358 iteration 24 energy 0 : -8193.61
 E-Slope 0.00125483 iteration 25 energy 0 : -8166.44
 E-Slope 0.000982083 iteration 26 energy 0 : -8209.27
 E-Slope 0.000693239 iteration 27 energy 0 : -8179.58
 E-Slope 0.000538468 iteration 28 energy 0 : -8208.04
 E-Slope 0.000380114 iteration 29 energy 0 : -8185.77
 E-Slope 0.00033889 iteration 30 energy 0 : -8208.41
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -14823
 iteration 2 energy 0 : -14948.2
 iteration 3 energy 0 : -15168.4
 iteration 4 energy 0 : -15334.3
 iteration 5 energy 0 : -15482.3
 iteration 6 energy 0 : -15616.3
 iteration 7 energy 0 : -15648.4
 iteration 8 energy 0 : -15646.2
 iteration 9 energy 0 : -15698.5
 iteration 10 energy 0 : -15688.1
 iteration 11 energy 0 : -15734.6
 iteration 12 energy 0 : -15722.2
 E-Slope 0.00228082 iteration 13 energy 0 : -15762.3
 E-Slope 0.00159352 iteration 14 energy 0 : -15750.7
 E-Slope 0.00112478 iteration 15 energy 0 : -15784.8
 E-Slope 0.00077381 iteration 16 energy 0 : -15774
 E-Slope 0.000588641 iteration 17 energy 0 : -15800.4
 E-Slope 0.000522181 iteration 18 energy 0 : -15792
 E-Slope 0.000489056 iteration 19 energy 0 : -15813.7
 E-Slope 0.000411704 iteration 20 energy 0 : -15808.8
 E-Slope 0.00041052 iteration 21 energy 0 : -15838.2
 E-Slope 0.00035011 iteration 22 energy 0 : -15825.6
 E-Slope 0.00036753 iteration 23 energy 0 : -15858.6
 E-Slope 0.00032071 iteration 24 energy 0 : -15841.6
 E-Slope 0.000346519 iteration 25 energy 0 : -15875.2
 E-Slope 0.000307925 iteration 26 energy 0 : -15856
 E-Slope 0.000334173 iteration 27 energy 0 : -15889.1
 E-Slope 0.000296898 iteration 28 energy 0 : -15868.9
 E-Slope 0.00031504 iteration 29 energy 0 : -15901.5
 E-Slope 0.000273362 iteration 30 energy 0 : -15880.6
 E-Slope 0.000282772 iteration 31 energy 0 : -15913.5
 E-Slope 0.000237398 iteration 32 energy 0 : -15891.4
 E-Slope 0.000255816 iteration 33 energy 0 : -15924.6
 E-Slope 0.000209846 iteration 34 energy 0 : -15901.3
 E-Slope 0.000235528 iteration 35 energy 0 : -15935.5
 E-Slope 0.000190705 iteration 36 energy 0 : -15910.7
 E-Slope 0.000220932 iteration 37 energy 0 : -15945.9
 E-Slope 0.000175297 iteration 38 energy 0 : -15918.2
 E-Slope 0.000195146 iteration 39 energy 0 : -15945.4
 E-Slope 0.000147842 iteration 40 energy 0 : -15924
 E-Slope 0.000177942 iteration 41 energy 0 : -15959.9
 E-Slope 0.000134036 iteration 42 energy 0 : -15933.2
 E-Slope 0.000172727 iteration 43 energy 0 : -15972.1
 E-Slope 0.000130847 iteration 44 energy 0 : -15940.8
 E-Slope 0.000162512 iteration 45 energy 0 : -15971.8
 E-Slope 0.000120535 iteration 46 energy 0 : -15946.5
 E-Slope 0.000162967 iteration 47 energy 0 : -15985.1
 E-Slope 0.00012137 iteration 48 energy 0 : -15953.6
 E-Slope 0.000156216 iteration 49 energy 0 : -15984.4
 E-Slope 0.000111751 iteration 50 energy 0 : -15958.2
 E-Slope 0.000145264 iteration 51 energy 0 : -15998.1
 E-Slope 9.89288e-05 iteration 52 energy 0 : -15965.5
 Converged due to oscillation in optimization  metric 0 bad 23  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -93557.1
 iteration 2 energy 0 : -94978.9
 iteration 3 energy 0 : -96522.8
 iteration 4 energy 0 : -97789.1
 iteration 5 energy 0 : -98891
 iteration 6 energy 0 : -99936.3
 iteration 7 energy 0 : -100904
 iteration 8 energy 0 : -101862
 iteration 9 energy 0 : -102724
 iteration 10 energy 0 : -103463
 iteration 11 energy 0 : -104113
 iteration 12 energy 0 : -104698
 E-Slope 0.00522327 iteration 13 energy 0 : -105215
 E-Slope 0.00468834 iteration 14 energy 0 : -105673
 E-Slope 0.00421986 iteration 15 energy 0 : -106069
 E-Slope 0.00377999 iteration 16 energy 0 : -106405
 E-Slope 0.00335475 iteration 17 energy 0 : -106696
 E-Slope 0.0029543 iteration 18 energy 0 : -106958
 E-Slope 0.00258442 iteration 19 energy 0 : -107199
 E-Slope 0.00225583 iteration 20 energy 0 : -107384
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2617_10262016_Aug1_Ref_vimp2_2594_10172016/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2617_10262016_Aug1_Ref_vimp2_2594_10172016/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2617_10262016_Aug1_Ref_vimp2_2594_10172016/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2617_10262016_Aug1_Ref_vimp2_2594_10172016/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2617_10262016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2948_03042017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2617_10262016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2948_03042017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547787288
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [11.3841, -12.7245, 8.287]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 1.046202002119763, 19.58190168313793, -37.873782010432734]
level 0, iter 252, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.19766669463285547, -0.017660991424012833, -0.0534863854274112, 0.9786496685682536, 0.932414581763995, 0.9602228908459416, 1.0049826211622361, 0.04896462405409793, 0.02439178968882355, -0.01317103692522908, -0.13275721719105288, 18.931755269645546, -34.19803538904044]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 95, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.19972892197428285, -0.022182349820116205, -0.048304200285155065, 0.9784084041535317, 0.9257047561374477, 0.9539911199330077, 1.00560543303861, 0.056328305886731246, 0.039722057289260135, -0.035107950827897014, -0.13803508086595914, 18.94974826305051, -34.07730012075167]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 425, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.20479259959401575, -0.020789920793911575, -0.0488112261062055, 0.9773664791422493, 0.9308921436818459, 0.9604219298747096, 1.0098195423178795, 0.05769986094505727, 0.04111144639900245, -0.05548333438674175, -0.17868570461144048, 18.852978612331544, -34.05327532387365]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 48, size: fix[40, 41, 32]-mov[37, 46, 36], affine para: [-0.20328260696450376, -0.021648014991028433, -0.04456306708428551, 0.9778658794562292, 0.9309404933268873, 0.9592197970881347, 1.009729406320518, 0.057359646032567685, 0.04069942460734139, -0.0617572256248156, -0.10792583977026517, 19.04233693680614, -33.936708798247295]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 44, size: fix[79, 82, 39]-mov[73, 91, 51], affine para: [-0.2024575780880852, -0.024728746278658526, -0.04463677115722239, 0.9779606213150152, 0.9366687254738925, 0.9653289410186222, 1.0104184096626396, 0.062102826407669204, 0.041503799330716414, -0.06359438839210706, -0.1449179646031566, 18.98835019814081, -33.899003212281755]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 1176, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.1952007280110305, 0.01747000465305431, 0.043387581495666586, 0.9796473817110639, 1.0626178842298555, 1.0418389277745397, 0.9541362528878176, -0.08921664111817097, 0.0046912932608490455, 0.027040525771122193, 5.213812693022319, -29.144005357108757, 22.839367596360848]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 183, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.18858068154527893, 0.018407022439932638, 0.03464601556291302, 0.9812737445170071, 1.0645183308886836, 1.0417210911027042, 0.9567813430940275, -0.09554882949816924, 0.003521912498583749, 0.0265346258925629, 4.911914276116029, -28.88290295071779, 23.167251249959264]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 522, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.195594106568717, 0.019769001670847303, 0.03578894438219862, 0.9798322731511405, 1.0659127882851522, 1.0504022015221506, 0.9468931722790327, -0.100838308514386, -0.002818234965325385, 0.03466238317450215, 4.780239892401996, -28.91517410477628, 22.673490196315086]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 247, size: fix[37, 46, 36]-mov[40, 41, 32], affine para: [0.19340798793587924, 0.01942294865501172, 0.033505625316727725, 0.9803537485725622, 1.063858747778227, 1.0400489835930926, 0.9487867151447161, -0.10682870710989861, -0.003484503804003613, 0.03929895768968526, 4.718030846824704, -28.70694003645516, 22.7996859733588]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 640, size: fix[73, 91, 51]-mov[79, 82, 39], affine para: [0.19493614006444382, 0.01822172153250226, 0.031156831539028092, 0.9801515811391706, 1.060432893430954, 1.037169850018386, 0.9426896474016251, -0.10406277102324211, 0.007436057251918184, 0.04835863853587753, 4.941578400697568, -28.17535387345352, 22.618486188178984]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.469142 v2 -0.477488
 last params [-0.2024575780880852, -0.024728746278658526, -0.04463677115722239, 0.9779606213150152, 0.9366687254738925, 0.9653289410186222, 1.0104184096626396, 0.062102826407669204, 0.041503799330716414, -0.06359438839210706, -0.1449179646031566, 18.98835019814081, -33.899003212281755]
 my params [0.19493614006444382, 0.01822172153250226, 0.031156831539028092, 0.9801515811391706, 1.060432893430954, 1.037169850018386, 0.9426896474016251, -0.10406277102324211, 0.007436057251918184, 0.04835863853587753, 4.941578400697568, -28.17535387345352, 22.618486188178984]
A=0.934506 0.161848 0.00401279 
-0.054494 0.908558 0.322168 
0.0507774 -0.404161 0.979469 

rotation R0.996839 0.075208 -0.0256219 
-0.0581288 0.910181 0.410112 
0.0541643 -0.407326 0.911675 

upper R0.937469 0.0866317 0.0383251 
0 1.00375 -0.10543 
0 0 1.02498 

s=0.255866 u=-0.209154 v=-0.0204146 w-0.0341163 r=0.977074
m_Rotation from vnl-0.209154 -0.0204146 -0.0341163 0.977074
 new params [-0.2091544809387604, -0.020414577109664805, -0.034116342105339904, 0.9770740623647844, 0.9374693418533044, 1.003750153239402, 1.0249802322893384, 0.09241021661999486, 0.04088147078680363, -0.10503634989903184, -0.1485744439983812, 18.58128881748072, -33.79241876331185]
outputput affine center: [11.3841, -12.7245, 8.287]
output affine para: [-0.2091544809387604, -0.020414577109664805, -0.034116342105339904, 0.9770740623647844, 0.9374693418533044, 1.003750153239402, 1.0249802322893384, 0.09241021661999486, 0.04088147078680363, -0.10503634989903184, -0.1485744439983812, 18.58128881748072, -33.79241876331185]
initial measure value (MMI): rval = -0.0922571
final measure value (MMI): rval = -0.480304
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -6460.73
 iteration 2 energy 0 : -6767.19
 iteration 3 energy 0 : -7118.36
 iteration 4 energy 0 : -7409.78
 iteration 5 energy 0 : -7645.75
 iteration 6 energy 0 : -7841.55
 iteration 7 energy 0 : -8015.19
 iteration 8 energy 0 : -8147.9
 iteration 9 energy 0 : -8239.52
 iteration 10 energy 0 : -8309.01
 iteration 11 energy 0 : -8366.78
 iteration 12 energy 0 : -8401.95
 E-Slope 0.0103521 iteration 13 energy 0 : -8398.22
 E-Slope 0.00791334 iteration 14 energy 0 : -8387.44
 E-Slope 0.00590138 iteration 15 energy 0 : -8391.83
 E-Slope 0.00427494 iteration 16 energy 0 : -8402.37
 E-Slope 0.00295993 iteration 17 energy 0 : -8404.73
 E-Slope 0.00198067 iteration 18 energy 0 : -8427.63
 E-Slope 0.00128856 iteration 19 energy 0 : -8428.5
 E-Slope 0.000830524 iteration 20 energy 0 : -8429.76
 E-Slope 0.000541322 iteration 21 energy 0 : -8433.25
 E-Slope 0.000416063 iteration 22 energy 0 : -8449.96
 E-Slope 0.000396982 iteration 23 energy 0 : -8450.71
 E-Slope 0.000427276 iteration 24 energy 0 : -8447.66
 E-Slope 0.000431493 iteration 25 energy 0 : -8451.84
 E-Slope 0.000410393 iteration 26 energy 0 : -8464.24
 E-Slope 0.000374183 iteration 27 energy 0 : -8465.76
 E-Slope 0.000320517 iteration 28 energy 0 : -8458.76
 E-Slope 0.000263639 iteration 29 energy 0 : -8464.53
 E-Slope 0.000258185 iteration 30 energy 0 : -8470.82
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -15208.1
 iteration 2 energy 0 : -15341
 iteration 3 energy 0 : -15480.2
 iteration 4 energy 0 : -15619.4
 iteration 5 energy 0 : -15769.8
 iteration 6 energy 0 : -15889.4
 iteration 7 energy 0 : -15986.6
 iteration 8 energy 0 : -16068.2
 iteration 9 energy 0 : -16140.3
 iteration 10 energy 0 : -16194.4
 iteration 11 energy 0 : -16171.4
 iteration 12 energy 0 : -16150.9
 E-Slope 0.00281063 iteration 13 energy 0 : -16189.9
 E-Slope 0.00218374 iteration 14 energy 0 : -16162
 E-Slope 0.00161794 iteration 15 energy 0 : -16189
 E-Slope 0.00108718 iteration 16 energy 0 : -16166.6
 E-Slope 0.000707902 iteration 17 energy 0 : -16196.9
 E-Slope 0.00040096 iteration 18 energy 0 : -16175.5
 E-Slope 0.000225142 iteration 19 energy 0 : -16207.5
 E-Slope 0.00010439 iteration 20 energy 0 : -16186.2
 E-Slope 0.000103571 iteration 21 energy 0 : -16218.1
 E-Slope 0.000135638 iteration 22 energy 0 : -16196.2
 E-Slope 0.000171058 iteration 23 energy 0 : -16228.1
 E-Slope 0.000139914 iteration 24 energy 0 : -16205.8
 E-Slope 0.000186428 iteration 25 energy 0 : -16236.1
 E-Slope 0.000156917 iteration 26 energy 0 : -16213.9
 E-Slope 0.000186473 iteration 27 energy 0 : -16242.2
 E-Slope 0.000147022 iteration 28 energy 0 : -16220.2
 E-Slope 0.000169434 iteration 29 energy 0 : -16247
 E-Slope 0.000130966 iteration 30 energy 0 : -16229.7
 E-Slope 0.000143833 iteration 31 energy 0 : -16245.5
 E-Slope 0.000109352 iteration 32 energy 0 : -16237.3
 E-Slope 0.00012216 iteration 33 energy 0 : -16249
 E-Slope 9.26182e-05 iteration 34 energy 0 : -16244.3
 Converged due to oscillation in optimization  metric 0 bad 13  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -93320.1
 iteration 2 energy 0 : -94787.8
 iteration 3 energy 0 : -96233
 iteration 4 energy 0 : -97551.9
 iteration 5 energy 0 : -98707.2
 iteration 6 energy 0 : -99673.7
 iteration 7 energy 0 : -100528
 iteration 8 energy 0 : -101268
 iteration 9 energy 0 : -101946
 iteration 10 energy 0 : -102525
 iteration 11 energy 0 : -103010
 iteration 12 energy 0 : -103436
 E-Slope 0.00456502 iteration 13 energy 0 : -103773
 E-Slope 0.00393755 iteration 14 energy 0 : -104065
 E-Slope 0.00338377 iteration 15 energy 0 : -104323
 E-Slope 0.00290702 iteration 16 energy 0 : -104555
 E-Slope 0.00250175 iteration 17 energy 0 : -104770
 E-Slope 0.00215293 iteration 18 energy 0 : -104969
 E-Slope 0.00185855 iteration 19 energy 0 : -105155
 E-Slope 0.00161371 iteration 20 energy 0 : -105334
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2617_10262016_Aug2_Ref_vimp2_2948_03042017_Test_NewCases/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2617_10262016_Aug2_Ref_vimp2_2948_03042017_Test_NewCases/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2617_10262016_Aug2_Ref_vimp2_2948_03042017_Test_NewCases/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2617_10262016_Aug2_Ref_vimp2_2948_03042017_Test_NewCases/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2618_10262016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2450_08172016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2618_10262016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2450_08172016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547787387
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [5.84898, -19.2697, 16.6656]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 7.897922533665257, 23.333150915724296, -4.740518737096377]
level 0, iter 547, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.03545845559981486, -0.03436220133515193, -0.05428347337845571, 0.9973039865376297, 1.0178911985767707, 0.9960477401713822, 0.9896890008894519, 0.016436365558802655, 0.0060531826953881054, 0.014502657413501933, 4.0681367648769475, 26.95410598807317, -1.79027591745386]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 126, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.03767476196100566, -0.0408827881977233, -0.05732073003210148, 0.9968066732566294, 1.0274209356552486, 1.0036763255514194, 0.9894431454653473, 0.010986504833737655, 0.005322977491285277, 0.01870037555628096, 3.732083755376863, 26.866049167096147, -2.1500515498658275]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 82, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.050587035367765085, -0.040759594586910974, -0.06041058787303044, 0.996057311691775, 1.0325921009339378, 0.999448249637916, 0.9914896675193149, 0.007571530223197235, -0.002807048063983234, 0.01701418827090891, 3.677126169406924, 26.462918617456918, -1.9906186407656625]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 148, size: fix[41, 43, 34]-mov[36, 38, 32], affine para: [0.043220219541977474, -0.037345687182655275, -0.0634991622378666, 0.996345908139682, 1.0278547462091219, 0.9924958162590598, 0.9807260720745677, 0.01043950676018704, -0.0068217550345874645, 0.019193586389704045, 3.7515066877789702, 26.785960300068528, -2.074187097423126]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 50, size: fix[81, 85, 48]-mov[71, 76, 40], affine para: [0.04450409064039803, -0.036821691577603344, -0.05939037596780103, 0.9965622570557439, 1.0365541968989531, 0.9943050719297661, 0.9905812215006211, 0.009623011038490293, -0.00496581848103453, 0.01857207608568696, 3.7118120636004805, 26.517505711680304, -1.9847313773590762]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 3038, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.04865823169222912, 0.001583364154043799, 0.057811963485765, 0.9971397325974235, 0.9760786337476836, 0.974022837862567, 0.9625377793510488, 0.03224925158114086, 0.07305267972304069, -0.03909380089174376, -1.3991285808705822, -26.000534319588258, 3.0282113674972586]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 1030, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.045113769835565316, 0.0010016902387157607, 0.07416453228935137, 0.9962245562814596, 0.9798011656125456, 0.9470417449634138, 0.966405206546926, 0.05113239524685351, 0.0740391943826587, -0.03543347227347126, -1.1695695408911229, -25.704403053795417, 2.8490106475070123]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 1861, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.051200495473719375, 0.0017591948297034058, 0.07087088329250175, 0.9961690280259355, 0.938674439991452, 0.9683793172904075, 0.959398382546951, 0.0018790626905126498, 0.07789929372863419, -0.06047800152030723, 0.1268456079087292, -26.177824772111894, 3.2541049560656448]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 997, size: fix[36, 38, 32]-mov[41, 43, 34], affine para: [-0.04974113275145399, -0.0015220625306995763, 0.07054440255245245, 0.996266525738355, 0.9366261347751995, 0.9728957362716448, 0.9547951372371575, 0.0059896249978196505, 0.07511456197776223, -0.06864259643610565, -0.002608877881957466, -26.501663556097544, 3.1013401682730533]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 1994, size: fix[71, 76, 40]-mov[81, 85, 48], affine para: [-0.05149046285182279, 0.015051916497937369, 0.07200243790181951, 0.9959607527313707, 0.9243775168167654, 0.9775097509062869, 0.9500182827945539, 0.013123306813417257, 0.044126617482492206, -0.08017183404519752, 0.37969563084605124, -26.849718313759695, 3.493321312978349]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.285828 v2 -0.305877
 last params [0.04450409064039803, -0.036821691577603344, -0.05939037596780103, 0.9965622570557439, 1.0365541968989531, 0.9943050719297661, 0.9905812215006211, 0.009623011038490293, -0.00496581848103453, 0.01857207608568696, 3.7118120636004805, 26.517505711680304, -1.9847313773590762]
 my params [-0.05149046285182279, 0.015051916497937369, 0.07200243790181951, 0.9959607527313707, 0.9243775168167654, 0.9775097509062869, 0.9500182827945539, 0.013123306813417257, 0.044126617482492206, -0.08017183404519752, 0.37969563084605124, -26.849718313759695, 3.493321312978349]
A=1.07098 0.135284 -0.0863906 
-0.146404 1.01581 -0.0188033 
0.0237547 0.110243 1.04655 

rotation R0.990546 0.132335 -0.0361368 
-0.13541 0.985415 -0.103065 
0.0219707 0.106983 0.994018 

upper R1.0812 -0.0011236 -0.0600342 
0 1.0307 0.0820023 
0 0 1.04535 

s=0.250943 u=0.0527102 v=-0.0145817 w-0.0671888 r=0.99624
m_Rotation from vnl0.0527102 -0.0145817 -0.0671888 0.99624
 new params [0.05271016588650562, -0.014581709590753628, -0.06718876787989923, 0.9962402730408007, 1.081196578776553, 1.030695194269904, 1.0453522318052622, -0.0010392168328294245, -0.05552573454254953, 0.07956018242279589, 3.5274877743517585, 27.39560151201485, -0.7049814879875846]
outputput affine center: [5.84898, -19.2697, 16.6656]
output affine para: [0.05271016588650562, -0.014581709590753628, -0.06718876787989923, 0.9962402730408007, 1.081196578776553, 1.030695194269904, 1.0453522318052622, -0.0010392168328294245, -0.05552573454254953, 0.07956018242279589, 3.5274877743517585, 27.39560151201485, -0.7049814879875846]
initial measure value (MMI): rval = -0.0971611
final measure value (MMI): rval = -0.341393
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -2790.69
 iteration 2 energy 0 : -3032.62
 iteration 3 energy 0 : -3236.26
 iteration 4 energy 0 : -3397.52
 iteration 5 energy 0 : -3521
 iteration 6 energy 0 : -3622.16
 iteration 7 energy 0 : -3706.84
 iteration 8 energy 0 : -3784.64
 iteration 9 energy 0 : -3861.74
 iteration 10 energy 0 : -3938.47
 iteration 11 energy 0 : -4024.26
 iteration 12 energy 0 : -4094.9
 E-Slope 0.0146978 iteration 13 energy 0 : -4147.69
 E-Slope 0.0126972 iteration 14 energy 0 : -4192.49
 E-Slope 0.0112079 iteration 15 energy 0 : -4230.24
 E-Slope 0.00999433 iteration 16 energy 0 : -4257.74
 E-Slope 0.00889524 iteration 17 energy 0 : -4282.65
 E-Slope 0.00769936 iteration 18 energy 0 : -4275.35
 E-Slope 0.00645708 iteration 19 energy 0 : -4280.1
 E-Slope 0.00527592 iteration 20 energy 0 : -4299.65
 E-Slope 0.00412671 iteration 21 energy 0 : -4300.02
 E-Slope 0.00323756 iteration 22 energy 0 : -4335
 E-Slope 0.00255074 iteration 23 energy 0 : -4337.82
 E-Slope 0.00203092 iteration 24 energy 0 : -4338.47
 E-Slope 0.00161162 iteration 25 energy 0 : -4335.93
 E-Slope 0.00142585 iteration 26 energy 0 : -4365.14
 E-Slope 0.00129948 iteration 27 energy 0 : -4362.85
 E-Slope 0.00126914 iteration 28 energy 0 : -4376.04
 E-Slope 0.00121917 iteration 29 energy 0 : -4365.08
 E-Slope 0.00122006 iteration 30 energy 0 : -4400.86
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -9554.27
 iteration 2 energy 0 : -9760.25
 iteration 3 energy 0 : -9896.42
 iteration 4 energy 0 : -10030.8
 iteration 5 energy 0 : -10145.2
 iteration 6 energy 0 : -10261.9
 iteration 7 energy 0 : -10395.8
 iteration 8 energy 0 : -10524.7
 iteration 9 energy 0 : -10625.7
 iteration 10 energy 0 : -10713.5
 iteration 11 energy 0 : -10732.6
 iteration 12 energy 0 : -10760.3
 E-Slope 0.00538455 iteration 13 energy 0 : -10744
 E-Slope 0.00468061 iteration 14 energy 0 : -10817.1
 E-Slope 0.00385989 iteration 15 energy 0 : -10783
 E-Slope 0.00319679 iteration 16 energy 0 : -10865.8
 E-Slope 0.00253768 iteration 17 energy 0 : -10867
 E-Slope 0.00198209 iteration 18 energy 0 : -10896
 E-Slope 0.00150854 iteration 19 energy 0 : -10878
 E-Slope 0.00129792 iteration 20 energy 0 : -10946.9
 E-Slope 0.00113378 iteration 21 energy 0 : -10922.5
 E-Slope 0.00118164 iteration 22 energy 0 : -10991.6
 E-Slope 0.00113116 iteration 23 energy 0 : -10964.7
 E-Slope 0.00119323 iteration 24 energy 0 : -11038.6
 E-Slope 0.00106528 iteration 25 energy 0 : -10998.4
 E-Slope 0.00113176 iteration 26 energy 0 : -11068.8
 E-Slope 0.000981055 iteration 27 energy 0 : -11030.2
 E-Slope 0.00104272 iteration 28 energy 0 : -11099.5
 E-Slope 0.000933386 iteration 29 energy 0 : -11045.1
 E-Slope 0.000958286 iteration 30 energy 0 : -11123
 E-Slope 0.000802293 iteration 31 energy 0 : -11080.4
 E-Slope 0.000810727 iteration 32 energy 0 : -11130.5
 E-Slope 0.000610925 iteration 33 energy 0 : -11072.7
 E-Slope 0.000649184 iteration 34 energy 0 : -11155.9
 E-Slope 0.000530727 iteration 35 energy 0 : -11124.4
 E-Slope 0.000537932 iteration 36 energy 0 : -11138.4
 E-Slope 0.000357606 iteration 37 energy 0 : -11096.2
 E-Slope 0.000427932 iteration 38 energy 0 : -11176.1
 E-Slope 0.000298962 iteration 39 energy 0 : -11124
 E-Slope 0.000426099 iteration 40 energy 0 : -11206.4
 E-Slope 0.000344753 iteration 41 energy 0 : -11165.1
 E-Slope 0.000445358 iteration 42 energy 0 : -11198.8
 E-Slope 0.000346996 iteration 43 energy 0 : -11148.1
 E-Slope 0.000464179 iteration 44 energy 0 : -11228.9
 E-Slope 0.000360489 iteration 45 energy 0 : -11186.4
 E-Slope 0.000430748 iteration 46 energy 0 : -11212.5
 E-Slope 0.000340499 iteration 47 energy 0 : -11170.4
 E-Slope 0.000380099 iteration 48 energy 0 : -11239.2
 E-Slope 0.000212252 iteration 49 energy 0 : -11183.5
 E-Slope 0.000293985 iteration 50 energy 0 : -11249.2
 E-Slope 0.000206172 iteration 51 energy 0 : -11221.6
 E-Slope 0.000279702 iteration 52 energy 0 : -11235.3
 E-Slope 0.000192225 iteration 53 energy 0 : -11197.1
 E-Slope 0.000247061 iteration 54 energy 0 : -11248.2
 E-Slope 0.000120841 iteration 55 energy 0 : -11210.8
 E-Slope 0.000198387 iteration 56 energy 0 : -11247.4
 E-Slope 9.1359e-05 iteration 57 energy 0 : -11194.8
 Converged due to oscillation in optimization  metric 0 bad 22  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -78031.7
 iteration 2 energy 0 : -79501.4
 iteration 3 energy 0 : -81188.8
 iteration 4 energy 0 : -82566.6
 iteration 5 energy 0 : -83740.3
 iteration 6 energy 0 : -84613.7
 iteration 7 energy 0 : -85415
 iteration 8 energy 0 : -86112.2
 iteration 9 energy 0 : -86790.4
 iteration 10 energy 0 : -87450.1
 iteration 11 energy 0 : -88075.5
 iteration 12 energy 0 : -88668.2
 E-Slope 0.00558408 iteration 13 energy 0 : -89231.5
 E-Slope 0.00493404 iteration 14 energy 0 : -89736.1
 E-Slope 0.00446076 iteration 15 energy 0 : -90234.2
 E-Slope 0.00410753 iteration 16 energy 0 : -90692.4
 E-Slope 0.00382537 iteration 17 energy 0 : -91051.9
 E-Slope 0.00358602 iteration 18 energy 0 : -91519.7
 E-Slope 0.0033815 iteration 19 energy 0 : -91965.3
 E-Slope 0.00320242 iteration 20 energy 0 : -92422.2
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2618_10262016_Aug1_Ref_vimp2_2450_08172016/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2618_10262016_Aug1_Ref_vimp2_2450_08172016/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2618_10262016_Aug1_Ref_vimp2_2450_08172016/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2618_10262016_Aug1_Ref_vimp2_2450_08172016/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2618_10262016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2998_03222017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2618_10262016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2998_03222017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547787566
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [5.84898, -19.2697, 16.6656]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 7.688444590448416, 29.512607477835193, -24.732858890758813]
level 0, iter 4783, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.06172253306438412, -0.014824832358278662, -0.04939346466750386, 0.9967601712076004, 0.990897820520825, 0.9737759794909159, 0.9542536326730103, -0.018208527140933545, -0.06197005509101226, -0.08570635182372766, 3.626921015760238, 30.0122610762189, -20.968404820587928]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 1207, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.08250837986490114, -0.01023006165925094, -0.07094589936437536, 0.9940092516943174, 0.9837136542782786, 0.9945471069976773, 0.9506159385689285, -0.02609858814365855, -0.07318965368830989, -0.1405228447148374, 3.9565755265630935, 29.908115007406256, -21.149881081043368]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 76, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.08446868932814391, -0.01335772148452351, -0.059779977562485855, 0.9945415858990292, 1.0044755556539895, 0.9913392672015182, 0.9472474578847165, -0.028128055983562394, -0.06574062432560221, -0.15423394313224723, 3.789588234946268, 29.645354501210125, -21.35390274649819]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 208, size: fix[41, 43, 34]-mov[39, 45, 33], affine para: [-0.07630257406516075, -0.010794273023478124, -0.05323019161526763, 0.9956043127475529, 1.0018998012135443, 0.9942133615093898, 0.9553657513309871, -0.025586532986095124, -0.06001741061766399, -0.16315334068481724, 3.650993555588638, 29.585354462817023, -20.880982268221153]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 285, size: fix[81, 85, 48]-mov[77, 89, 47], affine para: [-0.08224310221648092, -0.0028762696468073055, -0.058603832952252424, 0.9948836062444857, 0.9957010397030452, 0.9958786709805344, 0.9649020888814186, -0.02174693343313979, -0.05468651354786809, -0.18030318773418053, 3.8333060065134377, 29.21070604789187, -20.676401993463635]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 1781, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.05256004286033153, -0.018057357148480228, 0.07404757092435385, 0.9957049417310005, 1.0186299596426962, 0.9022308188010127, 0.9132333360014999, 0.06453365894995029, 0.08997857925174282, 0.04121108454063337, -0.8839789841243748, -29.43640454495682, 13.485101527072434]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 294, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.04865976658648642, -0.01905504785883877, 0.07543099044727437, 0.9957807479294774, 1.031376893981895, 0.9103436697093111, 0.908060877180197, 0.06805270203437089, 0.09502133198258907, 0.04249082713168391, -0.9739891776864767, -29.38407370400529, 13.43578895102227]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 324, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.054962075683794395, -0.021490974066643253, 0.0783337294931967, 0.9951789462673949, 1.0413639468278901, 0.9183214202926671, 0.9183189199120746, 0.0768265361985344, 0.09481705424761108, 0.052649548178693106, -1.4101651389552716, -29.788325065039352, 13.322116330699021]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 663, size: fix[39, 45, 33]-mov[41, 43, 34], affine para: [0.05671744098114432, -0.024377985696008672, 0.08131897292934463, 0.9947743816281519, 1.0330495550893115, 0.9097427116429805, 0.9247477487557952, 0.0754274475449256, 0.10860702976274843, 0.044157161586865765, -0.8089991500358186, -29.627859956963977, 13.486995812926086]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 493, size: fix[77, 89, 47]-mov[81, 85, 48], affine para: [0.05579197049794789, -0.017872750250758365, 0.08195116987461132, 0.9949129743764591, 1.0401728440702325, 0.9208651215825109, 0.9303031047146857, 0.08108246964735749, 0.09656875484988688, 0.047265546918359755, -0.9467849921440291, -29.85119713105532, 13.799608199469139]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.255416 v2 -0.275057
 last params [-0.08224310221648092, -0.0028762696468073055, -0.058603832952252424, 0.9948836062444857, 0.9957010397030452, 0.9958786709805344, 0.9649020888814186, -0.02174693343313979, -0.05468651354786809, -0.18030318773418053, 3.8333060065134377, 29.21070604789187, -20.676401993463635]
 my params [0.05579197049794789, -0.017872750250758365, 0.08195116987461132, 0.9949129743764591, 1.0401728440702325, 0.9208651215825109, 0.9303031047146857, 0.08108246964735749, 0.09656875484988688, 0.047265546918359755, -0.9467849921440291, -29.85119713105532, 13.799608199469139]
A=0.965019 0.0798924 -0.0655354 
-0.177905 1.07038 0.0669176 
-0.0283985 -0.122482 1.06754 

rotation R0.983016 0.176723 0.0494744 
-0.181223 0.977282 0.109902 
-0.0289282 -0.117002 0.99271 

upper R0.981691 -0.111899 -0.107431 
0 1.07451 -0.0710881 
0 0 1.06387 

s=0.251482 u=-0.0570621 v=0.0197168 w-0.0900169 r=0.994109
m_Rotation from vnl-0.0570621 0.0197168 -0.0900169 0.994109
 new params [-0.05706210152701339, 0.019716786402022932, -0.09001688658027888, 0.9941087088612045, 0.9816913100636454, 1.0745101554169132, 1.0638699036776023, -0.11398555866357438, -0.10943498634580638, -0.06615863522925358, 4.202913448119452, 30.860184765053027, -18.41476334445138]
outputput affine center: [5.84898, -19.2697, 16.6656]
output affine para: [-0.05706210152701339, 0.019716786402022932, -0.09001688658027888, 0.9941087088612045, 0.9816913100636454, 1.0745101554169132, 1.0638699036776023, -0.11398555866357438, -0.10943498634580638, -0.06615863522925358, 4.202913448119452, 30.860184765053027, -18.41476334445138]
initial measure value (MMI): rval = -0.114954
final measure value (MMI): rval = -0.294534
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -3918.13
 iteration 2 energy 0 : -4162.22
 iteration 3 energy 0 : -4368.83
 iteration 4 energy 0 : -4516.44
 iteration 5 energy 0 : -4625.28
 iteration 6 energy 0 : -4725.04
 iteration 7 energy 0 : -4818.3
 iteration 8 energy 0 : -4903.14
 iteration 9 energy 0 : -4983.65
 iteration 10 energy 0 : -5052.95
 iteration 11 energy 0 : -5112.16
 iteration 12 energy 0 : -5167.02
 E-Slope 0.0107697 iteration 13 energy 0 : -5210.05
 E-Slope 0.00919909 iteration 14 energy 0 : -5249.97
 E-Slope 0.00801662 iteration 15 energy 0 : -5278.06
 E-Slope 0.00702097 iteration 16 energy 0 : -5303.89
 E-Slope 0.00607576 iteration 17 energy 0 : -5322.25
 E-Slope 0.00519466 iteration 18 energy 0 : -5339.6
 E-Slope 0.00430311 iteration 19 energy 0 : -5330.57
 E-Slope 0.00356316 iteration 20 energy 0 : -5358.31
 E-Slope 0.00286492 iteration 21 energy 0 : -5350.69
 E-Slope 0.00232293 iteration 22 energy 0 : -5372.78
 E-Slope 0.00181669 iteration 23 energy 0 : -5364.78
 E-Slope 0.00152601 iteration 24 energy 0 : -5399.76
 E-Slope 0.00125223 iteration 25 energy 0 : -5389.88
 E-Slope 0.00107897 iteration 26 energy 0 : -5399.49
 E-Slope 0.000900917 iteration 27 energy 0 : -5390.13
 E-Slope 0.000870377 iteration 28 energy 0 : -5420.53
 E-Slope 0.000805311 iteration 29 energy 0 : -5410.04
 E-Slope 0.000879481 iteration 30 energy 0 : -5444.68
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -11954
 iteration 2 energy 0 : -12190.5
 iteration 3 energy 0 : -12360.9
 iteration 4 energy 0 : -12496.7
 iteration 5 energy 0 : -12616
 iteration 6 energy 0 : -12731.7
 iteration 7 energy 0 : -12848.9
 iteration 8 energy 0 : -12973
 iteration 9 energy 0 : -13107.6
 iteration 10 energy 0 : -13224.4
 iteration 11 energy 0 : -13318.3
 iteration 12 energy 0 : -13317.6
 E-Slope 0.00484169 iteration 13 energy 0 : -13292.1
 E-Slope 0.00424464 iteration 14 energy 0 : -13346.8
 E-Slope 0.00359955 iteration 15 energy 0 : -13329.8
 E-Slope 0.00294618 iteration 16 energy 0 : -13345.4
 E-Slope 0.00226364 iteration 17 energy 0 : -13335.2
 E-Slope 0.00161929 iteration 18 energy 0 : -13342.4
 E-Slope 0.00103176 iteration 19 energy 0 : -13333.7
 E-Slope 0.000574276 iteration 20 energy 0 : -13343.6
 E-Slope 0.000268959 iteration 21 energy 0 : -13339.7
 E-Slope 0.000133902 iteration 22 energy 0 : -13351.3
 E-Slope 0.000137396 iteration 23 energy 0 : -13355.7
 E-Slope 0.000139348 iteration 24 energy 0 : -13360.8
 E-Slope 0.00010144 iteration 25 energy 0 : -13367.5
 E-Slope 0.000140131 iteration 26 energy 0 : -13368.3
 E-Slope 0.000159413 iteration 27 energy 0 : -13379.1
 E-Slope 0.000185587 iteration 28 energy 0 : -13375.3
 E-Slope 0.00020624 iteration 29 energy 0 : -13390.2
 E-Slope 0.000214502 iteration 30 energy 0 : -13384.2
 E-Slope 0.000217274 iteration 31 energy 0 : -13398.9
 E-Slope 0.00020916 iteration 32 energy 0 : -13391.7
 E-Slope 0.000204712 iteration 33 energy 0 : -13407.5
 E-Slope 0.000187404 iteration 34 energy 0 : -13397.1
 E-Slope 0.000189096 iteration 35 energy 0 : -13413.7
 E-Slope 0.000167124 iteration 36 energy 0 : -13401.8
 E-Slope 0.000171393 iteration 37 energy 0 : -13419.9
 E-Slope 0.000145726 iteration 38 energy 0 : -13407.5
 E-Slope 0.000154212 iteration 39 energy 0 : -13425.7
 E-Slope 0.000125542 iteration 40 energy 0 : -13412.3
 E-Slope 0.000139982 iteration 41 energy 0 : -13431.4
 E-Slope 0.000115976 iteration 42 energy 0 : -13418.8
 E-Slope 0.000133753 iteration 43 energy 0 : -13436.8
 E-Slope 0.000113025 iteration 44 energy 0 : -13425.1
 E-Slope 0.000133738 iteration 45 energy 0 : -13441.6
 E-Slope 0.000114821 iteration 46 energy 0 : -13432.2
 E-Slope 0.000138402 iteration 47 energy 0 : -13448.8
 E-Slope 0.000118107 iteration 48 energy 0 : -13438.3
 E-Slope 0.000140965 iteration 49 energy 0 : -13453.9
 E-Slope 0.000120305 iteration 50 energy 0 : -13444.2
 E-Slope 0.000140287 iteration 51 energy 0 : -13458.1
 E-Slope 0.000117563 iteration 52 energy 0 : -13449.9
 E-Slope 0.000134297 iteration 53 energy 0 : -13462.1
 E-Slope 0.000111759 iteration 54 energy 0 : -13455.1
 E-Slope 0.000124186 iteration 55 energy 0 : -13465.1
 E-Slope 0.000101916 iteration 56 energy 0 : -13459.7
 E-Slope 0.00011123 iteration 57 energy 0 : -13468.7
 E-Slope 9.34899e-05 iteration 58 energy 0 : -13465.5
 Converged due to oscillation in optimization  metric 0 bad 22  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -93811.5
 iteration 2 energy 0 : -96088
 iteration 3 energy 0 : -98170.5
 iteration 4 energy 0 : -99651
 iteration 5 energy 0 : -100832
 iteration 6 energy 0 : -101849
 iteration 7 energy 0 : -102864
 iteration 8 energy 0 : -103883
 iteration 9 energy 0 : -104947
 iteration 10 energy 0 : -106042
 iteration 11 energy 0 : -107090
 iteration 12 energy 0 : -108153
 E-Slope 0.00621521 iteration 13 energy 0 : -109064
 E-Slope 0.00580347 iteration 14 energy 0 : -109896
 E-Slope 0.00553549 iteration 15 energy 0 : -110612
 E-Slope 0.00531494 iteration 16 energy 0 : -111370
 E-Slope 0.00504827 iteration 17 energy 0 : -111871
 E-Slope 0.00474302 iteration 18 energy 0 : -112489
 E-Slope 0.00435916 iteration 19 energy 0 : -112785
 E-Slope 0.00401626 iteration 20 energy 0 : -113601
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2618_10262016_Aug2_Ref_vimp2_2998_03222017_Test_NewCases/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2618_10262016_Aug2_Ref_vimp2_2998_03222017_Test_NewCases/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2618_10262016_Aug2_Ref_vimp2_2998_03222017_Test_NewCases/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2618_10262016_Aug2_Ref_vimp2_2998_03222017_Test_NewCases/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2628_10282016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1875_01262016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2628_10282016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1875_01262016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547787743
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [14.3643, 4.08332, -13.7554]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 1.2899973007755214, -18.758925622003662, -5.481937240693227]
level 0, iter 637, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.027212463810848846, 0.04205073687635873, -0.12466249039020871, 0.9909341455572158, 1.0533967959057489, 1.0146789731957522, 1.0402006891540567, -0.0531114262929238, 0.07113752885054174, -0.021850749664204555, 5.97278747541273, -22.386535602224964, -10.060680385490876]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 166, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.025101520060166176, 0.03843046792444619, -0.12177283503264769, 0.9914960360353887, 1.0530205936064407, 1.0225109572428943, 1.059180142500802, -0.05986070496198436, 0.07555596081434868, -0.015817120673814133, 5.952823542401187, -22.238636824266436, -9.87990551246731]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 359, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.017455768899533465, 0.03325576869601943, -0.1194830647301337, 0.9921255702899999, 1.0313050181347134, 1.001234113956905, 1.047254890679776, -0.06126008899095434, 0.10020763803334358, -0.012365304008495516, 5.779281330450894, -22.419870200448592, -10.027580290850352]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 362, size: fix[36, 41, 35]-mov[45, 46, 43], affine para: [-0.025263134103134178, 0.03554115410164461, -0.12028900707431027, 0.9917807999742114, 1.0449185478900092, 1.0206234736600475, 1.0611332949977181, -0.06162419529254934, 0.0956230673634054, -0.004512036287311285, 5.937525462310667, -22.074301097749824, -9.972676728792276]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 738, size: fix[72, 81, 49]-mov[90, 92, 60], affine para: [-0.02663317298243124, 0.03505510754331875, -0.12466403588709282, 0.9912218176010634, 1.026682425299173, 1.0062991909224976, 1.0550029137544403, -0.07518870050553736, 0.08950792857580026, -0.00886178828290303, 5.946695080417334, -22.10825770179864, -9.797510833089873]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 1722, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.028593561407006935, -0.045849647017316045, 0.11314126112344008, 0.9921084986763538, 0.8682130628409145, 0.9309053667366205, 0.8205176332567764, 0.035417370362827175, 0.046071533069358, 0.008124988562828773, -8.638510971663115, 19.21372291737901, 8.856812952753874]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 327, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.02787129995543451, -0.05023538159118196, 0.126510961092979, 0.9903002442686326, 0.8689224821869703, 0.9267360632168157, 0.8116213391475907, 0.06979826573523193, 0.0838958934314644, 0.015199263965838542, -8.322479012610199, 19.679096908654927, 8.783255801500086]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 695, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.024531451194924718, -0.05004834941087431, 0.12779624805179526, 0.9902330481292786, 0.8722643824723465, 0.924391955948757, 0.8216995448211846, 0.07894646158273015, 0.08853704145205829, 0.022175907321590183, -8.10845193152595, 19.70226731787136, 8.634147233458703]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 407, size: fix[45, 46, 43]-mov[36, 41, 35], affine para: [0.0337010084831339, -0.05170077945042943, 0.13548776743611352, 0.9888550633468058, 0.8766665231853349, 0.9277850717237902, 0.809507244597843, 0.09516493363571965, 0.09135744215228053, 0.043542165583482104, -8.029752920003531, 20.2820708917592, 9.00108544056328]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 556, size: fix[90, 92, 60]-mov[72, 81, 49], affine para: [0.024252681363497338, -0.04942183397853141, 0.1370550971989374, 0.989032451492199, 0.8692606970575599, 0.9273711950320639, 0.7989037256109506, 0.09874103300966725, 0.0963706415649907, 0.051612893925755146, -7.855103470296113, 20.431167028553567, 8.295955838102268]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.260298 v2 -0.266716
 last params [-0.02663317298243124, 0.03505510754331875, -0.12466403588709282, 0.9912218176010634, 1.026682425299173, 1.0062991909224976, 1.0550029137544403, -0.07518870050553736, 0.08950792857580026, -0.00886178828290303, 5.946695080417334, -22.10825770179864, -9.797510833089873]
 my params [0.024252681363497338, -0.04942183397853141, 0.1370550971989374, 0.989032451492199, 0.8692606970575599, 0.9273711950320639, 0.7989037256109506, 0.09874103300966725, 0.0963706415649907, 0.051612893925755146, -7.855103470296113, 20.431167028553567, 8.295955838102268]
A=1.14109 0.213801 0.00288821 
-0.289035 1.04051 -0.0270905 
-0.114046 -0.077006 1.24413 

rotation R0.964868 0.237683 0.111964 
-0.244397 0.968362 0.0504416 
-0.0964331 -0.0760333 0.992431 

upper R1.18264 -0.0405828 -0.110567 
0 1.06426 -0.120142 
0 0 1.23367 

s=0.252356 u=-0.0319167 v=0.0525904 w-0.121656 r=0.990664
m_Rotation from vnl-0.0319167 0.0525904 -0.121656 0.990664
 new params [-0.03191668726471156, 0.05259035479938988, -0.12165582573720471, 0.9906641407259678, 1.1826431460114368, 1.0642649326879334, 1.2336683867471447, -0.03431532910587, -0.09349183504691483, -0.1128874185793332, 4.571258299965047, -23.30453813436257, -9.64375099802497]
outputput affine center: [14.3643, 4.08332, -13.7554]
output affine para: [-0.03191668726471156, 0.05259035479938988, -0.12165582573720471, 0.9906641407259678, 1.1826431460114368, 1.0642649326879334, 1.2336683867471447, -0.03431532910587, -0.09349183504691483, -0.1128874185793332, 4.571258299965047, -23.30453813436257, -9.64375099802497]
initial measure value (MMI): rval = -0.0993823
final measure value (MMI): rval = -0.280898
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -3412.27
 iteration 2 energy 0 : -3734.55
 iteration 3 energy 0 : -4011.24
 iteration 4 energy 0 : -4268.37
 iteration 5 energy 0 : -4463.09
 iteration 6 energy 0 : -4614.09
 iteration 7 energy 0 : -4742.31
 iteration 8 energy 0 : -4860.8
 iteration 9 energy 0 : -4990.5
 iteration 10 energy 0 : -5135.41
 iteration 11 energy 0 : -5285.77
 iteration 12 energy 0 : -5415.75
 E-Slope 0.0185403 iteration 13 energy 0 : -5541.84
 E-Slope 0.016635 iteration 14 energy 0 : -5657.74
 E-Slope 0.0152802 iteration 15 energy 0 : -5767.4
 E-Slope 0.0143367 iteration 16 energy 0 : -5859.03
 E-Slope 0.01352 iteration 17 energy 0 : -5938.72
 E-Slope 0.0126562 iteration 18 energy 0 : -6009.83
 E-Slope 0.0116813 iteration 19 energy 0 : -6075.35
 E-Slope 0.0105942 iteration 20 energy 0 : -6136.23
 E-Slope 0.00949586 iteration 21 energy 0 : -6197.52
 E-Slope 0.00846307 iteration 22 energy 0 : -6248.31
 E-Slope 0.00734723 iteration 23 energy 0 : -6230.69
 E-Slope 0.00636897 iteration 24 energy 0 : -6280.92
 E-Slope 0.00533895 iteration 25 energy 0 : -6262.62
 E-Slope 0.00451648 iteration 26 energy 0 : -6315.63
 E-Slope 0.00370187 iteration 27 energy 0 : -6299.95
 E-Slope 0.00311068 iteration 28 energy 0 : -6352.58
 E-Slope 0.00249711 iteration 29 energy 0 : -6330.4
 E-Slope 0.00211947 iteration 30 energy 0 : -6384.45
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -10947.4
 iteration 2 energy 0 : -11128
 iteration 3 energy 0 : -11353.8
 iteration 4 energy 0 : -11573.4
 iteration 5 energy 0 : -11783.5
 iteration 6 energy 0 : -11940.6
 iteration 7 energy 0 : -12083.4
 iteration 8 energy 0 : -12204
 iteration 9 energy 0 : -12200.4
 iteration 10 energy 0 : -12292.1
 iteration 11 energy 0 : -12272.6
 iteration 12 energy 0 : -12370.7
 E-Slope 0.00516385 iteration 13 energy 0 : -12348.1
 E-Slope 0.00413765 iteration 14 energy 0 : -12428
 E-Slope 0.00320182 iteration 15 energy 0 : -12419.4
 E-Slope 0.00250782 iteration 16 energy 0 : -12474.8
 E-Slope 0.00195293 iteration 17 energy 0 : -12453.1
 E-Slope 0.00165431 iteration 18 energy 0 : -12536.5
 E-Slope 0.00140253 iteration 19 energy 0 : -12495.3
 E-Slope 0.00135419 iteration 20 energy 0 : -12557.8
 E-Slope 0.00117964 iteration 21 energy 0 : -12543.2
 E-Slope 0.00116516 iteration 22 energy 0 : -12599.6
 E-Slope 0.00100362 iteration 23 energy 0 : -12580.3
 E-Slope 0.00102647 iteration 24 energy 0 : -12638.6
 E-Slope 0.000886649 iteration 25 energy 0 : -12606.1
 E-Slope 0.000912704 iteration 26 energy 0 : -12666.6
 E-Slope 0.00080362 iteration 27 energy 0 : -12631.6
 E-Slope 0.000823587 iteration 28 energy 0 : -12690.4
 E-Slope 0.000667639 iteration 29 energy 0 : -12640
 E-Slope 0.000711821 iteration 30 energy 0 : -12708.5
 E-Slope 0.000574946 iteration 31 energy 0 : -12669
 E-Slope 0.000601724 iteration 32 energy 0 : -12733.4
 E-Slope 0.000494577 iteration 33 energy 0 : -12691.8
 E-Slope 0.000550121 iteration 34 energy 0 : -12758.1
 E-Slope 0.000463709 iteration 35 energy 0 : -12713.8
 E-Slope 0.000544086 iteration 36 energy 0 : -12779.4
 E-Slope 0.000441544 iteration 37 energy 0 : -12722.2
 E-Slope 0.000515886 iteration 38 energy 0 : -12791
 E-Slope 0.00042358 iteration 39 energy 0 : -12745.1
 E-Slope 0.00048849 iteration 40 energy 0 : -12802.3
 E-Slope 0.000365756 iteration 41 energy 0 : -12757.3
 E-Slope 0.000424087 iteration 42 energy 0 : -12817.8
 E-Slope 0.000314541 iteration 43 energy 0 : -12771.4
 E-Slope 0.000381976 iteration 44 energy 0 : -12831.4
 E-Slope 0.000281945 iteration 45 energy 0 : -12785.6
 E-Slope 0.000362456 iteration 46 energy 0 : -12844.7
 E-Slope 0.000271894 iteration 47 energy 0 : -12798.3
 E-Slope 0.000362188 iteration 48 energy 0 : -12857.5
 E-Slope 0.000259183 iteration 49 energy 0 : -12809.8
 E-Slope 0.0003426 iteration 50 energy 0 : -12869.3
 E-Slope 0.00025142 iteration 51 energy 0 : -12820.9
 E-Slope 0.00033135 iteration 52 energy 0 : -12882.1
 E-Slope 0.00023815 iteration 53 energy 0 : -12833.3
 E-Slope 0.000322334 iteration 54 energy 0 : -12894.7
 E-Slope 0.000230536 iteration 55 energy 0 : -12845
 E-Slope 0.000316501 iteration 56 energy 0 : -12906.8
 E-Slope 0.000227287 iteration 57 energy 0 : -12856.6
 E-Slope 0.000318795 iteration 58 energy 0 : -12921.2
 E-Slope 0.000235274 iteration 59 energy 0 : -12872
 E-Slope 0.000328295 iteration 60 energy 0 : -12934.2
 E-Slope 0.000240624 iteration 61 energy 0 : -12882.8
 E-Slope 0.000330955 iteration 62 energy 0 : -12945.9
 E-Slope 0.00023894 iteration 63 energy 0 : -12894.2
 E-Slope 0.00032834 iteration 64 energy 0 : -12958
 E-Slope 0.000233352 iteration 65 energy 0 : -12905.2
 E-Slope 0.000320204 iteration 66 energy 0 : -12968.8
 E-Slope 0.000222258 iteration 67 energy 0 : -12916.1
 E-Slope 0.000310451 iteration 68 energy 0 : -12981.7
 E-Slope 0.000212483 iteration 69 energy 0 : -12928.3
 E-Slope 0.000308521 iteration 70 energy 0 : -12995.9
 E-Slope 0.000219248 iteration 71 energy 0 : -12941.9
 E-Slope 0.000320219 iteration 72 energy 0 : -13009.8
 E-Slope 0.000230245 iteration 73 energy 0 : -12954.7
 E-Slope 0.000333749 iteration 74 energy 0 : -13024.5
 E-Slope 0.000245944 iteration 75 energy 0 : -12970.1
 E-Slope 0.000353612 iteration 76 energy 0 : -13041.2
 E-Slope 0.000260055 iteration 77 energy 0 : -12982.1
 E-Slope 0.000335634 iteration 78 energy 0 : -13036.9
 E-Slope 0.000211619 iteration 79 energy 0 : -12977.4
 E-Slope 0.000318125 iteration 80 energy 0 : -13068.2
 E-Slope 0.000219673 iteration 81 energy 0 : -13006.6
 E-Slope 0.000308059 iteration 82 energy 0 : -13067.4
 E-Slope 0.000193059 iteration 83 energy 0 : -13005.2
 E-Slope 0.000316232 iteration 84 energy 0 : -13097.6
 E-Slope 0.000223652 iteration 85 energy 0 : -13030.3
 E-Slope 0.000351585 iteration 86 energy 0 : -13111.7
 E-Slope 0.00026159 iteration 87 energy 0 : -13043.2
 E-Slope 0.000396103 iteration 88 energy 0 : -13126.6
 E-Slope 0.000303708 iteration 89 energy 0 : -13058
 E-Slope 0.000400744 iteration 90 energy 0 : -13137.5
 tired convergence: reached max iterations 
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -88352.4
 iteration 2 energy 0 : -90421.1
 iteration 3 energy 0 : -92846.9
 iteration 4 energy 0 : -94781
 iteration 5 energy 0 : -96477.4
 iteration 6 energy 0 : -97831
 iteration 7 energy 0 : -99024.2
 iteration 8 energy 0 : -100109
 iteration 9 energy 0 : -101116
 iteration 10 energy 0 : -102031
 iteration 11 energy 0 : -102947
 iteration 12 energy 0 : -103826
 E-Slope 0.0070864 iteration 13 energy 0 : -104605
 E-Slope 0.00625964 iteration 14 energy 0 : -105374
 E-Slope 0.00564875 iteration 15 energy 0 : -106098
 E-Slope 0.00518304 iteration 16 energy 0 : -106818
 E-Slope 0.00481008 iteration 17 energy 0 : -107384
 E-Slope 0.00447468 iteration 18 energy 0 : -107904
 E-Slope 0.00415774 iteration 19 energy 0 : -108386
 E-Slope 0.00384884 iteration 20 energy 0 : -108823
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2628_10282016_Aug1_Ref_vimp2_1875_01262016/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2628_10282016_Aug1_Ref_vimp2_1875_01262016/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2628_10282016_Aug1_Ref_vimp2_1875_01262016/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2628_10282016_Aug1_Ref_vimp2_1875_01262016/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2628_10282016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2914_02162017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2628_10282016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2914_02162017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547787897
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [14.3643, 4.08332, -13.7554]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -3.2757145262622025, 6.321959613669608, 27.182369407223028]
level 0, iter 371, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.11775409720850881, -0.02196488324956634, 0.00038460740700975584, 0.9927997625763135, 0.996969799328491, 0.9442516220990009, 0.9395066137227325, 0.00341282236896949, 0.009654725802019417, -0.08315176281184287, -1.8787254766486854, 6.756079540141574, 25.87997748307276]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 215, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.11916794732303526, -0.024278791483619822, 0.002293976566014824, 0.9925745706426414, 0.9977849015162146, 0.9352603113687642, 0.9434744903586961, 0.007331050109444999, 0.006096032475680357, -0.10923848666408305, -1.911281729153435, 6.78294299163407, 25.818363422280694]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 151, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.11978818888015652, -0.019194232167763513, 0.003063551156549356, 0.9926091808514632, 0.9925551569964602, 0.9370791896470203, 0.9534593231601274, 0.008070485801182, 0.004583257992543002, -0.12288483396679667, -1.9653243913905263, 6.786021855458107, 25.79208823796305]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 825, size: fix[36, 41, 35]-mov[36, 38, 32], affine para: [0.1023962544191913, -0.02179455730000385, -0.000700253538039914, 0.9945046576049805, 1.0015415459616777, 0.9554434178930782, 0.9524667357169996, 0.0036706001195795923, -0.002844136174671723, -0.1432725999096493, -1.7589897465721305, 6.864088489603456, 25.8895233267318]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 103, size: fix[72, 81, 49]-mov[72, 76, 37], affine para: [0.10428865506086873, -0.02612125212294158, 0.000017042379497952737, 0.9942039812446349, 0.9962741135859868, 0.9577296522941728, 0.9417376625378655, 0.005310985578537205, -0.005038100545505516, -0.15577362651954854, -1.8176883292392056, 6.450941308553811, 26.100538023673874]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 2526, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.09838733166490271, 0.02522548188442821, -0.013311584964597141, 0.9947393677427717, 1.000003715473649, 0.9831887326653829, 1.070156309118487, -0.03375882683601383, -0.019865668235146787, 0.19420168742165642, 0.762331726785223, -16.885296193018718, -24.72954571425443]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 165, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.10265885432195936, 0.02418350528726739, -0.010447027613679083, 0.9943677274104196, 1.0026124100527674, 0.9756460658211228, 1.0702059718498238, -0.03233846447110475, -0.01728491325456532, 0.1994809736052103, 0.8554993828643593, -17.045104802750352, -24.719307328180907]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 211, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.0992635273530161, 0.025324372611097386, -0.010056419287824844, 0.9946880399001482, 1.0050066213247721, 0.9791541707271366, 1.066256359377234, -0.03223389649188884, -0.018207939448403355, 0.2021221582676449, 0.9195235937567333, -16.9752544251541, -24.549864327853605]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 527, size: fix[36, 38, 32]-mov[36, 41, 35], affine para: [-0.10204831902494879, 0.01993325399395914, -0.012241161627253331, 0.9945043790408417, 1.003274122345651, 0.971205615199708, 1.069264565196724, -0.03790929345471799, -0.005431235411112416, 0.19396209673445175, 0.7714334719127268, -16.935665025843868, -24.545682789036217]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 391, size: fix[72, 76, 37]-mov[72, 81, 49], affine para: [-0.09884693343844347, 0.02129675705263344, -0.004105427186874618, 0.9948662610403824, 1.004436118100572, 0.9612068381479265, 1.0684522798868876, -0.031212220517360886, -0.001643769064119492, 0.1952133858117029, 0.7721848436024419, -16.300775974069463, -24.68899071981147]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.480432 v2 -0.482105
 last params [0.10428865506086873, -0.02612125212294158, 0.000017042379497952737, 0.9942039812446349, 0.9962741135859868, 0.9577296522941728, 0.9417376625378655, 0.005310985578537205, -0.005038100545505516, -0.15577362651954854, -1.8176883292392056, 6.450941308553811, 26.100538023673874]
 my params [-0.09884693343844347, 0.02129675705263344, -0.004105427186874618, 0.9948662610403824, 1.004436118100572, 0.9612068381479265, 1.0684522798868876, -0.031212220517360886, -0.001643769064119492, 0.1952133858117029, 0.7721848436024419, -16.300775974069463, -24.68899071981147]
A=0.994596 0.0186937 -0.051851 
-0.00377223 0.984091 -0.383769 
0.0404197 0.183915 0.916795 

rotation R0.999168 -0.00370056 -0.0406137 
-0.00378958 0.983141 -0.18281 
0.0406055 0.182812 0.982309 

upper R0.995424 0.0224168 -0.0131266 
0 1.00105 -0.209506 
0 0 0.972839 

s=0.251113 u=0.0918125 v=-0.0203952 w-2.23535e-05 r=0.995567
m_Rotation from vnl0.0918125 -0.0203952 -2.23535e-05 0.995567
 new params [0.0918125112603988, -0.02039519354027774, -0.000022353505254671835, 0.995567425319267, 0.9954236388629868, 1.0010527978798935, 0.9728385313568582, 0.02251987424142937, -0.013186958893291443, -0.20928592395566095, -1.7434374068804726, 6.569485461414032, 25.60147868604577]
outputput affine center: [14.3643, 4.08332, -13.7554]
output affine para: [0.0918125112603988, -0.02039519354027774, -0.000022353505254671835, 0.995567425319267, 0.9954236388629868, 1.0010527978798935, 0.9728385313568582, 0.02251987424142937, -0.013186958893291443, -0.20928592395566095, -1.7434374068804726, 6.569485461414032, 25.60147868604577]
initial measure value (MMI): rval = -0.163236
final measure value (MMI): rval = -0.527374
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -4713.91
 iteration 2 energy 0 : -5116.41
 iteration 3 energy 0 : -5485.69
 iteration 4 energy 0 : -5778.54
 iteration 5 energy 0 : -5989.06
 iteration 6 energy 0 : -6168.72
 iteration 7 energy 0 : -6313.19
 iteration 8 energy 0 : -6419.4
 iteration 9 energy 0 : -6491.06
 iteration 10 energy 0 : -6549.55
 iteration 11 energy 0 : -6564.74
 iteration 12 energy 0 : -6579.86
 E-Slope 0.0115232 iteration 13 energy 0 : -6616.32
 E-Slope 0.00850811 iteration 14 energy 0 : -6624.09
 E-Slope 0.00629988 iteration 15 energy 0 : -6658.04
 E-Slope 0.00465766 iteration 16 energy 0 : -6665.22
 E-Slope 0.00345413 iteration 17 energy 0 : -6690.62
 E-Slope 0.00257459 iteration 18 energy 0 : -6689.76
 E-Slope 0.00208665 iteration 19 energy 0 : -6730.81
 E-Slope 0.00183204 iteration 20 energy 0 : -6750.31
 E-Slope 0.00169799 iteration 21 energy 0 : -6761.52
 E-Slope 0.00163943 iteration 22 energy 0 : -6766.24
 E-Slope 0.00159897 iteration 23 energy 0 : -6794.3
 E-Slope 0.00151765 iteration 24 energy 0 : -6803.34
 E-Slope 0.00148245 iteration 25 energy 0 : -6817.5
 E-Slope 0.0013695 iteration 26 energy 0 : -6818.59
 E-Slope 0.00133361 iteration 27 energy 0 : -6841.79
 E-Slope 0.00122762 iteration 28 energy 0 : -6842.24
 E-Slope 0.00114842 iteration 29 energy 0 : -6853.88
 E-Slope 0.000982232 iteration 30 energy 0 : -6853.02
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -12220.1
 iteration 2 energy 0 : -12374.5
 iteration 3 energy 0 : -12559.3
 iteration 4 energy 0 : -12729.9
 iteration 5 energy 0 : -12849.6
 iteration 6 energy 0 : -12934.5
 iteration 7 energy 0 : -13015.5
 iteration 8 energy 0 : -13062.2
 iteration 9 energy 0 : -13083.9
 iteration 10 energy 0 : -13109.3
 iteration 11 energy 0 : -13127
 iteration 12 energy 0 : -13142.3
 E-Slope 0.00281775 iteration 13 energy 0 : -13149.4
 E-Slope 0.00208531 iteration 14 energy 0 : -13159
 E-Slope 0.00153662 iteration 15 energy 0 : -13185.3
 E-Slope 0.00115058 iteration 16 energy 0 : -13189.6
 E-Slope 0.000910886 iteration 17 energy 0 : -13218
 E-Slope 0.000734337 iteration 18 energy 0 : -13217.3
 E-Slope 0.000669673 iteration 19 energy 0 : -13243.3
 E-Slope 0.0006238 iteration 20 energy 0 : -13239.8
 E-Slope 0.000614837 iteration 21 energy 0 : -13270.9
 E-Slope 0.000590049 iteration 22 energy 0 : -13263.9
 E-Slope 0.000580095 iteration 23 energy 0 : -13282.6
 E-Slope 0.000551455 iteration 24 energy 0 : -13281.2
 E-Slope 0.000522211 iteration 25 energy 0 : -13298.5
 E-Slope 0.000468291 iteration 26 energy 0 : -13297
 E-Slope 0.000446789 iteration 27 energy 0 : -13313.3
 E-Slope 0.000388674 iteration 28 energy 0 : -13305.7
 E-Slope 0.000365831 iteration 29 energy 0 : -13317.9
 E-Slope 0.000301525 iteration 30 energy 0 : -13308.2
 E-Slope 0.000264153 iteration 31 energy 0 : -13313.2
 E-Slope 0.000202075 iteration 32 energy 0 : -13313.1
 E-Slope 0.000209771 iteration 33 energy 0 : -13337.5
 E-Slope 0.000184141 iteration 34 energy 0 : -13332.9
 E-Slope 0.00019598 iteration 35 energy 0 : -13347.1
 E-Slope 0.00018055 iteration 36 energy 0 : -13339.6
 E-Slope 0.000190623 iteration 37 energy 0 : -13347
 E-Slope 0.00017108 iteration 38 energy 0 : -13338
 E-Slope 0.000202745 iteration 39 energy 0 : -13363.4
 E-Slope 0.00019525 iteration 40 energy 0 : -13355.2
 E-Slope 0.00020957 iteration 41 energy 0 : -13365.8
 E-Slope 0.00018163 iteration 42 energy 0 : -13356.6
 E-Slope 0.000156976 iteration 43 energy 0 : -13361.4
 E-Slope 0.000114195 iteration 44 energy 0 : -13357.2
 E-Slope 0.000121176 iteration 45 energy 0 : -13371.3
 E-Slope 0.000105113 iteration 46 energy 0 : -13366.9
 E-Slope 0.000126101 iteration 47 energy 0 : -13381.7
 E-Slope 0.000114523 iteration 48 energy 0 : -13373.3
 E-Slope 0.000133604 iteration 49 energy 0 : -13391
 E-Slope 0.000116251 iteration 50 energy 0 : -13382.8
 E-Slope 0.000149906 iteration 51 energy 0 : -13396.4
 E-Slope 0.000149392 iteration 52 energy 0 : -13389.1
 E-Slope 0.000178657 iteration 53 energy 0 : -13404.7
 E-Slope 0.000166498 iteration 54 energy 0 : -13394.7
 E-Slope 0.000172637 iteration 55 energy 0 : -13409.2
 E-Slope 0.000144094 iteration 56 energy 0 : -13398.6
 E-Slope 0.000170544 iteration 57 energy 0 : -13427.5
 E-Slope 0.000155613 iteration 58 energy 0 : -13413
 E-Slope 0.00016956 iteration 59 energy 0 : -13423.9
 E-Slope 0.000139087 iteration 60 energy 0 : -13410.7
 E-Slope 0.000159428 iteration 61 energy 0 : -13432.7
 E-Slope 0.000134364 iteration 62 energy 0 : -13418.7
 E-Slope 0.000153728 iteration 63 energy 0 : -13440.6
 E-Slope 0.00012973 iteration 64 energy 0 : -13426.6
 E-Slope 0.000148013 iteration 65 energy 0 : -13444.4
 E-Slope 0.000118859 iteration 66 energy 0 : -13429.8
 E-Slope 0.000132188 iteration 67 energy 0 : -13448.6
 E-Slope 9.29236e-05 iteration 68 energy 0 : -13431.2
 Converged due to oscillation in optimization  metric 0 bad 26  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -95323
 iteration 2 energy 0 : -98037.3
 iteration 3 energy 0 : -100250
 iteration 4 energy 0 : -102031
 iteration 5 energy 0 : -103405
 iteration 6 energy 0 : -104545
 iteration 7 energy 0 : -105506
 iteration 8 energy 0 : -106339
 iteration 9 energy 0 : -107108
 iteration 10 energy 0 : -107750
 iteration 11 energy 0 : -108371
 iteration 12 energy 0 : -108947
 E-Slope 0.00529844 iteration 13 energy 0 : -109538
 E-Slope 0.00454936 iteration 14 energy 0 : -110161
 E-Slope 0.00402365 iteration 15 energy 0 : -110750
 E-Slope 0.00365145 iteration 16 energy 0 : -111246
 E-Slope 0.00337557 iteration 17 energy 0 : -111732
 E-Slope 0.00315177 iteration 18 energy 0 : -112125
 E-Slope 0.00295247 iteration 19 energy 0 : -112477
 E-Slope 0.00275762 iteration 20 energy 0 : -112780
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2628_10282016_Aug2_Ref_vimp2_2914_02162017_Test_NewCases/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2628_10282016_Aug2_Ref_vimp2_2914_02162017_Test_NewCases/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2628_10282016_Aug2_Ref_vimp2_2914_02162017_Test_NewCases/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2628_10282016_Aug2_Ref_vimp2_2914_02162017_Test_NewCases/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2846_01112017/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2946_03032017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2846_01112017/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2946_03032017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547788036
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [15.3799, -16.1265, -1.17558]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -6.011028232758777, 28.522434113123868, 9.634615790560346]
level 0, iter 694, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.030762103291356927, -0.056032369288149746, 0.024332092684621637, 0.9976582660704192, 1.0346452280616953, 0.9469016306525507, 1.0559950619871687, 0.03356599877115338, 0.16635775219866117, -0.013983899866419156, -3.203525534163851, 27.970301448473112, 5.116843340648234]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 677, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.032853619768901866, -0.07826330125703901, 0.028092700005581693, 0.9959951282766532, 1.0218959982830007, 0.9229421459496278, 1.0592144218725863, 0.06833120563530118, 0.2515677459348627, -0.01255884432635671, -3.3360038541631063, 28.299230181096082, 5.143216721583944]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 44, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.034620273473080804, -0.082587851802549, 0.03259147356251314, 0.9954488832935187, 1.0181394162314068, 0.9193900068192196, 1.057307174604248, 0.07023638156977553, 0.25978266263206984, -0.011653974599797265, -3.309150659709986, 28.300569035400706, 5.158131470977377]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 85, size: fix[42, 44, 32]-mov[40, 45, 32], affine para: [0.03656533901163788, -0.08397128227929446, 0.03582568394091427, 0.9951524104907251, 1.0195530264551702, 0.9168019115805992, 1.0630065683574983, 0.07227726312158914, 0.26438913598309577, -0.010037221194321173, -3.1969076539402854, 28.270110145771056, 5.263968890751409]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 142, size: fix[83, 88, 43]-mov[80, 89, 41], affine para: [0.03668586384583834, -0.08593116644152465, 0.03730258430597742, 0.9949263787999488, 1.0164734281244958, 0.9247636234516514, 1.0644375122290368, 0.0738814311402476, 0.26172838745222876, -0.009913419785371923, -3.2504152592566595, 28.46816561984284, 5.35803060854602]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 1416, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.04500493939350931, 0.0655793668224081, -0.021775558508999752, 0.9965940633622999, 1.0277311113255796, 1.036535914346404, 0.8491009710746455, -0.02095049137229478, -0.19662142577154407, -0.036250353022362236, 3.1548449427986833, -29.951643189300313, -2.8122490671372202]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 324, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.04034497928948719, 0.07311108558296255, -0.020385956678758525, 0.9962988831577116, 1.0384701486848584, 1.0233844895164321, 0.863617277385818, -0.03301690126021304, -0.22487905403241407, -0.04339674750818864, 3.8443619708681043, -29.585056772951408, -3.095758532142044]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 384, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.03506715964329407, 0.07120361462880584, -0.01750586579252921, 0.9966914689316841, 1.0472976595459569, 1.0264441390896228, 0.8626896449545197, -0.03334973648833033, -0.21193691062276931, -0.03264022110064107, 3.784786862509107, -29.866772289092207, -3.359412852483798]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 171, size: fix[40, 45, 32]-mov[42, 44, 32], affine para: [-0.03141751481394995, 0.0703989420564356, -0.011194204111365015, 0.9969611920804956, 1.039977329653149, 1.0223752746012704, 0.8693817295506902, -0.03162197456234208, -0.21092422317811532, -0.03477183511722778, 4.12947143843202, -29.700911095484365, -3.5554421041045985]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 1052, size: fix[80, 89, 41]-mov[83, 88, 43], affine para: [-0.0365123919090366, 0.07569981896656283, -0.022400193614127574, 0.9962101254110801, 1.0357623057925187, 1.0132673383517132, 0.8792098401451964, -0.03504897867779779, -0.21194394804733244, -0.02019446408301124, 3.547134919997605, -29.546334699530338, -3.390062183655855]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.32014 v2 -0.309701
final [0.03668586384583834, -0.08593116644152465, 0.03730258430597742, 0.9949263787999488, 1.0164734281244958, 0.9247636234516514, 1.0644375122290368, 0.0738814311402476, 0.26172838745222876, -0.009913419785371923, -3.2504152592566595, 28.46816561984284, 5.35803060854602]
outputput affine center: [15.3799, -16.1265, -1.17558]
output affine para: [0.03668586384583834, -0.08593116644152465, 0.03730258430597742, 0.9949263787999488, 1.0164734281244958, 0.9247636234516514, 1.0644375122290368, 0.0738814311402476, 0.26172838745222876, -0.009913419785371923, -3.2504152592566595, 28.46816561984284, 5.35803060854602]
initial measure value (MMI): rval = -0.11303
final measure value (MMI): rval = -0.315158
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -5015.33
 iteration 2 energy 0 : -5309.14
 iteration 3 energy 0 : -5564.09
 iteration 4 energy 0 : -5818.72
 iteration 5 energy 0 : -6002.76
 iteration 6 energy 0 : -6153.39
 iteration 7 energy 0 : -6273.37
 iteration 8 energy 0 : -6303.22
 iteration 9 energy 0 : -6328.56
 iteration 10 energy 0 : -6344.08
 iteration 11 energy 0 : -6370.44
 iteration 12 energy 0 : -6380.5
 E-Slope 0.00832193 iteration 13 energy 0 : -6420.19
 E-Slope 0.00597166 iteration 14 energy 0 : -6426.8
 E-Slope 0.00420951 iteration 15 energy 0 : -6463.28
 E-Slope 0.00300647 iteration 16 energy 0 : -6465.31
 E-Slope 0.00223734 iteration 17 energy 0 : -6481.23
 E-Slope 0.00179157 iteration 18 energy 0 : -6482.76
 E-Slope 0.00169702 iteration 19 energy 0 : -6513.95
 E-Slope 0.00156648 iteration 20 energy 0 : -6510.79
 E-Slope 0.00143416 iteration 21 energy 0 : -6519.08
 E-Slope 0.00124941 iteration 22 energy 0 : -6518.11
 E-Slope 0.00115337 iteration 23 energy 0 : -6547.65
 E-Slope 0.000989817 iteration 24 energy 0 : -6542.74
 E-Slope 0.000900857 iteration 25 energy 0 : -6549.09
 E-Slope 0.000760764 iteration 26 energy 0 : -6546.49
 E-Slope 0.000774704 iteration 27 energy 0 : -6576.68
 E-Slope 0.000719421 iteration 28 energy 0 : -6570.38
 E-Slope 0.00067836 iteration 29 energy 0 : -6575.12
 E-Slope 0.000582032 iteration 30 energy 0 : -6571.26
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -13528.1
 iteration 2 energy 0 : -13731.2
 iteration 3 energy 0 : -14005.2
 iteration 4 energy 0 : -14196.7
 iteration 5 energy 0 : -14304.6
 iteration 6 energy 0 : -14423.4
 iteration 7 energy 0 : -14450.9
 iteration 8 energy 0 : -14560.6
 iteration 9 energy 0 : -14570.4
 iteration 10 energy 0 : -14627.6
 iteration 11 energy 0 : -14626.9
 iteration 12 energy 0 : -14680.9
 E-Slope 0.00297703 iteration 13 energy 0 : -14674.9
 E-Slope 0.00224055 iteration 14 energy 0 : -14719.1
 E-Slope 0.00172178 iteration 15 energy 0 : -14712.8
 E-Slope 0.00140087 iteration 16 energy 0 : -14749.8
 E-Slope 0.00112098 iteration 17 energy 0 : -14743.1
 E-Slope 0.000974528 iteration 18 energy 0 : -14777.2
 E-Slope 0.000785269 iteration 19 energy 0 : -14770.2
 E-Slope 0.000734717 iteration 20 energy 0 : -14801.1
 E-Slope 0.000633933 iteration 21 energy 0 : -14792.9
 E-Slope 0.000607029 iteration 22 energy 0 : -14821.3
 E-Slope 0.000522986 iteration 23 energy 0 : -14812.1
 E-Slope 0.00051523 iteration 24 energy 0 : -14840.2
 E-Slope 0.000448816 iteration 25 energy 0 : -14830.3
 E-Slope 0.000449844 iteration 26 energy 0 : -14858
 E-Slope 0.000394389 iteration 27 energy 0 : -14846.5
 E-Slope 0.000400394 iteration 28 energy 0 : -14874.3
 E-Slope 0.000354439 iteration 29 energy 0 : -14864
 E-Slope 0.0003663 iteration 30 energy 0 : -14890.2
 E-Slope 0.000327066 iteration 31 energy 0 : -14879
 E-Slope 0.000343792 iteration 32 energy 0 : -14905.5
 E-Slope 0.000309803 iteration 33 energy 0 : -14894.6
 E-Slope 0.000327528 iteration 34 energy 0 : -14919.7
 E-Slope 0.000293002 iteration 35 energy 0 : -14907.8
 E-Slope 0.000309683 iteration 36 energy 0 : -14932
 E-Slope 0.000275508 iteration 37 energy 0 : -14920.8
 E-Slope 0.000290841 iteration 38 energy 0 : -14943.3
 E-Slope 0.000255994 iteration 39 energy 0 : -14933.2
 E-Slope 0.000273295 iteration 40 energy 0 : -14956.7
 E-Slope 0.000243269 iteration 41 energy 0 : -14946.6
 E-Slope 0.000263177 iteration 42 energy 0 : -14969.4
 E-Slope 0.000236504 iteration 43 energy 0 : -14960.2
 E-Slope 0.000260629 iteration 44 energy 0 : -14983.1
 E-Slope 0.000237495 iteration 45 energy 0 : -14972.9
 E-Slope 0.000263192 iteration 46 energy 0 : -14995.8
 E-Slope 0.000240907 iteration 47 energy 0 : -14986.3
 E-Slope 0.000264637 iteration 48 energy 0 : -15008.2
 E-Slope 0.00024128 iteration 49 energy 0 : -14998.5
 E-Slope 0.000260837 iteration 50 energy 0 : -15019.8
 E-Slope 0.000235185 iteration 51 energy 0 : -15010.3
 E-Slope 0.000255816 iteration 52 energy 0 : -15032.9
 E-Slope 0.00023064 iteration 53 energy 0 : -15022.7
 E-Slope 0.000250489 iteration 54 energy 0 : -15044.8
 E-Slope 0.000225164 iteration 55 energy 0 : -15033.8
 E-Slope 0.000244394 iteration 56 energy 0 : -15055.3
 E-Slope 0.00021641 iteration 57 energy 0 : -15043.4
 E-Slope 0.000235133 iteration 58 energy 0 : -15066.1
 E-Slope 0.000208139 iteration 59 energy 0 : -15054.2
 E-Slope 0.000226386 iteration 60 energy 0 : -15076.4
 E-Slope 0.000198565 iteration 61 energy 0 : -15063.8
 E-Slope 0.00021708 iteration 62 energy 0 : -15086.9
 E-Slope 0.000188507 iteration 63 energy 0 : -15073.1
 E-Slope 0.000207543 iteration 64 energy 0 : -15095.3
 E-Slope 0.00017897 iteration 65 energy 0 : -15081.2
 E-Slope 0.00019896 iteration 66 energy 0 : -15104.1
 E-Slope 0.00017073 iteration 67 energy 0 : -15090
 E-Slope 0.000193305 iteration 68 energy 0 : -15114.8
 E-Slope 0.00016509 iteration 69 energy 0 : -15099.4
 E-Slope 0.000193559 iteration 70 energy 0 : -15127.2
 E-Slope 0.000171103 iteration 71 energy 0 : -15111.6
 E-Slope 0.000206761 iteration 72 energy 0 : -15141.3
 E-Slope 0.000188142 iteration 73 energy 0 : -15124.7
 E-Slope 0.000228919 iteration 74 energy 0 : -15155.3
 E-Slope 0.000210159 iteration 75 energy 0 : -15137.1
 E-Slope 0.000252195 iteration 76 energy 0 : -15170.8
 E-Slope 0.000232361 iteration 77 energy 0 : -15152.3
 E-Slope 0.000272654 iteration 78 energy 0 : -15185.9
 E-Slope 0.000245534 iteration 79 energy 0 : -15164.4
 E-Slope 0.000279248 iteration 80 energy 0 : -15197.2
 E-Slope 0.000241719 iteration 81 energy 0 : -15174.3
 E-Slope 0.000267461 iteration 82 energy 0 : -15205.9
 E-Slope 0.000221126 iteration 83 energy 0 : -15182
 E-Slope 0.000243746 iteration 84 energy 0 : -15214.9
 E-Slope 0.000193857 iteration 85 energy 0 : -15190.5
 E-Slope 0.000220537 iteration 86 energy 0 : -15226.8
 E-Slope 0.000172503 iteration 87 energy 0 : -15201.3
 E-Slope 0.000209093 iteration 88 energy 0 : -15239.7
 E-Slope 0.000171013 iteration 89 energy 0 : -15213.8
 E-Slope 0.000220649 iteration 90 energy 0 : -15254.5
 tired convergence: reached max iterations 
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -95806.1
 iteration 2 energy 0 : -97772.2
 iteration 3 energy 0 : -99674.7
 iteration 4 energy 0 : -101362
 iteration 5 energy 0 : -102927
 iteration 6 energy 0 : -104255
 iteration 7 energy 0 : -105429
 iteration 8 energy 0 : -106514
 iteration 9 energy 0 : -107518
 iteration 10 energy 0 : -108362
 iteration 11 energy 0 : -109171
 iteration 12 energy 0 : -109887
 E-Slope 0.00619148 iteration 13 energy 0 : -110566
 E-Slope 0.00550072 iteration 14 energy 0 : -111141
 E-Slope 0.00489716 iteration 15 energy 0 : -111648
 E-Slope 0.00436421 iteration 16 energy 0 : -112099
 E-Slope 0.00390557 iteration 17 energy 0 : -112523
 E-Slope 0.00349419 iteration 18 energy 0 : -112892
 E-Slope 0.0031164 iteration 19 energy 0 : -113203
 E-Slope 0.00277539 iteration 20 energy 0 : -113491
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2846_01112017_Aug1_Ref_vimp2_2946_03032017_Test_NewCases/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2846_01112017_Aug1_Ref_vimp2_2946_03032017_Test_NewCases/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2846_01112017_Aug1_Ref_vimp2_2946_03032017_Test_NewCases/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2846_01112017_Aug1_Ref_vimp2_2946_03032017_Test_NewCases/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2846_01112017/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_804_06042014/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2846_01112017/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_804_06042014/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547788195
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [15.3799, -16.1265, -1.17558]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -4.53209996481243, -1.0553510719839707, 35.52037905647287]
level 0, iter 281, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.10205576180172632, -0.060671985069600545, 0.010728984649247833, 0.9928687831728721, 0.9110651144529506, 0.9522731115509772, 0.8979323993435019, -0.007939526676111532, 0.01782063921932725, -0.011756583486376515, -3.552068730478677, -2.6657307202889253, 33.35938524916488]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 193, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.11101777902965758, -0.067608603939389, 0.0173852167092299, 0.9913636485430873, 0.90038804409727, 0.9833093590851067, 0.8920754658240647, -0.01142982318297661, 0.03893778412867516, 0.006507619390551711, -3.711322008370079, -2.5283938307624125, 33.490983145641884]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 412, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.1131923294573832, -0.06789948869738924, 0.014298447011911271, 0.9911471688905193, 0.9004724799703262, 0.9920300484898, 0.897286900235991, -0.012508398954210383, 0.04864655008077748, 0.006923606633209614, -3.7355946954343127, -2.7288590661546492, 33.41858642723842]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 65, size: fix[42, 44, 32]-mov[40, 43, 32], affine para: [0.10698915431201274, -0.06999083028799938, 0.019354757084118063, 0.9916047589203129, 0.8951124425458992, 0.9910601390658103, 0.8894402323871605, -0.013648768441548475, 0.05287001022067735, 0.009152646598490825, -3.8293557000202707, -2.5759264529306067, 33.52115427697546]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 92, size: fix[83, 88, 43]-mov[80, 85, 36], affine para: [0.10857633604441726, -0.07434036123886752, 0.015898790129323482, 0.9911770368680201, 0.8983664781135621, 0.9946743244394172, 0.8908589982558723, -0.009402615023107339, 0.05539726989781081, 0.01369680114102814, -3.6554670835596, -2.3908326791179704, 33.48736103323674]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 1805, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.12450880428486831, 0.07030752909404321, -0.017957597744580257, 0.9895614855538216, 1.1106334858173845, 1.0035065776206662, 1.0883712356856132, 0.01769995365509794, -0.058680361753680715, -0.07149888247083439, 1.0844608765395884, -4.531303937819775, -36.84148686797862]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 388, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.12416820836522512, 0.07189221986460974, -0.015562976643896118, 0.9895309790563862, 1.1163884118192404, 1.0072988366159918, 1.0805408516795378, 0.019575405946744815, -0.062112363814671064, -0.08079629049358684, 1.1072355277153263, -4.200332871837084, -36.75177204729026]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 151, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.12760819069229568, 0.07190647665872114, -0.01922147107726496, 0.9890278779348909, 1.1053124253504256, 1.005068067008013, 1.0741805535626145, 0.020138899099104282, -0.06443485034268676, -0.08598200208408618, 1.1595656020524436, -4.232092742569139, -36.63587705786906]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 174, size: fix[40, 43, 32]-mov[42, 44, 32], affine para: [-0.12526621198325452, 0.0728742814902091, -0.015248014078340406, 0.9893256356222246, 1.1065671710816365, 1.001826417105078, 1.087240408643711, 0.02150945286748168, -0.06687261702584367, -0.09191915270542843, 1.1597661327647326, -4.124747326499058, -37.11600327136012]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 508, size: fix[80, 85, 36]-mov[83, 88, 43], affine para: [-0.12621791998421691, 0.07379399673870635, -0.014732861323714739, 0.9891442895338385, 1.1070710341708194, 1.0057249678756905, 1.097498113658447, 0.026554497704465798, -0.06506006981152164, -0.09169602055740818, 0.9281814307020209, -4.111098351002292, -37.52411777937945]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.384491 v2 -0.38559
 last params [0.10857633604441726, -0.07434036123886752, 0.015898790129323482, 0.9911770368680201, 0.8983664781135621, 0.9946743244394172, 0.8908589982558723, -0.009402615023107339, 0.05539726989781081, 0.01369680114102814, -3.6554670835596, -2.3908326791179704, 33.48736103323674]
 my params [-0.12621791998421691, 0.07379399673870635, -0.014732861323714739, 0.9891442895338385, 1.1070710341708194, 1.0057249678756905, 1.097498113658447, 0.026554497704465798, -0.06506006981152164, -0.09169602055740818, 0.9281814307020209, -4.111098351002292, -37.52411777937945]
A=0.901319 -0.0545802 -0.0672349 
0.0229656 0.982876 -0.170458 
0.136406 0.225532 0.872208 

rotation R0.988428 -0.0584917 -0.139963 
0.0251851 0.973142 -0.228825 
0.149589 0.222652 0.963353 

upper R0.911872 0.00454225 0.0597225 
0 1.00989 0.0322515 
0 0 0.88866 

s=0.25238 u=0.113944 v=-0.0730771 w0.0211183 r=0.990571
m_Rotation from vnl0.113944 -0.0730771 0.0211183 0.990571
 new params [0.11394350904244001, -0.07307705547942715, 0.021118334597324602, 0.9905708640240675, 0.9118718471576078, 1.0098851335643744, 0.8886601610696732, 0.004981238713472253, 0.0654944461336441, 0.03193577371100883, -3.583904542527802, -2.376906663887045, 33.52942257972876]
outputput affine center: [15.3799, -16.1265, -1.17558]
output affine para: [0.11394350904244001, -0.07307705547942715, 0.021118334597324602, 0.9905708640240675, 0.9118718471576078, 1.0098851335643744, 0.8886601610696732, 0.004981238713472253, 0.0654944461336441, 0.03193577371100883, -3.583904542527802, -2.376906663887045, 33.52942257972876]
initial measure value (MMI): rval = -0.147283
final measure value (MMI): rval = -0.382245
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -5117.75
 iteration 2 energy 0 : -5514.37
 iteration 3 energy 0 : -5891.13
 iteration 4 energy 0 : -6177.84
 iteration 5 energy 0 : -6374.29
 iteration 6 energy 0 : -6518.12
 iteration 7 energy 0 : -6631.5
 iteration 8 energy 0 : -6717.25
 iteration 9 energy 0 : -6788.6
 iteration 10 energy 0 : -6848.3
 iteration 11 energy 0 : -6908.09
 iteration 12 energy 0 : -6973.99
 E-Slope 0.0105385 iteration 13 energy 0 : -7027.21
 E-Slope 0.00820349 iteration 14 energy 0 : -7076.58
 E-Slope 0.00666055 iteration 15 energy 0 : -7124.39
 E-Slope 0.00570001 iteration 16 energy 0 : -7176.06
 E-Slope 0.00502922 iteration 17 energy 0 : -7206.63
 E-Slope 0.00439316 iteration 18 energy 0 : -7189.33
 E-Slope 0.00381845 iteration 19 energy 0 : -7197.7
 E-Slope 0.00321361 iteration 20 energy 0 : -7190.1
 E-Slope 0.00261781 iteration 21 energy 0 : -7197.58
 E-Slope 0.00201456 iteration 22 energy 0 : -7198.06
 E-Slope 0.00145315 iteration 23 energy 0 : -7201.67
 E-Slope 0.000989974 iteration 24 energy 0 : -7205.49
 E-Slope 0.000615537 iteration 25 energy 0 : -7207.97
 E-Slope 0.000352971 iteration 26 energy 0 : -7214.63
 E-Slope 0.000193551 iteration 27 energy 0 : -7214.4
 E-Slope 0.000196539 iteration 28 energy 0 : -7226.98
 E-Slope 0.000263333 iteration 29 energy 0 : -7224.06
 E-Slope 0.000295989 iteration 30 energy 0 : -7235.58
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -14801.8
 iteration 2 energy 0 : -15089.7
 iteration 3 energy 0 : -15342.8
 iteration 4 energy 0 : -15521.6
 iteration 5 energy 0 : -15673.8
 iteration 6 energy 0 : -15811.4
 iteration 7 energy 0 : -15932.6
 iteration 8 energy 0 : -16044.1
 iteration 9 energy 0 : -16151.5
 iteration 10 energy 0 : -16253.2
 iteration 11 energy 0 : -16350.1
 iteration 12 energy 0 : -16444.6
 E-Slope 0.00447999 iteration 13 energy 0 : -16541.8
 E-Slope 0.00405032 iteration 14 energy 0 : -16628.1
 E-Slope 0.00376707 iteration 15 energy 0 : -16713.2
 E-Slope 0.00353693 iteration 16 energy 0 : -16785.7
 E-Slope 0.00334966 iteration 17 energy 0 : -16866.1
 E-Slope 0.00312553 iteration 18 energy 0 : -16885.8
 E-Slope 0.00289889 iteration 19 energy 0 : -16937.4
 E-Slope 0.00251368 iteration 20 energy 0 : -16856.4
 E-Slope 0.00205962 iteration 21 energy 0 : -16829.2
 E-Slope 0.00155853 iteration 22 energy 0 : -16802.6
 E-Slope 0.00105432 iteration 23 energy 0 : -16791.6
 E-Slope 0.000583783 iteration 24 energy 0 : -16786.5
 E-Slope 0.000169016 iteration 25 energy 0 : -16770
 E-Slope -0.000142507 iteration 26 energy 0 : -16780
 Converged due to oscillation in optimization  metric 0 bad 6  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -106412
 iteration 2 energy 0 : -108629
 iteration 3 energy 0 : -111035
 iteration 4 energy 0 : -113143
 iteration 5 energy 0 : -114984
 iteration 6 energy 0 : -116363
 iteration 7 energy 0 : -117500
 iteration 8 energy 0 : -118458
 iteration 9 energy 0 : -119239
 iteration 10 energy 0 : -119924
 iteration 11 energy 0 : -120546
 iteration 12 energy 0 : -121077
 E-Slope 0.00545479 iteration 13 energy 0 : -121636
 E-Slope 0.00457936 iteration 14 energy 0 : -122229
 E-Slope 0.00391231 iteration 15 energy 0 : -122844
 E-Slope 0.00342018 iteration 16 energy 0 : -123345
 E-Slope 0.00308814 iteration 17 energy 0 : -123853
 E-Slope 0.0028457 iteration 18 energy 0 : -124288
 E-Slope 0.00265702 iteration 19 energy 0 : -124661
 E-Slope 0.00249952 iteration 20 energy 0 : -125005
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2846_01112017_Aug2_Ref_vimp2_804_06042014/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2846_01112017_Aug2_Ref_vimp2_804_06042014/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2846_01112017_Aug2_Ref_vimp2_804_06042014/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2846_01112017_Aug2_Ref_vimp2_804_06042014/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2878_01262017/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1709_07072015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2878_01262017/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1709_07072015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547788307
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [8.50493, -6.29219, 9.39036]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 5.013735942165036, -10.295233236805249, 5.172961280729595]
level 0, iter 919, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.07357211724604985, 0.026572611803716856, -0.027555558882107166, 0.9965549312710048, 0.8834039127273273, 1.153246907737625, 1.0513701720415474, -0.06351152607284608, -0.01661642448179769, 0.007984146732328537, 3.056523011505159, -14.374326302388322, 3.913806416064535]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 110, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.07849498292934189, 0.02596206420187199, -0.030041109790353973, 0.9961235066997788, 0.8846239682511519, 1.153835725501628, 1.05388138949008, -0.07220433505780433, -0.013385260851839043, 0.003915102777946897, 3.130507757183998, -14.361597957678004, 3.7487435199527304]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 45, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.07989209516998637, 0.025517698604234414, -0.029562047661674296, 0.9960382450113762, 0.8852470035228398, 1.1553716678324581, 1.0489803340262838, -0.07525631577150779, -0.012726852178271162, 0.006581737199611794, 3.1750072740539244, -14.205806086199011, 3.852382046689498]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 92, size: fix[38, 38, 32]-mov[37, 43, 35], affine para: [-0.07691851248295281, 0.025011533613402352, -0.031532022787958205, 0.99622472222015, 0.8909462387040601, 1.1620173921383372, 1.0493388049907633, -0.07879264012722725, -0.01555317541501625, 0.003785176295809109, 3.0859401846380443, -14.331697884008086, 3.876726067953619]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 192, size: fix[75, 76, 36]-mov[73, 86, 49], affine para: [-0.07436073659714099, 0.024885014565149372, -0.03527918990739448, 0.996296439651523, 0.8850626901424097, 1.1585891331814373, 1.0441666669009646, -0.08761646523228749, -0.012378019720395771, 0.007348511879850445, 3.0799898920975926, -14.584065974524794, 3.907637756896888]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 557, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.07982700200307515, -0.020739173141586992, 0.017961697356551416, 0.9964310883732381, 1.1107587961948182, 0.8925225498487714, 0.9493154548395646, 0.03201781062967687, -0.016413893248115752, -0.014811529557548317, -3.4062598775241693, 12.895262056773614, -1.5397396866762167]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 272, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.0791546822309089, -0.02035874028100402, 0.021368192608849486, 0.9964253400630303, 1.1164138459709463, 0.8725559627833007, 0.951125696142865, 0.03724865977432197, -0.0156422660441328, -0.0016339951847143942, -3.311345920465332, 12.661986927325525, -1.696703635471363]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 278, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.0839219813797484, -0.017072071677927632, 0.02201488380943984, 0.9960828230126135, 1.1253677934341704, 0.8681951828663376, 0.948887635425973, 0.036664781382753926, -0.018510538989870106, 0.009382264021470865, -3.4874182207001962, 12.504050781211507, -1.505268033581997]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 129, size: fix[37, 43, 35]-mov[38, 38, 32], affine para: [0.08310756833488621, -0.019587491468077672, 0.023938071869653, 0.9960604554838093, 1.1184379915925662, 0.8602499843904017, 0.946495164373274, 0.0361979161786972, -0.01582873589269636, 0.021321350351856654, -3.424229894743905, 12.544906825619236, -1.6380330786333441]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 248, size: fix[73, 86, 49]-mov[75, 76, 36], affine para: [0.08332425203648289, -0.01913448387159399, 0.02562232919484938, 0.9960092553767557, 1.116336310012929, 0.8523321394015209, 0.9478745136227247, 0.03618084749209156, -0.010635265592172725, 0.021756281475060025, -3.427966240925802, 12.438634132157583, -1.7039317632332043]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.490144 v2 -0.506249
 last params [-0.07436073659714099, 0.024885014565149372, -0.03527918990739448, 0.996296439651523, 0.8850626901424097, 1.1585891331814373, 1.0441666669009646, -0.08761646523228749, -0.012378019720395771, 0.007348511879850445, 3.0799898920975926, -14.584065974524794, 3.907637756896888]
 my params [0.08332425203648289, -0.01913448387159399, 0.02562232919484938, 0.9960092553767557, 1.116336310012929, 0.8523321394015209, 0.9478745136227247, 0.03618084749209156, -0.010635265592172725, 0.021756281475060025, -3.427966240925802, 12.438634132157583, -1.7039317632332043]
A=0.895849 -0.000951366 0.0428392 
-0.0628473 1.15925 0.170973 
-0.0357076 -0.176146 1.03957 

rotation R0.996761 0.063084 0.0498857 
-0.0699266 0.986198 0.150076 
-0.0397298 -0.153079 0.987415 

upper R0.898761 -0.0750125 -0.0105571 
0 1.17016 0.0121796 
0 0 1.05428 

s=0.250931 u=-0.076071 v=0.0224873 w-0.0333765 r=0.99629
m_Rotation from vnl-0.076071 0.0224873 -0.0333765 0.99629
 new params [-0.07607098891386496, 0.022487320158415, -0.03337648449104303, 0.9962898852044915, 0.8987607750843434, 1.1701563477849135, 1.0542830760792052, -0.08346219786486014, -0.011746252817227451, 0.010408519280689537, 3.1557701451136366, -14.343620453055854, 3.8399634095440804]
outputput affine center: [8.50493, -6.29219, 9.39036]
output affine para: [-0.07607098891386496, 0.022487320158415, -0.03337648449104303, 0.9962898852044915, 0.8987607750843434, 1.1701563477849135, 1.0542830760792052, -0.08346219786486014, -0.011746252817227451, 0.010408519280689537, 3.1557701451136366, -14.343620453055854, 3.8399634095440804]
initial measure value (MMI): rval = -0.190163
final measure value (MMI): rval = -0.503182
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -6614.71
 iteration 2 energy 0 : -6891.85
 iteration 3 energy 0 : -7164.28
 iteration 4 energy 0 : -7363.32
 iteration 5 energy 0 : -7529.12
 iteration 6 energy 0 : -7676.36
 iteration 7 energy 0 : -7808.78
 iteration 8 energy 0 : -7933.53
 iteration 9 energy 0 : -8038.71
 iteration 10 energy 0 : -8129.15
 iteration 11 energy 0 : -8199.41
 iteration 12 energy 0 : -8256.12
 E-Slope 0.00912287 iteration 13 energy 0 : -8302.97
 E-Slope 0.00769284 iteration 14 energy 0 : -8350.92
 E-Slope 0.0065433 iteration 15 energy 0 : -8380.1
 E-Slope 0.00547256 iteration 16 energy 0 : -8379.43
 E-Slope 0.00447702 iteration 17 energy 0 : -8385.73
 E-Slope 0.00355154 iteration 18 energy 0 : -8385.19
 E-Slope 0.00279211 iteration 19 energy 0 : -8417.45
 E-Slope 0.0021128 iteration 20 energy 0 : -8403.54
 E-Slope 0.00155545 iteration 21 energy 0 : -8407.63
 E-Slope 0.00109311 iteration 22 energy 0 : -8400.09
 E-Slope 0.000760391 iteration 23 energy 0 : -8414.81
 E-Slope 0.000486255 iteration 24 energy 0 : -8405.52
 E-Slope 0.000304192 iteration 25 energy 0 : -8412.52
 E-Slope 0.0001987 iteration 26 energy 0 : -8406.31
 E-Slope 0.000175282 iteration 27 energy 0 : -8416.73
 E-Slope 0.000122458 iteration 28 energy 0 : -8410.15
 E-Slope 0.000107981 iteration 29 energy 0 : -8423.5
 E-Slope 6.10948e-05 iteration 30 energy 0 : -8414.81
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -13066.5
 iteration 2 energy 0 : -13207.9
 iteration 3 energy 0 : -13349.5
 iteration 4 energy 0 : -13433.4
 iteration 5 energy 0 : -13462.8
 iteration 6 energy 0 : -13568.7
 iteration 7 energy 0 : -13580.2
 iteration 8 energy 0 : -13591.3
 iteration 9 energy 0 : -13604.7
 iteration 10 energy 0 : -13659.5
 iteration 11 energy 0 : -13662.6
 iteration 12 energy 0 : -13704.3
 E-Slope 0.00165143 iteration 13 energy 0 : -13698.8
 E-Slope 0.00132718 iteration 14 energy 0 : -13738.8
 E-Slope 0.00110074 iteration 15 energy 0 : -13725.6
 E-Slope 0.000973843 iteration 16 energy 0 : -13760.7
 E-Slope 0.000786453 iteration 17 energy 0 : -13738.9
 E-Slope 0.000717409 iteration 18 energy 0 : -13749.5
 E-Slope 0.000590205 iteration 19 energy 0 : -13731.1
 E-Slope 0.000449002 iteration 20 energy 0 : -13737.6
 E-Slope 0.000328712 iteration 21 energy 0 : -13761
 E-Slope 0.000266403 iteration 22 energy 0 : -13762.2
 E-Slope 0.000292264 iteration 23 energy 0 : -13833.3
 E-Slope 0.000328414 iteration 24 energy 0 : -13813.7
 E-Slope 0.000321276 iteration 25 energy 0 : -13804.6
 E-Slope 0.00034181 iteration 26 energy 0 : -13797.2
 E-Slope 0.000395261 iteration 27 energy 0 : -13850.2
 E-Slope 0.000444897 iteration 28 energy 0 : -13833
 E-Slope 0.000425905 iteration 29 energy 0 : -13828.6
 E-Slope 0.000384174 iteration 30 energy 0 : -13820.5
 E-Slope 0.000355206 iteration 31 energy 0 : -13864.6
 E-Slope 0.000284463 iteration 32 energy 0 : -13847.4
 E-Slope 0.000219159 iteration 33 energy 0 : -13841.4
 E-Slope 0.000127248 iteration 34 energy 0 : -13833.8
 E-Slope 0.00018502 iteration 35 energy 0 : -13870.9
 E-Slope 0.00017865 iteration 36 energy 0 : -13855.2
 E-Slope 0.000141285 iteration 37 energy 0 : -13851.2
 E-Slope 7.20918e-05 iteration 38 energy 0 : -13844.3
 Converged due to oscillation in optimization  metric 0 bad 16  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -77963
 iteration 2 energy 0 : -79097.1
 iteration 3 energy 0 : -80336.8
 iteration 4 energy 0 : -81276.6
 iteration 5 energy 0 : -82084
 iteration 6 energy 0 : -82828.9
 iteration 7 energy 0 : -83459.7
 iteration 8 energy 0 : -83959.9
 iteration 9 energy 0 : -84387.9
 iteration 10 energy 0 : -84797.2
 iteration 11 energy 0 : -85167.2
 iteration 12 energy 0 : -85521.4
 E-Slope 0.00398415 iteration 13 energy 0 : -85750.2
 E-Slope 0.00335959 iteration 14 energy 0 : -85787
 E-Slope 0.00284746 iteration 15 energy 0 : -85951.9
 E-Slope 0.00237793 iteration 16 energy 0 : -85998.9
 E-Slope 0.00196765 iteration 17 energy 0 : -86126.7
 E-Slope 0.00161196 iteration 18 energy 0 : -86186.7
 E-Slope 0.00131693 iteration 19 energy 0 : -86283
 E-Slope 0.00106566 iteration 20 energy 0 : -86354.5
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2878_01262017_Aug1_Ref_vimp2_1709_07072015/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2878_01262017_Aug1_Ref_vimp2_1709_07072015/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2878_01262017_Aug1_Ref_vimp2_1709_07072015/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2878_01262017_Aug1_Ref_vimp2_1709_07072015/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2878_01262017/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2475_08242016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2878_01262017/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2475_08242016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547788396
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [8.50493, -6.29219, 9.39036]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 3.4460753376650466, 6.0123301446545145, -6.281607526136041]
level 0, iter 1135, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.0654315623391283, -0.03558058027833127, 0.029501823190202957, 0.9967860228681841, 0.9734064300516952, 1.0950393223300008, 0.9802352046973355, -0.008595136688155128, -0.008115783683977336, -0.028608315936377346, -0.16365893194822959, 4.8361108276266895, -7.88225702614582]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 147, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.0666412468864796, -0.03573633170502789, 0.029121511353929555, 0.996711491047508, 0.9667118367544041, 1.1030148895569445, 0.9743527512595895, -0.0055997643618307695, -0.009202786822180483, -0.02948615307606291, -0.14791545566209216, 4.83112763539333, -7.852241930775657]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 285, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.07054866133540129, -0.03746690055185748, 0.031127194099666296, 0.9963183304217091, 0.9697022709493907, 1.1110217732904557, 0.9754609730582862, -0.0034942400896686445, -0.003261727358838196, -0.04283787642918025, -0.14162024844820906, 4.65353370177364, -7.923249082633094]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 197, size: fix[38, 38, 32]-mov[40, 44, 32], affine para: [-0.06464032341331613, -0.03681079320774847, 0.03563792473341932, 0.9965924605439945, 0.9705983272218416, 1.1057638246436352, 0.9754779246619144, 0.0007529260342980434, -0.006010381413536558, -0.052463875977513244, -0.26133576515832685, 4.5435773708671565, -7.731069896655387]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 279, size: fix[75, 76, 36]-mov[79, 88, 40], affine para: [-0.06245204873873434, -0.04073801919201428, 0.03331731743981727, 0.9966594763304367, 0.9715944146129328, 1.0994954787700875, 0.9912109778728234, -0.00982073380865534, -0.00006033207200212154, -0.043624672355392025, -0.10343049503961776, 4.817041288044204, -7.780481799064071]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 339, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.059352240838100305, 0.032753556347323645, -0.022599098274350176, 0.9974436308941399, 1.0076468750884304, 0.9620158703721523, 1.0171903740869521, 0.01546997528093754, 0.01074418362867541, 0.018837521386620443, 0.5258335676472019, -5.277934306699782, 7.564876366715024]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 658, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.07079669154393749, 0.031008246072764003, -0.029376536904004092, 0.9965758055569336, 1.0088922727372, 0.9331053879491767, 1.016996752895021, 0.02601851103549358, 0.014134800326902336, 0.05115494089470269, 0.4083450293164075, -4.8631189751502975, 7.520055498700993]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 874, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.0693441869458378, 0.0321437107969408, -0.027563610776792553, 0.9966937408020423, 1.0163244005558574, 0.9046344697499071, 1.023636425433204, 0.01632121192373424, 0.013143256223214415, 0.07054487248044948, 0.664436069589751, -4.460413928044842, 7.474633873560247]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 63, size: fix[40, 44, 32]-mov[38, 38, 32], affine para: [0.06801907368561638, 0.03363377992960767, -0.03381154270923319, 0.9965435033365172, 1.0081599334216151, 0.9011844786234462, 1.0098971784987942, 0.01609764153380695, 0.014495976915991641, 0.0808401568209734, 0.630792875501354, -4.430425464023404, 7.373689226271096]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 171, size: fix[79, 88, 40]-mov[75, 76, 36], affine para: [0.06842539648736956, 0.030143754060282368, -0.027962583537355205, 0.996808614092302, 1.0104317185903926, 0.8974419836320563, 1.0117014502116786, 0.009102026507924781, 0.00647781901412276, 0.08508399593513295, 0.4626739099048352, -4.2009478810985685, 7.47754824854708]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.376341 v2 -0.364698
final [-0.06245204873873434, -0.04073801919201428, 0.03331731743981727, 0.9966594763304367, 0.9715944146129328, 1.0994954787700875, 0.9912109778728234, -0.00982073380865534, -0.00006033207200212154, -0.043624672355392025, -0.10343049503961776, 4.817041288044204, -7.780481799064071]
outputput affine center: [8.50493, -6.29219, 9.39036]
output affine para: [-0.06245204873873434, -0.04073801919201428, 0.03331731743981727, 0.9966594763304367, 0.9715944146129328, 1.0994954787700875, 0.9912109778728234, -0.00982073380865534, -0.00006033207200212154, -0.043624672355392025, -0.10343049503961776, 4.817041288044204, -7.780481799064071]
initial measure value (MMI): rval = -0.128676
final measure value (MMI): rval = -0.407366
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -5442.53
 iteration 2 energy 0 : -5785.53
 iteration 3 energy 0 : -6126.54
 iteration 4 energy 0 : -6416.16
 iteration 5 energy 0 : -6644.38
 iteration 6 energy 0 : -6830.65
 iteration 7 energy 0 : -6989.12
 iteration 8 energy 0 : -7118.63
 iteration 9 energy 0 : -7219.55
 iteration 10 energy 0 : -7304.45
 iteration 11 energy 0 : -7364.76
 iteration 12 energy 0 : -7417.89
 E-Slope 0.0119903 iteration 13 energy 0 : -7470.22
 E-Slope 0.00962305 iteration 14 energy 0 : -7519.49
 E-Slope 0.00779583 iteration 15 energy 0 : -7568.02
 E-Slope 0.00643871 iteration 16 energy 0 : -7617.95
 E-Slope 0.00543496 iteration 17 energy 0 : -7666.92
 E-Slope 0.00472298 iteration 18 energy 0 : -7718.77
 E-Slope 0.00424436 iteration 19 energy 0 : -7764.26
 E-Slope 0.00384961 iteration 20 energy 0 : -7773.06
 E-Slope 0.0034213 iteration 21 energy 0 : -7756.13
 E-Slope 0.00309494 iteration 22 energy 0 : -7796.37
 E-Slope 0.00266558 iteration 23 energy 0 : -7777.18
 E-Slope 0.00220391 iteration 24 energy 0 : -7780.4
 E-Slope 0.00173237 iteration 25 energy 0 : -7781.24
 E-Slope 0.00128825 iteration 26 energy 0 : -7787.25
 E-Slope 0.000876173 iteration 27 energy 0 : -7784.74
 E-Slope 0.000544019 iteration 28 energy 0 : -7789.24
 E-Slope 0.0003049 iteration 29 energy 0 : -7792.13
 E-Slope 0.000193216 iteration 30 energy 0 : -7799.22
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -12065.5
 iteration 2 energy 0 : -12197.5
 iteration 3 energy 0 : -12358.2
 iteration 4 energy 0 : -12473.3
 iteration 5 energy 0 : -12561.8
 iteration 6 energy 0 : -12588.2
 iteration 7 energy 0 : -12621.2
 iteration 8 energy 0 : -12661.7
 iteration 9 energy 0 : -12673.4
 iteration 10 energy 0 : -12699.3
 iteration 11 energy 0 : -12698.6
 iteration 12 energy 0 : -12727.5
 E-Slope 0.00183501 iteration 13 energy 0 : -12727.2
 E-Slope 0.00134253 iteration 14 energy 0 : -12752.8
 E-Slope 0.00100404 iteration 15 energy 0 : -12748.9
 E-Slope 0.000816338 iteration 16 energy 0 : -12773.7
 E-Slope 0.00071089 iteration 17 energy 0 : -12773
 E-Slope 0.000626065 iteration 18 energy 0 : -12791.1
 E-Slope 0.000541441 iteration 19 energy 0 : -12786.6
 E-Slope 0.000518791 iteration 20 energy 0 : -12809.1
 E-Slope 0.000479527 iteration 21 energy 0 : -12810.3
 E-Slope 0.000478044 iteration 22 energy 0 : -12829.2
 E-Slope 0.000445172 iteration 23 energy 0 : -12831.8
 E-Slope 0.000456393 iteration 24 energy 0 : -12850.3
 E-Slope 0.000437684 iteration 25 energy 0 : -12852.1
 E-Slope 0.00046131 iteration 26 energy 0 : -12872.6
 E-Slope 0.000451207 iteration 27 energy 0 : -12876.1
 E-Slope 0.000470698 iteration 28 energy 0 : -12890
 E-Slope 0.000452265 iteration 29 energy 0 : -12887.4
 E-Slope 0.000458062 iteration 30 energy 0 : -12904.2
 E-Slope 0.000421599 iteration 31 energy 0 : -12902.5
 E-Slope 0.000415757 iteration 32 energy 0 : -12918
 E-Slope 0.000383765 iteration 33 energy 0 : -12918.9
 E-Slope 0.000384428 iteration 34 energy 0 : -12937.8
 E-Slope 0.000367306 iteration 35 energy 0 : -12941.4
 E-Slope 0.000372149 iteration 36 energy 0 : -12953.2
 E-Slope 0.000357538 iteration 37 energy 0 : -12955.8
 E-Slope 0.000370644 iteration 38 energy 0 : -12968.9
 E-Slope 0.000361562 iteration 39 energy 0 : -12967.9
 E-Slope 0.000373773 iteration 40 energy 0 : -12983.6
 E-Slope 0.000354879 iteration 41 energy 0 : -12983.2
 E-Slope 0.000347234 iteration 42 energy 0 : -12989.1
 E-Slope 0.000306331 iteration 43 energy 0 : -12984.8
 E-Slope 0.000293508 iteration 44 energy 0 : -13000.7
 E-Slope 0.000272743 iteration 45 energy 0 : -13008.5
 E-Slope 0.000275441 iteration 46 energy 0 : -13017.3
 E-Slope 0.00026077 iteration 47 energy 0 : -13014.9
 E-Slope 0.000272565 iteration 48 energy 0 : -13031.5
 E-Slope 0.000274122 iteration 49 energy 0 : -13034.8
 E-Slope 0.000292562 iteration 50 energy 0 : -13044.9
 E-Slope 0.000281461 iteration 51 energy 0 : -13040.4
 E-Slope 0.00029467 iteration 52 energy 0 : -13052.7
 E-Slope 0.000290848 iteration 53 energy 0 : -13055.1
 E-Slope 0.000287235 iteration 54 energy 0 : -13062.2
 E-Slope 0.000248753 iteration 55 energy 0 : -13057
 E-Slope 0.000235289 iteration 56 energy 0 : -13068.4
 E-Slope 0.000216186 iteration 57 energy 0 : -13067.5
 E-Slope 0.000209905 iteration 58 energy 0 : -13076.6
 E-Slope 0.00017447 iteration 59 energy 0 : -13069.9
 E-Slope 0.000171416 iteration 60 energy 0 : -13082
 E-Slope 0.000154614 iteration 61 energy 0 : -13077.6
 E-Slope 0.000156529 iteration 62 energy 0 : -13086.3
 E-Slope 0.000130549 iteration 63 energy 0 : -13080.1
 E-Slope 0.00013227 iteration 64 energy 0 : -13091.5
 E-Slope 0.000119306 iteration 65 energy 0 : -13085.6
 E-Slope 0.000126548 iteration 66 energy 0 : -13096.8
 E-Slope 0.000104964 iteration 67 energy 0 : -13089.2
 E-Slope 0.000114098 iteration 68 energy 0 : -13102.3
 E-Slope 0.000101142 iteration 69 energy 0 : -13094.1
 E-Slope 0.000115626 iteration 70 energy 0 : -13107.1
 E-Slope 9.16943e-05 iteration 71 energy 0 : -13094.3
 Converged due to oscillation in optimization  metric 0 bad 21  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -73025.4
 iteration 2 energy 0 : -74708.1
 iteration 3 energy 0 : -76239.7
 iteration 4 energy 0 : -77493.3
 iteration 5 energy 0 : -78626
 iteration 6 energy 0 : -79474.7
 iteration 7 energy 0 : -80174.4
 iteration 8 energy 0 : -80806.8
 iteration 9 energy 0 : -81353.6
 iteration 10 energy 0 : -81806.5
 iteration 11 energy 0 : -82210
 iteration 12 energy 0 : -82593.8
 E-Slope 0.00507648 iteration 13 energy 0 : -82955.9
 E-Slope 0.00432057 iteration 14 energy 0 : -83370.2
 E-Slope 0.00374505 iteration 15 energy 0 : -83727.5
 E-Slope 0.00331457 iteration 16 energy 0 : -84092.6
 E-Slope 0.00301804 iteration 17 energy 0 : -84429
 E-Slope 0.00278614 iteration 18 energy 0 : -84695.1
 E-Slope 0.00258861 iteration 19 energy 0 : -84928
 E-Slope 0.00241432 iteration 20 energy 0 : -85130.7
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2878_01262017_Aug2_Ref_vimp2_2475_08242016/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2878_01262017_Aug2_Ref_vimp2_2475_08242016/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2878_01262017_Aug2_Ref_vimp2_2475_08242016/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2878_01262017_Aug2_Ref_vimp2_2475_08242016/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2914_02162017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2554_09282016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2914_02162017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2554_09282016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547788511
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [11.0858, 10.4068, 13.4456]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 1.2127994401497766, -0.8605550191452718, -4.595763032818834]
level 0, iter 453, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.049504722764961824, 0.022863631477370694, -0.007998421972886947, 0.998480126004306, 0.9824962145600915, 0.9615141125853537, 1.064788928943526, -0.006174477797310622, -0.03050713181252947, 0.03666838402956941, 0.23061794007558462, -0.2435099033744565, -4.696501620505738]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 18, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.04721954118390707, 0.022704776610568436, -0.007258759380960574, 0.9986000793419229, 0.9816439446421793, 0.9591678780686972, 1.0648406802356245, -0.007394512562610793, -0.03176168543400514, 0.038389963420256745, 0.18408301056351958, -0.26206383464592276, -4.670314201306044]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 144, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.044277864820950606, 0.02495831334854585, -0.008040273815912324, 0.9986750759274303, 0.977276392046329, 0.9497414736546591, 1.0626399697647897, -0.016122532670979458, -0.03733238115423223, 0.04667488366362578, 0.17535196300851907, -0.3545683486065286, -4.560081858734776]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 133, size: fix[36, 38, 32]-mov[36, 39, 32], affine para: [-0.04132025229710668, 0.024330721977994144, -0.007198635465306268, 0.9988237243706072, 0.9831617699763093, 0.946217162472659, 1.0648089190287031, -0.015913563881934215, -0.04471412008090248, 0.054273460680527415, 0.24187265976047156, -0.3274581088346835, -4.712359944656455]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 127, size: fix[72, 76, 37]-mov[72, 78, 38], affine para: [-0.03880005458773593, 0.023058898189352296, -0.009433659370671357, 0.9989363588583409, 0.9747119292629072, 0.9410336888807317, 1.057940127937026, -0.015642941552508168, -0.03824700393696519, 0.05662311006635467, 0.11521623648598067, -0.47464323616868564, -4.68840167061818]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 348, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.04158720805423529, -0.019524395510074937, 0.005948898671488435, 0.9989263800254833, 1.007341633572567, 1.0153843390944135, 0.9370196138720166, 0.004020633221814415, 0.020894475015309694, -0.0345632293090951, -0.2788229659487049, -0.1126021337142083, 4.4517374496512145]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 64, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.04117685246565817, -0.022158851786689675, 0.00448465828450833, 0.9988960606332314, 1.0095922808151552, 1.0272385013244407, 0.939323002756796, 0.007660883680438658, 0.028227837041131097, -0.04277472156762936, -0.298403059327307, -0.18469571628536258, 4.51019546323026]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 34, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.0396178745013833, -0.021412944945216675, 0.006768208608989456, 0.9989625123902253, 1.0088365769703334, 1.0309010250525286, 0.9395105471642909, 0.007849462827626339, 0.027066036896839504, -0.04724780918640367, -0.21915696839839557, -0.11642678864228648, 4.39413967347588]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 95, size: fix[36, 39, 32]-mov[36, 38, 32], affine para: [0.040997305429684446, -0.025650189600058163, 0.006017322252781198, 0.9988118344082094, 1.0082833473221073, 1.0340865724259418, 0.9380286288811044, 0.012123610551015893, 0.02740996671143372, -0.05521307196238796, -0.24156265278804123, -0.16810655294462695, 4.435229354542563]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 69, size: fix[72, 78, 38]-mov[72, 76, 37], affine para: [0.04142942780225573, -0.02307810287101681, 0.007331371407208898, 0.998847963742802, 1.009990051488952, 1.035193724738522, 0.9384927326257648, 0.016084537557491608, 0.03300375948056778, -0.05780868695710749, -0.20253270956156555, -0.36205646643590456, 4.517640470316406]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.528967 v2 -0.539778
 last params [-0.03880005458773593, 0.023058898189352296, -0.009433659370671357, 0.9989363588583409, 0.9747119292629072, 0.9410336888807317, 1.057940127937026, -0.015642941552508168, -0.03824700393696519, 0.05662311006635467, 0.11521623648598067, -0.47464323616868564, -4.68840167061818]
 my params [0.04142942780225573, -0.02307810287101681, 0.007331371407208898, 0.998847963742802, 1.009990051488952, 1.035193724738522, 0.9384927326257648, 0.016084537557491608, 0.03300375948056778, -0.05780868695710749, -0.20253270956156555, -0.36205646643590456, 4.517640470316406]
A=0.99085 0.000129731 0.00897288 
-0.0187976 0.957464 0.140943 
-0.0484773 -0.0885481 1.06075 

rotation R0.998626 0.0143474 0.0503998 
-0.0189451 0.995582 0.0919652 
-0.0488577 -0.0927936 0.994486 

upper R0.992213 -0.0136834 -0.0455352 
0 0.961452 0.0420187 
0 0 1.06831 

s=0.250354 u=-0.0462551 v=0.0248495 w-0.00833491 r=0.998586
m_Rotation from vnl-0.0462551 0.0248495 -0.00833491 0.998586
 new params [-0.04625512255076953, 0.024849532235419667, -0.008334907549324526, 0.9985857467947549, 0.9922131895197986, 0.9614524571335921, 1.068310630382156, -0.013790802327314807, -0.04589258503938651, 0.043703350356810305, 0.16019024716619468, -0.29388133300299857, -4.8339447693225495]
outputput affine center: [11.0858, 10.4068, 13.4456]
output affine para: [-0.04625512255076953, 0.024849532235419667, -0.008334907549324526, 0.9985857467947549, 0.9922131895197986, 0.9614524571335921, 1.068310630382156, -0.013790802327314807, -0.04589258503938651, 0.043703350356810305, 0.16019024716619468, -0.29388133300299857, -4.8339447693225495]
initial measure value (MMI): rval = -0.338026
final measure value (MMI): rval = -0.530141
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -6517.41
 iteration 2 energy 0 : -6988.33
 iteration 3 energy 0 : -7320.55
 iteration 4 energy 0 : -7580.37
 iteration 5 energy 0 : -7744.54
 iteration 6 energy 0 : -7874.05
 iteration 7 energy 0 : -7990.63
 iteration 8 energy 0 : -8102.47
 iteration 9 energy 0 : -8219.07
 iteration 10 energy 0 : -8316.16
 iteration 11 energy 0 : -8395.25
 iteration 12 energy 0 : -8447.01
 E-Slope 0.00903076 iteration 13 energy 0 : -8455.23
 E-Slope 0.00722574 iteration 14 energy 0 : -8461.93
 E-Slope 0.00577956 iteration 15 energy 0 : -8452.75
 E-Slope 0.00462076 iteration 16 energy 0 : -8458.56
 E-Slope 0.00356006 iteration 17 energy 0 : -8457.6
 E-Slope 0.00259621 iteration 18 energy 0 : -8464.21
 E-Slope 0.00174332 iteration 19 energy 0 : -8464.81
 E-Slope 0.00105783 iteration 20 energy 0 : -8471.98
 E-Slope 0.000591621 iteration 21 energy 0 : -8478.73
 E-Slope 0.000324115 iteration 22 energy 0 : -8484.42
 E-Slope 0.000223383 iteration 23 energy 0 : -8486.88
 E-Slope 0.000241153 iteration 24 energy 0 : -8492.12
 E-Slope 0.000265993 iteration 25 energy 0 : -8494.08
 E-Slope 0.000301823 iteration 26 energy 0 : -8499.43
 E-Slope 0.000295468 iteration 27 energy 0 : -8499.69
 E-Slope 0.000297517 iteration 28 energy 0 : -8505.88
 E-Slope 0.000288874 iteration 29 energy 0 : -8511.09
 E-Slope 0.000287704 iteration 30 energy 0 : -8516.05
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -12419.9
 iteration 2 energy 0 : -12514.4
 iteration 3 energy 0 : -12618.2
 iteration 4 energy 0 : -12664.9
 iteration 5 energy 0 : -12679.5
 iteration 6 energy 0 : -12707.7
 iteration 7 energy 0 : -12714
 iteration 8 energy 0 : -12738.7
 iteration 9 energy 0 : -12741.4
 iteration 10 energy 0 : -12761.8
 iteration 11 energy 0 : -12762
 iteration 12 energy 0 : -12780.4
 E-Slope 0.000864372 iteration 13 energy 0 : -12777.4
 E-Slope 0.000639535 iteration 14 energy 0 : -12794.7
 E-Slope 0.000527769 iteration 15 energy 0 : -12791.8
 E-Slope 0.000477284 iteration 16 energy 0 : -12807.2
 E-Slope 0.00041502 iteration 17 energy 0 : -12806.7
 E-Slope 0.000391431 iteration 18 energy 0 : -12821.3
 E-Slope 0.000346676 iteration 19 energy 0 : -12819.3
 E-Slope 0.000338376 iteration 20 energy 0 : -12832.8
 E-Slope 0.000305526 iteration 21 energy 0 : -12829.8
 E-Slope 0.000304319 iteration 22 energy 0 : -12842.8
 E-Slope 0.000275716 iteration 23 energy 0 : -12839
 E-Slope 0.000277333 iteration 24 energy 0 : -12851.8
 E-Slope 0.000243813 iteration 25 energy 0 : -12844.9
 E-Slope 0.00023926 iteration 26 energy 0 : -12856.4
 E-Slope 0.000205249 iteration 27 energy 0 : -12851.3
 E-Slope 0.00019981 iteration 28 energy 0 : -12863.1
 E-Slope 0.000169374 iteration 29 energy 0 : -12856.8
 E-Slope 0.000168994 iteration 30 energy 0 : -12868.6
 E-Slope 0.000143066 iteration 31 energy 0 : -12862.1
 E-Slope 0.000147566 iteration 32 energy 0 : -12874.1
 E-Slope 0.000126757 iteration 33 energy 0 : -12867.7
 E-Slope 0.000136271 iteration 34 energy 0 : -12879.5
 E-Slope 0.000120349 iteration 35 energy 0 : -12873.4
 E-Slope 0.000134706 iteration 36 energy 0 : -12884.9
 E-Slope 0.00011944 iteration 37 energy 0 : -12879.1
 E-Slope 0.000128053 iteration 38 energy 0 : -12887.8
 E-Slope 0.000108667 iteration 39 energy 0 : -12880.9
 E-Slope 0.000115357 iteration 40 energy 0 : -12890.2
 E-Slope 9.44883e-05 iteration 41 energy 0 : -12884.3
 Converged due to oscillation in optimization  metric 0 bad 15  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -74778.9
 iteration 2 energy 0 : -76484.3
 iteration 3 energy 0 : -78129
 iteration 4 energy 0 : -79334.1
 iteration 5 energy 0 : -80223.5
 iteration 6 energy 0 : -80960.1
 iteration 7 energy 0 : -81562.3
 iteration 8 energy 0 : -82075.8
 iteration 9 energy 0 : -82544.9
 iteration 10 energy 0 : -82942.7
 iteration 11 energy 0 : -83300.8
 iteration 12 energy 0 : -83633.5
 E-Slope 0.00436735 iteration 13 energy 0 : -83946.4
 E-Slope 0.00363006 iteration 14 energy 0 : -84248.3
 E-Slope 0.00312079 iteration 15 energy 0 : -84531.8
 E-Slope 0.00275736 iteration 16 energy 0 : -84799.4
 E-Slope 0.00247209 iteration 17 energy 0 : -85014.6
 E-Slope 0.00224093 iteration 18 energy 0 : -85207.6
 E-Slope 0.00204258 iteration 19 energy 0 : -85385.5
 E-Slope 0.00186488 iteration 20 energy 0 : -85549
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2914_02162017_Test_NewCases_Aug1_Ref_vimp2_2554_09282016/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2914_02162017_Test_NewCases_Aug1_Ref_vimp2_2554_09282016/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2914_02162017_Test_NewCases_Aug1_Ref_vimp2_2554_09282016/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2914_02162017_Test_NewCases_Aug1_Ref_vimp2_2554_09282016/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2914_02162017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2456_08182016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2914_02162017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2456_08182016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547788591
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [11.0858, 10.4068, 13.4456]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 2.6329589073262856, -7.393683161152801, -17.675725444278015]
level 0, iter 447, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.13479436169973716, 0.005955426925261171, 0.018270204391336448, 0.9906872425622514, 1.1070808134878363, 1.024320429936206, 1.1532767935188826, 0.015106039314781224, 0.012517562236751455, 0.10561929346420314, 2.1060464876596376, -3.890599680850047, -17.781331733797415]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 480, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.12935471881852886, 0.00785739309131501, 0.023267172306902693, 0.9912942332052723, 1.1190057804580233, 1.0058848788351493, 1.1568990390544998, 0.022552407178222645, 0.00870074292558614, 0.13565865643288158, 2.1868519054015527, -3.708076628432518, -17.832376406582494]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 192, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.1389110315503464, 0.007468751778741264, 0.02029342150548379, 0.9900687451405014, 1.1257887606981072, 0.9983396533377461, 1.1453299735352263, 0.01860899661152963, 0.009744821961407425, 0.15435122910370572, 2.349958774729266, -3.244602882275406, -18.34007357468788]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 396, size: fix[36, 38, 32]-mov[40, 43, 38], affine para: [-0.13408709334200725, 0.0037581356611468756, 0.018386563394002516, 0.990791835908029, 1.1227771696317623, 0.9874186380171044, 1.140956598608975, 0.010164947358022295, 0.020461819178160433, 0.17477113512879539, 2.2478913226308994, -3.2440941351692874, -18.231325327252737]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 354, size: fix[72, 76, 37]-mov[79, 86, 54], affine para: [-0.11778153552110004, 0.008704846612074806, 0.010605154739458306, 0.9929447448013933, 1.116048675411923, 0.9868406293099588, 1.1296172171752215, -0.001969215427600726, 0.005427734237048462, 0.21118193083924452, 2.2075009593741095, -3.6216475894043203, -18.30397197218523]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 687, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.11102492728271598, -0.006843839494677987, -0.016960587788228905, 0.9936493173372165, 0.8897299969686959, 0.9474242092674543, 0.8823517658138087, -0.004168042444769886, -0.0005301719075096541, -0.13831238229482928, -2.1714290861680716, -1.9578492247023365, 15.5975178555513]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 1137, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.11993979886295995, -0.00602362292315229, -0.016117783751889044, 0.9926320454541651, 0.8864391753413987, 0.9423938774968864, 0.9105410421741564, -0.019518872432462503, 0.003790176130994049, -0.18726872194364463, -2.2661070018904277, -3.8680325986542106, 16.1504983903984]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 89, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.12004439081370746, -0.005791441238417229, -0.017591554169088624, 0.9925957589393901, 0.8834848425257102, 0.9437136801002464, 0.9125180961110017, -0.020125343997482826, 0.004378370849793198, -0.18937188966674595, -2.2480896811249726, -3.8045710223011935, 16.226598004851187]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 42, size: fix[40, 43, 38]-mov[36, 38, 32], affine para: [0.11633918818254287, -0.006604436514180952, -0.018923932330436297, 0.9930072806865566, 0.8808334777260612, 0.9433952378598902, 0.912263199645887, -0.020242827486268537, 0.0038832974403738276, -0.19225398359104748, -2.3926715019963667, -3.79218895370952, 16.25806682738984]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 391, size: fix[79, 86, 54]-mov[72, 76, 37], affine para: [0.11124720504327623, -0.005148451816439587, -0.01044212780562686, 0.9937245668598739, 0.8881964253716343, 0.955067775375518, 0.9071572288024298, -0.016112591518234413, 0.0002838377485330837, -0.20279825446842065, -2.352994511942138, -3.8259803494306093, 16.20962021711226]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.456039 v2 -0.453333
final [-0.11778153552110004, 0.008704846612074806, 0.010605154739458306, 0.9929447448013933, 1.116048675411923, 0.9868406293099588, 1.1296172171752215, -0.001969215427600726, 0.005427734237048462, 0.21118193083924452, 2.2075009593741095, -3.6216475894043203, -18.30397197218523]
outputput affine center: [11.0858, 10.4068, 13.4456]
output affine para: [-0.11778153552110004, 0.008704846612074806, 0.010605154739458306, 0.9929447448013933, 1.116048675411923, 0.9868406293099588, 1.1296172171752215, -0.001969215427600726, 0.005427734237048462, 0.21118193083924452, 2.2075009593741095, -3.6216475894043203, -18.30397197218523]
initial measure value (MMI): rval = -0.136589
final measure value (MMI): rval = -0.467304
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -6053.35
 iteration 2 energy 0 : -6473.51
 iteration 3 energy 0 : -6808.15
 iteration 4 energy 0 : -7033.64
 iteration 5 energy 0 : -7195.77
 iteration 6 energy 0 : -7325.82
 iteration 7 energy 0 : -7447.61
 iteration 8 energy 0 : -7567.1
 iteration 9 energy 0 : -7693.33
 iteration 10 energy 0 : -7796.58
 iteration 11 energy 0 : -7875.22
 iteration 12 energy 0 : -7941.18
 E-Slope 0.00995155 iteration 13 energy 0 : -7992.52
 E-Slope 0.00817124 iteration 14 energy 0 : -7983.14
 E-Slope 0.00677319 iteration 15 energy 0 : -7979.45
 E-Slope 0.00555089 iteration 16 energy 0 : -7983.65
 E-Slope 0.00439079 iteration 17 energy 0 : -7982.63
 E-Slope 0.0032948 iteration 18 energy 0 : -7988.08
 E-Slope 0.00228691 iteration 19 energy 0 : -7984.93
 E-Slope 0.00144386 iteration 20 energy 0 : -7989.8
 E-Slope 0.000827074 iteration 21 energy 0 : -7991.57
 E-Slope 0.000426181 iteration 22 energy 0 : -7997.41
 E-Slope 0.000223517 iteration 23 energy 0 : -8011.54
 E-Slope 0.000181153 iteration 24 energy 0 : -8017.81
 E-Slope 0.000304773 iteration 25 energy 0 : -8037.66
 E-Slope 0.000390679 iteration 26 energy 0 : -8040.51
 E-Slope 0.0004704 iteration 27 energy 0 : -8052.42
 E-Slope 0.000534378 iteration 28 energy 0 : -8054.9
 E-Slope 0.000592843 iteration 29 energy 0 : -8068.53
 E-Slope 0.000625558 iteration 30 energy 0 : -8069.23
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -11627.2
 iteration 2 energy 0 : -11716.9
 iteration 3 energy 0 : -11886.7
 iteration 4 energy 0 : -11935.5
 iteration 5 energy 0 : -11972.5
 iteration 6 energy 0 : -12005.7
 iteration 7 energy 0 : -12034.2
 iteration 8 energy 0 : -12059
 iteration 9 energy 0 : -12083.1
 iteration 10 energy 0 : -12101.3
 iteration 11 energy 0 : -12121.8
 iteration 12 energy 0 : -12134.8
 E-Slope 0.00151818 iteration 13 energy 0 : -12153.1
 E-Slope 0.00115301 iteration 14 energy 0 : -12162.5
 E-Slope 0.00101916 iteration 15 energy 0 : -12179.8
 E-Slope 0.000907078 iteration 16 energy 0 : -12186.8
 E-Slope 0.000820979 iteration 17 energy 0 : -12203.5
 E-Slope 0.000740208 iteration 18 energy 0 : -12208.1
 E-Slope 0.000682123 iteration 19 energy 0 : -12224.5
 E-Slope 0.000621825 iteration 20 energy 0 : -12227.2
 E-Slope 0.000584714 iteration 21 energy 0 : -12243.3
 E-Slope 0.000538416 iteration 22 energy 0 : -12244.4
 E-Slope 0.000515237 iteration 23 energy 0 : -12260.6
 E-Slope 0.000476725 iteration 24 energy 0 : -12260.3
 E-Slope 0.000462458 iteration 25 energy 0 : -12276.7
 E-Slope 0.000428729 iteration 26 energy 0 : -12275.3
 E-Slope 0.000421315 iteration 27 energy 0 : -12292
 E-Slope 0.000391521 iteration 28 energy 0 : -12289.5
 E-Slope 0.000390626 iteration 29 energy 0 : -12306.8
 E-Slope 0.00036376 iteration 30 energy 0 : -12303.2
 E-Slope 0.000368014 iteration 31 energy 0 : -12321
 E-Slope 0.000338092 iteration 32 energy 0 : -12313.4
 E-Slope 0.00032533 iteration 33 energy 0 : -12321.6
 E-Slope 0.000276946 iteration 34 energy 0 : -12312.5
 E-Slope 0.000242509 iteration 35 energy 0 : -12316.2
 E-Slope 0.000178352 iteration 36 energy 0 : -12308.7
 E-Slope 0.000130273 iteration 37 energy 0 : -12309.4
 E-Slope 6.29872e-05 iteration 38 energy 0 : -12304.8
 Converged due to oscillation in optimization  metric 0 bad 8  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -70549.3
 iteration 2 energy 0 : -72557.8
 iteration 3 energy 0 : -74017.4
 iteration 4 energy 0 : -75016.1
 iteration 5 energy 0 : -75819.5
 iteration 6 energy 0 : -76519.6
 iteration 7 energy 0 : -77259
 iteration 8 energy 0 : -78038.5
 iteration 9 energy 0 : -78798
 iteration 10 energy 0 : -79471.9
 iteration 11 energy 0 : -80035.4
 iteration 12 energy 0 : -80505.6
 E-Slope 0.0054775 iteration 13 energy 0 : -80923.1
 E-Slope 0.0049276 iteration 14 energy 0 : -81317.3
 E-Slope 0.00452521 iteration 15 energy 0 : -81728.2
 E-Slope 0.00417567 iteration 16 energy 0 : -82146.8
 E-Slope 0.00382875 iteration 17 energy 0 : -82477.5
 E-Slope 0.00347355 iteration 18 energy 0 : -82781.5
 E-Slope 0.00313625 iteration 19 energy 0 : -83063.3
 E-Slope 0.00284347 iteration 20 energy 0 : -83330.8
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2914_02162017_Test_NewCases_Aug2_Ref_vimp2_2456_08182016/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2914_02162017_Test_NewCases_Aug2_Ref_vimp2_2456_08182016/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2914_02162017_Test_NewCases_Aug2_Ref_vimp2_2456_08182016/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2914_02162017_Test_NewCases_Aug2_Ref_vimp2_2456_08182016/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2926_02222017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1632_10232015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2926_02222017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1632_10232015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547788687
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [14.4329, 11.9075, 12.2113]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0.1690433479387341, -11.443213969400187, 9.70596639284597]
level 0, iter 193, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.028984510896560053, -0.022203452021072632, 0.012907343949080434, 0.9992498713127838, 1.0184720522028676, 1.0468961242044355, 0.979923502360019, -0.005171922366084664, -0.019373675945496632, 0.010015168200172165, -0.23542493596533293, -9.80882584836994, 9.686614742858811]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 48, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.02987916816935356, -0.0210484896111357, 0.0110054386325113, 0.9992712728359119, 1.014592088150449, 1.051053226227505, 0.9737883317043973, -0.0041042239036308235, -0.019495958286183605, 0.013637359970357317, -0.24064317293034174, -9.80898591846922, 9.731859201072634]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 95, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.031844479841512334, -0.021487306404265275, 0.010030339017567372, 0.9992114976651867, 1.0147509788216393, 1.0584109786536597, 0.9751221048573995, -0.005595290400804015, -0.021501220276326508, 0.019088479384978648, -0.23443304606598012, -9.906024036632067, 9.69511099328975]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 24, size: fix[37, 42, 32]-mov[35, 36, 32], affine para: [0.031427327829660075, -0.02279937475164891, 0.00901952990617757, 0.9992052640257119, 1.015549012847409, 1.0615191385367613, 0.9774123674162859, -0.003555450747222217, -0.022402024600089533, 0.02014317519833531, -0.2433040154010622, -9.838440618847903, 9.649436534618893]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 94, size: fix[74, 83, 37]-mov[70, 72, 34], affine para: [0.0337765922630976, -0.02275884353608364, 0.011193855145997592, 0.9991075389881525, 1.0087678085341505, 1.0614775300477794, 0.9710113822262645, 0.00041534965981477446, -0.01972190619949624, 0.023649357304341454, -0.36560628400902145, -9.818905785412701, 9.652264689352076]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 211, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.035107930242779535, 0.0241697416767021, -0.011992039567321347, 0.9990192429619988, 0.9786158314769795, 0.9495353366041491, 1.016915546865029, 0.0032928416495657735, 0.014307608017861326, -0.02332833222747022, -0.23446885223573044, 8.880156208815253, -10.462745809767116]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 249, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.03858595026899864, 0.023701458712936288, -0.013903242168753133, 0.9988774024643436, 0.9826065700493007, 0.9393485446481857, 1.0213672700327534, -0.005011874940582449, 0.013773764942372016, -0.03375591166014073, -0.20071080559663104, 8.838275612141969, -10.608728642744326]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 128, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.03949963637562999, 0.022384687013540995, -0.013047083640145426, 0.9988836159042682, 0.9832733671511126, 0.9393798568214593, 1.0214126897026308, -0.004517466627498028, 0.016929232036801842, -0.036411173286780465, -0.25251891707566426, 8.864078954201036, -10.554973165619453]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 66, size: fix[35, 36, 32]-mov[37, 42, 32], affine para: [-0.039492157016773666, 0.022741234538661722, -0.01368546525627127, 0.9988673154260979, 0.9810108957467127, 0.9370726250056912, 1.0192595099366655, -0.0051810397299422726, 0.01872034604645492, -0.03771666162808901, -0.28424648904005295, 8.83748558931958, -10.607052146423715]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 85, size: fix[70, 72, 34]-mov[74, 83, 37], affine para: [-0.03961685732007666, 0.02395289849114268, -0.011376568151257259, 0.9988630221241818, 0.9766331398879687, 0.9404847468426103, 1.0186963956367485, -0.004996092405326185, 0.01939974357693618, -0.03913159168659193, -0.3129728512416798, 8.8931798006377, -10.557098832554805]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.546181 v2 -0.536509
final [0.0337765922630976, -0.02275884353608364, 0.011193855145997592, 0.9991075389881525, 1.0087678085341505, 1.0614775300477794, 0.9710113822262645, 0.00041534965981477446, -0.01972190619949624, 0.023649357304341454, -0.36560628400902145, -9.818905785412701, 9.652264689352076]
outputput affine center: [14.4329, 11.9075, 12.2113]
output affine para: [0.0337765922630976, -0.02275884353608364, 0.011193855145997592, 0.9991075389881525, 1.0087678085341505, 1.0614775300477794, 0.9710113822262645, 0.00041534965981477446, -0.01972190619949624, 0.023649357304341454, -0.36560628400902145, -9.818905785412701, 9.652264689352076]
initial measure value (MMI): rval = -0.39585
final measure value (MMI): rval = -0.55903
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -6643.31
 iteration 2 energy 0 : -6993.73
 iteration 3 energy 0 : -7323.2
 iteration 4 energy 0 : -7501.16
 iteration 5 energy 0 : -7618.1
 iteration 6 energy 0 : -7704.79
 iteration 7 energy 0 : -7773.63
 iteration 8 energy 0 : -7828.06
 iteration 9 energy 0 : -7872.85
 iteration 10 energy 0 : -7911.85
 iteration 11 energy 0 : -7948.97
 iteration 12 energy 0 : -7981.74
 E-Slope 0.00569925 iteration 13 energy 0 : -8008.85
 E-Slope 0.00424909 iteration 14 energy 0 : -8039.6
 E-Slope 0.00343573 iteration 15 energy 0 : -8062.89
 E-Slope 0.00291359 iteration 16 energy 0 : -8089.02
 E-Slope 0.00254907 iteration 17 energy 0 : -8112.53
 E-Slope 0.00227337 iteration 18 energy 0 : -8130.44
 E-Slope 0.0020353 iteration 19 energy 0 : -8138.59
 E-Slope 0.00183508 iteration 20 energy 0 : -8154.94
 E-Slope 0.00165569 iteration 21 energy 0 : -8169.29
 E-Slope 0.00146126 iteration 22 energy 0 : -8170.29
 E-Slope 0.00125882 iteration 23 energy 0 : -8170.19
 E-Slope 0.00104418 iteration 24 energy 0 : -8167
 E-Slope 0.000826843 iteration 25 energy 0 : -8167.67
 E-Slope 0.000633515 iteration 26 energy 0 : -8169.85
 E-Slope 0.000454448 iteration 27 energy 0 : -8170.58
 E-Slope 0.00031282 iteration 28 energy 0 : -8172.78
 E-Slope 0.000209458 iteration 29 energy 0 : -8173.73
 E-Slope 0.000144057 iteration 30 energy 0 : -8177.08
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -13975.3
 iteration 2 energy 0 : -14075.2
 iteration 3 energy 0 : -14218.5
 iteration 4 energy 0 : -14328
 iteration 5 energy 0 : -14412.7
 iteration 6 energy 0 : -14428.6
 iteration 7 energy 0 : -14447.7
 iteration 8 energy 0 : -14488.4
 iteration 9 energy 0 : -14501.7
 iteration 10 energy 0 : -14528.1
 iteration 11 energy 0 : -14535.1
 iteration 12 energy 0 : -14553.2
 E-Slope 0.00145112 iteration 13 energy 0 : -14559.6
 E-Slope 0.00105968 iteration 14 energy 0 : -14572.1
 E-Slope 0.00079719 iteration 15 energy 0 : -14576.5
 E-Slope 0.000643373 iteration 16 energy 0 : -14586.9
 E-Slope 0.000562578 iteration 17 energy 0 : -14587
 E-Slope 0.00048165 iteration 18 energy 0 : -14598.9
 E-Slope 0.000389583 iteration 19 energy 0 : -14596.7
 E-Slope 0.000342086 iteration 20 energy 0 : -14607.8
 E-Slope 0.00028602 iteration 21 energy 0 : -14606
 E-Slope 0.000257909 iteration 22 energy 0 : -14614.1
 E-Slope 0.000219621 iteration 23 energy 0 : -14613
 E-Slope 0.000201851 iteration 24 energy 0 : -14620.8
 E-Slope 0.000174724 iteration 25 energy 0 : -14618
 E-Slope 0.000163756 iteration 26 energy 0 : -14625.9
 E-Slope 0.00014133 iteration 27 energy 0 : -14621.6
 E-Slope 0.000132523 iteration 28 energy 0 : -14627.9
 E-Slope 0.000112116 iteration 29 energy 0 : -14626.3
 E-Slope 0.000103205 iteration 30 energy 0 : -14628.2
 E-Slope 7.77692e-05 iteration 31 energy 0 : -14623.6
 Converged due to oscillation in optimization  metric 0 bad 7  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -83925.3
 iteration 2 energy 0 : -85015.9
 iteration 3 energy 0 : -86026
 iteration 4 energy 0 : -87036.3
 iteration 5 energy 0 : -87850.2
 iteration 6 energy 0 : -88519
 iteration 7 energy 0 : -89136.6
 iteration 8 energy 0 : -89712.1
 iteration 9 energy 0 : -90252.2
 iteration 10 energy 0 : -90728.4
 iteration 11 energy 0 : -91139.1
 iteration 12 energy 0 : -91539.4
 E-Slope 0.00392529 iteration 13 energy 0 : -91938.3
 E-Slope 0.00353205 iteration 14 energy 0 : -92384
 E-Slope 0.00319899 iteration 15 energy 0 : -92728.3
 E-Slope 0.00293964 iteration 16 energy 0 : -93035.9
 E-Slope 0.00270575 iteration 17 energy 0 : -93246.3
 E-Slope 0.0024775 iteration 18 energy 0 : -93443.9
 E-Slope 0.00225873 iteration 19 energy 0 : -93647.1
 E-Slope 0.00206091 iteration 20 energy 0 : -93883.8
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2926_02222017_Test_NewCases_Aug1_Ref_vimp2_1632_10232015/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2926_02222017_Test_NewCases_Aug1_Ref_vimp2_1632_10232015/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2926_02222017_Test_NewCases_Aug1_Ref_vimp2_1632_10232015/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2926_02222017_Test_NewCases_Aug1_Ref_vimp2_1632_10232015/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2926_02222017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1844_01142016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2926_02222017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1844_01142016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547788767
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [14.4329, 11.9075, 12.2113]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -0.28510419392914876, -12.46505229121465, 17.122421976813158]
level 0, iter 262, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.030034628430706454, 0.0006878826514144856, -0.03015017309880071, 0.9990937968852571, 0.9507375070674781, 0.9892798742728752, 0.8990009982707993, -0.012736789508636747, -0.0243713672335173, -0.0036313598082590476, -0.8296436042862205, -10.690225154390689, 15.567719415826692]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 252, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.02658864583341469, 0.0015887692559158502, -0.03191982402350398, 0.9991354485550521, 0.9496371542861305, 1.0065860193419123, 0.8897777841351674, -0.0101573906279752, -0.029816296675302025, -0.0018987545412995639, -0.7852450679385137, -10.8188070171294, 15.612812846438116]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 20, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.02848141755510697, 0.004458192662106805, -0.029729250981425183, 0.9991421845805144, 0.9518566909355346, 1.0094287812471863, 0.8936612095371387, -0.010518810433417944, -0.032013523315540984, -0.003097121822741148, -0.8400828185878835, -10.800482450328174, 15.555815868807118]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 45, size: fix[37, 42, 32]-mov[37, 36, 32], affine para: [0.031712197034613115, 0.0037830388677245566, -0.030549990369116993, 0.9990228842547153, 0.9510137848223043, 1.0127962181890264, 0.8930574281821814, -0.010658955962256444, -0.0360011591657327, -0.00018080715583224444, -0.8578809823804809, -10.78516047330504, 15.684821923800392]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 60, size: fix[74, 83, 37]-mov[73, 72, 37], affine para: [0.031050829670136244, 0.0038149780015004557, -0.03136795956615426, 0.9990181895402608, 0.958988397983086, 1.017660226595522, 0.8981641565831823, -0.005997053633712623, -0.03247571027348274, -0.000034362869249367914, -0.7564948855446993, -10.811911566523408, 15.53708170372237]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 411, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.03176454920984939, -0.005647864943103614, 0.020387786275621052, 0.9992714612185515, 1.0444147599213736, 0.9929968016693425, 1.1125873827346249, -0.012625143149013127, 0.04283154863806928, -0.00021717212276649666, -0.3373631116619359, 9.565952678060247, -18.007270982358964]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 51, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.033910581895449245, -0.007112176750411477, 0.01922135152287197, 0.9992147061683075, 1.044501858024049, 0.9917688083477929, 1.1120907802326492, -0.013738798633913998, 0.04598969898495762, -0.000042471776036777964, -0.2955395760409194, 9.481291661043084, -18.05573795638675]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 101, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.03200286111285626, -0.00548923808600104, 0.019638666604909514, 0.9992797445759659, 1.042497097192811, 0.9890559833767713, 1.117950813685017, -0.016319980629308155, 0.04625083070890952, -0.0015194100053690662, -0.4125763685358391, 9.545778075851388, -18.177915020107516]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 166, size: fix[37, 36, 32]-mov[37, 42, 32], affine para: [-0.03287119473572366, -0.006480741646541962, 0.02091125933229137, 0.9992197975308008, 1.0420493354894116, 0.9877618548948777, 1.1172632183231046, -0.01698784332999039, 0.04867938983747961, -0.004891913929948454, -0.49288049312381377, 9.526439735899562, -18.08227248532332]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 195, size: fix[73, 72, 37]-mov[74, 83, 37], affine para: [-0.02990793367375798, -0.007820722375790174, 0.017822758075079125, 0.9993631477593538, 1.0416085362965386, 0.9797628870690217, 1.11598543825371, -0.019373860292153093, 0.05419175501251974, -0.008031639342128596, -0.47668021554585766, 9.496801000587844, -17.98096455636341]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.538841 v2 -0.517497
final [0.031050829670136244, 0.0038149780015004557, -0.03136795956615426, 0.9990181895402608, 0.958988397983086, 1.017660226595522, 0.8981641565831823, -0.005997053633712623, -0.03247571027348274, -0.000034362869249367914, -0.7564948855446993, -10.811911566523408, 15.53708170372237]
outputput affine center: [14.4329, 11.9075, 12.2113]
output affine para: [0.031050829670136244, 0.0038149780015004557, -0.03136795956615426, 0.9990181895402608, 0.958988397983086, 1.017660226595522, 0.8981641565831823, -0.005997053633712623, -0.03247571027348274, -0.000034362869249367914, -0.7564948855446993, -10.811911566523408, 15.53708170372237]
initial measure value (MMI): rval = -0.253506
final measure value (MMI): rval = -0.534701
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -6765.25
 iteration 2 energy 0 : -7149.6
 iteration 3 energy 0 : -7386.29
 iteration 4 energy 0 : -7562.63
 iteration 5 energy 0 : -7701.58
 iteration 6 energy 0 : -7834.5
 iteration 7 energy 0 : -7932.79
 iteration 8 energy 0 : -8008.72
 iteration 9 energy 0 : -8071.22
 iteration 10 energy 0 : -8119.14
 iteration 11 energy 0 : -8161.12
 iteration 12 energy 0 : -8202.07
 E-Slope 0.00671878 iteration 13 energy 0 : -8250.63
 E-Slope 0.00552264 iteration 14 energy 0 : -8308.88
 E-Slope 0.00456942 iteration 15 energy 0 : -8309.48
 E-Slope 0.00373314 iteration 16 energy 0 : -8298.17
 E-Slope 0.00300538 iteration 17 energy 0 : -8301.91
 E-Slope 0.00238338 iteration 18 energy 0 : -8293.41
 E-Slope 0.0018521 iteration 19 energy 0 : -8298.39
 E-Slope 0.00136428 iteration 20 energy 0 : -8292.51
 E-Slope 0.000950262 iteration 21 energy 0 : -8298.21
 E-Slope 0.000579573 iteration 22 energy 0 : -8294.31
 E-Slope 0.000282615 iteration 23 energy 0 : -8299.02
 E-Slope 5.61178e-05 iteration 24 energy 0 : -8296.67
 Converged due to oscillation in optimization  metric 0 bad 5  
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -14114
 iteration 2 energy 0 : -14251.3
 iteration 3 energy 0 : -14390.9
 iteration 4 energy 0 : -14562.4
 iteration 5 energy 0 : -14698
 iteration 6 energy 0 : -14804.7
 iteration 7 energy 0 : -14895.8
 iteration 8 energy 0 : -14940.4
 iteration 9 energy 0 : -14933.6
 iteration 10 energy 0 : -14954.9
 iteration 11 energy 0 : -14952.5
 iteration 12 energy 0 : -14960.5
 E-Slope 0.00234314 iteration 13 energy 0 : -14962.5
 E-Slope 0.00168331 iteration 14 energy 0 : -14968.9
 E-Slope 0.00110651 iteration 15 energy 0 : -14975.4
 E-Slope 0.000690587 iteration 16 energy 0 : -14980.2
 E-Slope 0.000420876 iteration 17 energy 0 : -14990.6
 E-Slope 0.000270396 iteration 18 energy 0 : -14997.2
 E-Slope 0.000233255 iteration 19 energy 0 : -15006
 E-Slope 0.000251748 iteration 20 energy 0 : -15014.9
 E-Slope 0.000248671 iteration 21 energy 0 : -15019.1
 E-Slope 0.000273854 iteration 22 energy 0 : -15031.6
 E-Slope 0.00028003 iteration 23 energy 0 : -15034.1
 E-Slope 0.000296667 iteration 24 energy 0 : -15048.2
 E-Slope 0.000293404 iteration 25 energy 0 : -15046.8
 E-Slope 0.000297859 iteration 26 energy 0 : -15061.2
 E-Slope 0.000287637 iteration 27 energy 0 : -15059.1
 E-Slope 0.000277393 iteration 28 energy 0 : -15069.1
 E-Slope 0.000258416 iteration 29 energy 0 : -15066.6
 E-Slope 0.000240177 iteration 30 energy 0 : -15073.8
 E-Slope 0.000211939 iteration 31 energy 0 : -15069.9
 E-Slope 0.000189774 iteration 32 energy 0 : -15076.3
 E-Slope 0.00015603 iteration 33 energy 0 : -15073.5
 E-Slope 0.000137359 iteration 34 energy 0 : -15080.2
 E-Slope 0.000109352 iteration 35 energy 0 : -15078.1
 E-Slope 0.000102438 iteration 36 energy 0 : -15085.3
 E-Slope 8.13603e-05 iteration 37 energy 0 : -15081.7
 Converged due to oscillation in optimization  metric 0 bad 9  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -85374.5
 iteration 2 energy 0 : -86580
 iteration 3 energy 0 : -87601.5
 iteration 4 energy 0 : -88360.4
 iteration 5 energy 0 : -89003.8
 iteration 6 energy 0 : -89665.8
 iteration 7 energy 0 : -90423.8
 iteration 8 energy 0 : -91255.1
 iteration 9 energy 0 : -91878.5
 iteration 10 energy 0 : -92444.8
 iteration 11 energy 0 : -92939
 iteration 12 energy 0 : -93415
 E-Slope 0.00420318 iteration 13 energy 0 : -93871.9
 E-Slope 0.00389323 iteration 14 energy 0 : -94213.1
 E-Slope 0.00360101 iteration 15 energy 0 : -94476.7
 E-Slope 0.00327621 iteration 16 energy 0 : -94683.2
 E-Slope 0.00290994 iteration 17 energy 0 : -94868.1
 E-Slope 0.00252458 iteration 18 energy 0 : -95035.2
 E-Slope 0.00216199 iteration 19 energy 0 : -95188.9
 E-Slope 0.00186472 iteration 20 energy 0 : -95353.9
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2926_02222017_Test_NewCases_Aug2_Ref_vimp2_1844_01142016/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2926_02222017_Test_NewCases_Aug2_Ref_vimp2_1844_01142016/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2926_02222017_Test_NewCases_Aug2_Ref_vimp2_1844_01142016/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2926_02222017_Test_NewCases_Aug2_Ref_vimp2_1844_01142016/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2946_03032017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2530_09142016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2946_03032017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2530_09142016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547788850
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [9.95357, 12.0306, 7.5795]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 3.1863131334032353, -21.18672911038913, 7.3480848596492505]
level 0, iter 820, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.05216004036685061, 0.001307437942615736, 0.037400166353752956, 0.997937296803595, 0.814745860768368, 0.8116297678206852, 0.7713017988185326, 0.03993610014276732, -0.07009613574228113, -0.045557498013570834, -0.050487511546704555, -21.6346815119616, 7.417284193896891]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 391, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.0507978408951773, 0.005423898816444243, 0.039170404297362446, 0.9979257688371407, 0.8167332333386728, 0.8242845850776128, 0.7690703769147003, 0.04898638159938714, -0.08296583446508111, -0.05318304736628263, -0.01909615092149332, -21.803827198960523, 7.418850773852724]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 146, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.05032753730645443, 0.008992006843117935, 0.03570279288417517, 0.9980539030442548, 0.8239076103406671, 0.8352585243951497, 0.7693879914153858, 0.04802862162969587, -0.08578296640460387, -0.05449155911905337, -0.11251046220135129, -22.028303721150934, 7.555656461373179]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 661, size: fix[40, 45, 32]-mov[38, 37, 32], affine para: [0.053777763640287295, 0.0031323300999154032, 0.03828231183807438, 0.9978139131352733, 0.8158936668483401, 0.8235063432006069, 0.7740155965765548, 0.041665654353530215, -0.06993195126665049, -0.058283804129534295, 0.27370100675952197, -21.887302296597728, 7.2357415290717135]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 1063, size: fix[80, 89, 41]-mov[75, 74, 37], affine para: [0.04650794937896869, 0.006943833852247827, 0.03190298212123222, 0.9983841913550954, 0.8225770040666944, 0.8264123357108043, 0.774204583509634, 0.04402081721440406, -0.0626368637386684, -0.060393529163245745, 0.1689874061017043, -21.90321978946872, 7.452843767956426]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 4431, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.10558997103218674, -0.07050229902350894, -0.01768184309247965, 0.9917497346985653, 1.1992329191463327, 0.9909856556430792, 1.1090877034590836, -0.001956699797815372, 0.2339366952099254, -0.08833923083498703, 0.5842392202224086, 19.40431324533028, -15.867028078845339]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 68, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.10571863151825697, -0.06687084402642036, -0.013883942898774357, 0.9920479309482404, 1.188329155640799, 0.9878166803773322, 1.1027109934947987, -0.002058971236167816, 0.22893575364121585, -0.09405465064589756, 0.3268631304254162, 19.558504559432844, -15.750706375938401]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 193, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.11308449813847131, -0.05948349135900126, -0.012214284481788793, 0.9917279978860695, 1.1913199986868694, 1.0078570077867293, 1.1379037242033756, 0.007748125514068048, 0.22672487621304746, -0.11723134748681416, 0.6715491843735504, 19.714340626680215, -15.943399378372321]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 896, size: fix[38, 37, 32]-mov[40, 45, 32], affine para: [-0.11408986760789008, -0.06277845685059222, -0.014266489733997348, 0.9913822848605588, 1.186526499714103, 1.005654660927445, 1.1094481042879745, -0.0017629443641790732, 0.21417414330743817, -0.11883932286593817, 0.30912145135271596, 19.752388021620067, -16.15650223857888]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 282, size: fix[75, 74, 37]-mov[80, 89, 41], affine para: [-0.11029066664182538, -0.062246175898392424, -0.012909009777957807, 0.9918642749410227, 1.1868913181932756, 0.9961474716835484, 1.0999388430836186, 0.013876255126189802, 0.21488437029076057, -0.12290692161350768, 0.672773303834414, 19.90897142820044, -15.920329430738878]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.309266 v2 -0.344759
 last params [0.04650794937896869, 0.006943833852247827, 0.03190298212123222, 0.9983841913550954, 0.8225770040666944, 0.8264123357108043, 0.774204583509634, 0.04402081721440406, -0.0626368637386684, -0.060393529163245745, 0.1689874061017043, -21.90321978946872, 7.452843767956426]
 my params [-0.11029066664182538, -0.062246175898392424, -0.012909009777957807, 0.9918642749410227, 1.1868913181932756, 0.9961474716835484, 1.0999388430836186, 0.013876255126189802, 0.21488437029076057, -0.12290692161350768, 0.672773303834414, 19.90897142820044, -15.920329430738878]
A=0.858933 -0.0669917 -0.081134 
0.0260111 1.00374 -0.109864 
-0.109672 0.200369 0.879979 

rotation R0.9915 -0.00572817 0.129984 
0.0300256 0.982138 -0.18575 
-0.126598 0.188074 0.973962 

upper R0.866297 -0.0616508 -0.195147 
0 1.02388 0.0580638 
0 0 0.866927 

s=0.251654 u=0.0940741 v=0.0645698 w0.00899756 r=0.993428
m_Rotation from vnl0.0940741 0.0645698 0.00899756 0.993428
 new params [0.09407409323006283, 0.0645698311849599, 0.008997563095623504, 0.9934283294440659, 0.8662970318003861, 1.0238768247521772, 0.8669266059460261, -0.07116586197205638, -0.22526533418022793, 0.05670978057384176, -0.5358119313202769, -21.749953005212145, 10.094191281551545]
outputput affine center: [9.95357, 12.0306, 7.5795]
output affine para: [0.09407409323006283, 0.0645698311849599, 0.008997563095623504, 0.9934283294440659, 0.8662970318003861, 1.0238768247521772, 0.8669266059460261, -0.07116586197205638, -0.22526533418022793, 0.05670978057384176, -0.5358119313202769, -21.749953005212145, 10.094191281551545]
initial measure value (MMI): rval = -0.115469
final measure value (MMI): rval = -0.33725
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -4413.23
 iteration 2 energy 0 : -4640.51
 iteration 3 energy 0 : -4842.69
 iteration 4 energy 0 : -4992.73
 iteration 5 energy 0 : -5117.03
 iteration 6 energy 0 : -5228.03
 iteration 7 energy 0 : -5328.07
 iteration 8 energy 0 : -5409.29
 iteration 9 energy 0 : -5480.52
 iteration 10 energy 0 : -5541
 iteration 11 energy 0 : -5592.76
 iteration 12 energy 0 : -5611.99
 E-Slope 0.00939434 iteration 13 energy 0 : -5610.39
 E-Slope 0.00755884 iteration 14 energy 0 : -5627.1
 E-Slope 0.00602452 iteration 15 energy 0 : -5629.2
 E-Slope 0.00471051 iteration 16 energy 0 : -5641.87
 E-Slope 0.00355566 iteration 17 energy 0 : -5643.98
 E-Slope 0.00260181 iteration 18 energy 0 : -5652.05
 E-Slope 0.00184444 iteration 19 energy 0 : -5653.93
 E-Slope 0.00127815 iteration 20 energy 0 : -5660.75
 E-Slope 0.000888661 iteration 21 energy 0 : -5664.43
 E-Slope 0.000662938 iteration 22 energy 0 : -5668.35
 E-Slope 0.000582479 iteration 23 energy 0 : -5670.64
 E-Slope 0.000540629 iteration 24 energy 0 : -5673.32
 E-Slope 0.000461586 iteration 25 energy 0 : -5675.18
 E-Slope 0.000418432 iteration 26 energy 0 : -5677.53
 E-Slope 0.000364058 iteration 27 energy 0 : -5680.66
 E-Slope 0.000331603 iteration 28 energy 0 : -5681.29
 E-Slope 0.000292234 iteration 29 energy 0 : -5683.74
 E-Slope 0.00026007 iteration 30 energy 0 : -5683.34
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -11392.4
 iteration 2 energy 0 : -11548.8
 iteration 3 energy 0 : -11713
 iteration 4 energy 0 : -11854.4
 iteration 5 energy 0 : -11994.3
 iteration 6 energy 0 : -12110.4
 iteration 7 energy 0 : -12207.5
 iteration 8 energy 0 : -12291.1
 iteration 9 energy 0 : -12328.7
 iteration 10 energy 0 : -12340.4
 iteration 11 energy 0 : -12360.9
 iteration 12 energy 0 : -12382.1
 E-Slope 0.00352716 iteration 13 energy 0 : -12396.3
 E-Slope 0.00278248 iteration 14 energy 0 : -12420.6
 E-Slope 0.0021361 iteration 15 energy 0 : -12429.1
 E-Slope 0.00162054 iteration 16 energy 0 : -12455.9
 E-Slope 0.00122964 iteration 17 energy 0 : -12461
 E-Slope 0.00098376 iteration 18 energy 0 : -12487.6
 E-Slope 0.000827558 iteration 19 energy 0 : -12489.9
 E-Slope 0.000789203 iteration 20 energy 0 : -12515.1
 E-Slope 0.000756264 iteration 21 energy 0 : -12514.8
 E-Slope 0.000729561 iteration 22 energy 0 : -12539.3
 E-Slope 0.000681475 iteration 23 energy 0 : -12537.2
 E-Slope 0.00065846 iteration 24 energy 0 : -12560.8
 E-Slope 0.000606082 iteration 25 energy 0 : -12557.1
 E-Slope 0.000588328 iteration 26 energy 0 : -12580.1
 E-Slope 0.000536017 iteration 27 energy 0 : -12576
 E-Slope 0.00052543 iteration 28 energy 0 : -12598.1
 E-Slope 0.000477791 iteration 29 energy 0 : -12593.2
 E-Slope 0.000469774 iteration 30 energy 0 : -12611.7
 E-Slope 0.000424296 iteration 31 energy 0 : -12606.8
 E-Slope 0.000419535 iteration 32 energy 0 : -12625.1
 E-Slope 0.000375271 iteration 33 energy 0 : -12619.5
 E-Slope 0.000376329 iteration 34 energy 0 : -12639.2
 E-Slope 0.000335909 iteration 35 energy 0 : -12632.2
 E-Slope 0.000342622 iteration 36 energy 0 : -12652.4
 E-Slope 0.000308298 iteration 37 energy 0 : -12645.8
 E-Slope 0.000320114 iteration 38 energy 0 : -12664.8
 E-Slope 0.000290953 iteration 39 energy 0 : -12657.6
 E-Slope 0.000304364 iteration 40 energy 0 : -12674.5
 E-Slope 0.000274494 iteration 41 energy 0 : -12665.9
 E-Slope 0.000280879 iteration 42 energy 0 : -12681.7
 E-Slope 0.000247262 iteration 43 energy 0 : -12674.1
 E-Slope 0.000248134 iteration 44 energy 0 : -12687.9
 E-Slope 0.000209644 iteration 45 energy 0 : -12679.9
 E-Slope 0.000215419 iteration 46 energy 0 : -12696.8
 E-Slope 0.00018315 iteration 47 energy 0 : -12689.8
 E-Slope 0.000193134 iteration 48 energy 0 : -12703.9
 E-Slope 0.000165999 iteration 49 energy 0 : -12695.9
 E-Slope 0.000177927 iteration 50 energy 0 : -12708.4
 E-Slope 0.000152662 iteration 51 energy 0 : -12700.2
 E-Slope 0.000162728 iteration 52 energy 0 : -12711.9
 E-Slope 0.000137888 iteration 53 energy 0 : -12706
 E-Slope 0.000144981 iteration 54 energy 0 : -12716
 E-Slope 0.00012175 iteration 55 energy 0 : -12711
 E-Slope 0.000128426 iteration 56 energy 0 : -12721.1
 E-Slope 0.000102401 iteration 57 energy 0 : -12714.3
 E-Slope 0.000116713 iteration 58 energy 0 : -12727.1
 E-Slope 0.000101358 iteration 59 energy 0 : -12720.9
 E-Slope 0.00011833 iteration 60 energy 0 : -12731.4
 E-Slope 0.000107631 iteration 61 energy 0 : -12727.3
 E-Slope 0.000127032 iteration 62 energy 0 : -12738.2
 E-Slope 0.000117294 iteration 63 energy 0 : -12733.8
 E-Slope 0.000132859 iteration 64 energy 0 : -12743
 E-Slope 0.0001221 iteration 65 energy 0 : -12738.2
 E-Slope 0.000132106 iteration 66 energy 0 : -12746.4
 E-Slope 0.000121087 iteration 67 energy 0 : -12744
 E-Slope 0.000128806 iteration 68 energy 0 : -12750.9
 E-Slope 0.000117853 iteration 69 energy 0 : -12751.7
 E-Slope 0.000144124 iteration 70 energy 0 : -12767.5
 E-Slope 0.000135042 iteration 71 energy 0 : -12758
 E-Slope 0.000155188 iteration 72 energy 0 : -12771.6
 E-Slope 0.000147536 iteration 73 energy 0 : -12765.1
 E-Slope 0.000161752 iteration 74 energy 0 : -12774.1
 E-Slope 0.000155076 iteration 75 energy 0 : -12772.7
 E-Slope 0.00017824 iteration 76 energy 0 : -12789.2
 E-Slope 0.00016737 iteration 77 energy 0 : -12780.4
 E-Slope 0.000173002 iteration 78 energy 0 : -12789.6
 E-Slope 0.000158064 iteration 79 energy 0 : -12786.4
 E-Slope 0.000150874 iteration 80 energy 0 : -12791.3
 E-Slope 0.000137433 iteration 81 energy 0 : -12793.5
 E-Slope 0.00015875 iteration 82 energy 0 : -12805.8
 E-Slope 0.000144772 iteration 83 energy 0 : -12800.2
 E-Slope 0.000152655 iteration 84 energy 0 : -12806.3
 E-Slope 0.000134014 iteration 85 energy 0 : -12802.6
 E-Slope 0.000128314 iteration 86 energy 0 : -12807.4
 E-Slope 0.000114881 iteration 87 energy 0 : -12810.1
 E-Slope 0.000136159 iteration 88 energy 0 : -12820.8
 E-Slope 0.000123769 iteration 89 energy 0 : -12814.3
 E-Slope 0.000130311 iteration 90 energy 0 : -12822.1
 tired convergence: reached max iterations 
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -76569.8
 iteration 2 energy 0 : -78107.2
 iteration 3 energy 0 : -79729.7
 iteration 4 energy 0 : -81172.3
 iteration 5 energy 0 : -82392.5
 iteration 6 energy 0 : -83356
 iteration 7 energy 0 : -84116.9
 iteration 8 energy 0 : -84772.6
 iteration 9 energy 0 : -85458.1
 iteration 10 energy 0 : -86311
 iteration 11 energy 0 : -87174.1
 iteration 12 energy 0 : -88026
 E-Slope 0.00616749 iteration 13 energy 0 : -88767.9
 E-Slope 0.00566151 iteration 14 energy 0 : -89458.1
 E-Slope 0.00529683 iteration 15 energy 0 : -90061.6
 E-Slope 0.00503241 iteration 16 energy 0 : -90599.8
 E-Slope 0.0048162 iteration 17 energy 0 : -91080
 E-Slope 0.00457702 iteration 18 energy 0 : -91450.8
 E-Slope 0.00427549 iteration 19 energy 0 : -91780.8
 E-Slope 0.00389695 iteration 20 energy 0 : -92064.9
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2946_03032017_Test_NewCases_Aug1_Ref_vimp2_2530_09142016/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2946_03032017_Test_NewCases_Aug1_Ref_vimp2_2530_09142016/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2946_03032017_Test_NewCases_Aug1_Ref_vimp2_2530_09142016/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2946_03032017_Test_NewCases_Aug1_Ref_vimp2_2530_09142016/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2946_03032017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2553_09232016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2946_03032017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2553_09232016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547789030
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [9.95357, 12.0306, 7.5795]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 5.375460886848465, -6.953193642930762, 10.137163318132451]
level 0, iter 1579, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.006873669933815489, 0.060673151830456726, -0.06574339897939613, 0.9959665289552833, 0.9367775393028117, 1.0076315513824368, 0.8615583860560829, -0.03507267040375123, -0.14304483714174823, -0.048155013344503214, 0.1710281055133142, -7.415787593290766, 12.631947026306623]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 1090, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.006806639467754336, 0.08189370920123555, -0.07011766962919633, 0.9941481793264977, 0.9676508980609966, 1.0245185562821304, 0.87198028524398, -0.07032729541151202, -0.20475945453887032, -0.06919662222243178, 0.14156037884655565, -7.727994380011945, 13.062337944291544]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 97, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.01014951219723313, 0.08382676050959124, -0.07061676757249628, 0.9939232031511479, 0.9757147946798204, 1.0286380227857128, 0.8759923007914217, -0.06948563506877901, -0.21318620988722137, -0.06911844405708338, 0.11134231340874112, -7.727566629393119, 12.970966860714226]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 219, size: fix[40, 45, 32]-mov[42, 40, 32], affine para: [0.011427973256867867, 0.0823582485430059, -0.06595755345416786, 0.994352111410495, 0.980237686106662, 1.01570004772937, 0.8869271810739785, -0.07300983160094637, -0.21013526506727723, -0.07151859296723567, 0.07198112766067433, -8.043297375742728, 12.930788476913566]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 685, size: fix[80, 89, 41]-mov[84, 79, 41], affine para: [0.01088244656333474, 0.0819975760152643, -0.06150122426242353, 0.9946735993775246, 0.9884736445795598, 1.022434789784171, 0.8975936690802226, -0.07233151627001519, -0.20936729027198261, -0.07453933507605555, 0.04259094048335809, -8.20654937873027, 12.958344373769677]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 1695, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.03187225069596321, -0.08696610505671319, 0.06236489384487135, 0.9937462836270414, 1.0852020540102991, 0.9520885976707218, 1.058356559907515, 0.02903012149652722, 0.23307557337478965, -0.03536791734967958, -1.5842765078933103, 6.270980449455827, -15.061389238242038]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 90, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.036763191430066795, -0.0876828361030747, 0.06620882117684002, 0.9932656140263644, 1.0750774915073682, 0.9411484301164518, 1.0445382540600991, 0.034767123254059604, 0.24043482961535728, -0.039645731887759696, -1.7605037131255572, 6.113327408115535, -14.987609154966064]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 74, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.033292172340769956, -0.08935548964381824, 0.0660003826408147, 0.993252826435753, 1.0833455533209153, 0.9466307850524731, 1.049250869578994, 0.04044195914056217, 0.24561299553277816, -0.043130773355169405, -1.8658634362201818, 6.190986175503158, -14.99379381067792]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 220, size: fix[42, 40, 32]-mov[40, 45, 32], affine para: [-0.030908583540876857, -0.09051685213504684, 0.06737193106240019, 0.9931326104040596, 1.072413451157609, 0.9476133391919994, 1.0466503352112135, 0.04619514933691525, 0.24526671916271703, -0.0413360630479103, -1.6112384410602048, 6.326406151581714, -14.903757245993564]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 179, size: fix[84, 79, 41]-mov[80, 89, 41], affine para: [-0.0379773607442157, -0.09161673291952144, 0.06418050753802296, 0.9929979641329675, 1.0781430102525462, 0.9612693867946008, 1.0571701056660399, 0.045939286106456104, 0.23937760436743982, -0.04511153207230029, -1.3689741857941633, 6.3921055314304915, -15.144646202344791]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.296945 v2 -0.30044
 last params [0.01088244656333474, 0.0819975760152643, -0.06150122426242353, 0.9946735993775246, 0.9884736445795598, 1.022434789784171, 0.8975936690802226, -0.07233151627001519, -0.20936729027198261, -0.07453933507605555, 0.04259094048335809, -8.20654937873027, 12.958344373769677]
 my params [-0.0379773607442157, -0.09161673291952144, 0.06418050753802296, 0.9929979641329675, 1.0781430102525462, 0.9612693867946008, 1.0571701056660399, 0.045939286106456104, 0.23937760436743982, -0.04511153207230029, -1.3689741857941633, 6.3921055314304915, -15.144646202344791]
A=0.952737 0.0628794 -0.055492 
-0.133331 1.03144 -0.0488631 
-0.176722 0.0602201 0.927314 

rotation R0.974051 0.146213 0.172762 
-0.136314 0.988336 -0.067902 
-0.180675 0.0425902 0.98262 

upper R0.978119 -0.0902314 -0.214934 
0 1.03116 -0.0169123 
0 0 0.904928 

s=0.251736 u=0.0278149 v=0.0889732 w-0.0711222 r=0.993102
m_Rotation from vnl0.0278149 0.0889732 -0.0711222 0.993102
 new params [0.027814919671256454, 0.08897319056957231, -0.07112218905018013, 0.993102077244964, 0.9781188628526611, 1.031164550388879, 0.9049280167075915, -0.09224995988041153, -0.2197423573228421, -0.016401180649204428, 0.06193394206633002, -7.5155928942486145, 13.416974965156111]
outputput affine center: [9.95357, 12.0306, 7.5795]
output affine para: [0.027814919671256454, 0.08897319056957231, -0.07112218905018013, 0.993102077244964, 0.9781188628526611, 1.031164550388879, 0.9049280167075915, -0.09224995988041153, -0.2197423573228421, -0.016401180649204428, 0.06193394206633002, -7.5155928942486145, 13.416974965156111]
initial measure value (MMI): rval = -0.0653768
final measure value (MMI): rval = -0.310219
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -4613.65
 iteration 2 energy 0 : -4840.88
 iteration 3 energy 0 : -5110.06
 iteration 4 energy 0 : -5294.26
 iteration 5 energy 0 : -5423.3
 iteration 6 energy 0 : -5527.37
 iteration 7 energy 0 : -5626.66
 iteration 8 energy 0 : -5733.92
 iteration 9 energy 0 : -5812.13
 iteration 10 energy 0 : -5845.21
 iteration 11 energy 0 : -5839.31
 iteration 12 energy 0 : -5869.77
 E-Slope 0.00901744 iteration 13 energy 0 : -5875.29
 E-Slope 0.00686107 iteration 14 energy 0 : -5905.54
 E-Slope 0.00539544 iteration 15 energy 0 : -5949.42
 E-Slope 0.00428441 iteration 16 energy 0 : -5963.99
 E-Slope 0.00329972 iteration 17 energy 0 : -5949.5
 E-Slope 0.00252405 iteration 18 energy 0 : -5968.01
 E-Slope 0.00195945 iteration 19 energy 0 : -5981.52
 E-Slope 0.00169417 iteration 20 energy 0 : -6003.75
 E-Slope 0.00170894 iteration 21 energy 0 : -6044.23
 E-Slope 0.00173309 iteration 22 energy 0 : -6049.05
 E-Slope 0.00154765 iteration 23 energy 0 : -6027.11
 E-Slope 0.00140256 iteration 24 energy 0 : -6037.93
 E-Slope 0.0011379 iteration 25 energy 0 : -6025.94
 E-Slope 0.000944041 iteration 26 energy 0 : -6041.78
 E-Slope 0.000917405 iteration 27 energy 0 : -6068.72
 E-Slope 0.000903755 iteration 28 energy 0 : -6077.04
 E-Slope 0.000717588 iteration 29 energy 0 : -6057.63
 E-Slope 0.000598125 iteration 30 energy 0 : -6072.48
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -12376.9
 iteration 2 energy 0 : -12634.7
 iteration 3 energy 0 : -12807.9
 iteration 4 energy 0 : -12943.7
 iteration 5 energy 0 : -13040.7
 iteration 6 energy 0 : -13129.3
 iteration 7 energy 0 : -13193.4
 iteration 8 energy 0 : -13246.6
 iteration 9 energy 0 : -13285.8
 iteration 10 energy 0 : -13317
 iteration 11 energy 0 : -13363.7
 iteration 12 energy 0 : -13387
 E-Slope 0.00282013 iteration 13 energy 0 : -13414.1
 E-Slope 0.00227179 iteration 14 energy 0 : -13427.8
 E-Slope 0.00189094 iteration 15 energy 0 : -13466.8
 E-Slope 0.00160083 iteration 16 energy 0 : -13477.6
 E-Slope 0.00137214 iteration 17 energy 0 : -13495
 E-Slope 0.00119178 iteration 18 energy 0 : -13501.9
 E-Slope 0.00108034 iteration 19 energy 0 : -13538.9
 E-Slope 0.000967525 iteration 20 energy 0 : -13535.3
 E-Slope 0.000865713 iteration 21 energy 0 : -13548.1
 E-Slope 0.000750102 iteration 22 energy 0 : -13548.1
 E-Slope 0.000702582 iteration 23 energy 0 : -13581.9
 E-Slope 0.000640973 iteration 24 energy 0 : -13582.7
 E-Slope 0.00059019 iteration 25 energy 0 : -13592.8
 E-Slope 0.00051704 iteration 26 energy 0 : -13591.9
 E-Slope 0.000513971 iteration 27 energy 0 : -13623.9
 E-Slope 0.000488356 iteration 28 energy 0 : -13622.6
 E-Slope 0.000467978 iteration 29 energy 0 : -13631.6
 E-Slope 0.000421993 iteration 30 energy 0 : -13630
 E-Slope 0.000444658 iteration 31 energy 0 : -13658.6
 E-Slope 0.000421867 iteration 32 energy 0 : -13652.7
 E-Slope 0.000419028 iteration 33 energy 0 : -13673
 E-Slope 0.000376739 iteration 34 energy 0 : -13666.8
 E-Slope 0.000392988 iteration 35 energy 0 : -13689.9
 E-Slope 0.000365227 iteration 36 energy 0 : -13677.8
 E-Slope 0.000359438 iteration 37 energy 0 : -13699.3
 E-Slope 0.000307985 iteration 38 energy 0 : -13687
 E-Slope 0.000317089 iteration 39 energy 0 : -13710.3
 E-Slope 0.000283964 iteration 40 energy 0 : -13697.9
 E-Slope 0.000280783 iteration 41 energy 0 : -13722.2
 E-Slope 0.000234902 iteration 42 energy 0 : -13708.9
 E-Slope 0.000253193 iteration 43 energy 0 : -13734.5
 E-Slope 0.000222027 iteration 44 energy 0 : -13719.3
 E-Slope 0.000242651 iteration 45 energy 0 : -13744.3
 E-Slope 0.000214599 iteration 46 energy 0 : -13729.5
 E-Slope 0.000242501 iteration 47 energy 0 : -13754
 E-Slope 0.000213675 iteration 48 energy 0 : -13739.5
 E-Slope 0.000246376 iteration 49 energy 0 : -13769.5
 E-Slope 0.000219382 iteration 50 energy 0 : -13753.5
 E-Slope 0.000242472 iteration 51 energy 0 : -13774.1
 E-Slope 0.000207886 iteration 52 energy 0 : -13759
 E-Slope 0.000239223 iteration 53 energy 0 : -13789
 E-Slope 0.000209041 iteration 54 energy 0 : -13772.6
 E-Slope 0.000231832 iteration 55 energy 0 : -13792.3
 E-Slope 0.000193186 iteration 56 energy 0 : -13777
 E-Slope 0.000221126 iteration 57 energy 0 : -13805.9
 E-Slope 0.000186615 iteration 58 energy 0 : -13789.3
 E-Slope 0.000210054 iteration 59 energy 0 : -13812.7
 E-Slope 0.00017228 iteration 60 energy 0 : -13796
 E-Slope 0.000206038 iteration 61 energy 0 : -13822.4
 E-Slope 0.000175737 iteration 62 energy 0 : -13804.9
 E-Slope 0.000193819 iteration 63 energy 0 : -13825.1
 E-Slope 0.000151694 iteration 64 energy 0 : -13808.9
 E-Slope 0.000185587 iteration 65 energy 0 : -13837.6
 E-Slope 0.000157408 iteration 66 energy 0 : -13820.9
 E-Slope 0.000181191 iteration 67 energy 0 : -13843.6
 E-Slope 0.000143632 iteration 68 energy 0 : -13826.2
 E-Slope 0.000175744 iteration 69 energy 0 : -13851.2
 E-Slope 0.000145286 iteration 70 energy 0 : -13833.8
 E-Slope 0.000172436 iteration 71 energy 0 : -13856.3
 E-Slope 0.000137508 iteration 72 energy 0 : -13839.3
 E-Slope 0.000165798 iteration 73 energy 0 : -13862.1
 E-Slope 0.000131994 iteration 74 energy 0 : -13845.3
 E-Slope 0.000150263 iteration 75 energy 0 : -13866.4
 E-Slope 0.000109099 iteration 76 energy 0 : -13849.7
 E-Slope 0.000134587 iteration 77 energy 0 : -13871.4
 E-Slope 0.000101767 iteration 78 energy 0 : -13855
 E-Slope 0.000127502 iteration 79 energy 0 : -13876.7
 E-Slope 9.46e-05 iteration 80 energy 0 : -13860.6
 Converged due to oscillation in optimization  metric 0 bad 29  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -87276.9
 iteration 2 energy 0 : -88925.3
 iteration 3 energy 0 : -90636.8
 iteration 4 energy 0 : -91935.3
 iteration 5 energy 0 : -93025.8
 iteration 6 energy 0 : -93992.5
 iteration 7 energy 0 : -94882.4
 iteration 8 energy 0 : -95734.5
 iteration 9 energy 0 : -96566.4
 iteration 10 energy 0 : -97434.3
 iteration 11 energy 0 : -98273.2
 iteration 12 energy 0 : -99083.5
 E-Slope 0.00569621 iteration 13 energy 0 : -99812.9
 E-Slope 0.00525336 iteration 14 energy 0 : -100483
 E-Slope 0.00485735 iteration 15 energy 0 : -100687
 E-Slope 0.00437558 iteration 16 energy 0 : -100536
 E-Slope 0.00387841 iteration 17 energy 0 : -100786
 E-Slope 0.00329331 iteration 18 energy 0 : -100662
 E-Slope 0.00272581 iteration 19 energy 0 : -100950
 E-Slope 0.00211697 iteration 20 energy 0 : -100803
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2946_03032017_Test_NewCases_Aug2_Ref_vimp2_2553_09232016_Test_NewCases/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2946_03032017_Test_NewCases_Aug2_Ref_vimp2_2553_09232016_Test_NewCases/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2946_03032017_Test_NewCases_Aug2_Ref_vimp2_2553_09232016_Test_NewCases/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2946_03032017_Test_NewCases_Aug2_Ref_vimp2_2553_09232016_Test_NewCases/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2948_03042017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2617_10262016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2948_03042017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2617_10262016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547789186
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [12.5535, 6.73703, -29.5208]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -0.8353435683637365, -19.57156914867769, 37.708592433545235]
level 0, iter 864, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.18909641182002854, 0.021953248262639256, 0.04267861783208612, 0.9807849598701296, 1.0631744480775032, 1.0415987562822733, 0.9627587842185166, -0.07731920569570476, -0.007936721004816294, -0.003232437316950878, -0.09879723840630764, -17.48978183615327, 34.63417227872306]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 158, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.1836849024336388, 0.023828155902895488, 0.04004237445384803, 0.981880177950604, 1.0685610597545643, 1.0431557888922256, 0.9604906561740651, -0.08923477910712163, -0.010150031290593262, 0.004864604576195402, -0.09028062927715082, -17.37267300253887, 34.61067065657272]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 129, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.1887736119756789, 0.0225538306980386, 0.03839019898312996, 0.9810107240823291, 1.063563236221508, 1.041696589184358, 0.9540005634656297, -0.09185649714467323, -0.00819968304730519, 0.010272814702188132, -0.0027887411145540537, -17.475209188109428, 34.637883861667554]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 67, size: fix[37, 46, 36]-mov[40, 41, 32], affine para: [0.18692597843334013, 0.0201586719534476, 0.03819930063548229, 0.9814240265872708, 1.068029296822639, 1.0469747049743559, 0.9546994179052728, -0.09524664907811428, -0.00562700947328842, 0.01625764835548446, -0.15670024577710237, -17.2859181647217, 34.52529599256988]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 47, size: fix[73, 91, 51]-mov[79, 82, 39], affine para: [0.18593900781838446, 0.01984485228055197, 0.03926243076771543, 0.9815759414022371, 1.0538504796065926, 1.039416633402466, 0.9432655429569997, -0.09808407265148325, -0.0007298582622523427, 0.019989622052153506, -0.1743771194330292, -17.225624842707386, 34.59823550365683]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 2376, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.20846195094185657, -0.0216486879807248, -0.03800085487986445, 0.9770521400348231, 0.9302828906641436, 0.985448777360014, 1.0078019964202143, 0.08415326902284401, 0.04308263082080686, -0.08614549169057749, 2.628134098237443, 3.970229760856704, -39.92773471626165]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 686, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.20660355951605006, -0.023170282281461566, -0.035536259127628304, 0.9775046196829503, 0.9259454721872342, 0.9814197075905382, 1.013809112621532, 0.08765462820508275, 0.05193300364560804, -0.1027365687127066, 2.5267646153016696, 4.484536144376351, -40.14064969112653]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 965, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.20447203125015634, -0.022112391326148447, -0.03379393851261147, 0.9780389564358263, 0.927026790790079, 0.9897481350819395, 1.0150803280538692, 0.08788161080971585, 0.052370724978724616, -0.10526249210239695, 2.3533366581822155, 4.785153182717501, -40.20939544375981]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 755, size: fix[40, 41, 32]-mov[37, 46, 36], affine para: [-0.2024943461110389, -0.02214886962535588, -0.030485831843795882, 0.9785581645585374, 0.9283238065138387, 0.9814122471764006, 1.0128653998434094, 0.09217498210798135, 0.056210793621495385, -0.09952675422923654, 2.136603525524981, 4.667502549499593, -39.88470492227568]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 894, size: fix[79, 82, 39]-mov[73, 91, 51], affine para: [-0.1986497835828129, -0.019061761157783557, -0.031646219519649244, 0.9793739988044298, 0.9350536458468497, 0.9792468974506133, 1.0164208816018614, 0.10600407809617869, 0.04658229720969931, -0.08196981576008235, 2.5752975956369526, 4.4559771961328885, -39.71770083059113]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.486654 v2 -0.480061
final [0.18593900781838446, 0.01984485228055197, 0.03926243076771543, 0.9815759414022371, 1.0538504796065926, 1.039416633402466, 0.9432655429569997, -0.09808407265148325, -0.0007298582622523427, 0.019989622052153506, -0.1743771194330292, -17.225624842707386, 34.59823550365683]
outputput affine center: [12.5535, 6.73703, -29.5208]
output affine para: [0.18593900781838446, 0.01984485228055197, 0.03926243076771543, 0.9815759414022371, 1.0538504796065926, 1.039416633402466, 0.9432655429569997, -0.09808407265148325, -0.0007298582622523427, 0.019989622052153506, -0.1743771194330292, -17.225624842707386, 34.59823550365683]
initial measure value (MMI): rval = -0.115812
final measure value (MMI): rval = -0.482635
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -5409.42
 iteration 2 energy 0 : -5848.44
 iteration 3 energy 0 : -6211.41
 iteration 4 energy 0 : -6505.98
 iteration 5 energy 0 : -6708.85
 iteration 6 energy 0 : -6856.32
 iteration 7 energy 0 : -6965.42
 iteration 8 energy 0 : -7042.03
 iteration 9 energy 0 : -7100.99
 iteration 10 energy 0 : -7157.08
 iteration 11 energy 0 : -7201.09
 iteration 12 energy 0 : -7241.81
 E-Slope 0.00946132 iteration 13 energy 0 : -7256.78
 E-Slope 0.00695977 iteration 14 energy 0 : -7264.15
 E-Slope 0.00521357 iteration 15 energy 0 : -7305.11
 E-Slope 0.00398882 iteration 16 energy 0 : -7308.24
 E-Slope 0.00306501 iteration 17 energy 0 : -7303.8
 E-Slope 0.00236715 iteration 18 energy 0 : -7309.26
 E-Slope 0.00184795 iteration 19 energy 0 : -7321.32
 E-Slope 0.00143125 iteration 20 energy 0 : -7327.37
 E-Slope 0.00112037 iteration 21 energy 0 : -7343.08
 E-Slope 0.000889689 iteration 22 energy 0 : -7344.94
 E-Slope 0.000737041 iteration 23 energy 0 : -7351.87
 E-Slope 0.000653908 iteration 24 energy 0 : -7354.62
 E-Slope 0.000596657 iteration 25 energy 0 : -7365.69
 E-Slope 0.000518188 iteration 26 energy 0 : -7367.12
 E-Slope 0.000542603 iteration 27 energy 0 : -7376.96
 E-Slope 0.000548668 iteration 28 energy 0 : -7380.51
 E-Slope 0.000515521 iteration 29 energy 0 : -7384.25
 E-Slope 0.000467248 iteration 30 energy 0 : -7386.31
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -15965.9
 iteration 2 energy 0 : -16269.5
 iteration 3 energy 0 : -16479.5
 iteration 4 energy 0 : -16666.8
 iteration 5 energy 0 : -16855.3
 iteration 6 energy 0 : -17020
 iteration 7 energy 0 : -17199.6
 iteration 8 energy 0 : -17333.1
 iteration 9 energy 0 : -17404.5
 iteration 10 energy 0 : -17411.4
 iteration 11 energy 0 : -17398
 iteration 12 energy 0 : -17466.5
 E-Slope 0.0036537 iteration 13 energy 0 : -17443.8
 E-Slope 0.00288389 iteration 14 energy 0 : -17473.3
 E-Slope 0.00216895 iteration 15 energy 0 : -17474
 E-Slope 0.00150765 iteration 16 energy 0 : -17456
 E-Slope 0.00108136 iteration 17 energy 0 : -17559
 E-Slope 0.000720359 iteration 18 energy 0 : -17520.9
 E-Slope 0.000547238 iteration 19 energy 0 : -17550.3
 E-Slope 0.000455081 iteration 20 energy 0 : -17521.4
 E-Slope 0.000499673 iteration 21 energy 0 : -17595
 E-Slope 0.00048919 iteration 22 energy 0 : -17571.7
 E-Slope 0.000450231 iteration 23 energy 0 : -17591.4
 E-Slope 0.000452422 iteration 24 energy 0 : -17585.2
 E-Slope 0.000423342 iteration 25 energy 0 : -17607.1
 E-Slope 0.00039801 iteration 26 energy 0 : -17605.8
 E-Slope 0.000377841 iteration 27 energy 0 : -17633.5
 E-Slope 0.00032635 iteration 28 energy 0 : -17650.5
 E-Slope 0.000368617 iteration 29 energy 0 : -17648.4
 E-Slope 0.000340119 iteration 30 energy 0 : -17646
 E-Slope 0.000404187 iteration 31 energy 0 : -17717.5
 E-Slope 0.000348985 iteration 32 energy 0 : -17669.8
 E-Slope 0.000430807 iteration 33 energy 0 : -17736.2
 E-Slope 0.000431038 iteration 34 energy 0 : -17715.1
 E-Slope 0.000423968 iteration 35 energy 0 : -17713.6
 E-Slope 0.000395052 iteration 36 energy 0 : -17725.9
 E-Slope 0.000359386 iteration 37 energy 0 : -17722
 E-Slope 0.000308976 iteration 38 energy 0 : -17733
 E-Slope 0.000273839 iteration 39 energy 0 : -17737.9
 E-Slope 0.000248827 iteration 40 energy 0 : -17745.8
 E-Slope 0.000223853 iteration 41 energy 0 : -17762.8
 E-Slope 0.000183396 iteration 42 energy 0 : -17767
 E-Slope 0.000221506 iteration 43 energy 0 : -17775
 E-Slope 0.000195041 iteration 44 energy 0 : -17780.7
 E-Slope 0.000222847 iteration 45 energy 0 : -17773.6
 E-Slope 0.000225492 iteration 46 energy 0 : -17785.5
 E-Slope 0.000235565 iteration 47 energy 0 : -17807.8
 E-Slope 0.000248045 iteration 48 energy 0 : -17812.6
 E-Slope 0.0002243 iteration 49 energy 0 : -17799.2
 E-Slope 0.000221916 iteration 50 energy 0 : -17819.9
 E-Slope 0.000184834 iteration 51 energy 0 : -17797.9
 E-Slope 0.000157505 iteration 52 energy 0 : -17809.8
 E-Slope 0.000158228 iteration 53 energy 0 : -17828
 E-Slope 0.000159554 iteration 54 energy 0 : -17834.9
 E-Slope 0.000147663 iteration 55 energy 0 : -17824.7
 E-Slope 0.000146851 iteration 56 energy 0 : -17836.5
 E-Slope 0.000135362 iteration 57 energy 0 : -17843.2
 E-Slope 0.000147015 iteration 58 energy 0 : -17861.4
 E-Slope 0.000151411 iteration 59 energy 0 : -17842.3
 E-Slope 0.00016848 iteration 60 energy 0 : -17857
 E-Slope 0.000153884 iteration 61 energy 0 : -17852.6
 E-Slope 0.000180848 iteration 62 energy 0 : -17877.4
 E-Slope 0.000141852 iteration 63 energy 0 : -17852.7
 E-Slope 0.000124216 iteration 64 energy 0 : -17868.3
 E-Slope 0.000129357 iteration 65 energy 0 : -17878.1
 E-Slope 0.000140958 iteration 66 energy 0 : -17884.6
 E-Slope 0.000113733 iteration 67 energy 0 : -17869.2
 E-Slope 0.000105798 iteration 68 energy 0 : -17881.2
 E-Slope 0.000105813 iteration 69 energy 0 : -17888.4
 E-Slope 0.000115551 iteration 70 energy 0 : -17885
 E-Slope 0.000111014 iteration 71 energy 0 : -17898.7
 E-Slope 0.000102602 iteration 72 energy 0 : -17887.5
 E-Slope 9.9957e-05 iteration 73 energy 0 : -17903.2
 Converged due to oscillation in optimization  metric 0 bad 24  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -120797
 iteration 2 energy 0 : -122680
 iteration 3 energy 0 : -124411
 iteration 4 energy 0 : -125849
 iteration 5 energy 0 : -127177
 iteration 6 energy 0 : -128599
 iteration 7 energy 0 : -130166
 iteration 8 energy 0 : -131435
 iteration 9 energy 0 : -132448
 iteration 10 energy 0 : -133219
 iteration 11 energy 0 : -133848
 iteration 12 energy 0 : -134400
 E-Slope 0.00501353 iteration 13 energy 0 : -134880
 E-Slope 0.00443009 iteration 14 energy 0 : -135325
 E-Slope 0.00387219 iteration 15 energy 0 : -135695
 E-Slope 0.00331428 iteration 16 energy 0 : -135957
 E-Slope 0.00277074 iteration 17 energy 0 : -136197
 E-Slope 0.00228369 iteration 18 energy 0 : -136404
 E-Slope 0.00190452 iteration 19 energy 0 : -136603
 E-Slope 0.00160892 iteration 20 energy 0 : -136777
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2948_03042017_Test_NewCases_Aug1_Ref_vimp2_2617_10262016/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2948_03042017_Test_NewCases_Aug1_Ref_vimp2_2617_10262016/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2948_03042017_Test_NewCases_Aug1_Ref_vimp2_2617_10262016/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2948_03042017_Test_NewCases_Aug1_Ref_vimp2_2617_10262016/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2948_03042017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2598_10192016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2948_03042017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2598_10192016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547789353
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [12.5535, 6.73703, -29.5208]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -0.37400555607084485, -7.43567124777339, 30.783407737300628]
level 0, iter 1662, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.10855729413321825, -0.030320881522816645, -0.0025417215988663, 0.9936244248635735, 1.089513149574007, 1.0840593410988564, 1.173292752195168, -0.05977339825779667, -0.0028529924851649273, 0.029840035087164606, 1.5731815768678292, -2.900185632963232, 28.97927324140066]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 323, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.11589026336047173, -0.0321595221394142, -0.0012773983054614497, 0.9927404395145664, 1.0826865051281978, 1.073521735980827, 1.1757158437344242, -0.07408340619551265, 0.0006596829183295231, 0.044286189801715864, 1.5966469622661155, -2.8337903908294324, 29.022613619326826]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 286, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.11890352023781198, -0.035000623520684886, -0.0032255562436070027, 0.9922834801684138, 1.0763004628000743, 1.0522838812766182, 1.1751804020524903, -0.08550993102409282, 0.010812566914982027, 0.059942356892760604, 1.6391022472742045, -2.8266096021450884, 28.90038937361642]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 373, size: fix[37, 46, 36]-mov[42, 46, 32], affine para: [0.12543673694560187, -0.034737631990931786, -0.00011989137207138517, 0.9914932715728136, 1.0771525788559868, 1.0309601479182895, 1.1728671183744463, -0.08817247663146328, 0.01642643397971147, 0.07523187078717833, 1.4564976661808917, -3.028022314442312, 29.00484827283633]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 138, size: fix[73, 91, 51]-mov[83, 92, 42], affine para: [0.12954225673564942, -0.03356415438735023, -0.004531088543484045, 0.9909953181002967, 1.077674449916685, 1.0289387545655997, 1.1881849096521337, -0.09712727165086556, 0.022981305266711435, 0.08942902163429296, 1.5006298499052333, -3.0438618088676184, 28.464347914338884]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 700, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.1151885888281401, 0.02704761279008841, -0.0005054578708849474, 0.9929752062153817, 0.9177801517183036, 0.9624310087399518, 0.849291427728323, 0.08324739791183214, 0.02192866568452269, -0.017593100285932726, -3.0786197775835955, -2.224115728578042, -24.53301498510976]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 1974, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.12277905015936834, 0.028130089749070587, 0.00801732763475634, 0.992002885757027, 0.9074310664256272, 1.020089837714235, 0.8426931321329628, 0.13334738843450947, 0.014876848916729163, -0.04455031389471011, -2.831758672479437, -1.503588264803187, -24.321530890265155]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 189, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.12655509017051542, 0.030268543150494088, 0.004654113359637059, 0.9914867440749348, 0.9062946252759663, 1.0150457411983882, 0.8355256086869702, 0.1281027268408598, 0.013406162095270001, -0.038104832014024356, -2.7167985081183197, -1.7779764384616594, -24.314101998332777]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 329, size: fix[42, 46, 32]-mov[37, 46, 36], affine para: [-0.12415056438882714, 0.028978125512819915, 0.00035915471021945257, 0.9918400962915309, 0.9135210884237918, 1.0229913569446671, 0.8387850615936405, 0.12996301710640626, 0.008696962355243055, -0.04101841000395152, -2.549521816181908, -1.523781431678693, -24.444749351564216]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 305, size: fix[83, 92, 42]-mov[73, 91, 51], affine para: [-0.12537786257925465, 0.034438635574529766, 0.00410635282691499, 0.9915026524529741, 0.910909192026063, 1.0207062542919778, 0.8331663346062728, 0.1258974068115153, 0.00176286765910863, -0.05434792593440952, -2.6306888606875263, -1.2679346872062567, -24.1009387993514]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.465623 v2 -0.481855
 last params [0.12954225673564942, -0.03356415438735023, -0.004531088543484045, 0.9909953181002967, 1.077674449916685, 1.0289387545655997, 1.1881849096521337, -0.09712727165086556, 0.022981305266711435, 0.08942902163429296, 1.5006298499052333, -3.0438618088676184, 28.464347914338884]
 my params [-0.12537786257925465, 0.034438635574529766, 0.00410635282691499, 0.9915026524529741, 0.910909192026063, 1.0207062542919778, 0.8331663346062728, 0.1258974068115153, 0.00176286765910863, -0.05434792593440952, -2.6306888606875263, -1.2679346872062567, -24.1009387993514]
A=1.09654 -0.122573 -0.0554493 
-0.0120507 0.965116 -0.180279 
0.0807309 0.298749 1.15966 

rotation R0.997241 -0.0118631 -0.0732798 
-0.0109594 0.952803 -0.303391 
0.0734203 0.303357 0.950044 

upper R1.09957 -0.110878 0.031822 
0 1.01165 0.180678 
0 0 1.16049 

s=0.253182 u=0.153618 v=-0.0371418 w0.000228799 r=0.987432
m_Rotation from vnl0.153618 -0.0371418 0.000228799 0.987432
 new params [0.15361750537129784, -0.037141818978807334, 0.0002287988710870806, 0.9874320710699656, 1.0995719085296243, 1.0116470505675603, 1.1604856390467266, -0.10083726601543952, 0.02894035951137155, 0.1785974070709201, 1.3928556238820637, -3.152894817726356, 28.540040362516237]
outputput affine center: [12.5535, 6.73703, -29.5208]
output affine para: [0.15361750537129784, -0.037141818978807334, 0.0002287988710870806, 0.9874320710699656, 1.0995719085296243, 1.0116470505675603, 1.1604856390467266, -0.10083726601543952, 0.02894035951137155, 0.1785974070709201, 1.3928556238820637, -3.152894817726356, 28.540040362516237]
initial measure value (MMI): rval = -0.189231
final measure value (MMI): rval = -0.499773
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -4531.48
 iteration 2 energy 0 : -4881.65
 iteration 3 energy 0 : -5282.46
 iteration 4 energy 0 : -5629.56
 iteration 5 energy 0 : -5902.17
 iteration 6 energy 0 : -6093.25
 iteration 7 energy 0 : -6234.01
 iteration 8 energy 0 : -6339.68
 iteration 9 energy 0 : -6438.9
 iteration 10 energy 0 : -6524.41
 iteration 11 energy 0 : -6599.3
 iteration 12 energy 0 : -6672.4
 E-Slope 0.0143301 iteration 13 energy 0 : -6754.02
 E-Slope 0.0113791 iteration 14 energy 0 : -6827.38
 E-Slope 0.00926735 iteration 15 energy 0 : -6890.15
 E-Slope 0.00783797 iteration 16 energy 0 : -6939.5
 E-Slope 0.00686517 iteration 17 energy 0 : -6975.87
 E-Slope 0.00600092 iteration 18 energy 0 : -6965.91
 E-Slope 0.00521496 iteration 19 energy 0 : -6981.03
 E-Slope 0.00438263 iteration 20 energy 0 : -6975.21
 E-Slope 0.00362452 iteration 21 energy 0 : -6999.55
 E-Slope 0.00286242 iteration 22 energy 0 : -6994.98
 E-Slope 0.0022104 iteration 23 energy 0 : -7023.22
 E-Slope 0.0015993 iteration 24 energy 0 : -7015.69
 E-Slope 0.00121331 iteration 25 energy 0 : -7049.7
 E-Slope 0.00092534 iteration 26 energy 0 : -7040.75
 E-Slope 0.000870764 iteration 27 energy 0 : -7082.82
 E-Slope 0.000856765 iteration 28 energy 0 : -7070.45
 E-Slope 0.00100242 iteration 29 energy 0 : -7110.02
 E-Slope 0.00100036 iteration 30 energy 0 : -7093.15
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -15286.8
 iteration 2 energy 0 : -15643.2
 iteration 3 energy 0 : -15908.8
 iteration 4 energy 0 : -16100.4
 iteration 5 energy 0 : -16304.4
 iteration 6 energy 0 : -16441.4
 iteration 7 energy 0 : -16569
 iteration 8 energy 0 : -16578.6
 iteration 9 energy 0 : -16680.6
 iteration 10 energy 0 : -16676.1
 iteration 11 energy 0 : -16763.7
 iteration 12 energy 0 : -16755.3
 E-Slope 0.00337576 iteration 13 energy 0 : -16834.4
 E-Slope 0.00259815 iteration 14 energy 0 : -16804.9
 E-Slope 0.00208084 iteration 15 energy 0 : -16896.6
 E-Slope 0.0016235 iteration 16 energy 0 : -16874.9
 E-Slope 0.00138121 iteration 17 energy 0 : -16943.6
 E-Slope 0.00114477 iteration 18 energy 0 : -16892.8
 E-Slope 0.00111762 iteration 19 energy 0 : -17004.2
 E-Slope 0.000986859 iteration 20 energy 0 : -16976.4
 E-Slope 0.000958875 iteration 21 energy 0 : -17016.5
 E-Slope 0.000808299 iteration 22 energy 0 : -16974.7
 E-Slope 0.000813842 iteration 23 energy 0 : -17063.5
 E-Slope 0.000711508 iteration 24 energy 0 : -17031.5
 E-Slope 0.000710957 iteration 25 energy 0 : -17078.4
 E-Slope 0.000576414 iteration 26 energy 0 : -17038.3
 E-Slope 0.00059858 iteration 27 energy 0 : -17110.7
 E-Slope 0.000531651 iteration 28 energy 0 : -17094.1
 E-Slope 0.000535913 iteration 29 energy 0 : -17115.4
 E-Slope 0.000398822 iteration 30 energy 0 : -17080.1
 E-Slope 0.000448532 iteration 31 energy 0 : -17148.9
 E-Slope 0.00037884 iteration 32 energy 0 : -17103.1
 E-Slope 0.000411771 iteration 33 energy 0 : -17170.9
 E-Slope 0.000318781 iteration 34 energy 0 : -17133.1
 E-Slope 0.000373214 iteration 35 energy 0 : -17186.7
 E-Slope 0.000305004 iteration 36 energy 0 : -17137
 E-Slope 0.000332318 iteration 37 energy 0 : -17187.2
 E-Slope 0.000286177 iteration 38 energy 0 : -17187.3
 E-Slope 0.000309043 iteration 39 energy 0 : -17190.7
 E-Slope 0.000272073 iteration 40 energy 0 : -17173.9
 E-Slope 0.000291593 iteration 41 energy 0 : -17215.1
 E-Slope 0.000200674 iteration 42 energy 0 : -17175.1
 E-Slope 0.000233747 iteration 43 energy 0 : -17222.4
 E-Slope 0.000172012 iteration 44 energy 0 : -17203.5
 E-Slope 0.000219099 iteration 45 energy 0 : -17238
 E-Slope 0.000163183 iteration 46 energy 0 : -17201.6
 E-Slope 0.000214696 iteration 47 energy 0 : -17247.3
 E-Slope 0.000175327 iteration 48 energy 0 : -17233.9
 E-Slope 0.00020735 iteration 49 energy 0 : -17255.4
 E-Slope 0.000195332 iteration 50 energy 0 : -17229.8
 E-Slope 0.000228077 iteration 51 energy 0 : -17275.2
 E-Slope 0.000195421 iteration 52 energy 0 : -17250.8
 E-Slope 0.000245303 iteration 53 energy 0 : -17290.6
 E-Slope 0.000185318 iteration 54 energy 0 : -17252.4
 E-Slope 0.000232205 iteration 55 energy 0 : -17306.5
 E-Slope 0.000198841 iteration 56 energy 0 : -17271.6
 E-Slope 0.000249453 iteration 57 energy 0 : -17319.5
 E-Slope 0.000184156 iteration 58 energy 0 : -17272.8
 E-Slope 0.000232138 iteration 59 energy 0 : -17334.1
 E-Slope 0.000202201 iteration 60 energy 0 : -17295.5
 E-Slope 0.00023514 iteration 61 energy 0 : -17338.7
 E-Slope 0.000165284 iteration 62 energy 0 : -17291.2
 E-Slope 0.000212826 iteration 63 energy 0 : -17355.2
 E-Slope 0.000157163 iteration 64 energy 0 : -17305.1
 E-Slope 0.000206456 iteration 65 energy 0 : -17363.3
 E-Slope 0.000125095 iteration 66 energy 0 : -17303.2
 E-Slope 0.000177108 iteration 67 energy 0 : -17369.3
 E-Slope 0.000119813 iteration 68 energy 0 : -17322.5
 E-Slope 0.000160277 iteration 69 energy 0 : -17364.1
 E-Slope 7.59289e-05 iteration 70 energy 0 : -17314.5
 Converged due to oscillation in optimization  metric 0 bad 30  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -118882
 iteration 2 energy 0 : -121043
 iteration 3 energy 0 : -123087
 iteration 4 energy 0 : -124928
 iteration 5 energy 0 : -126813
 iteration 6 energy 0 : -128507
 iteration 7 energy 0 : -130010
 iteration 8 energy 0 : -131135
 iteration 9 energy 0 : -132145
 iteration 10 energy 0 : -133092
 iteration 11 energy 0 : -133946
 iteration 12 energy 0 : -134659
 E-Slope 0.00569075 iteration 13 energy 0 : -135302
 E-Slope 0.00491508 iteration 14 energy 0 : -135317
 E-Slope 0.00413379 iteration 15 energy 0 : -135328
 E-Slope 0.0033633 iteration 16 energy 0 : -135345
 E-Slope 0.00267626 iteration 17 energy 0 : -135498
 E-Slope 0.00206646 iteration 18 energy 0 : -135523
 E-Slope 0.00158066 iteration 19 energy 0 : -135783
 E-Slope 0.00115155 iteration 20 energy 0 : -135761
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2948_03042017_Test_NewCases_Aug2_Ref_vimp2_2598_10192016_Test_NewCases/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2948_03042017_Test_NewCases_Aug2_Ref_vimp2_2598_10192016_Test_NewCases/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2948_03042017_Test_NewCases_Aug2_Ref_vimp2_2598_10192016_Test_NewCases/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2948_03042017_Test_NewCases_Aug2_Ref_vimp2_2598_10192016_Test_NewCases/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2951_03062017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2554_09282016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2951_03062017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2554_09282016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547789512
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [11.105, -3.82371, -5.08058]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 1.2064488245048963, 13.283519544396393, 13.98133974767828]
level 0, iter 200, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.04604761479690216, 0.00045580909197130216, -0.02752868645439041, 0.9985597532605066, 1.0259377805713497, 1.0227345790536186, 1.0398246440953705, -0.003208170068603018, -0.0018896700767157416, -0.02854669033942077, -0.37864071982395214, 13.989301750632942, 14.602407407346979]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 325, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.040595739636686945, 0.002614546268319586, -0.026552657729820413, 0.9988193562595011, 1.0148508114442112, 1.0378378786514475, 1.0544268213326289, -0.02287917386295769, -0.0039494585955730955, -0.052567254140120825, -0.49393364069268664, 13.860945753258418, 14.787651993733894]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 104, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.04095895488542441, -0.003430048877514583, -0.026073068627186127, 0.9988146944612668, 1.0165901657710035, 1.0335140291165743, 1.0485324965236804, -0.024069323485503474, -0.00800003655349642, -0.05684430582955794, -0.5655827019464453, 13.841415716997842, 14.62787686057877]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 52, size: fix[36, 40, 33]-mov[36, 39, 32], affine para: [0.03707136116060493, -0.00025982386059835816, -0.03049687314599032, 0.9988471291451855, 1.0207559200056617, 1.02948660937823, 1.046799609481668, -0.021920826365299986, -0.004976715273431514, -0.062116204207944475, -0.5034743765557077, 13.80121578218573, 14.537289181893417]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 55, size: fix[71, 80, 47]-mov[72, 78, 38], affine para: [0.036447574486953106, 0.0035556593467263313, -0.0284413456090006, 0.998924432307358, 1.0206858744304463, 1.0227027663072044, 1.039534645292578, -0.021746598343296557, -0.004843721069467857, -0.06250326355275665, -0.3415987384997396, 13.894088650874172, 14.707761571002566]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 925, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.04115176816458789, -0.021628271970580898, 0.009738600231846212, 0.9988713177852385, 0.9770717379140451, 0.9496107284365983, 0.9294891681625227, 0.005129093264497067, 0.04991221059095759, 0.10585382292489574, 0.4903393600769646, -15.158779502871408, -13.28698025979233]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 44, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.04086652720732709, -0.018466199029509373, 0.008996584330125422, 0.9989534463216022, 0.9755843814009245, 0.9477715285463517, 0.9313102789694501, 0.006512635079945127, 0.05148957148420192, 0.10651212573157295, 0.49993019548172873, -15.238756697642803, -13.176232833843317]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 46, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.039263197696266586, -0.022204380313630704, 0.007984004381852306, 0.9989502602610313, 0.9787938222543853, 0.9497046928993985, 0.9298694874910867, 0.006082605640476099, 0.05312214953449426, 0.10618425743776096, 0.4377593582061508, -15.228720327575404, -13.324907552578164]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 527, size: fix[36, 39, 32]-mov[36, 40, 33], affine para: [-0.029921489992008464, -0.020830800787990357, 0.010817780984681455, 0.9992766172535794, 0.9716720880987691, 0.9670057131226614, 0.9453073075066524, -0.001873961042155504, 0.052143587130361525, 0.13620844359462048, 0.7301123560849108, -15.40836973576965, -13.645497394635573]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 231, size: fix[72, 78, 38]-mov[71, 80, 47], affine para: [-0.029976956394431445, -0.01650350999816668, 0.015221931782329823, 0.9992984084025558, 0.9697451376761878, 0.9639585097930902, 0.940620877758154, 0.0014107369556068195, 0.04445600600365388, 0.12551616298712095, 0.7510086589701153, -15.18619049493015, -13.403780507677332]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.319129 v2 -0.350319
 last params [0.036447574486953106, 0.0035556593467263313, -0.0284413456090006, 0.998924432307358, 1.0206858744304463, 1.0227027663072044, 1.039534645292578, -0.021746598343296557, -0.004843721069467857, -0.06250326355275665, -0.3415987384997396, 13.894088650874172, 14.707761571002566]
 my params [-0.029976956394431445, -0.01650350999816668, 0.015221931782329823, 0.9992984084025558, 0.9697451376761878, 0.9639585097930902, 0.940620877758154, 0.0014107369556068195, 0.04445600600365388, 0.12551616298712095, 0.7510086589701153, -15.18619049493015, -13.403780507677332]
A=1.0318 0.0281351 -0.0138037 
-0.0260104 1.02712 -0.1958 
-0.0360363 0.0631598 1.06064 

rotation R0.999074 0.0272948 0.0332694 
-0.0251855 0.997743 -0.0622503 
-0.0348934 0.0613547 0.997506 

upper R1.03275 3.68358e-05 -0.0458688 
0 1.02944 -0.13066 
0 0 1.06972 

s=0.250178 u=0.0309232 v=0.0170528 w-0.0131294 r=0.99929
m_Rotation from vnl0.0309232 0.0170528 -0.0131294 0.99929
 new params [0.030923215088984483, 0.017052785119320943, -0.013129374969472873, 0.9992900363763995, 1.0327545992385376, 1.029440933383268, 1.0697218406563807, 0.00003566749286353817, -0.044414012283708657, -0.12692320453968683, -0.5326447618859691, 12.99305360905587, 15.202776091217292]
outputput affine center: [11.105, -3.82371, -5.08058]
output affine para: [0.030923215088984483, 0.017052785119320943, -0.013129374969472873, 0.9992900363763995, 1.0327545992385376, 1.029440933383268, 1.0697218406563807, 0.00003566749286353817, -0.044414012283708657, -0.12692320453968683, -0.5326447618859691, 12.99305360905587, 15.202776091217292]
initial measure value (MMI): rval = -0.230762
final measure value (MMI): rval = -0.352604
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -4056.86
 iteration 2 energy 0 : -4298.68
 iteration 3 energy 0 : -4470.97
 iteration 4 energy 0 : -4598.03
 iteration 5 energy 0 : -4698.54
 iteration 6 energy 0 : -4791.72
 iteration 7 energy 0 : -4890.44
 iteration 8 energy 0 : -5005.12
 iteration 9 energy 0 : -5092.88
 iteration 10 energy 0 : -5157.07
 iteration 11 energy 0 : -5206.84
 iteration 12 energy 0 : -5244.91
 E-Slope 0.0103541 iteration 13 energy 0 : -5265.31
 E-Slope 0.00871014 iteration 14 energy 0 : -5256.16
 E-Slope 0.0074112 iteration 15 energy 0 : -5304.78
 E-Slope 0.00613289 iteration 16 energy 0 : -5301.38
 E-Slope 0.00491808 iteration 17 energy 0 : -5316.26
 E-Slope 0.00373291 iteration 18 energy 0 : -5311.47
 E-Slope 0.002854 iteration 19 energy 0 : -5355.78
 E-Slope 0.00219344 iteration 20 energy 0 : -5348.57
 E-Slope 0.0017783 iteration 21 energy 0 : -5364.45
 E-Slope 0.00145072 iteration 22 energy 0 : -5355.85
 E-Slope 0.00136483 iteration 23 energy 0 : -5396.69
 E-Slope 0.00128918 iteration 24 energy 0 : -5387.15
 E-Slope 0.0012501 iteration 25 energy 0 : -5399.53
 E-Slope 0.00104696 iteration 26 energy 0 : -5388.87
 E-Slope 0.00111387 iteration 27 energy 0 : -5430.85
 E-Slope 0.00104633 iteration 28 energy 0 : -5419.79
 E-Slope 0.00101332 iteration 29 energy 0 : -5433.12
 E-Slope 0.000834554 iteration 30 energy 0 : -5418.39
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -8970.4
 iteration 2 energy 0 : -9123.21
 iteration 3 energy 0 : -9274.2
 iteration 4 energy 0 : -9320.68
 iteration 5 energy 0 : -9423.94
 iteration 6 energy 0 : -9425.91
 iteration 7 energy 0 : -9514.87
 iteration 8 energy 0 : -9525.1
 iteration 9 energy 0 : -9585.66
 iteration 10 energy 0 : -9558.53
 iteration 11 energy 0 : -9640.86
 iteration 12 energy 0 : -9665.12
 E-Slope 0.00273201 iteration 13 energy 0 : -9678.22
 E-Slope 0.00220265 iteration 14 energy 0 : -9663.27
 E-Slope 0.00197266 iteration 15 energy 0 : -9724.11
 E-Slope 0.00165205 iteration 16 energy 0 : -9700.94
 E-Slope 0.00156941 iteration 17 energy 0 : -9764.97
 E-Slope 0.00132638 iteration 18 energy 0 : -9740.88
 E-Slope 0.00130142 iteration 19 energy 0 : -9799.64
 E-Slope 0.00114147 iteration 20 energy 0 : -9768.41
 E-Slope 0.00116776 iteration 21 energy 0 : -9833.83
 E-Slope 0.000992641 iteration 22 energy 0 : -9805.81
 E-Slope 0.00102621 iteration 23 energy 0 : -9857.97
 E-Slope 0.000966728 iteration 24 energy 0 : -9823.21
 E-Slope 0.00102489 iteration 25 energy 0 : -9898.44
 E-Slope 0.000925422 iteration 26 energy 0 : -9873.67
 E-Slope 0.000940226 iteration 27 energy 0 : -9898.34
 E-Slope 0.000763088 iteration 28 energy 0 : -9860.13
 E-Slope 0.000808187 iteration 29 energy 0 : -9928.9
 E-Slope 0.000698946 iteration 30 energy 0 : -9907.47
 E-Slope 0.000697084 iteration 31 energy 0 : -9924.11
 E-Slope 0.000514269 iteration 32 energy 0 : -9890.88
 E-Slope 0.000560656 iteration 33 energy 0 : -9953.69
 E-Slope 0.000444859 iteration 34 energy 0 : -9923
 E-Slope 0.000517108 iteration 35 energy 0 : -9977.88
 E-Slope 0.00040327 iteration 36 energy 0 : -9941.42
 E-Slope 0.000545658 iteration 37 energy 0 : -10004.9
 E-Slope 0.00054995 iteration 38 energy 0 : -9981.01
 E-Slope 0.000608012 iteration 39 energy 0 : -10000.2
 E-Slope 0.000462286 iteration 40 energy 0 : -9959.91
 E-Slope 0.00055217 iteration 41 energy 0 : -10022.4
 E-Slope 0.00049863 iteration 42 energy 0 : -9992.95
 E-Slope 0.000524484 iteration 43 energy 0 : -10031.6
 E-Slope 0.000366732 iteration 44 energy 0 : -9993.16
 E-Slope 0.000448465 iteration 45 energy 0 : -10060.1
 E-Slope 0.00042244 iteration 46 energy 0 : -10055
 E-Slope 0.00046391 iteration 47 energy 0 : -10047.6
 E-Slope 0.000339426 iteration 48 energy 0 : -10017.9
 E-Slope 0.000412554 iteration 49 energy 0 : -10063.1
 E-Slope 0.000335649 iteration 50 energy 0 : -10027.4
 E-Slope 0.000414975 iteration 51 energy 0 : -10096.8
 E-Slope 0.000350907 iteration 52 energy 0 : -10083.2
 E-Slope 0.000389487 iteration 53 energy 0 : -10082.6
 E-Slope 0.000285216 iteration 54 energy 0 : -10052.7
 E-Slope 0.000359379 iteration 55 energy 0 : -10111.5
 E-Slope 0.000257477 iteration 56 energy 0 : -10078.1
 E-Slope 0.000388406 iteration 57 energy 0 : -10137.3
 E-Slope 0.000400923 iteration 58 energy 0 : -10096.8
 E-Slope 0.0005171 iteration 59 energy 0 : -10167.8
 E-Slope 0.000466198 iteration 60 energy 0 : -10133
 E-Slope 0.000557631 iteration 61 energy 0 : -10174.1
 E-Slope 0.000446081 iteration 62 energy 0 : -10129.6
 E-Slope 0.000587538 iteration 63 energy 0 : -10202.1
 E-Slope 0.000600465 iteration 64 energy 0 : -10172.5
 E-Slope 0.000610776 iteration 65 energy 0 : -10191.2
 E-Slope 0.000436671 iteration 66 energy 0 : -10149.7
 E-Slope 0.000496462 iteration 67 energy 0 : -10222.5
 E-Slope 0.000392713 iteration 68 energy 0 : -10193.3
 E-Slope 0.000416152 iteration 69 energy 0 : -10211.1
 E-Slope 0.000250101 iteration 70 energy 0 : -10171.4
 E-Slope 0.000362083 iteration 71 energy 0 : -10248.1
 E-Slope 0.000313126 iteration 72 energy 0 : -10216.4
 E-Slope 0.00038518 iteration 73 energy 0 : -10246.5
 E-Slope 0.000257187 iteration 74 energy 0 : -10204.9
 E-Slope 0.000407793 iteration 75 energy 0 : -10281.1
 E-Slope 0.000420451 iteration 76 energy 0 : -10256.5
 E-Slope 0.000463083 iteration 77 energy 0 : -10266.6
 E-Slope 0.000315256 iteration 78 energy 0 : -10228.8
 E-Slope 0.000435792 iteration 79 energy 0 : -10302
 E-Slope 0.000402391 iteration 80 energy 0 : -10269.7
 E-Slope 0.000452995 iteration 81 energy 0 : -10307.8
 E-Slope 0.000309266 iteration 82 energy 0 : -10266.5
 E-Slope 0.000445344 iteration 83 energy 0 : -10341.6
 E-Slope 0.000442974 iteration 84 energy 0 : -10320
 E-Slope 0.00047946 iteration 85 energy 0 : -10324.2
 E-Slope 0.000328787 iteration 86 energy 0 : -10288.3
 E-Slope 0.00044398 iteration 87 energy 0 : -10358.4
 E-Slope 0.000406742 iteration 88 energy 0 : -10322
 E-Slope 0.000467926 iteration 89 energy 0 : -10375.6
 E-Slope 0.000334553 iteration 90 energy 0 : -10332.7
 tired convergence: reached max iterations 
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -77603.3
 iteration 2 energy 0 : -79442.9
 iteration 3 energy 0 : -81227.4
 iteration 4 energy 0 : -82650.6
 iteration 5 energy 0 : -83842.6
 iteration 6 energy 0 : -85015.1
 iteration 7 energy 0 : -86080
 iteration 8 energy 0 : -87007.6
 iteration 9 energy 0 : -87810.5
 iteration 10 energy 0 : -88557.1
 iteration 11 energy 0 : -89222.2
 iteration 12 energy 0 : -89769.3
 E-Slope 0.00641143 iteration 13 energy 0 : -90261.2
 E-Slope 0.00562353 iteration 14 energy 0 : -90695.9
 E-Slope 0.00497846 iteration 15 energy 0 : -91142.8
 E-Slope 0.00444022 iteration 16 energy 0 : -91646.2
 E-Slope 0.00398051 iteration 17 energy 0 : -92130.1
 E-Slope 0.0036274 iteration 18 energy 0 : -92639.9
 E-Slope 0.00337225 iteration 19 energy 0 : -93128.3
 E-Slope 0.00318389 iteration 20 energy 0 : -93548.4
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2951_03062017_Test_NewCases_Aug1_Ref_vimp2_2554_09282016/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2951_03062017_Test_NewCases_Aug1_Ref_vimp2_2554_09282016/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2951_03062017_Test_NewCases_Aug1_Ref_vimp2_2554_09282016/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2951_03062017_Test_NewCases_Aug1_Ref_vimp2_2554_09282016/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2951_03062017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2039_03182016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2951_03062017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2039_03182016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547789637
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [11.105, -3.82371, -5.08058]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 2.400119567509442, 11.161053196304623, 10.184748146043333]
level 0, iter 297, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.06040677878478883, -0.016118221582653792, 0.03175363922273303, 0.9975384355532225, 1.0381246721319846, 1.0676503353040085, 1.018764567776697, -0.006809692843792642, 0.053125287322170874, -0.05944026947328564, 1.0326686692505889, 11.026731284479629, 10.842637521900652]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 111, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.054061008651272474, -0.020547915442547974, 0.031713629806262106, 0.997822347013277, 1.0276604016797508, 1.0620488060859006, 1.0110405517643042, 0.0020265183435792785, 0.07184018453992194, -0.07952214267428606, 1.2359805449422951, 10.963584034161979, 10.61685136502594]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 100, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.05260381401463667, -0.023210465201849093, 0.03479141373830906, 0.9977392798653949, 1.0244456440142604, 1.0685852661780582, 1.0112414005590735, 0.005009031733281627, 0.08124948055933835, -0.08872637468379996, 1.154870180429445, 10.92753547183259, 10.75475717460577]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 105, size: fix[36, 40, 33]-mov[38, 40, 32], affine para: [0.05442368905004515, -0.025992256435891113, 0.034525779654604856, 0.9975822949585645, 1.0259289635089963, 1.0719774311495982, 1.015185129337909, 0.007220359183757743, 0.09038273374756443, -0.0976100173786593, 1.2784995155542724, 10.760400908233256, 10.888026866134464]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 83, size: fix[71, 80, 47]-mov[75, 80, 41], affine para: [0.05572716526156812, -0.0243294235097114, 0.038448246020471394, 0.9974087901064159, 1.0256618930075314, 1.0788222933690552, 1.024718400641316, 0.004970668396750159, 0.09525186675337867, -0.10092369525121417, 1.256622246955217, 10.746705966454945, 10.824739428338484]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 475, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.06563784295988118, 0.019577641205595443, -0.03473109717037765, 0.9970467092497427, 0.9672797957346753, 0.9136356250696565, 0.9882801572328845, 0.0068308785843774825, -0.06161516436910364, 0.05224630721334954, -1.604303403342119, -11.816519016451842, -9.214833537456933]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 274, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.06325491182118816, 0.027613077307417726, -0.04109113532208377, 0.9967687057136426, 0.975827877538556, 0.9110180791359399, 0.9797395605108701, -0.005890449120670669, -0.09663922272556577, 0.08153228564400401, -1.589998530698004, -11.974305085804726, -9.19225166749163]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 315, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.05796581569013176, 0.026898739384187517, -0.04487880732359302, 0.9969464953968847, 0.9818071854752831, 0.9021332045855298, 0.9783340368346574, -0.012618759746389806, -0.09752642960964297, 0.09878943189135185, -1.4980798514056812, -11.834101401580991, -9.234989602985134]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 317, size: fix[38, 40, 32]-mov[36, 40, 33], affine para: [-0.06349050116265659, 0.028207248611105854, -0.04761153685616835, 0.9964469122567945, 0.982140553352384, 0.8902196801070448, 0.9719350773955284, -0.005358607796269442, -0.10594831857708709, 0.11354743118153998, -1.6148479162580285, -11.923070438759279, -9.310951331204377]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 101, size: fix[75, 80, 41]-mov[71, 80, 47], affine para: [-0.0585651514742982, 0.028951609138705967, -0.04938230957352892, 0.9966410160445214, 0.9837314220316368, 0.8798794369223601, 0.9706570959554502, -0.005042807358940379, -0.10951033147395169, 0.11230351971441883, -1.5905926109038335, -11.751953864972537, -9.300161522701828]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.471102 v2 -0.462968
final [0.05572716526156812, -0.0243294235097114, 0.038448246020471394, 0.9974087901064159, 1.0256618930075314, 1.0788222933690552, 1.024718400641316, 0.004970668396750159, 0.09525186675337867, -0.10092369525121417, 1.256622246955217, 10.746705966454945, 10.824739428338484]
outputput affine center: [11.105, -3.82371, -5.08058]
output affine para: [0.05572716526156812, -0.0243294235097114, 0.038448246020471394, 0.9974087901064159, 1.0256618930075314, 1.0788222933690552, 1.024718400641316, 0.004970668396750159, 0.09525186675337867, -0.10092369525121417, 1.256622246955217, 10.746705966454945, 10.824739428338484]
initial measure value (MMI): rval = -0.308575
final measure value (MMI): rval = -0.479133
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -5286.22
 iteration 2 energy 0 : -5689.48
 iteration 3 energy 0 : -6007.41
 iteration 4 energy 0 : -6340.49
 iteration 5 energy 0 : -6581.98
 iteration 6 energy 0 : -6744.99
 iteration 7 energy 0 : -6863.09
 iteration 8 energy 0 : -6969.24
 iteration 9 energy 0 : -7083.44
 iteration 10 energy 0 : -7174.17
 iteration 11 energy 0 : -7242.5
 iteration 12 energy 0 : -7291.62
 E-Slope 0.0117493 iteration 13 energy 0 : -7329.77
 E-Slope 0.00917035 iteration 14 energy 0 : -7313.26
 E-Slope 0.00701389 iteration 15 energy 0 : -7324.89
 E-Slope 0.0053647 iteration 16 energy 0 : -7316.6
 E-Slope 0.00410113 iteration 17 energy 0 : -7330.66
 E-Slope 0.00301765 iteration 18 energy 0 : -7326.14
 E-Slope 0.00210159 iteration 19 energy 0 : -7339.05
 E-Slope 0.00132602 iteration 20 energy 0 : -7334.6
 E-Slope 0.000804201 iteration 21 energy 0 : -7345.39
 E-Slope 0.000461772 iteration 22 energy 0 : -7341.32
 E-Slope 0.000305019 iteration 23 energy 0 : -7353.87
 E-Slope 0.000237562 iteration 24 energy 0 : -7346.57
 E-Slope 0.000286572 iteration 25 energy 0 : -7356.42
 E-Slope 0.00027246 iteration 26 energy 0 : -7357.31
 E-Slope 0.000288926 iteration 27 energy 0 : -7363.48
 E-Slope 0.000258632 iteration 28 energy 0 : -7362.25
 E-Slope 0.00026501 iteration 29 energy 0 : -7367.89
 E-Slope 0.000237234 iteration 30 energy 0 : -7366.84
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -11740.7
 iteration 2 energy 0 : -11900.6
 iteration 3 energy 0 : -12044.5
 iteration 4 energy 0 : -12151.8
 iteration 5 energy 0 : -12209.6
 iteration 6 energy 0 : -12247.7
 iteration 7 energy 0 : -12295
 iteration 8 energy 0 : -12309.9
 iteration 9 energy 0 : -12351.6
 iteration 10 energy 0 : -12351.3
 iteration 11 energy 0 : -12397
 iteration 12 energy 0 : -12385.2
 E-Slope 0.00188474 iteration 13 energy 0 : -12435.1
 E-Slope 0.00142924 iteration 14 energy 0 : -12417.5
 E-Slope 0.00119362 iteration 15 energy 0 : -12469.6
 E-Slope 0.00100987 iteration 16 energy 0 : -12445.8
 E-Slope 0.000945888 iteration 17 energy 0 : -12504.6
 E-Slope 0.000829406 iteration 18 energy 0 : -12476
 E-Slope 0.000837937 iteration 19 energy 0 : -12540.9
 E-Slope 0.000753336 iteration 20 energy 0 : -12505.8
 E-Slope 0.000797823 iteration 21 energy 0 : -12575.4
 E-Slope 0.000721209 iteration 22 energy 0 : -12536.6
 E-Slope 0.000775672 iteration 23 energy 0 : -12602
 E-Slope 0.000687867 iteration 24 energy 0 : -12560.4
 E-Slope 0.000746757 iteration 25 energy 0 : -12630.1
 E-Slope 0.000652306 iteration 26 energy 0 : -12586.1
 E-Slope 0.000702977 iteration 27 energy 0 : -12651.2
 E-Slope 0.000591323 iteration 28 energy 0 : -12605.7
 E-Slope 0.000626817 iteration 29 energy 0 : -12662.6
 E-Slope 0.000496536 iteration 30 energy 0 : -12616.5
 E-Slope 0.000527278 iteration 31 energy 0 : -12672.1
 E-Slope 0.000387609 iteration 32 energy 0 : -12625.3
 E-Slope 0.000420973 iteration 33 energy 0 : -12679.2
 E-Slope 0.000288099 iteration 34 energy 0 : -12633.9
 E-Slope 0.000329621 iteration 35 energy 0 : -12688.7
 E-Slope 0.000204027 iteration 36 energy 0 : -12641.8
 E-Slope 0.000267074 iteration 37 energy 0 : -12697.9
 E-Slope 0.000162572 iteration 38 energy 0 : -12650.2
 E-Slope 0.000246562 iteration 39 energy 0 : -12709.1
 E-Slope 0.000157736 iteration 40 energy 0 : -12658.4
 E-Slope 0.000240341 iteration 41 energy 0 : -12714.5
 E-Slope 0.000154436 iteration 42 energy 0 : -12666.8
 E-Slope 0.000227928 iteration 43 energy 0 : -12716.5
 E-Slope 0.00013423 iteration 44 energy 0 : -12669.5
 E-Slope 0.00020501 iteration 45 energy 0 : -12723.4
 E-Slope 0.000109747 iteration 46 energy 0 : -12674.8
 E-Slope 0.000179552 iteration 47 energy 0 : -12727
 E-Slope 8.2612e-05 iteration 48 energy 0 : -12678.3
 Converged due to oscillation in optimization  metric 0 bad 20  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -90393.3
 iteration 2 energy 0 : -92511.7
 iteration 3 energy 0 : -95141.2
 iteration 4 energy 0 : -97333.4
 iteration 5 energy 0 : -98900.5
 iteration 6 energy 0 : -100121
 iteration 7 energy 0 : -101095
 iteration 8 energy 0 : -101922
 iteration 9 energy 0 : -102653
 iteration 10 energy 0 : -103301
 iteration 11 energy 0 : -103901
 iteration 12 energy 0 : -104432
 E-Slope 0.00586913 iteration 13 energy 0 : -104930
 E-Slope 0.00483195 iteration 14 energy 0 : -105426
 E-Slope 0.00408343 iteration 15 energy 0 : -105873
 E-Slope 0.00356982 iteration 16 energy 0 : -106280
 E-Slope 0.00319041 iteration 17 energy 0 : -106651
 E-Slope 0.00289361 iteration 18 energy 0 : -106987
 E-Slope 0.0026508 iteration 19 energy 0 : -107329
 E-Slope 0.00246099 iteration 20 energy 0 : -107737
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2951_03062017_Test_NewCases_Aug2_Ref_vimp2_2039_03182016_Test_NewCases/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2951_03062017_Test_NewCases_Aug2_Ref_vimp2_2039_03182016_Test_NewCases/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2951_03062017_Test_NewCases_Aug2_Ref_vimp2_2039_03182016_Test_NewCases/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2951_03062017_Test_NewCases_Aug2_Ref_vimp2_2039_03182016_Test_NewCases/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2966_03092017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1724_11202015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2966_03092017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1724_11202015/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547789738
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [15.7038, 16.0428, -21.1081]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -5.126353722788352, -25.582745877222493, 34.53025533275515]
level 0, iter 272, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.003843788478254795, -0.016681297580453742, -0.07732543663071284, 0.9968589350811058, 0.9590976178528003, 0.9701689885599805, 0.9608691445072446, -0.023475858391174286, 0.007368201490569512, -0.03381551187344497, -4.086043389031598, -23.801566098639764, 35.874749875072816]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 157, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.003396762443696997, -0.017346497736593015, -0.0820519640677373, 0.9964712922175942, 0.9591272402446669, 0.9691633305673395, 0.9659063778111677, -0.041887407158634996, 0.015152239780531297, -0.0426623439103469, -4.1881797805352035, -23.891746978272824, 35.86956070775014]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 105, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.009148904799749799, -0.02074624151029418, -0.08833078069298031, 0.9958331005677257, 0.9596083501785891, 0.9688654932367594, 0.9651906611571178, -0.05136343708771978, 0.019226908304332862, -0.04938138848455353, -4.157286621108455, -24.038933536098646, 35.72658262345275]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 44, size: fix[39, 40, 32]-mov[37, 41, 32], affine para: [-0.006256828722456963, -0.019647894124386445, -0.08637657310665002, 0.9960491453583835, 0.9617709733497912, 0.9717324308412871, 0.9694805150671774, -0.056874903186565066, 0.020284400592977758, -0.0512938606795796, -4.169044326068991, -24.017339758533588, 35.81837165784972]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 142, size: fix[78, 80, 43]-mov[74, 81, 39], affine para: [-0.011532634507286324, -0.020776760960051103, -0.09013512333890167, 0.9956460134435386, 0.9562352973572901, 0.9733351622964663, 0.9650147316596219, -0.05862875625896834, 0.027773332537497995, -0.0540295135952939, -4.1365000683934365, -23.937030201905984, 35.75522008038177]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 878, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.006266939213304618, 0.019802002976958482, 0.09185038923139985, 0.9955561823167177, 1.0423832380218714, 0.9993327374631059, 1.0273674016817562, 0.05567410216570713, -0.009701812615843557, 0.04085135331959999, 0.25064786727961896, 23.601788763637483, -36.48843517593336]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 78, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.008056525584699901, 0.019827808019157636, 0.09234169976683258, 0.9954973434966217, 1.0462455392488244, 0.9999453054814523, 1.029154895074018, 0.05718008372897283, -0.007256679842736924, 0.04149194366591194, 0.2196326151438346, 23.65208160506386, -36.46883768459039]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 423, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.0095214368887999, 0.019020655856277713, 0.09085261003783979, 0.9956371628960431, 1.0433227554235693, 1.0040430927578619, 1.026212249703282, 0.06001449960949152, -0.008038240817974251, 0.04536479283037572, 0.39092248920028183, 23.655476615219563, -36.27477567506625]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 162, size: fix[37, 41, 32]-mov[39, 40, 32], affine para: [0.007280130511945264, 0.01797320784778136, 0.09084129789896735, 0.995676565002622, 1.0409417961601315, 1.0034366045201666, 1.0263024864136032, 0.0610747340944275, -0.006148556487775218, 0.0462369687852829, 0.534347256292847, 23.59034380529014, -36.361541404008115]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 193, size: fix[74, 81, 39]-mov[78, 80, 43], affine para: [0.012638015367197988, 0.020091221213981585, 0.09075216717624564, 0.9955906124258725, 1.0465665860782993, 1.0043798272675517, 1.023587852630135, 0.059329582629469926, -0.00976358906805334, 0.04530855374960809, 0.3918713372194338, 23.88787554505733, -36.03883231835538]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.511033 v2 -0.502669
final [-0.011532634507286324, -0.020776760960051103, -0.09013512333890167, 0.9956460134435386, 0.9562352973572901, 0.9733351622964663, 0.9650147316596219, -0.05862875625896834, 0.027773332537497995, -0.0540295135952939, -4.1365000683934365, -23.937030201905984, 35.75522008038177]
outputput affine center: [15.7038, 16.0428, -21.1081]
output affine para: [-0.011532634507286324, -0.020776760960051103, -0.09013512333890167, 0.9956460134435386, 0.9562352973572901, 0.9733351622964663, 0.9650147316596219, -0.05862875625896834, 0.027773332537497995, -0.0540295135952939, -4.1365000683934365, -23.937030201905984, 35.75522008038177]
initial measure value (MMI): rval = -0.259825
final measure value (MMI): rval = -0.51542
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -6760.22
 iteration 2 energy 0 : -7143.35
 iteration 3 energy 0 : -7432.16
 iteration 4 energy 0 : -7618.05
 iteration 5 energy 0 : -7739.74
 iteration 6 energy 0 : -7837.56
 iteration 7 energy 0 : -7929.65
 iteration 8 energy 0 : -8017.39
 iteration 9 energy 0 : -8093.34
 iteration 10 energy 0 : -8153.23
 iteration 11 energy 0 : -8202.12
 iteration 12 energy 0 : -8209.33
 E-Slope 0.00650583 iteration 13 energy 0 : -8205.05
 E-Slope 0.00495739 iteration 14 energy 0 : -8206.45
 E-Slope 0.00381343 iteration 15 energy 0 : -8202.57
 E-Slope 0.00289028 iteration 16 energy 0 : -8204.42
 E-Slope 0.00208782 iteration 17 energy 0 : -8208.33
 E-Slope 0.00140044 iteration 18 energy 0 : -8213.58
 E-Slope 0.000883006 iteration 19 energy 0 : -8229.42
 E-Slope 0.000537254 iteration 20 energy 0 : -8237.55
 E-Slope 0.000381939 iteration 21 energy 0 : -8256.29
 E-Slope 0.000346728 iteration 22 energy 0 : -8258.32
 E-Slope 0.000410035 iteration 23 energy 0 : -8259.79
 E-Slope 0.000481576 iteration 24 energy 0 : -8267.24
 E-Slope 0.000585139 iteration 25 energy 0 : -8298.65
 E-Slope 0.000601731 iteration 26 energy 0 : -8278.73
 E-Slope 0.00056313 iteration 27 energy 0 : -8275.97
 E-Slope 0.000479825 iteration 28 energy 0 : -8270.72
 E-Slope 0.00035388 iteration 29 energy 0 : -8262.31
 E-Slope 0.000210151 iteration 30 energy 0 : -8260
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -14204
 iteration 2 energy 0 : -14344.2
 iteration 3 energy 0 : -14467.7
 iteration 4 energy 0 : -14584.2
 iteration 5 energy 0 : -14674.1
 iteration 6 energy 0 : -14693.4
 iteration 7 energy 0 : -14696.5
 iteration 8 energy 0 : -14738.1
 iteration 9 energy 0 : -14739.7
 iteration 10 energy 0 : -14787.3
 iteration 11 energy 0 : -14779.8
 iteration 12 energy 0 : -14776.2
 E-Slope 0.00129865 iteration 13 energy 0 : -14778.5
 E-Slope 0.000898406 iteration 14 energy 0 : -14788
 E-Slope 0.000605106 iteration 15 energy 0 : -14791.2
 E-Slope 0.00045751 iteration 16 energy 0 : -14815.2
 E-Slope 0.000397235 iteration 17 energy 0 : -14813.4
 E-Slope 0.000329658 iteration 18 energy 0 : -14807.7
 E-Slope 0.000252619 iteration 19 energy 0 : -14814.3
 E-Slope 0.000220671 iteration 20 energy 0 : -14819.1
 E-Slope 0.000184029 iteration 21 energy 0 : -14827.1
 E-Slope 0.000200361 iteration 22 energy 0 : -14828.1
 E-Slope 0.000202686 iteration 23 energy 0 : -14834.9
 E-Slope 0.000182666 iteration 24 energy 0 : -14831.8
 E-Slope 0.000166923 iteration 25 energy 0 : -14841.7
 E-Slope 0.000150546 iteration 26 energy 0 : -14840.6
 E-Slope 0.000139497 iteration 27 energy 0 : -14849.7
 E-Slope 0.000147939 iteration 28 energy 0 : -14847.3
 E-Slope 0.00015568 iteration 29 energy 0 : -14855.6
 E-Slope 0.000142492 iteration 30 energy 0 : -14853.8
 E-Slope 0.000142284 iteration 31 energy 0 : -14864
 E-Slope 0.000133432 iteration 32 energy 0 : -14860.4
 E-Slope 0.000137612 iteration 33 energy 0 : -14868.6
 E-Slope 0.000130042 iteration 34 energy 0 : -14866
 E-Slope 0.000134721 iteration 35 energy 0 : -14874.6
 E-Slope 0.000119545 iteration 36 energy 0 : -14870.1
 E-Slope 0.000121437 iteration 37 energy 0 : -14878.7
 E-Slope 0.000107415 iteration 38 energy 0 : -14874.4
 E-Slope 0.000108711 iteration 39 energy 0 : -14881.8
 E-Slope 9.49502e-05 iteration 40 energy 0 : -14878.9
 Converged due to oscillation in optimization  metric 0 bad 13  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -101544
 iteration 2 energy 0 : -103429
 iteration 3 energy 0 : -105075
 iteration 4 energy 0 : -106342
 iteration 5 energy 0 : -107514
 iteration 6 energy 0 : -108486
 iteration 7 energy 0 : -109318
 iteration 8 energy 0 : -110089
 iteration 9 energy 0 : -110700
 iteration 10 energy 0 : -111197
 iteration 11 energy 0 : -111650
 iteration 12 energy 0 : -112085
 E-Slope 0.00414174 iteration 13 energy 0 : -112490
 E-Slope 0.00355176 iteration 14 energy 0 : -112857
 E-Slope 0.00309166 iteration 15 energy 0 : -113234
 E-Slope 0.002715 iteration 16 energy 0 : -113589
 E-Slope 0.00242136 iteration 17 energy 0 : -113906
 E-Slope 0.00218731 iteration 18 energy 0 : -114195
 E-Slope 0.00199407 iteration 19 energy 0 : -114437
 E-Slope 0.0018399 iteration 20 energy 0 : -114658
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2966_03092017_Test_NewCases_Aug1_Ref_vimp2_1724_11202015/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2966_03092017_Test_NewCases_Aug1_Ref_vimp2_1724_11202015/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2966_03092017_Test_NewCases_Aug1_Ref_vimp2_1724_11202015/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2966_03092017_Test_NewCases_Aug1_Ref_vimp2_1724_11202015/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2966_03092017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_3187_06092017/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2966_03092017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_3187_06092017/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547789838
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [15.7038, 16.0428, -21.1081]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -0.29394155405074684, -1.8178919918411047, 10.620324999158973]
level 0, iter 211, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.0668029201687063, 0.03719346636619305, -0.04146145169584426, 0.9962103010609122, 0.9285726439816488, 0.9740542572207683, 0.9877336924842481, 0.0025951899884292047, -0.014368064006903384, 0.011558199739360538, -0.25380209028484885, -0.42164733803567284, 8.27397705747585]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 140, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.06276652174079561, 0.03894962519515915, -0.04861521559970313, 0.9960822512513279, 0.9249627990284168, 0.9817248888160378, 0.9883123974644642, -0.008811126489409606, -0.021919547729250647, 0.009140379614699433, -0.2548855711384583, -0.6224015772754041, 8.451001658668]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 1049, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.06935951996247167, 0.040550749387041535, -0.06667217207224437, 0.9945349240654618, 0.927034432482164, 0.958852011550789, 0.9916330801198261, -0.045996165716537855, -0.03353038700443899, -0.03060419410194542, -0.3123391680616276, -1.5073748929433406, 8.406724539475285]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 85, size: fix[39, 40, 32]-mov[37, 43, 33], affine para: [-0.06694683646928241, 0.04410031315367286, -0.06755913015079744, 0.9944893400131399, 0.9268537433189526, 0.9655883579473327, 0.9927826217522437, -0.05074343663231254, -0.03956368790317212, -0.032665512047215815, -0.3464693567634059, -1.4271739147992215, 8.417946497733116]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 88, size: fix[78, 80, 43]-mov[73, 86, 46], affine para: [-0.06567362874886504, 0.04294973641235129, -0.06696480332477943, 0.9946647725463788, 0.929153755330706, 0.9676609201510936, 0.9944719820826187, -0.049084375043126606, -0.03835637872411836, -0.030366858978108077, -0.3553670377746136, -1.4503648927510906, 8.468601069576641]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 247, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.056745640382511085, -0.035610150243025974, 0.055861834343897326, 0.9961883882885721, 1.0765198180815123, 1.0118767071817323, 0.9930665242207255, 0.015676972852798267, 0.007304480064943631, -0.018295870078305958, 0.5338197754945931, 2.016459823432832, -8.076754975381013]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 287, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.06059340545547025, -0.03687800201752324, 0.058028445434401936, 0.9957917210456065, 1.0708530381345593, 1.0140977282884989, 0.9912760044702791, 0.01976701638526619, 0.006099626296973539, -0.008475612656209346, 0.4652344215842716, 2.187317796109616, -7.9858075907013895]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 100, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.05437838537730025, -0.03671420412965933, 0.057014662165130674, 0.9962150303609556, 1.072253785207571, 1.0070101144080135, 0.9888007388913742, 0.019952514400076813, 0.007802984868089672, -0.011761927036612576, 0.6243773186185735, 2.0188101592532277, -8.161166269888303]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 142, size: fix[37, 43, 33]-mov[39, 40, 32], affine para: [0.05427272443883068, -0.04011368138345672, 0.05785626556896116, 0.996041172081891, 1.0714917833743176, 1.0019924031933156, 0.9944088457709712, 0.027806311905110997, 0.012475802452011284, -0.004380104457696308, 0.6879037192402937, 2.162928703956088, -8.221663470966051]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 422, size: fix[73, 86, 46]-mov[78, 80, 43], affine para: [0.05096926960187013, -0.0387399722058119, 0.061193635991363154, 0.996070623512159, 1.0695416589473354, 1.000244967357369, 0.9827377896585967, 0.028559230669693278, 0.018029579537943256, -0.009216175238045117, 0.6744263428591979, 2.0116891272706092, -8.07518709570964]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.367367 v2 -0.369999
 last params [-0.06567362874886504, 0.04294973641235129, -0.06696480332477943, 0.9946647725463788, 0.929153755330706, 0.9676609201510936, 0.9944719820826187, -0.049084375043126606, -0.03835637872411836, -0.030366858978108077, -0.3553670377746136, -1.4503648927510906, 8.468601069576641]
 my params [0.05096926960187013, -0.0387399722058119, 0.061193635991363154, 0.996070623512159, 1.0695416589473354, 1.000244967357369, 0.9827377896585967, 0.028559230669693278, 0.018029579537943256, -0.009216175238045117, 0.6744263428591979, 2.0116891272706092, -8.07518709570964]
A=0.930085 0.0840759 0.0567647 
-0.12649 0.986076 0.106074 
-0.0721836 -0.108146 1.00922 

rotation R0.987962 0.12538 0.090619 
-0.134361 0.985779 0.100933 
-0.0766753 -0.111894 0.990758 

upper R0.941418 -0.0411343 -0.0355535 
0 0.994695 -0.00124292 
0 0 1.01575 

s=0.251117 u=-0.0534444 v=0.0420104 w-0.0652254 r=0.995552
m_Rotation from vnl-0.0534444 0.0420104 -0.0652254 0.995552
 new params [-0.0534443718894558, 0.04201044049379967, -0.0652253751538149, 0.9955523454037476, 0.9414182823523725, 0.9946954700048227, 1.0157468759483514, -0.04369395936200224, -0.03776592153097878, -0.0012495529655090845, -0.33802330046219087, -1.0418022665317919, 8.41591254932359]
outputput affine center: [15.7038, 16.0428, -21.1081]
output affine para: [-0.0534443718894558, 0.04201044049379967, -0.0652253751538149, 0.9955523454037476, 0.9414182823523725, 0.9946954700048227, 1.0157468759483514, -0.04369395936200224, -0.03776592153097878, -0.0012495529655090845, -0.33802330046219087, -1.0418022665317919, 8.41591254932359]
initial measure value (MMI): rval = -0.182463
final measure value (MMI): rval = -0.386255
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -5367.11
 iteration 2 energy 0 : -5823.79
 iteration 3 energy 0 : -6277.91
 iteration 4 energy 0 : -6618.46
 iteration 5 energy 0 : -6855.27
 iteration 6 energy 0 : -7013.84
 iteration 7 energy 0 : -7143.73
 iteration 8 energy 0 : -7261.32
 iteration 9 energy 0 : -7371.77
 iteration 10 energy 0 : -7455.43
 iteration 11 energy 0 : -7520.62
 iteration 12 energy 0 : -7578.57
 E-Slope 0.0118637 iteration 13 energy 0 : -7634.66
 E-Slope 0.00918908 iteration 14 energy 0 : -7683.62
 E-Slope 0.00738201 iteration 15 energy 0 : -7731.48
 E-Slope 0.00617874 iteration 16 energy 0 : -7778.19
 E-Slope 0.00534324 iteration 17 energy 0 : -7824.81
 E-Slope 0.00469521 iteration 18 energy 0 : -7868.78
 E-Slope 0.00420119 iteration 19 energy 0 : -7916.66
 E-Slope 0.00367396 iteration 20 energy 0 : -7894
 E-Slope 0.00319051 iteration 21 energy 0 : -7893.25
 E-Slope 0.00270267 iteration 22 energy 0 : -7889.75
 E-Slope 0.00220746 iteration 23 energy 0 : -7892.51
 E-Slope 0.00172415 iteration 24 energy 0 : -7898.06
 E-Slope 0.00126963 iteration 25 energy 0 : -7899.16
 E-Slope 0.00088834 iteration 26 energy 0 : -7912.37
 E-Slope 0.000562705 iteration 27 energy 0 : -7910.06
 E-Slope 0.000362441 iteration 28 energy 0 : -7928.39
 E-Slope 0.000231281 iteration 29 energy 0 : -7920.77
 E-Slope 0.00027357 iteration 30 energy 0 : -7953.09
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -13512.3
 iteration 2 energy 0 : -13681.1
 iteration 3 energy 0 : -13847.4
 iteration 4 energy 0 : -13988.2
 iteration 5 energy 0 : -14051.8
 iteration 6 energy 0 : -14076.7
 iteration 7 energy 0 : -14162
 iteration 8 energy 0 : -14164.1
 iteration 9 energy 0 : -14251.2
 iteration 10 energy 0 : -14240.7
 iteration 11 energy 0 : -14283.9
 iteration 12 energy 0 : -14278
 E-Slope 0.00206944 iteration 13 energy 0 : -14347.6
 E-Slope 0.00161741 iteration 14 energy 0 : -14330.5
 E-Slope 0.00132886 iteration 15 energy 0 : -14359.3
 E-Slope 0.00112379 iteration 16 energy 0 : -14342.1
 E-Slope 0.000998661 iteration 17 energy 0 : -14389
 E-Slope 0.000817917 iteration 18 energy 0 : -14375.6
 E-Slope 0.000758447 iteration 19 energy 0 : -14416.7
 E-Slope 0.000620537 iteration 20 energy 0 : -14398.3
 E-Slope 0.000594914 iteration 21 energy 0 : -14420.4
 E-Slope 0.000490941 iteration 22 energy 0 : -14404.5
 E-Slope 0.00044632 iteration 23 energy 0 : -14427.3
 E-Slope 0.000338294 iteration 24 energy 0 : -14412.1
 E-Slope 0.000339322 iteration 25 energy 0 : -14436.7
 E-Slope 0.000270583 iteration 26 energy 0 : -14421.1
 E-Slope 0.000258237 iteration 27 energy 0 : -14445
 E-Slope 0.000180393 iteration 28 energy 0 : -14429.2
 E-Slope 0.000189498 iteration 29 energy 0 : -14453.1
 E-Slope 0.000142701 iteration 30 energy 0 : -14437.1
 E-Slope 0.000176162 iteration 31 energy 0 : -14460
 E-Slope 0.000148594 iteration 32 energy 0 : -14443.9
 E-Slope 0.000173964 iteration 33 energy 0 : -14466.5
 E-Slope 0.000142336 iteration 34 energy 0 : -14450.8
 E-Slope 0.000164948 iteration 35 energy 0 : -14473.3
 E-Slope 0.000132196 iteration 36 energy 0 : -14457.6
 E-Slope 0.000155292 iteration 37 energy 0 : -14479
 E-Slope 0.000123337 iteration 38 energy 0 : -14463.4
 E-Slope 0.000146277 iteration 39 energy 0 : -14484.4
 E-Slope 0.000114329 iteration 40 energy 0 : -14468.7
 E-Slope 0.000137262 iteration 41 energy 0 : -14489.2
 E-Slope 0.000105657 iteration 42 energy 0 : -14473.5
 E-Slope 0.000127532 iteration 43 energy 0 : -14493.6
 E-Slope 9.57623e-05 iteration 44 energy 0 : -14478
 Converged due to oscillation in optimization  metric 0 bad 18  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -96352.5
 iteration 2 energy 0 : -98102.3
 iteration 3 energy 0 : -100173
 iteration 4 energy 0 : -101961
 iteration 5 energy 0 : -103776
 iteration 6 energy 0 : -105148
 iteration 7 energy 0 : -106305
 iteration 8 energy 0 : -107338
 iteration 9 energy 0 : -108267
 iteration 10 energy 0 : -109168
 iteration 11 energy 0 : -109981
 iteration 12 energy 0 : -110645
 E-Slope 0.0062636 iteration 13 energy 0 : -111196
 E-Slope 0.0054407 iteration 14 energy 0 : -111649
 E-Slope 0.0046951 iteration 15 energy 0 : -111904
 E-Slope 0.00399255 iteration 16 energy 0 : -112030
 E-Slope 0.00337339 iteration 17 energy 0 : -112105
 E-Slope 0.00280704 iteration 18 energy 0 : -112255
 E-Slope 0.00229742 iteration 19 energy 0 : -112453
 E-Slope 0.00186053 iteration 20 energy 0 : -112688
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2966_03092017_Test_NewCases_Aug2_Ref_vimp2_3187_06092017/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2966_03092017_Test_NewCases_Aug2_Ref_vimp2_3187_06092017/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2966_03092017_Test_NewCases_Aug2_Ref_vimp2_3187_06092017/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2966_03092017_Test_NewCases_Aug2_Ref_vimp2_3187_06092017/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2972_03102017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2597_10182016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2972_03102017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2597_10182016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547789942
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [13.604, 10.47, 1.68781]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -7.224530272199697, -18.41181462640787, 2.3497404808607323]
level 0, iter 2052, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.08277831992837152, 0.05490120495433218, 0.09282927799416903, 0.9907150612519625, 1.0111628347442716, 0.9665772090554532, 1.1565244511630253, 0.06785751022956767, 0.00926778237754926, 0.1096051493806636, -5.868471016966044, -16.39164625361147, 0.667181272293953]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 57, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.07969284752472042, 0.05292512071528023, 0.0906264155911313, 0.9912793927282955, 1.0139354665484737, 0.9643851198846618, 1.153975351616077, 0.06942817035271996, 0.007356149302881046, 0.11796445684955005, -5.870527862648946, -16.27149580304769, 0.7549750707939189]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 109, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.07618310886269268, 0.05719947775393414, 0.09755239614557337, 0.9906603270924649, 1.0071879270176656, 0.9591177915087514, 1.1563264438060428, 0.06924202626988969, 0.00628072287945126, 0.12438721943608237, -5.722306150866972, -16.334382075790213, 0.8413416518796]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 53, size: fix[39, 39, 32]-mov[40, 43, 33], affine para: [-0.07483857426028542, 0.05646223815885922, 0.09534431638757096, 0.9910200123092202, 1.0117869978845184, 0.9549544942836469, 1.1496809996925923, 0.07186366950872058, 0.001457563511918277, 0.12492555377666306, -5.801785903385398, -16.314533075656783, 0.7487489834998811]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 987, size: fix[77, 77, 39]-mov[79, 85, 46], affine para: [-0.06295326890258866, 0.06329682971946382, 0.10814344390080394, 0.9901188781268727, 1.001837798841068, 0.9537372558271415, 1.1395859151035697, 0.06993802521360021, -0.00476390783725581, 0.1368488352250764, -5.793743530174315, -16.474159776592906, 1.4189675602568195]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 1245, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.07209049801124923, -0.05693714134524619, -0.10923066988626502, 0.9897624880687889, 1.0067152888783673, 0.9590238865980575, 0.8616080308053855, -0.10050103499915211, 0.03022059965168052, -0.08723023730538777, 7.404357948794187, 14.779146218240717, 1.9310718313889943]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 471, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.0707600408592221, -0.06185649520090705, -0.1126876563476172, 0.9891755570807149, 1.0088377648041411, 0.9734593992953431, 0.8515570569711745, -0.10882362840132087, 0.03858161150590611, -0.08666774914320895, 7.400756297915148, 15.096720747522276, 1.8746723037648225]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 222, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.07350605402543298, -0.058966957339703786, -0.11599072926657904, 0.9887698967342781, 1.0082710523007221, 0.9827708921188517, 0.8524498295943612, -0.10956166334118296, 0.03829750108031042, -0.0874643915051489, 7.430809698365182, 15.043413953851491, 2.0745717237002648]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 645, size: fix[40, 43, 33]-mov[39, 39, 32], affine para: [0.06992436945834345, -0.06364972961586368, -0.1169863639734187, 0.9886220132689537, 1.001079273490736, 0.9717425930228266, 0.8541897439846777, -0.11227842877618535, 0.04730699068866613, -0.08726222304739915, 7.530238685741473, 15.143695686476056, 1.800133878222586]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 128, size: fix[79, 85, 46]-mov[77, 77, 39], affine para: [0.06734675243742992, -0.06110660808526934, -0.11667513211878301, 0.9889981349474372, 0.9990086381276194, 0.977852353766918, 0.8555874232527411, -0.11421749920751112, 0.05170193753825289, -0.09441800230565935, 7.512646110421088, 14.932291439190505, 1.6738184658560509]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.399285 v2 -0.415101
 last params [-0.06295326890258866, 0.06329682971946382, 0.10814344390080394, 0.9901188781268727, 1.001837798841068, 0.9537372558271415, 1.1395859151035697, 0.06993802521360021, -0.00476390783725581, 0.1368488352250764, -5.793743530174315, -16.474159776592906, 1.4189675602568195]
 my params [0.06734675243742992, -0.06110660808526934, -0.11667513211878301, 0.9889981349474372, 0.9990086381276194, 0.977852353766918, 0.8555874232527411, -0.11421749920751112, 0.05170193753825289, -0.09441800230565935, 7.512646110421088, 14.932291439190505, 1.6738184658560509]
A=0.998791 -0.120997 0.0754497 
0.21252 0.972403 0.25934 
-0.159638 -0.13903 1.14946 

rotation R0.966366 -0.225543 0.123559 
0.205621 0.966198 0.155502 
-0.154455 -0.124865 0.980078 

upper R1.03355 0.104493 -0.0513018 
0 0.984184 0.0900296 
0 0 1.17621 

s=0.252775 u=-0.07087 v=0.0702753 w0.108988 r=0.98902
m_Rotation from vnl-0.07087 0.0702753 0.108988 0.98902
 new params [-0.07087003134956919, 0.07027529513515514, 0.10898762164715027, 0.9890199795140013, 1.0335531839789975, 0.9841840933303778, 1.1762074023863116, 0.1011005074474814, -0.04963633163320521, 0.09147642291992521, -5.823084500446264, -16.55088165990534, 1.3513572213108749]
outputput affine center: [13.604, 10.47, 1.68781]
output affine para: [-0.07087003134956919, 0.07027529513515514, 0.10898762164715027, 0.9890199795140013, 1.0335531839789975, 0.9841840933303778, 1.1762074023863116, 0.1011005074474814, -0.04963633163320521, 0.09147642291992521, -5.823084500446264, -16.55088165990534, 1.3513572213108749]
initial measure value (MMI): rval = -0.160947
final measure value (MMI): rval = -0.424532
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -5037.42
 iteration 2 energy 0 : -5308.18
 iteration 3 energy 0 : -5537.65
 iteration 4 energy 0 : -5720.71
 iteration 5 energy 0 : -5906.64
 iteration 6 energy 0 : -6060.83
 iteration 7 energy 0 : -6197.67
 iteration 8 energy 0 : -6316.1
 iteration 9 energy 0 : -6410.97
 iteration 10 energy 0 : -6495.83
 iteration 11 energy 0 : -6564.52
 iteration 12 energy 0 : -6623.91
 E-Slope 0.011265 iteration 13 energy 0 : -6647.7
 E-Slope 0.0093598 iteration 14 energy 0 : -6657.99
 E-Slope 0.00765687 iteration 15 energy 0 : -6668.18
 E-Slope 0.00609648 iteration 16 energy 0 : -6681.17
 E-Slope 0.00475267 iteration 17 energy 0 : -6687.88
 E-Slope 0.00362583 iteration 18 energy 0 : -6703.15
 E-Slope 0.0026945 iteration 19 energy 0 : -6707.5
 E-Slope 0.0019925 iteration 20 energy 0 : -6723
 E-Slope 0.00144672 iteration 21 energy 0 : -6724.57
 E-Slope 0.0011072 iteration 22 energy 0 : -6741.81
 E-Slope 0.000893414 iteration 23 energy 0 : -6741.84
 E-Slope 0.000847273 iteration 24 energy 0 : -6759.35
 E-Slope 0.000807621 iteration 25 energy 0 : -6757.55
 E-Slope 0.000796974 iteration 26 energy 0 : -6775.59
 E-Slope 0.000754647 iteration 27 energy 0 : -6773.57
 E-Slope 0.000753634 iteration 28 energy 0 : -6791.84
 E-Slope 0.000707567 iteration 29 energy 0 : -6787.92
 E-Slope 0.000711568 iteration 30 energy 0 : -6805.74
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -11066
 iteration 2 energy 0 : -11159.6
 iteration 3 energy 0 : -11345.9
 iteration 4 energy 0 : -11498.7
 iteration 5 energy 0 : -11633.1
 iteration 6 energy 0 : -11680.8
 iteration 7 energy 0 : -11719.1
 iteration 8 energy 0 : -11754
 iteration 9 energy 0 : -11785.3
 iteration 10 energy 0 : -11809
 iteration 11 energy 0 : -11835.8
 iteration 12 energy 0 : -11855.7
 E-Slope 0.00272134 iteration 13 energy 0 : -11881
 E-Slope 0.00203682 iteration 14 energy 0 : -11894.7
 E-Slope 0.00156613 iteration 15 energy 0 : -11915.4
 E-Slope 0.0012577 iteration 16 energy 0 : -11922.9
 E-Slope 0.00114056 iteration 17 energy 0 : -11952.3
 E-Slope 0.00103632 iteration 18 energy 0 : -11959.3
 E-Slope 0.000959322 iteration 19 energy 0 : -11979.8
 E-Slope 0.000872634 iteration 20 energy 0 : -11978.6
 E-Slope 0.000813663 iteration 21 energy 0 : -11999.3
 E-Slope 0.000746988 iteration 22 energy 0 : -12004.8
 E-Slope 0.000705652 iteration 23 energy 0 : -12024.2
 E-Slope 0.000645101 iteration 24 energy 0 : -12022.4
 E-Slope 0.000618502 iteration 25 energy 0 : -12043.7
 E-Slope 0.000580683 iteration 26 energy 0 : -12049.2
 E-Slope 0.000568189 iteration 27 energy 0 : -12067.5
 E-Slope 0.000523843 iteration 28 energy 0 : -12065.2
 E-Slope 0.000522844 iteration 29 energy 0 : -12083.2
 E-Slope 0.000492051 iteration 30 energy 0 : -12080.4
 E-Slope 0.000492238 iteration 31 energy 0 : -12098.4
 E-Slope 0.00045152 iteration 32 energy 0 : -12096.1
 E-Slope 0.00044582 iteration 33 energy 0 : -12115.1
 E-Slope 0.000414796 iteration 34 energy 0 : -12113.3
 E-Slope 0.000421539 iteration 35 energy 0 : -12133.5
 E-Slope 0.000390314 iteration 36 energy 0 : -12130.5
 E-Slope 0.000397317 iteration 37 energy 0 : -12148.4
 E-Slope 0.0003815 iteration 38 energy 0 : -12146.3
 E-Slope 0.00040745 iteration 39 energy 0 : -12168.8
 E-Slope 0.000400677 iteration 40 energy 0 : -12169
 E-Slope 0.000429489 iteration 41 energy 0 : -12189
 E-Slope 0.000414044 iteration 42 energy 0 : -12183.4
 E-Slope 0.000431463 iteration 43 energy 0 : -12202
 E-Slope 0.000409022 iteration 44 energy 0 : -12198.7
 E-Slope 0.000422537 iteration 45 energy 0 : -12218.4
 E-Slope 0.000390396 iteration 46 energy 0 : -12210.8
 E-Slope 0.000399612 iteration 47 energy 0 : -12231.6
 E-Slope 0.000369363 iteration 48 energy 0 : -12227.8
 E-Slope 0.000376731 iteration 49 energy 0 : -12247.9
 E-Slope 0.000337362 iteration 50 energy 0 : -12238.1
 E-Slope 0.00033924 iteration 51 energy 0 : -12254.4
 E-Slope 0.000309363 iteration 52 energy 0 : -12249.6
 E-Slope 0.000319473 iteration 53 energy 0 : -12266.6
 E-Slope 0.000281535 iteration 54 energy 0 : -12256.9
 E-Slope 0.000288427 iteration 55 energy 0 : -12277.1
 E-Slope 0.000257075 iteration 56 energy 0 : -12269.7
 E-Slope 0.000276856 iteration 57 energy 0 : -12291.6
 E-Slope 0.000251576 iteration 58 energy 0 : -12284.1
 E-Slope 0.000276275 iteration 59 energy 0 : -12304.1
 E-Slope 0.000259884 iteration 60 energy 0 : -12295.1
 E-Slope 0.000293694 iteration 61 energy 0 : -12316.1
 E-Slope 0.000274405 iteration 62 energy 0 : -12306.3
 E-Slope 0.000296272 iteration 63 energy 0 : -12326.4
 E-Slope 0.00027179 iteration 64 energy 0 : -12315.9
 E-Slope 0.00029102 iteration 65 energy 0 : -12336.5
 E-Slope 0.000255629 iteration 66 energy 0 : -12325.6
 E-Slope 0.000270493 iteration 67 energy 0 : -12346.6
 E-Slope 0.000235073 iteration 68 energy 0 : -12335.2
 E-Slope 0.000249907 iteration 69 energy 0 : -12353.6
 E-Slope 0.000214897 iteration 70 energy 0 : -12341.7
 E-Slope 0.000231981 iteration 71 energy 0 : -12362.1
 E-Slope 0.000198759 iteration 72 energy 0 : -12350.8
 E-Slope 0.000220872 iteration 73 energy 0 : -12371.8
 E-Slope 0.000190407 iteration 74 energy 0 : -12359.2
 E-Slope 0.000212334 iteration 75 energy 0 : -12378.8
 E-Slope 0.000181444 iteration 76 energy 0 : -12366.4
 E-Slope 0.000206627 iteration 77 energy 0 : -12387.5
 E-Slope 0.000177577 iteration 78 energy 0 : -12374.5
 E-Slope 0.000205509 iteration 79 energy 0 : -12395.6
 E-Slope 0.000179455 iteration 80 energy 0 : -12383
 E-Slope 0.00020539 iteration 81 energy 0 : -12403.6
 E-Slope 0.000176661 iteration 82 energy 0 : -12391.3
 E-Slope 0.000202239 iteration 83 energy 0 : -12411.2
 E-Slope 0.000174046 iteration 84 energy 0 : -12398.7
 E-Slope 0.000199676 iteration 85 energy 0 : -12417.7
 E-Slope 0.000171192 iteration 86 energy 0 : -12406
 E-Slope 0.000192359 iteration 87 energy 0 : -12423.7
 E-Slope 0.000158757 iteration 88 energy 0 : -12411.1
 E-Slope 0.000179283 iteration 89 energy 0 : -12429.5
 E-Slope 0.000145838 iteration 90 energy 0 : -12417.5
 tired convergence: reached max iterations 
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -73302.9
 iteration 2 energy 0 : -74721.9
 iteration 3 energy 0 : -76050.4
 iteration 4 energy 0 : -77282.6
 iteration 5 energy 0 : -78246.5
 iteration 6 energy 0 : -78957.8
 iteration 7 energy 0 : -79553.5
 iteration 8 energy 0 : -80081.4
 iteration 9 energy 0 : -80609.7
 iteration 10 energy 0 : -81156
 iteration 11 energy 0 : -81699.5
 iteration 12 energy 0 : -82198.2
 E-Slope 0.00485992 iteration 13 energy 0 : -82679.3
 E-Slope 0.00430634 iteration 14 energy 0 : -83106.7
 E-Slope 0.00388961 iteration 15 energy 0 : -83494
 E-Slope 0.00359588 iteration 16 energy 0 : -83827.1
 E-Slope 0.00336546 iteration 17 energy 0 : -84118
 E-Slope 0.00307469 iteration 18 energy 0 : -84093.5
 E-Slope 0.00270869 iteration 19 energy 0 : -84033.9
 E-Slope 0.00231988 iteration 20 energy 0 : -84161.9
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2972_03102017_Test_NewCases_Aug1_Ref_vimp2_2597_10182016_Test_NewCases/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2972_03102017_Test_NewCases_Aug1_Ref_vimp2_2597_10182016_Test_NewCases/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2972_03102017_Test_NewCases_Aug1_Ref_vimp2_2597_10182016_Test_NewCases/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2972_03102017_Test_NewCases_Aug1_Ref_vimp2_2597_10182016_Test_NewCases/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2972_03102017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2554_09282016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2972_03102017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2554_09282016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547790083
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [13.604, 10.47, 1.68781]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -1.2818245736746778, -0.9328699004103402, 7.131269867480841]
level 0, iter 333, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.02912594103999661, 0.039085329882629055, 0.025763326107896042, 0.9984789770317444, 0.9029492950312329, 0.937729679265191, 1.0139769163382861, 0.04779398556303804, -0.0666737733533687, -0.03442894380168732, -2.931821643913223, -1.2819811264021148, 6.645074921056151]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 86, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.02316374623289744, 0.04271912674816563, 0.02695456985950703, 0.9984547902804718, 0.9036674813497556, 0.940178470354979, 1.0224619305144336, 0.05626635778345206, -0.07886259519470147, -0.04463460921156133, -2.9179225109688742, -1.5703433451213125, 6.77682445639493]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 564, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.01746320284151614, 0.045992339844578276, 0.04322015778769731, 0.9978535760235284, 0.9032625510308426, 0.9223096129331, 1.007232046483193, 0.07997504058936954, -0.0917037478801855, -0.07641650844813681, -2.7966690157925935, -1.796896694366653, 7.054248151028431]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 155, size: fix[39, 39, 32]-mov[36, 39, 32], affine para: [-0.026969531182518703, 0.043961437377215126, 0.04198611520713237, 0.9977861507063214, 0.9019757029585103, 0.9302617525017994, 1.0189147318397889, 0.09218396261442692, -0.08777627683892718, -0.08415858133657506, -2.7490446786990916, -1.8413301954480967, 6.944571475464434]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 135, size: fix[77, 77, 39]-mov[72, 78, 38], affine para: [-0.032820624959989095, 0.04406381920576166, 0.0413785697669687, 0.9976316957566443, 0.9063356805353064, 0.9309255436271858, 1.0149598987573292, 0.09709590764402419, -0.08516897065149344, -0.08436331162434083, -2.6767521749107646, -1.914014530494558, 6.818030957321166]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 1122, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.01851403914543236, -0.04044359095719245, -0.02917241293732251, 0.9985842561488856, 1.109293303854988, 1.050989820277406, 0.9697161072895143, -0.054192599212884586, 0.0563719213283402, 0.04249805436492022, 3.208184899205339, 1.3186727610148519, -6.523106233692321]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 152, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.01629306708296606, -0.04029377037383848, -0.03392712887609296, 0.9984787919431817, 1.1099996705455757, 1.0530826219078682, 0.9719795036449641, -0.061067814428930736, 0.05281653144351266, 0.054432967887818526, 3.289626490539264, 1.4629829411007498, -6.450199399861129]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 205, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.023573899200121342, -0.03889798310363563, -0.031042175910211554, 0.998482649574709, 1.11795691113934, 1.0590568757987362, 0.9736892778686214, -0.06775103096949789, 0.05460206139588479, 0.0678237088401441, 3.2760777938026426, 1.5435498792367819, -6.315898914841331]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 827, size: fix[36, 39, 32]-mov[39, 39, 32], affine para: [0.01986060492826606, -0.03809642891558931, -0.03868187379057356, 0.9983275670419067, 1.1164451458893527, 1.0496734960338683, 0.9679618351288641, -0.06996470572789863, 0.043884596612876976, 0.07323681185509245, 3.207239235435454, 1.40765029821869, -6.489738607436698]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 163, size: fix[72, 78, 38]-mov[77, 77, 39], affine para: [0.02558862664511259, -0.03764280425249745, -0.03957781058892341, 0.9981792616476324, 1.1094214166971659, 1.0460791462479153, 0.9662486017091043, -0.07531810407123996, 0.043167716933815464, 0.07892662327474122, 3.108196185984913, 1.419828312430435, -6.479263327433206]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.501692 v2 -0.489069
final [-0.032820624959989095, 0.04406381920576166, 0.0413785697669687, 0.9976316957566443, 0.9063356805353064, 0.9309255436271858, 1.0149598987573292, 0.09709590764402419, -0.08516897065149344, -0.08436331162434083, -2.6767521749107646, -1.914014530494558, 6.818030957321166]
outputput affine center: [13.604, 10.47, 1.68781]
output affine para: [-0.032820624959989095, 0.04406381920576166, 0.0413785697669687, 0.9976316957566443, 0.9063356805353064, 0.9309255436271858, 1.0149598987573292, 0.09709590764402419, -0.08516897065149344, -0.08436331162434083, -2.6767521749107646, -1.914014530494558, 6.818030957321166]
initial measure value (MMI): rval = -0.274549
final measure value (MMI): rval = -0.487179
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -6388.73
 iteration 2 energy 0 : -6764.61
 iteration 3 energy 0 : -7095.43
 iteration 4 energy 0 : -7378.36
 iteration 5 energy 0 : -7605.56
 iteration 6 energy 0 : -7775.11
 iteration 7 energy 0 : -7912.03
 iteration 8 energy 0 : -8030.47
 iteration 9 energy 0 : -8112.07
 iteration 10 energy 0 : -8149.45
 iteration 11 energy 0 : -8195.22
 iteration 12 energy 0 : -8194.53
 E-Slope 0.00902334 iteration 13 energy 0 : -8194.15
 E-Slope 0.0066969 iteration 14 energy 0 : -8205.67
 E-Slope 0.00479994 iteration 15 energy 0 : -8200.83
 E-Slope 0.00336342 iteration 16 energy 0 : -8219.68
 E-Slope 0.00226053 iteration 17 energy 0 : -8213.14
 E-Slope 0.00147317 iteration 18 energy 0 : -8231.75
 E-Slope 0.000902779 iteration 19 energy 0 : -8224.72
 E-Slope 0.000601351 iteration 20 energy 0 : -8242.23
 E-Slope 0.000437036 iteration 21 energy 0 : -8234.88
 E-Slope 0.000371017 iteration 22 energy 0 : -8251.31
 E-Slope 0.000372961 iteration 23 energy 0 : -8244.12
 E-Slope 0.00038489 iteration 24 energy 0 : -8259.11
 E-Slope 0.000351392 iteration 25 energy 0 : -8252.07
 E-Slope 0.000347205 iteration 26 energy 0 : -8262.07
 E-Slope 0.000294104 iteration 27 energy 0 : -8257.07
 E-Slope 0.000286438 iteration 28 energy 0 : -8264.82
 E-Slope 0.000235409 iteration 29 energy 0 : -8262.11
 E-Slope 0.000225864 iteration 30 energy 0 : -8266.92
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -13679.5
 iteration 2 energy 0 : -13856.7
 iteration 3 energy 0 : -14006.9
 iteration 4 energy 0 : -14139.4
 iteration 5 energy 0 : -14282.5
 iteration 6 energy 0 : -14437.5
 iteration 7 energy 0 : -14569.6
 iteration 8 energy 0 : -14622.1
 iteration 9 energy 0 : -14595.7
 iteration 10 energy 0 : -14615.1
 iteration 11 energy 0 : -14597.1
 iteration 12 energy 0 : -14602.9
 E-Slope 0.00262443 iteration 13 energy 0 : -14594.4
 E-Slope 0.00186697 iteration 14 energy 0 : -14594.4
 E-Slope 0.0011967 iteration 15 energy 0 : -14595.4
 E-Slope 0.000623643 iteration 16 energy 0 : -14591.8
 E-Slope 0.00021188 iteration 17 energy 0 : -14599.7
 E-Slope -1.72555e-05 iteration 18 energy 0 : -14592.6
 Converged due to oscillation in optimization  metric 0 bad 5  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -86166.7
 iteration 2 energy 0 : -88213.8
 iteration 3 energy 0 : -90091
 iteration 4 energy 0 : -91544
 iteration 5 energy 0 : -92723.6
 iteration 6 energy 0 : -93635.3
 iteration 7 energy 0 : -94428.6
 iteration 8 energy 0 : -95191.6
 iteration 9 energy 0 : -95933.4
 iteration 10 energy 0 : -96550.2
 iteration 11 energy 0 : -97122.6
 iteration 12 energy 0 : -97652.8
 E-Slope 0.00514909 iteration 13 energy 0 : -98149.8
 E-Slope 0.0044635 iteration 14 energy 0 : -98614.8
 E-Slope 0.00396045 iteration 15 energy 0 : -99026.7
 E-Slope 0.00355951 iteration 16 energy 0 : -99344.9
 E-Slope 0.00321691 iteration 17 energy 0 : -99607.2
 E-Slope 0.00288784 iteration 18 energy 0 : -99818.6
 E-Slope 0.00256046 iteration 19 energy 0 : -99991.7
 E-Slope 0.00224479 iteration 20 energy 0 : -100142
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2972_03102017_Test_NewCases_Aug2_Ref_vimp2_2554_09282016/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2972_03102017_Test_NewCases_Aug2_Ref_vimp2_2554_09282016/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2972_03102017_Test_NewCases_Aug2_Ref_vimp2_2554_09282016/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2972_03102017_Test_NewCases_Aug2_Ref_vimp2_2554_09282016/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2998_03222017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2438_08122016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2998_03222017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2438_08122016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547790173
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [13.5084, 10.2546, -7.98996]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 3.3053988931627476, 0.18190099281293293, 16.404230649776046]
level 0, iter 2516, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.10464051565942462, -0.014248780048244243, -0.05307144267301107, 0.9929908140170642, 0.9307746567620937, 0.9836300844469129, 0.9503400541322676, 0.017694270347076678, 0.061979090604508694, 0.0740087866779859, 2.49609650374578, 2.761191562052743, 15.36384313282837]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 298, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.10864371405114541, -0.014211211164918336, -0.05286153987735652, 0.9925725376395388, 0.9327737860403762, 0.9866223711672274, 0.9498242687298761, 0.015852638913927537, 0.059266033955341774, 0.08831746903683906, 2.5068178163154915, 2.8037758688869503, 15.383585455091414]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 38, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.10973034485153559, -0.013797578175911287, -0.052134474732665775, 0.9924972920867804, 0.927222542775839, 0.9809869748004563, 0.9434438923589271, 0.015305344259600541, 0.05946185959986037, 0.09164316840368632, 2.5206858287227276, 2.8792185973961115, 15.393575882370856]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 175, size: fix[39, 45, 33]-mov[38, 39, 32], affine para: [0.11477167990171282, -0.010520539987527503, -0.04604923907512009, 0.9922682335495338, 0.9228726711714901, 0.9719685970505914, 0.9335591183884666, 0.008434893629584552, 0.052253773854332164, 0.100380458088578, 2.451728644110879, 2.8249630108193853, 15.529037232247298]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 519, size: fix[77, 89, 47]-mov[75, 78, 37], affine para: [0.11921360409171637, -0.009316911692505259, -0.04232397311911159, 0.9919223724946374, 0.9282556097901491, 0.9793414316277577, 0.9441529891855931, 0.001964471532799099, 0.05200056991853933, 0.1023938455218297, 2.30161846965338, 2.5820907303613434, 15.691308914482908]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 833, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.11260846701904553, 0.0175569019013074, 0.05160827529342493, 0.9921429706813865, 1.0546039222989565, 1.034647811818378, 1.0157912567010774, -0.013509892792035842, -0.07919335433796264, -0.08416956018136734, -1.6752622975825664, -5.215139189684161, -14.618052841104793]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 159, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.10976652804209587, 0.017667671576057347, 0.051969389626590146, 0.9924406003607994, 1.0552521213403672, 1.0355837962792105, 1.0194848487388743, -0.012981150066420583, -0.07937333367730255, -0.09291264732662848, -1.6771586084012018, -5.141948578970549, -14.723367270810138]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 118, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.11561717129048095, 0.015931645191545767, 0.05106594819626495, 0.9918523687117426, 1.05073947263367, 1.0290002906165, 1.0159275703133233, -0.013341588937670613, -0.07530633437813554, -0.09370528445849222, -1.7148147070540551, -5.105108381629861, -14.656726060087076]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 215, size: fix[38, 39, 32]-mov[39, 45, 33], affine para: [-0.11791719990755292, 0.01724472403343598, 0.04910924846472631, 0.9916584266642434, 1.0488441374557291, 1.0264853398903868, 1.0200301866331682, -0.012017784431876335, -0.06992577935758115, -0.09759471648811043, -1.909299760378902, -5.353350706705209, -14.686782974624784]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 239, size: fix[75, 78, 37]-mov[77, 89, 47], affine para: [-0.11821409245776188, 0.01927585029363805, 0.05361274467599729, 0.9913523811179108, 1.0314103635744407, 1.0303414276773653, 1.0101429784340352, -0.01838440938352305, -0.07238787446847499, -0.09743593660331613, -1.8602586153466285, -5.287670178006921, -14.485266898573448]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.374094 v2 -0.394016
 last params [0.11921360409171637, -0.009316911692505259, -0.04232397311911159, 0.9919223724946374, 0.9282556097901491, 0.9793414316277577, 0.9441529891855931, 0.001964471532799099, 0.05200056991853933, 0.1023938455218297, 2.30161846965338, 2.5820907303613434, 15.691308914482908]
 my params [-0.11821409245776188, 0.01927585029363805, 0.05361274467599729, 0.9913523811179108, 1.0314103635744407, 1.0303414276773653, 1.0101429784340352, -0.01838440938352305, -0.07238787446847499, -0.09743593660331613, -1.8602586153466285, -5.287670178006921, -14.485266898573448]
A=0.96315 0.133248 0.0178381 
-0.105127 0.960654 -0.131786 
0.0252863 0.234076 0.961555 

rotation R0.993758 0.0994269 -0.0505995 
-0.108468 0.967174 -0.229803 
0.0260898 0.233857 0.971921 

upper R0.9692 0.0343227 0.0571081 
0 0.997108 0.0991804 
0 0 0.963937 

s=0.252125 u=0.1169 v=-0.0193353 w-0.0524156 r=0.991571
m_Rotation from vnl0.1169 -0.0193353 -0.0524156 0.991571
 new params [0.11690041401362701, -0.019335302044953123, -0.05241558063839598, 0.9915709990740011, 0.9692000723086157, 0.9971082323192509, 0.9639372378727407, 0.03541341417231642, 0.05892294456679165, 0.09946806008414076, 2.7546684791252645, 2.9751088459314365, 15.213133789373341]
outputput affine center: [13.5084, 10.2546, -7.98996]
output affine para: [0.11690041401362701, -0.019335302044953123, -0.05241558063839598, 0.9915709990740011, 0.9692000723086157, 0.9971082323192509, 0.9639372378727407, 0.03541341417231642, 0.05892294456679165, 0.09946806008414076, 2.7546684791252645, 2.9751088459314365, 15.213133789373341]
initial measure value (MMI): rval = -0.163616
final measure value (MMI): rval = -0.392785
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -4711.68
 iteration 2 energy 0 : -5264.69
 iteration 3 energy 0 : -5647.35
 iteration 4 energy 0 : -5913.13
 iteration 5 energy 0 : -6125.9
 iteration 6 energy 0 : -6320.74
 iteration 7 energy 0 : -6494.41
 iteration 8 energy 0 : -6650.81
 iteration 9 energy 0 : -6795.65
 iteration 10 energy 0 : -6918.72
 iteration 11 energy 0 : -7029.77
 iteration 12 energy 0 : -7126.6
 E-Slope 0.0149424 iteration 13 energy 0 : -7231.32
 E-Slope 0.0127827 iteration 14 energy 0 : -7330.42
 E-Slope 0.0112682 iteration 15 energy 0 : -7414.18
 E-Slope 0.0100176 iteration 16 energy 0 : -7475.9
 E-Slope 0.00893303 iteration 17 energy 0 : -7540.94
 E-Slope 0.00789472 iteration 18 energy 0 : -7563.03
 E-Slope 0.0068093 iteration 19 energy 0 : -7551.91
 E-Slope 0.0056477 iteration 20 energy 0 : -7523.88
 E-Slope 0.00453293 iteration 21 energy 0 : -7527.38
 E-Slope 0.00346037 iteration 22 energy 0 : -7527.97
 E-Slope 0.00247204 iteration 23 energy 0 : -7531.92
 E-Slope 0.00157674 iteration 24 energy 0 : -7530.47
 E-Slope 0.000880778 iteration 25 energy 0 : -7539.14
 E-Slope 0.000379466 iteration 26 energy 0 : -7535.51
 E-Slope 0.000105344 iteration 27 energy 0 : -7547.99
 E-Slope -3.47197e-05 iteration 28 energy 0 : -7542.24
 Converged due to oscillation in optimization  metric 0 bad 5  
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -15052.7
 iteration 2 energy 0 : -15424.1
 iteration 3 energy 0 : -15665.1
 iteration 4 energy 0 : -15877.6
 iteration 5 energy 0 : -16035.1
 iteration 6 energy 0 : -16156.8
 iteration 7 energy 0 : -16261.3
 iteration 8 energy 0 : -16403.4
 iteration 9 energy 0 : -16546.4
 iteration 10 energy 0 : -16675
 iteration 11 energy 0 : -16680.8
 iteration 12 energy 0 : -16660.6
 E-Slope 0.00407295 iteration 13 energy 0 : -16672.4
 E-Slope 0.00332166 iteration 14 energy 0 : -16696.3
 E-Slope 0.00261883 iteration 15 energy 0 : -16678.2
 E-Slope 0.0020818 iteration 16 energy 0 : -16747
 E-Slope 0.00155859 iteration 17 energy 0 : -16716.1
 E-Slope 0.00118769 iteration 18 energy 0 : -16805.3
 E-Slope 0.000827268 iteration 19 energy 0 : -16779.3
 E-Slope 0.000607073 iteration 20 energy 0 : -16803.7
 E-Slope 0.00049866 iteration 21 energy 0 : -16792.5
 E-Slope 0.000532091 iteration 22 energy 0 : -16810.6
 E-Slope 0.000518687 iteration 23 energy 0 : -16795.8
 E-Slope 0.000462189 iteration 24 energy 0 : -16809.6
 E-Slope 0.00039351 iteration 25 energy 0 : -16814.5
 E-Slope 0.000339195 iteration 26 energy 0 : -16824.3
 E-Slope 0.000246279 iteration 27 energy 0 : -16830.7
 E-Slope 0.000228666 iteration 28 energy 0 : -16838.4
 E-Slope 0.000169419 iteration 29 energy 0 : -16849.9
 E-Slope 0.000192165 iteration 30 energy 0 : -16838.8
 E-Slope 0.000204504 iteration 31 energy 0 : -16867.3
 E-Slope 0.00022842 iteration 32 energy 0 : -16864.9
 E-Slope 0.00023786 iteration 33 energy 0 : -16877.4
 E-Slope 0.000247784 iteration 34 energy 0 : -16872.9
 E-Slope 0.000250213 iteration 35 energy 0 : -16895.5
 E-Slope 0.00024192 iteration 36 energy 0 : -16887.6
 E-Slope 0.000242203 iteration 37 energy 0 : -16903.7
 E-Slope 0.000232682 iteration 38 energy 0 : -16900
 E-Slope 0.000234008 iteration 39 energy 0 : -16916.1
 E-Slope 0.000225604 iteration 40 energy 0 : -16914.1
 E-Slope 0.000249796 iteration 41 energy 0 : -16942.6
 E-Slope 0.000226058 iteration 42 energy 0 : -16929.1
 E-Slope 0.000239097 iteration 43 energy 0 : -16943.9
 E-Slope 0.00023026 iteration 44 energy 0 : -16941.8
 E-Slope 0.000242896 iteration 45 energy 0 : -16960.6
 E-Slope 0.000211038 iteration 46 energy 0 : -16942.5
 E-Slope 0.00022763 iteration 47 energy 0 : -16972.3
 E-Slope 0.00018923 iteration 48 energy 0 : -16947.7
 E-Slope 0.000195816 iteration 49 energy 0 : -16979.5
 E-Slope 0.000165157 iteration 50 energy 0 : -16964
 E-Slope 0.000161901 iteration 51 energy 0 : -16980.2
 E-Slope 0.000132121 iteration 52 energy 0 : -16970.1
 E-Slope 0.000155307 iteration 53 energy 0 : -16993.2
 E-Slope 0.000122115 iteration 54 energy 0 : -16968.8
 E-Slope 0.000136614 iteration 55 energy 0 : -17000.7
 E-Slope 0.000114322 iteration 56 energy 0 : -16980.6
 E-Slope 0.000133194 iteration 57 energy 0 : -17002.4
 E-Slope 9.45106e-05 iteration 58 energy 0 : -16980.2
 Converged due to oscillation in optimization  metric 0 bad 21  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -114210
 iteration 2 energy 0 : -116550
 iteration 3 energy 0 : -118939
 iteration 4 energy 0 : -120671
 iteration 5 energy 0 : -122178
 iteration 6 energy 0 : -123644
 iteration 7 energy 0 : -124969
 iteration 8 energy 0 : -126198
 iteration 9 energy 0 : -127256
 iteration 10 energy 0 : -128204
 iteration 11 energy 0 : -129050
 iteration 12 energy 0 : -129814
 E-Slope 0.00565929 iteration 13 energy 0 : -130534
 E-Slope 0.00500947 iteration 14 energy 0 : -131186
 E-Slope 0.0045096 iteration 15 energy 0 : -131847
 E-Slope 0.00405266 iteration 16 energy 0 : -132314
 E-Slope 0.00362478 iteration 17 energy 0 : -132744
 E-Slope 0.00323708 iteration 18 energy 0 : -133117
 E-Slope 0.00288764 iteration 19 energy 0 : -133466
 E-Slope 0.00257447 iteration 20 energy 0 : -133757
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2998_03222017_Test_NewCases_Aug1_Ref_vimp2_2438_08122016/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2998_03222017_Test_NewCases_Aug1_Ref_vimp2_2438_08122016/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2998_03222017_Test_NewCases_Aug1_Ref_vimp2_2438_08122016/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2998_03222017_Test_NewCases_Aug1_Ref_vimp2_2438_08122016/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2998_03222017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2587_10132016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2998_03222017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2587_10132016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547790309
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [13.5084, 10.2546, -7.98996]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -2.6009933685057582, 3.6866207021664845, 16.56629668531571]
level 0, iter 277, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.053186036178969096, -0.006953611245450167, 0.019336157715852325, 0.9983731796532818, 0.9528090703220482, 0.993281729993758, 0.9595653145338389, 0.016987250258955755, 0.009590736097228006, 0.025583558145396954, -1.3686035954073263, 5.433788310383758, 12.901996424836712]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 435, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.05220617943617317, -0.009940951425139224, 0.016559763699776256, 0.9984495312932189, 0.9565081914240258, 1.0181185558603607, 0.9524483702050365, 0.025837462597311508, 0.010215507057672765, 0.051134606210877016, -1.3243311743564066, 5.368507784708443, 12.972694852063164]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 76, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.05948818826163712, -0.004111725147142396, 0.01665032120296556, 0.9980816679898997, 0.9479496106851029, 1.0210461389744434, 0.9542489401062924, 0.029808266674366188, 0.007799717349143845, 0.06034247712493239, -1.340389620374279, 5.541766998521096, 12.984752003070648]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 151, size: fix[39, 45, 33]-mov[37, 38, 32], affine para: [0.05265492856548098, -0.005174914575703108, 0.01855147494514609, 0.998427023639814, 0.9505910906636066, 1.0370511952220518, 0.9527300032928335, 0.035816710100153894, 0.007180566412949971, 0.07293329114120897, -1.3283802126897988, 5.7702741405632425, 12.893757670151842]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 221, size: fix[77, 89, 47]-mov[73, 76, 40], affine para: [0.05781043560391136, -0.006391491326252396, 0.018956262600099787, 0.9981271274152148, 0.9459319366069634, 1.0407796457354683, 0.9500685981718671, 0.034895755272426596, 0.013570571101511301, 0.07704954658944016, -1.4350446244185882, 5.602851877399047, 12.942655686779162]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 1124, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.071318755364028, 0.00011163019156607759, -0.003604098762733047, 0.9974470578151678, 1.044972000077263, 0.9330691320332719, 1.0399183707998767, -0.0020060711005889013, 0.004739495359281755, -0.14525221666165453, 1.159358798601393, -5.270717128326956, -12.812133386225412]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 332, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.0724050044488159, 0.0022974003725970906, -0.000697555844002925, 0.997372423269332, 1.0519164053307717, 0.9046030855190064, 1.0415689491434426, 0.003313124892669558, -0.0028275284111801, -0.1620786441201372, 1.2398858703684286, -5.196482983086436, -12.889328830718688]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 112, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.07246004164824188, 0.0036668038394052603, -0.00391837745134861, 0.9973568785705982, 1.049763539256139, 0.9105438227569528, 1.0434463814824648, 0.0014773186203531723, -0.002462172869945642, -0.1610555633356317, 1.1796387147112068, -5.283160782409392, -12.870831659675043]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 159, size: fix[37, 38, 32]-mov[39, 45, 33], affine para: [-0.06926007138846053, 0.0010008839946124043, 0.0006882347041630853, 0.9975978984919158, 1.0492379619748677, 0.9065130766043356, 1.0432610773751916, 0.0027586566724265844, -0.0000025472370139268076, -0.1572699085511386, 1.2281753881427768, -5.22604908384698, -12.78579071371486]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 203, size: fix[73, 76, 40]-mov[77, 89, 47], affine para: [-0.0645425421362708, 0.0004353286819337645, 0.006900646111768795, 0.9978910019770528, 1.0433264947923886, 0.8965410340947384, 1.0375131171153629, 0.006166123577472624, -0.00276290641727605, -0.1543086666842334, 1.3781565195028118, -5.113718671069934, -12.487815130997783]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.414725 v2 -0.422402
 last params [0.05781043560391136, -0.006391491326252396, 0.018956262600099787, 0.9981271274152148, 0.9459319366069634, 1.0407796457354683, 0.9500685981718671, 0.034895755272426596, 0.013570571101511301, 0.07704954658944016, -1.4350446244185882, 5.602851877399047, 12.942655686779162]
 my params [-0.0645425421362708, 0.0004353286819337645, 0.006900646111768795, 0.9978910019770528, 1.0433264947923886, 0.8965410340947384, 1.0375131171153629, 0.006166123577472624, -0.00276290641727605, -0.1543086666842334, 1.3781565195028118, -5.113718671069934, -12.487815130997783]
A=0.958476 0.00655159 0.00093075 
-0.0154274 1.12516 0.0038193 
-2.11557e-05 0.124161 0.955813 

rotation R0.99987 0.015999 -0.00174335 
-0.0160937 0.993837 -0.109674 
-2.20694e-05 0.109688 0.993966 

upper R0.9586 -0.0115599 0.000848069 
0 1.13195 0.108652 
0 0 0.949625 

s=0.250386 u=0.0549252 v=-0.000430984 w-0.00803556 r=0.998458
m_Rotation from vnl0.0549252 -0.000430984 -0.00803556 0.998458
 new params [0.054925159582637176, -0.00043098431292869124, -0.00803556058405145, 0.9984580466216113, 0.9586003089216728, 1.1319477151670956, 0.9496248353374419, -0.012059184932180472, 0.0008846947928204721, 0.09598649496575191, -1.2758041641158049, 5.822697105479154, 12.570965924430038]
outputput affine center: [13.5084, 10.2546, -7.98996]
output affine para: [0.054925159582637176, -0.00043098431292869124, -0.00803556058405145, 0.9984580466216113, 0.9586003089216728, 1.1319477151670956, 0.9496248353374419, -0.012059184932180472, 0.0008846947928204721, 0.09598649496575191, -1.2758041641158049, 5.822697105479154, 12.570965924430038]
initial measure value (MMI): rval = -0.152125
final measure value (MMI): rval = -0.434223
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -5055.41
 iteration 2 energy 0 : -5570.53
 iteration 3 energy 0 : -5941.94
 iteration 4 energy 0 : -6150.71
 iteration 5 energy 0 : -6286.3
 iteration 6 energy 0 : -6383.73
 iteration 7 energy 0 : -6475.27
 iteration 8 energy 0 : -6564.17
 iteration 9 energy 0 : -6641.22
 iteration 10 energy 0 : -6722.94
 iteration 11 energy 0 : -6796.81
 iteration 12 energy 0 : -6886.84
 E-Slope 0.00956265 iteration 13 energy 0 : -6939.29
 E-Slope 0.00786132 iteration 14 energy 0 : -7002.75
 E-Slope 0.00693212 iteration 15 energy 0 : -7042.95
 E-Slope 0.00625319 iteration 16 energy 0 : -7066.78
 E-Slope 0.00557531 iteration 17 energy 0 : -7069.26
 E-Slope 0.00494773 iteration 18 energy 0 : -7114.77
 E-Slope 0.00424505 iteration 19 energy 0 : -7110.68
 E-Slope 0.0036353 iteration 20 energy 0 : -7151.35
 E-Slope 0.00300551 iteration 21 energy 0 : -7152.1
 E-Slope 0.00246888 iteration 22 energy 0 : -7172.97
 E-Slope 0.00196154 iteration 23 energy 0 : -7168.29
 E-Slope 0.00158135 iteration 24 energy 0 : -7169.6
 E-Slope 0.00124332 iteration 25 energy 0 : -7171.12
 E-Slope 0.00102941 iteration 26 energy 0 : -7182.67
 E-Slope 0.000843816 iteration 27 energy 0 : -7178.03
 E-Slope 0.000690818 iteration 28 energy 0 : -7185.95
 E-Slope 0.000504576 iteration 29 energy 0 : -7189.22
 E-Slope 0.000408337 iteration 30 energy 0 : -7187.81
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -14006.5
 iteration 2 energy 0 : -14252.4
 iteration 3 energy 0 : -14497.4
 iteration 4 energy 0 : -14688.4
 iteration 5 energy 0 : -14918.2
 iteration 6 energy 0 : -15088.3
 iteration 7 energy 0 : -15224.7
 iteration 8 energy 0 : -15299.3
 iteration 9 energy 0 : -15362.5
 iteration 10 energy 0 : -15358.7
 iteration 11 energy 0 : -15371.7
 iteration 12 energy 0 : -15399.3
 E-Slope 0.00379764 iteration 13 energy 0 : -15402.1
 E-Slope 0.00281931 iteration 14 energy 0 : -15396.9
 E-Slope 0.00199109 iteration 15 energy 0 : -15404.2
 E-Slope 0.00132915 iteration 16 energy 0 : -15442.5
 E-Slope 0.000844494 iteration 17 energy 0 : -15419
 E-Slope 0.000577033 iteration 18 energy 0 : -15461.4
 E-Slope 0.000426807 iteration 19 energy 0 : -15448
 E-Slope 0.000372373 iteration 20 energy 0 : -15470.7
 E-Slope 0.000404745 iteration 21 energy 0 : -15494.1
 E-Slope 0.000386924 iteration 22 energy 0 : -15481.6
 E-Slope 0.000372462 iteration 23 energy 0 : -15491.9
 E-Slope 0.000387937 iteration 24 energy 0 : -15506.7
 E-Slope 0.00038375 iteration 25 energy 0 : -15509.2
 E-Slope 0.000349611 iteration 26 energy 0 : -15511.8
 E-Slope 0.000315711 iteration 27 energy 0 : -15523.9
 E-Slope 0.000315093 iteration 28 energy 0 : -15527.4
 E-Slope 0.000278801 iteration 29 energy 0 : -15540.8
 E-Slope 0.000278071 iteration 30 energy 0 : -15540.4
 E-Slope 0.000245787 iteration 31 energy 0 : -15544.6
 E-Slope 0.000231639 iteration 32 energy 0 : -15549.4
 E-Slope 0.00025171 iteration 33 energy 0 : -15564.4
 E-Slope 0.000240646 iteration 34 energy 0 : -15566.8
 E-Slope 0.000233337 iteration 35 energy 0 : -15572.5
 E-Slope 0.000243984 iteration 36 energy 0 : -15583.9
 E-Slope 0.00024987 iteration 37 energy 0 : -15590.7
 E-Slope 0.000241853 iteration 38 energy 0 : -15590.9
 E-Slope 0.000246815 iteration 39 energy 0 : -15601.7
 E-Slope 0.000260204 iteration 40 energy 0 : -15618.4
 E-Slope 0.000272088 iteration 41 energy 0 : -15618
 E-Slope 0.00027281 iteration 42 energy 0 : -15623.9
 E-Slope 0.00026504 iteration 43 energy 0 : -15627.6
 E-Slope 0.000238806 iteration 44 energy 0 : -15622.6
 E-Slope 0.000239775 iteration 45 energy 0 : -15641.3
 E-Slope 0.000244789 iteration 46 energy 0 : -15655.7
 E-Slope 0.000223488 iteration 47 energy 0 : -15643.1
 E-Slope 0.000222407 iteration 48 energy 0 : -15658.8
 E-Slope 0.000214428 iteration 49 energy 0 : -15658.2
 E-Slope 0.000190035 iteration 50 energy 0 : -15656.9
 E-Slope 0.000176489 iteration 51 energy 0 : -15665.1
 E-Slope 0.000197858 iteration 52 energy 0 : -15685.5
 E-Slope 0.000189126 iteration 53 energy 0 : -15673.5
 E-Slope 0.00020092 iteration 54 energy 0 : -15693
 E-Slope 0.000185288 iteration 55 energy 0 : -15678.5
 E-Slope 0.000162199 iteration 56 energy 0 : -15687.6
 E-Slope 0.000167154 iteration 57 energy 0 : -15700.1
 E-Slope 0.000187524 iteration 58 energy 0 : -15706.9
 E-Slope 0.000165321 iteration 59 energy 0 : -15696.6
 E-Slope 0.000164121 iteration 60 energy 0 : -15705.5
 E-Slope 0.000168197 iteration 61 energy 0 : -15718.6
 E-Slope 0.000132285 iteration 62 energy 0 : -15698.3
 E-Slope 0.000118844 iteration 63 energy 0 : -15714.7
 E-Slope 0.000115246 iteration 64 energy 0 : -15708.5
 E-Slope 9.66191e-05 iteration 65 energy 0 : -15715
 Converged due to oscillation in optimization  metric 0 bad 16  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -102613
 iteration 2 energy 0 : -104299
 iteration 3 energy 0 : -106152
 iteration 4 energy 0 : -107798
 iteration 5 energy 0 : -109434
 iteration 6 energy 0 : -111219
 iteration 7 energy 0 : -112759
 iteration 8 energy 0 : -114092
 iteration 9 energy 0 : -115347
 iteration 10 energy 0 : -116428
 iteration 11 energy 0 : -117396
 iteration 12 energy 0 : -118319
 E-Slope 0.00692264 iteration 13 energy 0 : -119078
 E-Slope 0.00627122 iteration 14 energy 0 : -119681
 E-Slope 0.00562844 iteration 15 energy 0 : -120241
 E-Slope 0.00497478 iteration 16 energy 0 : -120683
 E-Slope 0.00435928 iteration 17 energy 0 : -121201
 E-Slope 0.00383749 iteration 18 energy 0 : -121679
 E-Slope 0.00338912 iteration 19 energy 0 : -122101
 E-Slope 0.00299916 iteration 20 energy 0 : -122480
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2998_03222017_Test_NewCases_Aug2_Ref_vimp2_2587_10132016_Test_NewCases/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2998_03222017_Test_NewCases_Aug2_Ref_vimp2_2587_10132016_Test_NewCases/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2998_03222017_Test_NewCases_Aug2_Ref_vimp2_2587_10132016_Test_NewCases/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2998_03222017_Test_NewCases_Aug2_Ref_vimp2_2587_10132016_Test_NewCases/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_3131_05182017/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1844_01142016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_3131_05182017/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_1844_01142016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547790441
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [11.4398, 10.8751, 6.19656]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 2.692188692337801, -11.465891605894729, 23.14364340496353]
level 0, iter 145, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.022079313774149355, -0.003258670816422146, -0.01042641713305072, 0.9996965413531951, 0.9586539819999347, 0.9608260300707081, 0.9491602325833581, -0.006486331285522976, 0.021236083027586335, -0.02762379746474633, 2.284926115661613, -10.468222139357836, 22.799612755896558]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 281, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.026418186559690374, -0.007478768837067056, -0.007284498574685022, 0.9995964603359171, 0.9553987951351589, 0.9602856234820774, 0.9517074150789105, -0.009494301560925027, 0.03297719965286681, -0.039162268704928206, 2.257236526541806, -10.46736921195368, 22.994217474683033]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 542, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.0241066260869736, -0.010079906590287301, -0.008049207569260178, 0.9996261682845947, 0.9520382419378635, 0.964094758487585, 0.9542340116246679, -0.010095649994440386, 0.04430299336665622, -0.05228083846911877, 2.2814616861083454, -10.44397783222663, 22.84298472357706]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 102, size: fix[41, 42, 32]-mov[37, 36, 32], affine para: [0.018296580275988242, -0.013459749745796423, -0.009951303815362939, 0.9996924736334466, 0.9620360404365841, 0.974511978016527, 0.9604626010948777, -0.01654812884779347, 0.045093520578956436, -0.06246679442311125, 2.25911810305394, -10.20640498733837, 22.94888477805989]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 55, size: fix[81, 83, 39]-mov[73, 72, 37], affine para: [0.01575385323678931, -0.009298915864772517, -0.010198237798859661, 0.9997806470510077, 0.9649878855133549, 0.9818310079205762, 0.9626728848742149, -0.015479319158677353, 0.045471300987229304, -0.06446179573764689, 2.2634613125240093, -10.352511289126467, 22.989842883813655]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 1404, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.021403180585531877, 0.0062021233239488716, -0.012266245406251817, 0.9996764360285438, 1.0415840121956126, 1.0212549685940493, 1.0435275748094355, -0.018118331134847877, -0.04021957204976788, 0.110161687677317, -1.4955429970528247, 7.673493339803428, -24.636207891199057]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 48, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.020022045484986626, 0.006908415698079782, -0.010584555195469603, 0.9997196400383729, 1.0353453986859145, 1.0200227489385685, 1.0431868522250503, -0.020387593345525288, -0.04138604725115266, 0.11251639086746548, -1.531513433712587, 7.6628744214654265, -24.536569210876173]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 47, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.021493486818353943, 0.007573420011112149, -0.013105172832940666, 0.9996544041711332, 1.036821659001382, 1.0212209033851671, 1.041098214474016, -0.020581333318374487, -0.04106036510268022, 0.11495444146732452, -1.523239747950942, 7.430413580935132, -24.561963172255258]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 155, size: fix[37, 36, 32]-mov[41, 42, 32], affine para: [-0.012594512352572826, 0.0010586603633966722, -0.011029810305473193, 0.9998592904911475, 1.02096920129444, 1.014503281372944, 1.033675319965774, -0.0239044518514371, -0.030532251040251826, 0.124135977484231, -1.4842391940488049, 7.686171309396324, -24.245473499395043]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 149, size: fix[73, 72, 37]-mov[81, 83, 39], affine para: [-0.011368712370444144, -0.0020312837739592114, -0.012238246717800263, 0.9998584157682237, 1.0247429067004223, 1.010913732078176, 1.036033452737844, -0.019628461386187658, -0.031888715835857125, 0.12475011289113812, -1.4579003061440574, 7.583356553723207, -24.490654427750297]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.417117 v2 -0.434738
 last params [0.01575385323678931, -0.009298915864772517, -0.010198237798859661, 0.9997806470510077, 0.9649878855133549, 0.9818310079205762, 0.9626728848742149, -0.015479319158677353, 0.045471300987229304, -0.06446179573764689, 2.2634613125240093, -10.352511289126467, 22.989842883813655]
 my params [-0.011368712370444144, -0.0020312837739592114, -0.012238246717800263, 0.9998584157682237, 1.0247429067004223, 1.010913732078176, 1.036033452737844, -0.019628461386187658, -0.031888715835857125, 0.12475011289113812, -1.4579003061440574, 7.583356553723207, -24.490654427750297]
A=0.975923 -0.00378389 0.0322036 
0.0247101 0.985909 -0.142819 
-0.00365213 0.0219915 0.964962 

rotation R0.999673 -0.0252216 0.00430548 
0.0253115 0.999431 -0.0222835 
-0.003741 0.0223852 0.999742 

upper R0.976242 0.0210899 0.0249681 
0 0.985936 -0.121949 
0 0 0.968035 

s=0.250036 u=0.0111688 v=0.00201191 w0.0126351 r=0.999856
m_Rotation from vnl0.0111688 0.00201191 0.0126351 0.999856
 new params [0.011168803668653967, 0.0020119113612464493, 0.012635077473955186, 0.999855772026402, 0.9762423208199383, 0.9859355905612242, 0.9680349327984383, 0.02160309235462245, 0.025575757158131814, -0.12368844327627228, 2.2401788539217113, -10.938196360628098, 23.460465129913104]
outputput affine center: [11.4398, 10.8751, 6.19656]
output affine para: [0.011168803668653967, 0.0020119113612464493, 0.012635077473955186, 0.999855772026402, 0.9762423208199383, 0.9859355905612242, 0.9680349327984383, 0.02160309235462245, 0.025575757158131814, -0.12368844327627228, 2.2401788539217113, -10.938196360628098, 23.460465129913104]
initial measure value (MMI): rval = -0.336425
final measure value (MMI): rval = -0.443028
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -5159.93
 iteration 2 energy 0 : -5602.99
 iteration 3 energy 0 : -5989.38
 iteration 4 energy 0 : -6299.56
 iteration 5 energy 0 : -6545.11
 iteration 6 energy 0 : -6712.44
 iteration 7 energy 0 : -6850.35
 iteration 8 energy 0 : -6980.04
 iteration 9 energy 0 : -7073.64
 iteration 10 energy 0 : -7146.02
 iteration 11 energy 0 : -7207.11
 iteration 12 energy 0 : -7260.36
 E-Slope 0.0120267 iteration 13 energy 0 : -7310.77
 E-Slope 0.00940913 iteration 14 energy 0 : -7356.23
 E-Slope 0.00749674 iteration 15 energy 0 : -7399.87
 E-Slope 0.00613594 iteration 16 energy 0 : -7443.62
 E-Slope 0.00518046 iteration 17 energy 0 : -7480.17
 E-Slope 0.0044346 iteration 18 energy 0 : -7509.97
 E-Slope 0.00375743 iteration 19 energy 0 : -7503.39
 E-Slope 0.00314129 iteration 20 energy 0 : -7485.79
 E-Slope 0.00266071 iteration 21 energy 0 : -7518.72
 E-Slope 0.00218508 iteration 22 energy 0 : -7515.44
 E-Slope 0.00171713 iteration 23 energy 0 : -7512.21
 E-Slope 0.00125583 iteration 24 energy 0 : -7504.21
 E-Slope 0.00092759 iteration 25 energy 0 : -7534.62
 E-Slope 0.000613995 iteration 26 energy 0 : -7519.12
 E-Slope 0.000448927 iteration 27 energy 0 : -7547.57
 E-Slope 0.000324033 iteration 28 energy 0 : -7532.25
 E-Slope 0.000344209 iteration 29 energy 0 : -7558.88
 E-Slope 0.000366762 iteration 30 energy 0 : -7538.7
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -14407.3
 iteration 2 energy 0 : -14600.3
 iteration 3 energy 0 : -14791.1
 iteration 4 energy 0 : -14962.2
 iteration 5 energy 0 : -15094.2
 iteration 6 energy 0 : -15204.8
 iteration 7 energy 0 : -15307.4
 iteration 8 energy 0 : -15395.7
 iteration 9 energy 0 : -15473.6
 iteration 10 energy 0 : -15542.7
 iteration 11 energy 0 : -15612
 iteration 12 energy 0 : -15662.5
 E-Slope 0.00355808 iteration 13 energy 0 : -15653.7
 E-Slope 0.00293424 iteration 14 energy 0 : -15643.1
 E-Slope 0.00236198 iteration 15 energy 0 : -15641.8
 E-Slope 0.00186556 iteration 16 energy 0 : -15652
 E-Slope 0.00140111 iteration 17 energy 0 : -15643.4
 E-Slope 0.00102197 iteration 18 energy 0 : -15673.5
 E-Slope 0.000683501 iteration 19 energy 0 : -15657.3
 E-Slope 0.000450708 iteration 20 energy 0 : -15687.4
 E-Slope 0.000267439 iteration 21 energy 0 : -15673.8
 E-Slope 0.000185624 iteration 22 energy 0 : -15700.3
 E-Slope 0.000157081 iteration 23 energy 0 : -15685.1
 E-Slope 0.00021705 iteration 24 energy 0 : -15711.7
 E-Slope 0.000232764 iteration 25 energy 0 : -15697.6
 E-Slope 0.000249796 iteration 26 energy 0 : -15721.1
 E-Slope 0.00023026 iteration 27 energy 0 : -15707.6
 E-Slope 0.000236966 iteration 28 energy 0 : -15729.6
 E-Slope 0.00020162 iteration 29 energy 0 : -15719
 E-Slope 0.00021743 iteration 30 energy 0 : -15739
 E-Slope 0.000181563 iteration 31 energy 0 : -15727.3
 E-Slope 0.000191309 iteration 32 energy 0 : -15742.1
 E-Slope 0.000159308 iteration 33 energy 0 : -15733.9
 E-Slope 0.000166684 iteration 34 energy 0 : -15746.1
 E-Slope 0.000131898 iteration 35 energy 0 : -15738
 E-Slope 0.000129946 iteration 36 energy 0 : -15743.6
 E-Slope 0.000102207 iteration 37 energy 0 : -15744.9
 E-Slope 0.00011038 iteration 38 energy 0 : -15754.8
 E-Slope 7.68453e-05 iteration 39 energy 0 : -15742
 Converged due to oscillation in optimization  metric 0 bad 14  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -90856.3
 iteration 2 energy 0 : -92506.3
 iteration 3 energy 0 : -94148.2
 iteration 4 energy 0 : -95305.4
 iteration 5 energy 0 : -96243.2
 iteration 6 energy 0 : -97112.9
 iteration 7 energy 0 : -97971
 iteration 8 energy 0 : -98831.1
 iteration 9 energy 0 : -99540.4
 iteration 10 energy 0 : -100166
 iteration 11 energy 0 : -100771
 iteration 12 energy 0 : -101334
 E-Slope 0.00476082 iteration 13 energy 0 : -101794
 E-Slope 0.00422855 iteration 14 energy 0 : -102177
 E-Slope 0.00381254 iteration 15 energy 0 : -102509
 E-Slope 0.00343186 iteration 16 energy 0 : -102806
 E-Slope 0.00306103 iteration 17 energy 0 : -103080
 E-Slope 0.00270232 iteration 18 energy 0 : -103319
 E-Slope 0.00237538 iteration 19 energy 0 : -103555
 E-Slope 0.00209776 iteration 20 energy 0 : -103769
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_3131_05182017_Aug1_Ref_vimp2_1844_01142016/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_3131_05182017_Aug1_Ref_vimp2_1844_01142016/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_3131_05182017_Aug1_Ref_vimp2_1844_01142016/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_3131_05182017_Aug1_Ref_vimp2_1844_01142016/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_3131_05182017/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2551_09232016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_3131_05182017/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2551_09232016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547790545
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [11.4398, 10.8751, 6.19656]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 5.152259119374449, -0.8199265386607664, -24.138204540912994]
level 0, iter 731, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.12817438298159187, 0.032140208112272514, 0.05524400263633439, 0.9896900700433974, 1.1129931065659135, 1.067879282086711, 0.9943945932079277, 0.02465706117619534, 0.033681314923468424, -0.028254921770966036, 4.981548252577157, 0.5114109890057422, -24.420937966583296]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 261, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.129997261896082, 0.03678558277902769, 0.05577181239464543, 0.9892608542448981, 1.1152802412805785, 1.0857479421530327, 0.9926067749929731, 0.03767019691391248, 0.027196878944186594, -0.029898923213246855, 5.025618815858072, 0.34934594724215384, -24.402279784964694]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 51, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.1319079605313329, 0.03173238466686715, 0.0558848253372466, 0.9891765423870723, 1.119536229125247, 1.0845069959914113, 0.994046527459888, 0.037016500082615054, 0.03004960310925983, -0.029669818516302467, 4.96838055429798, 0.402504157013883, -24.513532812979125]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 80, size: fix[41, 42, 32]-mov[42, 46, 34], affine para: [-0.13447627013931843, 0.034418509779632706, 0.058703438476697685, 0.9885774654851176, 1.1185538344359292, 1.078648037609357, 0.9888072884886503, 0.03702754694169168, 0.029380781103890394, -0.029469487868769833, 4.949399336136988, 0.487344479621021, -24.587263357540472]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 90, size: fix[81, 83, 39]-mov[83, 92, 48], affine para: [-0.1308996236651131, 0.03501995826745464, 0.058142196597492146, 0.9890694495444169, 1.1235800332007944, 1.0745643156817064, 0.9827442772687479, 0.03832864795997941, 0.025136013249019942, -0.03700826403211478, 4.8925885330679115, 0.15626628743723545, -24.565105775767883]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 1542, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.13604045497480213, -0.046363819661824, -0.052460554301208204, 0.9882263308974442, 0.8902171428819226, 0.9439361285997862, 0.9638674003443011, -0.03209434983968312, -0.006502093432121815, 0.043061020917657, -7.021646565378357, -4.966991543677506, 22.14440811860135]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 926, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.13710826936394307, -0.04241268599404586, -0.048846699921814764, 0.9884414431040126, 0.8958916129101683, 0.9280444327072439, 0.9536016022451681, -0.02832205845616129, -0.014245400029326961, 0.04433557440471048, -7.042911328766443, -4.996021715743758, 21.838535096627798]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 261, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.14248084057259153, -0.04013496181842185, -0.05293752980992452, 0.9875657005218361, 0.8914179333218222, 0.9289058435840727, 0.9632007987684995, -0.03284466638221527, -0.017132388355532085, 0.053800418345757196, -7.001503872433277, -5.16047546960565, 22.221188134289303]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 774, size: fix[42, 46, 34]-mov[41, 42, 32], affine para: [0.14313010001861015, -0.0393586726429185, -0.04851788911295589, 0.9877300662592352, 0.8944958441080786, 0.9431779082929954, 0.955145518091611, -0.0259042493433932, -0.020074303261925927, 0.05317335141545752, -7.063071419664695, -5.049806385306653, 22.000412486381048]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 149, size: fix[83, 92, 48]-mov[81, 83, 39], affine para: [0.14299318876353434, -0.03849157738164902, -0.046018365554759244, 0.9879036676060967, 0.8931771227351681, 0.9397335725234505, 0.960419937819277, -0.03015312610286078, -0.021520731376518432, 0.055927968192936474, -7.065640898904145, -5.098178841222313, 22.240640642509234]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.378453 v2 -0.371597
final [-0.1308996236651131, 0.03501995826745464, 0.058142196597492146, 0.9890694495444169, 1.1235800332007944, 1.0745643156817064, 0.9827442772687479, 0.03832864795997941, 0.025136013249019942, -0.03700826403211478, 4.8925885330679115, 0.15626628743723545, -24.565105775767883]
outputput affine center: [11.4398, 10.8751, 6.19656]
output affine para: [-0.1308996236651131, 0.03501995826745464, 0.058142196597492146, 0.9890694495444169, 1.1235800332007944, 1.0745643156817064, 0.9827442772687479, 0.03832864795997941, 0.025136013249019942, -0.03700826403211478, 4.8925885330679115, 0.15626628743723545, -24.565105775767883]
initial measure value (MMI): rval = -0.160478
final measure value (MMI): rval = -0.36742
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -5748.67
 iteration 2 energy 0 : -6050.21
 iteration 3 energy 0 : -6309.88
 iteration 4 energy 0 : -6546.97
 iteration 5 energy 0 : -6783.13
 iteration 6 energy 0 : -6957.77
 iteration 7 energy 0 : -7092.42
 iteration 8 energy 0 : -7202.59
 iteration 9 energy 0 : -7293.24
 iteration 10 energy 0 : -7375.86
 iteration 11 energy 0 : -7447.19
 iteration 12 energy 0 : -7508.72
 E-Slope 0.0107714 iteration 13 energy 0 : -7563.07
 E-Slope 0.00892338 iteration 14 energy 0 : -7615.27
 E-Slope 0.00738964 iteration 15 energy 0 : -7663.11
 E-Slope 0.00616875 iteration 16 energy 0 : -7709.01
 E-Slope 0.00530431 iteration 17 energy 0 : -7749.66
 E-Slope 0.00466497 iteration 18 energy 0 : -7788.56
 E-Slope 0.00417016 iteration 19 energy 0 : -7825.15
 E-Slope 0.00378356 iteration 20 energy 0 : -7862.44
 E-Slope 0.00346156 iteration 21 energy 0 : -7894.63
 E-Slope 0.00318727 iteration 22 energy 0 : -7920.84
 E-Slope 0.00293693 iteration 23 energy 0 : -7942.54
 E-Slope 0.00269257 iteration 24 energy 0 : -7960.9
 E-Slope 0.00244332 iteration 25 energy 0 : -7976.27
 E-Slope 0.00218775 iteration 26 energy 0 : -7986.92
 E-Slope 0.00191751 iteration 27 energy 0 : -7991.94
 E-Slope 0.00163622 iteration 28 energy 0 : -7992.95
 E-Slope 0.00134894 iteration 29 energy 0 : -7993.8
 E-Slope 0.00107373 iteration 30 energy 0 : -7996.16
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -15102.8
 iteration 2 energy 0 : -15335
 iteration 3 energy 0 : -15506.4
 iteration 4 energy 0 : -15645
 iteration 5 energy 0 : -15785.1
 iteration 6 energy 0 : -15939.4
 iteration 7 energy 0 : -16079
 iteration 8 energy 0 : -16207.4
 iteration 9 energy 0 : -16324.6
 iteration 10 energy 0 : -16437
 iteration 11 energy 0 : -16544.8
 iteration 12 energy 0 : -16635.2
 E-Slope 0.00440449 iteration 13 energy 0 : -16618.8
 E-Slope 0.00386883 iteration 14 energy 0 : -16596.1
 E-Slope 0.00338056 iteration 15 energy 0 : -16670.9
 E-Slope 0.00279228 iteration 16 energy 0 : -16636.9
 E-Slope 0.00227174 iteration 17 energy 0 : -16706.8
 E-Slope 0.00172653 iteration 18 energy 0 : -16658.8
 E-Slope 0.00130996 iteration 19 energy 0 : -16719.5
 E-Slope 0.000930332 iteration 20 energy 0 : -16695.8
 E-Slope 0.000659727 iteration 21 energy 0 : -16722.6
 E-Slope 0.000432283 iteration 22 energy 0 : -16687.2
 E-Slope 0.000351191 iteration 23 energy 0 : -16727.5
 E-Slope 0.000345476 iteration 24 energy 0 : -16719.8
 E-Slope 0.000309646 iteration 25 energy 0 : -16730
 E-Slope 0.000197448 iteration 26 energy 0 : -16708.4
 E-Slope 0.000199452 iteration 27 energy 0 : -16738.3
 E-Slope 0.000132181 iteration 28 energy 0 : -16728
 E-Slope 0.000160731 iteration 29 energy 0 : -16744.4
 E-Slope 9.61944e-05 iteration 30 energy 0 : -16725.8
 Converged due to oscillation in optimization  metric 0 bad 10  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -96975.2
 iteration 2 energy 0 : -98907.7
 iteration 3 energy 0 : -100861
 iteration 4 energy 0 : -102252
 iteration 5 energy 0 : -103387
 iteration 6 energy 0 : -104375
 iteration 7 energy 0 : -105288
 iteration 8 energy 0 : -106173
 iteration 9 energy 0 : -107016
 iteration 10 energy 0 : -107675
 iteration 11 energy 0 : -108199
 iteration 12 energy 0 : -108646
 E-Slope 0.0048194 iteration 13 energy 0 : -109001
 E-Slope 0.00412425 iteration 14 energy 0 : -109313
 E-Slope 0.00358359 iteration 15 energy 0 : -109634
 E-Slope 0.00312263 iteration 16 energy 0 : -109956
 E-Slope 0.00272434 iteration 17 energy 0 : -110293
 E-Slope 0.00238595 iteration 18 energy 0 : -110628
 E-Slope 0.00211302 iteration 19 energy 0 : -110959
 E-Slope 0.00191826 iteration 20 energy 0 : -111297
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_3131_05182017_Aug2_Ref_vimp2_2551_09232016_Test_NewCases/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_3131_05182017_Aug2_Ref_vimp2_2551_09232016_Test_NewCases/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_3131_05182017_Aug2_Ref_vimp2_2551_09232016_Test_NewCases/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_3131_05182017_Aug2_Ref_vimp2_2551_09232016_Test_NewCases/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_3187_06092017/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2617_10262016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_3187_06092017/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2617_10262016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547790656
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [15.4263, 14.1457, -10.5415]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -3.6565054757819553, -27.009501150164933, 18.73504106240145]
level 0, iter 924, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.12035029307776694, -0.018772063031713616, 0.009601454864411036, 0.9925075459008438, 1.110257401378793, 1.0919588700007314, 0.9672865540790749, -0.017576918298848707, -0.014546373518742125, 0.0439582927350014, -2.2231578055349015, -27.14696386707937, 19.620636632578467]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 82, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.1220832995294423, -0.01899357648954185, 0.01142184753611193, 0.9922723685697402, 1.1130112826157652, 1.0968728010429205, 0.969643598363276, -0.016574321981612048, -0.021523573802604033, 0.04548180221733819, -2.081700111802047, -27.207837062896385, 19.542118627554856]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 219, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.12378118843902745, -0.017051645901299584, 0.011754664540657206, 0.9920933860389431, 1.1031963257527078, 1.093931059208299, 0.9630410566636703, -0.017197649921238605, -0.027155727119387955, 0.0534838648611338, -2.305732931776873, -27.383937728076674, 19.616455798346852]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 49, size: fix[37, 43, 33]-mov[40, 41, 32], affine para: [0.12201923839226139, -0.014747734627104197, 0.00836979328412944, 0.9923828678216498, 1.1035369496409149, 1.0954748696083605, 0.9589935486253723, -0.01606145347468006, -0.023238798899374587, 0.05551520514512638, -2.049617624878118, -27.46593009632515, 19.509371657045552]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 58, size: fix[73, 86, 46]-mov[79, 82, 39], affine para: [0.12040100437437679, -0.01877193447856338, 0.018149290176536367, 0.992381890144949, 1.109494738962088, 1.099310440282562, 0.9633949452870036, -0.01807078066165835, -0.023377725913127215, 0.05575974836628753, -2.0607902614934916, -27.078755547949655, 19.68549670442504]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 1678, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.1368462344139782, 0.018973476020200056, -0.006919783358929242, 0.9903864053654468, 0.893649546436216, 0.9332121490010115, 1.0013237425514305, 0.020384954731561766, 0.019712681413535327, -0.11105346088435367, 1.4801160859252076, 21.361367233030137, -26.3109174032215]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 524, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.14380520582101775, 0.0202816696361716, -0.004882427507473365, 0.989386111969022, 0.8947370654092632, 0.9335237780129408, 0.9944125658958092, 0.02564777498905071, 0.017658293896635643, -0.1229535635075895, 1.5567244135651541, 21.18050357672686, -26.55734968859868]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 506, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.14213902750042215, 0.019118695627765647, -0.004443721262600231, 0.9896520730438892, 0.8930952120793925, 0.9316510137699042, 0.9982496430670025, 0.014938641716667523, 0.01764068787579699, -0.13999682609191358, 1.2693149927385128, 21.360842887618258, -26.58390923619895]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 161, size: fix[40, 41, 32]-mov[37, 43, 33], affine para: [-0.14233442327259285, 0.02029651983523871, -0.010626470587489173, 0.989553455532893, 0.8939940163752035, 0.9271940729187049, 1.0009396764273688, 0.01885343765348854, 0.02149424818853547, -0.136323939971444, 1.533346102660896, 21.15932105927211, -26.702774998167616]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 289, size: fix[79, 82, 39]-mov[73, 86, 46], affine para: [-0.1380634432752826, 0.01907231472105507, -0.009083171179987306, 0.9901980753583947, 0.8977206125921059, 0.9297497656547322, 1.0028170547263473, 0.008763141282955269, 0.023632120676411086, -0.12400593048707301, 1.1009541396288418, 21.30931207877892, -26.343004259367575]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.442127 v2 -0.43501
final [0.12040100437437679, -0.01877193447856338, 0.018149290176536367, 0.992381890144949, 1.109494738962088, 1.099310440282562, 0.9633949452870036, -0.01807078066165835, -0.023377725913127215, 0.05575974836628753, -2.0607902614934916, -27.078755547949655, 19.68549670442504]
outputput affine center: [15.4263, 14.1457, -10.5415]
output affine para: [0.12040100437437679, -0.01877193447856338, 0.018149290176536367, 0.992381890144949, 1.109494738962088, 1.099310440282562, 0.9633949452870036, -0.01807078066165835, -0.023377725913127215, 0.05575974836628753, -2.0607902614934916, -27.078755547949655, 19.68549670442504]
initial measure value (MMI): rval = -0.186577
final measure value (MMI): rval = -0.45129
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -5835.4
 iteration 2 energy 0 : -6226.92
 iteration 3 energy 0 : -6527.59
 iteration 4 energy 0 : -6785.81
 iteration 5 energy 0 : -6998.93
 iteration 6 energy 0 : -7144.25
 iteration 7 energy 0 : -7258.52
 iteration 8 energy 0 : -7361.93
 iteration 9 energy 0 : -7440.42
 iteration 10 energy 0 : -7507.08
 iteration 11 energy 0 : -7561.34
 iteration 12 energy 0 : -7551.64
 E-Slope 0.00914387 iteration 13 energy 0 : -7556.23
 E-Slope 0.00685634 iteration 14 energy 0 : -7549.75
 E-Slope 0.00503172 iteration 15 energy 0 : -7565.77
 E-Slope 0.00358082 iteration 16 energy 0 : -7560
 E-Slope 0.00254776 iteration 17 energy 0 : -7586.4
 E-Slope 0.00171433 iteration 18 energy 0 : -7577.91
 E-Slope 0.00112499 iteration 19 energy 0 : -7597.91
 E-Slope 0.000716448 iteration 20 energy 0 : -7592.14
 E-Slope 0.000542499 iteration 21 energy 0 : -7622.38
 E-Slope 0.000484653 iteration 22 energy 0 : -7616.17
 E-Slope 0.000559255 iteration 23 energy 0 : -7624.22
 E-Slope 0.000570469 iteration 24 energy 0 : -7624.26
 E-Slope 0.000617839 iteration 25 energy 0 : -7647.86
 E-Slope 0.000571281 iteration 26 energy 0 : -7635.6
 E-Slope 0.000566907 iteration 27 energy 0 : -7649.98
 E-Slope 0.000498004 iteration 28 energy 0 : -7646.67
 E-Slope 0.000533007 iteration 29 energy 0 : -7672.3
 E-Slope 0.000478588 iteration 30 energy 0 : -7661.56
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -13722
 iteration 2 energy 0 : -13865.9
 iteration 3 energy 0 : -14039.7
 iteration 4 energy 0 : -14186.2
 iteration 5 energy 0 : -14214.7
 iteration 6 energy 0 : -14261.3
 iteration 7 energy 0 : -14276.5
 iteration 8 energy 0 : -14323.4
 iteration 9 energy 0 : -14325.5
 iteration 10 energy 0 : -14372.1
 iteration 11 energy 0 : -14367.2
 iteration 12 energy 0 : -14407.3
 E-Slope 0.00158432 iteration 13 energy 0 : -14401.1
 E-Slope 0.00117357 iteration 14 energy 0 : -14437.1
 E-Slope 0.000907443 iteration 15 energy 0 : -14427.2
 E-Slope 0.000826754 iteration 16 energy 0 : -14457.5
 E-Slope 0.000712059 iteration 17 energy 0 : -14446.4
 E-Slope 0.000658616 iteration 18 energy 0 : -14478.5
 E-Slope 0.000561602 iteration 19 energy 0 : -14465.8
 E-Slope 0.000535518 iteration 20 energy 0 : -14497.1
 E-Slope 0.000452258 iteration 21 energy 0 : -14481.7
 E-Slope 0.000447176 iteration 22 energy 0 : -14513.1
 E-Slope 0.000382498 iteration 23 energy 0 : -14498.4
 E-Slope 0.00039012 iteration 24 energy 0 : -14528.8
 E-Slope 0.0003324 iteration 25 energy 0 : -14508.5
 E-Slope 0.000345945 iteration 26 energy 0 : -14539.5
 E-Slope 0.000295527 iteration 27 energy 0 : -14521.4
 E-Slope 0.000302486 iteration 28 energy 0 : -14546.4
 E-Slope 0.000248425 iteration 29 energy 0 : -14529.5
 E-Slope 0.000258408 iteration 30 energy 0 : -14555.3
 E-Slope 0.000205941 iteration 31 energy 0 : -14536.6
 E-Slope 0.000219375 iteration 32 energy 0 : -14562.4
 E-Slope 0.000171199 iteration 33 energy 0 : -14545.1
 E-Slope 0.000187233 iteration 34 energy 0 : -14568.1
 E-Slope 0.000144772 iteration 35 energy 0 : -14550.6
 E-Slope 0.000170574 iteration 36 energy 0 : -14576
 E-Slope 0.00012701 iteration 37 energy 0 : -14555.6
 E-Slope 0.000148185 iteration 38 energy 0 : -14577
 E-Slope 0.000111558 iteration 39 energy 0 : -14561.2
 E-Slope 0.000132151 iteration 40 energy 0 : -14582.5
 E-Slope 9.92641e-05 iteration 41 energy 0 : -14568.2
 Converged due to oscillation in optimization  metric 0 bad 16  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -101227
 iteration 2 energy 0 : -102734
 iteration 3 energy 0 : -104405
 iteration 4 energy 0 : -105588
 iteration 5 energy 0 : -106731
 iteration 6 energy 0 : -107761
 iteration 7 energy 0 : -108589
 iteration 8 energy 0 : -109332
 iteration 9 energy 0 : -110007
 iteration 10 energy 0 : -110717
 iteration 11 energy 0 : -111426
 iteration 12 energy 0 : -112161
 E-Slope 0.00459407 iteration 13 energy 0 : -112883
 E-Slope 0.00419927 iteration 14 energy 0 : -113572
 E-Slope 0.00393683 iteration 15 energy 0 : -114185
 E-Slope 0.00371116 iteration 16 energy 0 : -114692
 E-Slope 0.00353824 iteration 17 energy 0 : -115257
 E-Slope 0.00339275 iteration 18 energy 0 : -115740
 E-Slope 0.0032248 iteration 19 energy 0 : -116096
 E-Slope 0.00303012 iteration 20 energy 0 : -116447
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_3187_06092017_Aug1_Ref_vimp2_2617_10262016/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_3187_06092017_Aug1_Ref_vimp2_2617_10262016/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_3187_06092017_Aug1_Ref_vimp2_2617_10262016/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_3187_06092017_Aug1_Ref_vimp2_2617_10262016/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_3187_06092017/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2587_10132016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_3187_06092017/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2587_10132016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547790774
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [15.4263, 14.1457, -10.5415]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -4.497097021978835, -0.2178946577839529, 19.143870386654356]
level 0, iter 310, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.06381528944155325, -0.04176501218875382, 0.009574626872347872, 0.997041432995951, 1.0119145707292994, 1.051812742231768, 0.985259507965236, 0.01464713344284326, -0.03134135611817737, 0.04486796718465347, -2.8717290665708757, -0.23477515798252468, 19.9913477105101]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 83, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.06360216071712035, -0.0395639221092217, 0.014080330869098564, 0.9970913726946322, 1.017164390625606, 1.0679751726178675, 0.9855847377981559, 0.024670447686585904, -0.037098483535553305, 0.060314680634223086, -2.751579613749693, -0.0522587923238625, 19.862913461550274]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 893, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.06676209462302231, -0.04045722274826777, 0.012340569666251404, 0.9968719808427539, 1.0203613424387226, 1.0787702128675787, 0.9745796698839744, 0.03727067302251244, -0.0362933743687338, 0.0747650506404318, -2.730278636431514, 0.0007532748162062355, 19.943959451999238]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 50, size: fix[37, 43, 33]-mov[37, 38, 32], affine para: [0.06737509933216958, -0.03882187563952921, 0.012032644203157021, 0.9968995302613446, 1.0197691491435077, 1.0757465728812434, 0.9732574238157707, 0.04059840807506207, -0.03816643220337868, 0.07632188304288752, -2.6999354518896053, -0.17145377526167593, 20.004793429856853]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 110, size: fix[73, 86, 46]-mov[73, 76, 40], affine para: [0.05605010130260673, -0.03893229225244774, 0.020033357936473033, 0.997467456779281, 1.024930971470322, 1.0770857390783384, 0.9779825467312061, 0.03976357777482974, -0.03567471611546296, 0.0765436155325176, -2.7120099357203, 0.3159755746732718, 19.836087951688704]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 2000, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.07790406660988987, 0.04354375118156032, -0.018557004296720213, 0.9958366009191528, 0.9741112555256678, 0.9351921291960494, 0.9990176802146197, -0.05008340597290211, 0.021843261476077257, -0.10573200810876215, 0.41372407669120026, -1.2188958361091353, -20.09420965568463]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 184, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.07832536484243054, 0.04402743045455482, -0.016800077972400195, 0.9958134764954684, 0.9683337147126586, 0.9335343719293568, 0.9992002249996108, -0.04899965182859167, 0.022660143995314318, -0.10727379718791227, 0.3597755515615515, -1.1474165068928304, -20.11610990749775]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 158, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.07293346386009705, 0.042504008095046314, -0.02288201725520829, 0.9961679238118223, 0.9679013788662328, 0.9323877734969117, 1.0058744522221668, -0.0618053421954037, 0.019621173559969465, -0.10779110570315181, 0.45712228607315364, -1.2391633569168734, -20.25166877594666]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 74, size: fix[37, 38, 32]-mov[37, 43, 33], affine para: [-0.07073781367527181, 0.04295861557867496, -0.021012004816617916, 0.9963479385824978, 0.9672132347350142, 0.9254831527387233, 1.0002198629607053, -0.0612662376939847, 0.02141111666468412, -0.10919117256378481, 0.3734945448166259, -1.1183840970264098, -19.98087617154824]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 291, size: fix[73, 76, 40]-mov[73, 86, 46], affine para: [-0.07402092287725755, 0.043132216444781254, -0.017939275585728675, 0.9961619834506932, 0.963640232502952, 0.9302866150490277, 0.9985213894269257, -0.05383087306940936, 0.024528984357930966, -0.11320668966739145, 0.21044622097490454, -1.0461369242471807, -20.084461086229503]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.42159 v2 -0.434562
 last params [0.05605010130260673, -0.03893229225244774, 0.020033357936473033, 0.997467456779281, 1.024930971470322, 1.0770857390783384, 0.9779825467312061, 0.03976357777482974, -0.03567471611546296, 0.0765436155325176, -2.7120099357203, 0.3159755746732718, 19.836087951688704]
 my params [-0.07402092287725755, 0.043132216444781254, -0.017939275585728675, 0.9961619834506932, 0.963640232502952, 0.9302866150490277, 0.9985213894269257, -0.05383087306940936, 0.024528984357930966, -0.11320668966739145, 0.21044622097490454, -1.0461369242471807, -20.084461086229503]
A=1.03327 0.0107836 -0.113234 
0.041599 1.07901 -0.0484784 
0.0887203 0.146142 0.98678 

rotation R0.995533 -0.0509657 -0.079472 
0.0400799 0.990304 -0.133011 
0.0854804 0.129232 0.987923 

upper R1.0379 0.0664745 -0.030321 
0 1.08688 0.085286 
0 0 0.99031 

s=0.250824 u=0.0657768 v=-0.041374 w0.0228364 r=0.996715
m_Rotation from vnl0.0657768 -0.041374 0.0228364 0.996715
 new params [0.06577677379551553, -0.041374044363388096, 0.02283644647097307, 0.9967146538476539, 1.0379016104142398, 1.0868849032139836, 0.9903100563962022, 0.06404697678357651, -0.029213716955410123, 0.07846829937062251, -2.480412247414235, 0.1463768626782498, 19.953160310056045]
outputput affine center: [15.4263, 14.1457, -10.5415]
output affine para: [0.06577677379551553, -0.041374044363388096, 0.02283644647097307, 0.9967146538476539, 1.0379016104142398, 1.0868849032139836, 0.9903100563962022, 0.06404697678357651, -0.029213716955410123, 0.07846829937062251, -2.480412247414235, 0.1463768626782498, 19.953160310056045]
initial measure value (MMI): rval = -0.205204
final measure value (MMI): rval = -0.440264
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -5898.33
 iteration 2 energy 0 : -6250.57
 iteration 3 energy 0 : -6515.33
 iteration 4 energy 0 : -6675.73
 iteration 5 energy 0 : -6777.63
 iteration 6 energy 0 : -6855.91
 iteration 7 energy 0 : -6926.8
 iteration 8 energy 0 : -7000.44
 iteration 9 energy 0 : -7087.61
 iteration 10 energy 0 : -7172.09
 iteration 11 energy 0 : -7237.77
 iteration 12 energy 0 : -7282.52
 E-Slope 0.00725406 iteration 13 energy 0 : -7308.53
 E-Slope 0.00588239 iteration 14 energy 0 : -7287.55
 E-Slope 0.00490613 iteration 15 energy 0 : -7290.45
 E-Slope 0.00402912 iteration 16 energy 0 : -7277.6
 E-Slope 0.00319167 iteration 17 energy 0 : -7284.02
 E-Slope 0.00235371 iteration 18 energy 0 : -7280.89
 E-Slope 0.00157795 iteration 19 energy 0 : -7288.03
 E-Slope 0.000891261 iteration 20 energy 0 : -7284.7
 E-Slope 0.000402406 iteration 21 energy 0 : -7291.6
 E-Slope 0.000101164 iteration 22 energy 0 : -7286.78
 E-Slope -9.71556e-06 iteration 23 energy 0 : -7294.49
 Converged due to oscillation in optimization  metric 0 bad 5  
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -12844.8
 iteration 2 energy 0 : -13045.2
 iteration 3 energy 0 : -13202.4
 iteration 4 energy 0 : -13316.6
 iteration 5 energy 0 : -13396.7
 iteration 6 energy 0 : -13456.2
 iteration 7 energy 0 : -13513.9
 iteration 8 energy 0 : -13558.4
 iteration 9 energy 0 : -13607.2
 iteration 10 energy 0 : -13621.5
 iteration 11 energy 0 : -13650.7
 iteration 12 energy 0 : -13661.1
 E-Slope 0.00223612 iteration 13 energy 0 : -13685.2
 E-Slope 0.00175657 iteration 14 energy 0 : -13692.3
 E-Slope 0.00142717 iteration 15 energy 0 : -13718.1
 E-Slope 0.00117338 iteration 16 energy 0 : -13722
 E-Slope 0.000983313 iteration 17 energy 0 : -13739.9
 E-Slope 0.000819385 iteration 18 energy 0 : -13744.7
 E-Slope 0.000703596 iteration 19 energy 0 : -13758.9
 E-Slope 0.000611559 iteration 20 energy 0 : -13764.7
 E-Slope 0.000560828 iteration 21 energy 0 : -13773
 E-Slope 0.000500135 iteration 22 energy 0 : -13778.8
 E-Slope 0.000466511 iteration 23 energy 0 : -13791.6
 E-Slope 0.000409566 iteration 24 energy 0 : -13787.7
 E-Slope 0.000380933 iteration 25 energy 0 : -13802.1
 E-Slope 0.000340112 iteration 26 energy 0 : -13805.4
 E-Slope 0.000321008 iteration 27 energy 0 : -13810.5
 E-Slope 0.000289507 iteration 28 energy 0 : -13813.6
 E-Slope 0.000279441 iteration 29 energy 0 : -13824
 E-Slope 0.000253089 iteration 30 energy 0 : -13821.5
 E-Slope 0.000234768 iteration 31 energy 0 : -13824.7
 E-Slope 0.000223234 iteration 32 energy 0 : -13834.7
 E-Slope 0.000207387 iteration 33 energy 0 : -13834.4
 E-Slope 0.000195697 iteration 34 energy 0 : -13841.4
 E-Slope 0.000195101 iteration 35 energy 0 : -13845.3
 E-Slope 0.000181891 iteration 36 energy 0 : -13850
 E-Slope 0.00017035 iteration 37 energy 0 : -13845.4
 E-Slope 0.000163078 iteration 38 energy 0 : -13852.9
 E-Slope 0.000154682 iteration 39 energy 0 : -13854.9
 E-Slope 0.000136048 iteration 40 energy 0 : -13852.4
 E-Slope 0.000125915 iteration 41 energy 0 : -13853.8
 E-Slope 0.000112273 iteration 42 energy 0 : -13859.8
 E-Slope 9.03755e-05 iteration 43 energy 0 : -13856.5
 Converged due to oscillation in optimization  metric 0 bad 6  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -91956.7
 iteration 2 energy 0 : -93573.2
 iteration 3 energy 0 : -95267
 iteration 4 energy 0 : -96687.1
 iteration 5 energy 0 : -98062.1
 iteration 6 energy 0 : -99518
 iteration 7 energy 0 : -100788
 iteration 8 energy 0 : -101819
 iteration 9 energy 0 : -102708
 iteration 10 energy 0 : -103485
 iteration 11 energy 0 : -104146
 iteration 12 energy 0 : -104795
 E-Slope 0.00611399 iteration 13 energy 0 : -105425
 E-Slope 0.00545681 iteration 14 energy 0 : -106051
 E-Slope 0.00489231 iteration 15 energy 0 : -106672
 E-Slope 0.00439846 iteration 16 energy 0 : -107301
 E-Slope 0.00397093 iteration 17 energy 0 : -107811
 E-Slope 0.00365264 iteration 18 energy 0 : -108330
 E-Slope 0.00340842 iteration 19 energy 0 : -108758
 E-Slope 0.00319523 iteration 20 energy 0 : -109123
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_3187_06092017_Aug2_Ref_vimp2_2587_10132016_Test_NewCases/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_3187_06092017_Aug2_Ref_vimp2_2587_10132016_Test_NewCases/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_3187_06092017_Aug2_Ref_vimp2_2587_10132016_Test_NewCases/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_3187_06092017_Aug2_Ref_vimp2_2587_10132016_Test_NewCases/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_3349_08012017/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2617_10262016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_3349_08012017/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2617_10262016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547790891
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [12.2618, 10.0842, 11.3289]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -0.589569219656342, -22.912525857522773, -3.142078826777702]
level 0, iter 333, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.032737449383819596, 0.013489545742992885, 0.022390787962645573, 0.9991220867230899, 1.0310659115294185, 1.0589247079022286, 0.9670731357020594, -0.003823626517445362, -0.0037187639869306634, 0.07992048372775838, -0.5354470569777555, -22.29883177653269, -4.160272755371148]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 38, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.030774999772109325, 0.012541710099436401, 0.020456378154258863, 0.999238280636615, 1.0324785263605156, 1.063671940807502, 0.9652099709035329, -0.004321732603653891, -0.005334271699717846, 0.08556133326429857, -0.61061086845649, -22.3117734146212, -4.141748128875775]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 154, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.03786778494026815, 0.014425897407451349, 0.0225574189435497, 0.9989239646731439, 1.0319385053667, 1.0687558516475801, 0.9661638912138395, -0.006553367675395988, -0.007259738218234179, 0.09207043811253662, -0.5828773371556081, -22.355393676130127, -4.167412838560095]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 179, size: fix[38, 39, 32]-mov[40, 41, 32], affine para: [0.039992699133631404, 0.01220678306083602, 0.01748709660071603, 0.9989723619379015, 1.0226737905102408, 1.0759998767548231, 0.9625569955750019, -0.011378197080086892, -0.00316176908126853, 0.09656547305302196, -0.6345211922021662, -22.462118804524373, -4.239494703030174]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 45, size: fix[76, 77, 37]-mov[79, 82, 39], affine para: [0.038616707245481954, 0.011806371905242396, 0.018760352179870737, 0.9990082125238205, 1.0242834665983749, 1.0744050808390584, 0.9603775991907685, -0.011356427932267925, -0.003578730815903954, 0.09590992253082964, -0.5955707681996407, -22.52507674390449, -4.250944185217576]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 1063, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.04465504755758394, -0.018792973950733538, -0.01735487881891587, 0.9986749015765329, 0.9641703690481351, 0.9440891687933151, 1.0144451980456746, 0.011408348202810331, 0.02099085125524044, -0.13250274804962756, 1.4531802583166873, 20.85542540513712, 2.5563780706392825]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 80, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.04287206396173901, -0.017888597470893077, -0.019532045936865514, 0.9987294345285439, 0.9624786495037282, 0.9446518512488539, 1.0174590758312947, 0.010123313397865862, 0.022468521188497886, -0.13831666403447862, 1.4430137716292635, 20.694474295251148, 2.6735113811177573]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 113, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.04739071386641155, -0.018578759985513026, -0.017178870735003824, 0.9985558754105364, 0.9602166901286571, 0.9412872614303953, 1.0122189233648509, 0.011960705364242399, 0.023644541347319442, -0.13310181220711223, 1.5178500754452324, 20.88324068584146, 2.4526683680101224]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 386, size: fix[40, 41, 32]-mov[38, 39, 32], affine para: [-0.050590006210489175, -0.018596165626000333, -0.021196237600443216, 0.9983213678005789, 0.9647282925252225, 0.9479250430616943, 1.0138266634781943, 0.012793096095069206, 0.028431896396009865, -0.13002411295562508, 1.699065664934475, 21.154047340894298, 2.2532806819305486]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 384, size: fix[79, 82, 39]-mov[76, 77, 37], affine para: [-0.040634919644678705, -0.012033162623030835, -0.016161667103004883, 0.9989708738592982, 0.9621283447526259, 0.9427437670306587, 1.0207468282372474, 0.0070711601576955675, 0.02300136282086351, -0.13364155338481293, 1.3425907802527646, 20.748949781151484, 2.803597389988783]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.538883 v2 -0.537322
final [0.038616707245481954, 0.011806371905242396, 0.018760352179870737, 0.9990082125238205, 1.0242834665983749, 1.0744050808390584, 0.9603775991907685, -0.011356427932267925, -0.003578730815903954, 0.09590992253082964, -0.5955707681996407, -22.52507674390449, -4.250944185217576]
outputput affine center: [12.2618, 10.0842, 11.3289]
output affine para: [0.038616707245481954, 0.011806371905242396, 0.018760352179870737, 0.9990082125238205, 1.0242834665983749, 1.0744050808390584, 0.9603775991907685, -0.011356427932267925, -0.003578730815903954, 0.09590992253082964, -0.5955707681996407, -22.52507674390449, -4.250944185217576]
initial measure value (MMI): rval = -0.396393
final measure value (MMI): rval = -0.537241
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -6995.9
 iteration 2 energy 0 : -7295.04
 iteration 3 energy 0 : -7469.22
 iteration 4 energy 0 : -7594.14
 iteration 5 energy 0 : -7693.68
 iteration 6 energy 0 : -7774.18
 iteration 7 energy 0 : -7848.87
 iteration 8 energy 0 : -7925.95
 iteration 9 energy 0 : -8004.25
 iteration 10 energy 0 : -8076.53
 iteration 11 energy 0 : -8151.55
 iteration 12 energy 0 : -8222.43
 E-Slope 0.00613429 iteration 13 energy 0 : -8275.47
 E-Slope 0.00551963 iteration 14 energy 0 : -8321.69
 E-Slope 0.00509632 iteration 15 energy 0 : -8370.05
 E-Slope 0.00478884 iteration 16 energy 0 : -8430.46
 E-Slope 0.0045202 iteration 17 energy 0 : -8479.15
 E-Slope 0.00423371 iteration 18 energy 0 : -8517.15
 E-Slope 0.00390651 iteration 19 energy 0 : -8543.6
 E-Slope 0.00349694 iteration 20 energy 0 : -8540.77
 E-Slope 0.00300624 iteration 21 energy 0 : -8525.28
 E-Slope 0.0024945 iteration 22 energy 0 : -8528.36
 E-Slope 0.00197334 iteration 23 energy 0 : -8520.49
 E-Slope 0.00149289 iteration 24 energy 0 : -8522.99
 E-Slope 0.00103466 iteration 25 energy 0 : -8521.92
 E-Slope 0.000620261 iteration 26 energy 0 : -8523.79
 E-Slope 0.000282675 iteration 27 energy 0 : -8526.5
 E-Slope 6.72564e-05 iteration 28 energy 0 : -8527.26
 Converged due to oscillation in optimization  metric 0 bad 4  
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -13661.8
 iteration 2 energy 0 : -13765.8
 iteration 3 energy 0 : -13853
 iteration 4 energy 0 : -13959.8
 iteration 5 energy 0 : -14073.8
 iteration 6 energy 0 : -14152.1
 iteration 7 energy 0 : -14210.9
 iteration 8 energy 0 : -14210.4
 iteration 9 energy 0 : -14220.9
 iteration 10 energy 0 : -14225.4
 iteration 11 energy 0 : -14237.4
 iteration 12 energy 0 : -14241.6
 E-Slope 0.00165281 iteration 13 energy 0 : -14253.4
 E-Slope 0.00120629 iteration 14 energy 0 : -14256.5
 E-Slope 0.000816084 iteration 15 energy 0 : -14267.4
 E-Slope 0.000520453 iteration 16 energy 0 : -14269
 E-Slope 0.00036104 iteration 17 energy 0 : -14279.3
 E-Slope 0.000285685 iteration 18 energy 0 : -14280.2
 E-Slope 0.000287436 iteration 19 energy 0 : -14290.1
 E-Slope 0.000267804 iteration 20 energy 0 : -14289.6
 E-Slope 0.000257917 iteration 21 energy 0 : -14299
 E-Slope 0.000233956 iteration 22 energy 0 : -14297.3
 E-Slope 0.000224002 iteration 23 energy 0 : -14306.6
 E-Slope 0.000200056 iteration 24 energy 0 : -14303.7
 E-Slope 0.000193201 iteration 25 energy 0 : -14313.7
 E-Slope 0.000171468 iteration 26 energy 0 : -14309.8
 E-Slope 0.000167675 iteration 27 energy 0 : -14319.9
 E-Slope 0.000149623 iteration 28 energy 0 : -14316.6
 E-Slope 0.000159189 iteration 29 energy 0 : -14333.3
 E-Slope 0.000143468 iteration 30 energy 0 : -14322.6
 E-Slope 0.00015229 iteration 31 energy 0 : -14336.8
 E-Slope 0.00013534 iteration 32 energy 0 : -14326.6
 E-Slope 0.000141367 iteration 33 energy 0 : -14339.9
 E-Slope 0.000121765 iteration 34 energy 0 : -14330.6
 E-Slope 0.000125289 iteration 35 energy 0 : -14343.5
 E-Slope 0.000105605 iteration 36 energy 0 : -14336.3
 E-Slope 0.000117995 iteration 37 energy 0 : -14354
 E-Slope 9.74983e-05 iteration 38 energy 0 : -14340.7
 Converged due to oscillation in optimization  metric 0 bad 11  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -81524.1
 iteration 2 energy 0 : -82989.8
 iteration 3 energy 0 : -84171.8
 iteration 4 energy 0 : -85096.1
 iteration 5 energy 0 : -86008.1
 iteration 6 energy 0 : -86883.5
 iteration 7 energy 0 : -87576.3
 iteration 8 energy 0 : -88140.7
 iteration 9 energy 0 : -88619.6
 iteration 10 energy 0 : -89080.8
 iteration 11 energy 0 : -89548.4
 iteration 12 energy 0 : -90033.1
 E-Slope 0.00428948 iteration 13 energy 0 : -90477.2
 E-Slope 0.00382788 iteration 14 energy 0 : -90870.8
 E-Slope 0.00345934 iteration 15 energy 0 : -91233.5
 E-Slope 0.00314084 iteration 16 energy 0 : -91575.3
 E-Slope 0.00287987 iteration 17 energy 0 : -91880.7
 E-Slope 0.00267611 iteration 18 energy 0 : -92148
 E-Slope 0.00250056 iteration 19 energy 0 : -92410.1
 E-Slope 0.00230055 iteration 20 energy 0 : -92508.4
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_3349_08012017_Aug1_Ref_vimp2_2617_10262016/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_3349_08012017_Aug1_Ref_vimp2_2617_10262016/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_3349_08012017_Aug1_Ref_vimp2_2617_10262016/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_3349_08012017_Aug1_Ref_vimp2_2617_10262016/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_3349_08012017/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2450_08172016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_3349_08012017/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2450_08172016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547790982
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [12.2618, 10.0842, 11.3289]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 1.4330501093428047, -5.997622480765953, 0.6430434587054652]
level 0, iter 833, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.018636784498941225, -0.021796622801565104, 0.006463241833583025, 0.9995678086067933, 0.9993043767492804, 1.0015764063191086, 0.9885035760233837, 0.03278931372148562, 0.023254008064203222, 0.059437762507872305, 0.6189054018396765, -5.0871996957284304, 1.5017605073460898]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 1494, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.02298374213783014, -0.029844192687025577, 0.017679145015051738, 0.9991338847180282, 0.9987761046143886, 1.0064328591987346, 0.9843777145638021, 0.05906031472116485, 0.056773350710451566, 0.08655721294296756, 0.8516659231211068, -4.633992791334607, 1.5870543824678194]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 57, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.022687361031159023, -0.03136806269278312, 0.01734063488469586, 0.9990999102562962, 1.0073226112979907, 1.017240143829401, 0.9952593478591982, 0.06527437522458449, 0.05875239287164683, 0.09081387783678885, 0.667838874042794, -4.706256886140368, 1.6010088747356281]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 114, size: fix[38, 39, 32]-mov[36, 38, 32], affine para: [0.031076475675556714, -0.033692631039890106, 0.021035418349899884, 0.9987274755648015, 1.0065825130759642, 1.0114687698616591, 0.99932896346289, 0.06602248446319274, 0.06617121267507275, 0.09034225038105584, 0.6887039790148347, -4.925788273755622, 1.5621274544792976]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 33, size: fix[76, 77, 37]-mov[71, 76, 40], affine para: [0.02497731591879848, -0.02946027660266128, 0.01835912670490263, 0.9990851656683831, 1.0072955306786069, 1.0161177324077568, 1.0026723461745983, 0.0678766115918047, 0.06591360256697704, 0.09222895857089411, 0.6741829970740753, -4.852867871748566, 1.562053636992363]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 955, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.021336138764476785, 0.021811539370102623, -0.007499792251208075, 0.9995062676387367, 0.9911799206426433, 1.0111276152846709, 0.9850416801987626, -0.03381363061335422, -0.021580130175860614, -0.0542913513686136, -0.6958519945936567, 5.2202206303656595, -1.7774395423165057]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 192, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.02789173610826958, 0.0242064357397147, -0.011080443357550332, 0.9992563851688143, 0.9905002924575939, 1.0019124711641896, 0.9830835334507491, -0.04108615080971088, -0.035118000041208304, -0.07053019039213297, -0.8210539894677447, 5.276360079759943, -1.7267732230651374]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 1601, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.029974707169939864, 0.028620260469771928, -0.020740056076524595, 0.9989255466223003, 0.995112965907539, 0.9973314785682512, 0.9847952843253677, -0.0609029897769017, -0.047365143377500515, -0.09262168959712286, -0.8494464335393568, 4.945718836300686, -1.884623385231172]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 139, size: fix[36, 38, 32]-mov[38, 39, 32], affine para: [-0.028885223667124597, 0.03149228438902057, -0.02270731319175676, 0.9988284426292999, 0.9931011927905163, 0.9945746497535572, 0.9841149677466432, -0.06601325962761598, -0.051147861946327006, -0.09950142636479452, -0.8222500394195746, 4.840605828146345, -1.814355915568861]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 83, size: fix[71, 76, 40]-mov[76, 77, 37], affine para: [-0.0326310368755814, 0.02987692875810759, -0.018347622692567876, 0.9988523160617583, 1.0006540011451321, 0.9939967291742888, 0.9829003032140472, -0.06135709892819848, -0.05553215315063738, -0.10257950758551801, -0.8733845493876373, 4.950763211363484, -1.7195016566875923]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.502154 v2 -0.515837
 last params [0.02497731591879848, -0.02946027660266128, 0.01835912670490263, 0.9990851656683831, 1.0072955306786069, 1.0161177324077568, 1.0026723461745983, 0.0678766115918047, 0.06591360256697704, 0.09222895857089411, 0.6741829970740753, -4.852867871748566, 1.562053636992363]
 my params [-0.0326310368755814, 0.02987692875810759, -0.018347622692567876, 0.9988523160617583, 1.0006540011451321, 0.9939967291742888, 0.9829003032140472, -0.06135709892819848, -0.05553215315063738, -0.10257950758551801, -0.8733845493876373, 4.950763211363484, -1.7195016566875923]
A=1.00286 0.0270083 0.000114309 
0.0412669 1.00991 0.0372717 
0.0619419 0.0652058 1.01341 

rotation R0.997257 -0.044749 -0.0589537 
0.0410363 0.997185 -0.0627497 
0.0615957 0.0601583 0.996287 

upper R1.00562 0.0723935 0.0640655 
0 1.00978 0.098127 
0 0 1.00731 

s=0.25029 u=0.0307627 v=-0.0301723 w0.0214712 r=0.99884
m_Rotation from vnl0.0307627 -0.0301723 0.0214712 0.99884
 new params [0.030762681580137705, -0.030172341635076757, 0.0214712072532554, 0.9988404649799401, 1.005619459748174, 1.0097800211909425, 1.0073054803889283, 0.07198899814341038, 0.0637074809149764, 0.09717661279773036, 0.7423681709648544, -4.899687474860449, 1.473847910776593]
outputput affine center: [12.2618, 10.0842, 11.3289]
output affine para: [0.030762681580137705, -0.030172341635076757, 0.0214712072532554, 0.9988404649799401, 1.005619459748174, 1.0097800211909425, 1.0073054803889283, 0.07198899814341038, 0.0637074809149764, 0.09717661279773036, 0.7423681709648544, -4.899687474860449, 1.473847910776593]
initial measure value (MMI): rval = -0.419849
final measure value (MMI): rval = -0.522478
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -5734.04
 iteration 2 energy 0 : -6070.52
 iteration 3 energy 0 : -6385.32
 iteration 4 energy 0 : -6626.96
 iteration 5 energy 0 : -6812.55
 iteration 6 energy 0 : -6961.7
 iteration 7 energy 0 : -7093.46
 iteration 8 energy 0 : -7216.97
 iteration 9 energy 0 : -7336.6
 iteration 10 energy 0 : -7451.54
 iteration 11 energy 0 : -7557.36
 iteration 12 energy 0 : -7656.68
 E-Slope 0.0115637 iteration 13 energy 0 : -7767.49
 E-Slope 0.0102136 iteration 14 energy 0 : -7898.22
 E-Slope 0.00937691 iteration 15 energy 0 : -8005.83
 E-Slope 0.00878532 iteration 16 energy 0 : -8081.14
 E-Slope 0.0082488 iteration 17 energy 0 : -8133.07
 E-Slope 0.0076563 iteration 18 energy 0 : -8169.3
 E-Slope 0.00681312 iteration 19 energy 0 : -8132.79
 E-Slope 0.00587407 iteration 20 energy 0 : -8143.84
 E-Slope 0.00479541 iteration 21 energy 0 : -8119.09
 E-Slope 0.00376844 iteration 22 energy 0 : -8147.92
 E-Slope 0.00270179 iteration 23 energy 0 : -8123.96
 E-Slope 0.0018014 iteration 24 energy 0 : -8161.79
 E-Slope 0.000992529 iteration 25 energy 0 : -8136.93
 E-Slope 0.000542223 iteration 26 energy 0 : -8178.7
 E-Slope 0.000249825 iteration 27 energy 0 : -8152.63
 E-Slope 0.000228591 iteration 28 energy 0 : -8196.08
 E-Slope 0.000247523 iteration 29 energy 0 : -8169.21
 E-Slope 0.000446305 iteration 30 energy 0 : -8211.63
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -13083.5
 iteration 2 energy 0 : -13204.4
 iteration 3 energy 0 : -13373.6
 iteration 4 energy 0 : -13585.7
 iteration 5 energy 0 : -13709.8
 iteration 6 energy 0 : -13807.2
 iteration 7 energy 0 : -13872.4
 iteration 8 energy 0 : -13862.9
 iteration 9 energy 0 : -13842.3
 iteration 10 energy 0 : -13860.6
 iteration 11 energy 0 : -13840.1
 iteration 12 energy 0 : -13878.9
 E-Slope 0.00204311 iteration 13 energy 0 : -13856.1
 E-Slope 0.00132383 iteration 14 energy 0 : -13901.9
 E-Slope 0.000722006 iteration 15 energy 0 : -13877.3
 E-Slope 0.000426821 iteration 16 energy 0 : -13911.9
 E-Slope 0.000242174 iteration 17 energy 0 : -13888.1
 E-Slope 0.000225954 iteration 18 energy 0 : -13920.8
 E-Slope 0.000254937 iteration 19 energy 0 : -13898.2
 E-Slope 0.000300303 iteration 20 energy 0 : -13930
 E-Slope 0.000261165 iteration 21 energy 0 : -13907.1
 E-Slope 0.000278413 iteration 22 energy 0 : -13939
 E-Slope 0.000211306 iteration 23 energy 0 : -13915.4
 E-Slope 0.000231318 iteration 24 energy 0 : -13946
 E-Slope 0.000167787 iteration 25 energy 0 : -13923.4
 E-Slope 0.0002027 iteration 26 energy 0 : -13952.9
 E-Slope 0.000154078 iteration 27 energy 0 : -13930.4
 E-Slope 0.00018733 iteration 28 energy 0 : -13958.8
 E-Slope 0.000140034 iteration 29 energy 0 : -13936.7
 E-Slope 0.000172853 iteration 30 energy 0 : -13965.3
 E-Slope 0.000126787 iteration 31 energy 0 : -13942.5
 E-Slope 0.000159509 iteration 32 energy 0 : -13970.5
 E-Slope 0.000114046 iteration 33 energy 0 : -13947.7
 E-Slope 0.000148363 iteration 34 energy 0 : -13975.7
 E-Slope 0.000106245 iteration 35 energy 0 : -13954.3
 E-Slope 0.000151411 iteration 36 energy 0 : -13988.5
 E-Slope 0.000115193 iteration 37 energy 0 : -13963
 E-Slope 0.000148855 iteration 38 energy 0 : -13986.4
 E-Slope 0.000107154 iteration 39 energy 0 : -13964.4
 E-Slope 0.000144437 iteration 40 energy 0 : -13995.1
 E-Slope 0.000102602 iteration 41 energy 0 : -13970.2
 E-Slope 0.00012932 iteration 42 energy 0 : -13993.2
 E-Slope 8.13454e-05 iteration 43 energy 0 : -13971
 Converged due to oscillation in optimization  metric 0 bad 19  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -80401.6
 iteration 2 energy 0 : -81670
 iteration 3 energy 0 : -82832.7
 iteration 4 energy 0 : -83856.6
 iteration 5 energy 0 : -84766.7
 iteration 6 energy 0 : -85701.4
 iteration 7 energy 0 : -86644.8
 iteration 8 energy 0 : -87432.2
 iteration 9 energy 0 : -88116.9
 iteration 10 energy 0 : -88672.7
 iteration 11 energy 0 : -89184.9
 iteration 12 energy 0 : -89666.9
 E-Slope 0.00508553 iteration 13 energy 0 : -90086.8
 E-Slope 0.00457101 iteration 14 energy 0 : -90476.6
 E-Slope 0.00410141 iteration 15 energy 0 : -90849.5
 E-Slope 0.00366774 iteration 16 energy 0 : -91197.1
 E-Slope 0.00326553 iteration 17 energy 0 : -91527
 E-Slope 0.0029143 iteration 18 energy 0 : -91811.9
 E-Slope 0.00263714 iteration 19 energy 0 : -92092.4
 E-Slope 0.00240362 iteration 20 energy 0 : -92315.5
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_3349_08012017_Aug2_Ref_vimp2_2450_08172016/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_3349_08012017_Aug2_Ref_vimp2_2450_08172016/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_3349_08012017_Aug2_Ref_vimp2_2450_08172016/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_3349_08012017_Aug2_Ref_vimp2_2450_08172016/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_676_04252014/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2617_10262016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_676_04252014/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2617_10262016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547791095
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [16.8077, -16.4892, -5.6059]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -5.395542642734343, 3.764826891085585, 13.91667544104309]
level 0, iter 649, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.10121299796737546, -0.004737434720508035, 0.017809986722382612, 0.9946940686098784, 1.047639122250109, 1.018412804847417, 0.9259149894689782, -0.06793219447520002, -0.0522323727526886, 0.001966175964013707, -5.117559970734177, 2.153395372720911, 10.932797909837886]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 808, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.09886148464928803, -0.006847316072252186, 0.01649345562532652, 0.9949409465074198, 1.0520492486459978, 1.0283209429890205, 0.9251966124475516, -0.07902428338021206, -0.05452690002989343, 0.013716054369553808, -5.1392039447029365, 2.0244794016805128, 11.025994164840665]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 621, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.09707216761803196, -0.005163909899504582, 0.010680132475959198, 0.9952066434056711, 1.0541323534103975, 1.0310039321415805, 0.9247173017304389, -0.08986266041044257, -0.05949584637846755, 0.02336602526681088, -5.025373354703574, 2.224941236872887, 10.779749029663552]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 202, size: fix[40, 45, 32]-mov[40, 41, 32], affine para: [0.09966639586933444, -0.0077110881275312005, 0.007723398434311915, 0.9949610533940167, 1.043917253390219, 1.0316814625692508, 0.9238134496481447, -0.09412163638164815, -0.058161650947161414, 0.024688675165251552, -5.15603319380614, 2.0758189945341923, 10.840447287253735]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 298, size: fix[79, 89, 45]-mov[79, 82, 39], affine para: [0.10163410695747373, -0.009125231658977764, 0.007258736051434169, 0.9947535117812163, 1.0436433292628455, 1.0303024109191539, 0.929408884381712, -0.10175294669656566, -0.057738200672530895, 0.022255543537476278, -5.189868419224213, 2.058274533564319, 10.852503627377317]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 548, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.11631290066400385, 0.008009700103072809, -0.01657656128168231, 0.9930419786995206, 0.9475513388201219, 0.9918943212508677, 1.0640680503771334, 0.0627058157471321, 0.07480437855093132, -0.06345306376951707, 3.5923153692136243, -4.258745904348288, -10.948884661994269]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 348, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.11551147441156198, 0.010006612377827512, -0.010415012503150241, 0.9932011349684142, 0.9470358546034919, 0.9891358170091973, 1.0599816324623679, 0.07604322457486795, 0.07144225195262217, -0.07844178714011836, 3.605273764676354, -4.023994953259732, -10.909095200303815]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 776, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.11688428790714081, 0.005404718628962757, -0.012477648331642508, 0.9930524460214043, 0.9417533559822058, 0.9867849384544126, 1.0704387356370235, 0.08593481933422566, 0.08387771615485641, -0.08012550251894897, 3.505886521008361, -4.03714719993752, -11.146043649735352]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 204, size: fix[40, 41, 32]-mov[40, 45, 32], affine para: [-0.12048276678712795, 0.005758401197572098, -0.010997692079411002, 0.9926377962237247, 0.9490828132344827, 0.9814940973717114, 1.0598131078644932, 0.08189957471686951, 0.0816270473681396, -0.08932564150563681, 3.6599428584216205, -3.8957359009658545, -10.859939603622571]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 276, size: fix[79, 82, 39]-mov[79, 89, 45], affine para: [-0.12151261566508692, 0.0031594666834361866, -0.014912648410354874, 0.9924728283040771, 0.9484483459654531, 0.985800779154252, 1.0626270159493534, 0.07549313606584727, 0.08880981273266432, -0.0874738391925417, 3.603594227699663, -4.006736560905069, -10.87843805657857]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.493695 v2 -0.509756
 last params [0.10163410695747373, -0.009125231658977764, 0.007258736051434169, 0.9947535117812163, 1.0436433292628455, 1.0303024109191539, 0.929408884381712, -0.10175294669656566, -0.057738200672530895, 0.022255543537476278, -5.189868419224213, 2.058274533564319, 10.852503627377317]
 my params [-0.12151261566508692, 0.0031594666834361866, -0.014912648410354874, 0.9924728283040771, 0.9484483459654531, 0.985800779154252, 1.0626270159493534, 0.07549313606584727, 0.08880981273266432, -0.0874738391925417, 3.603594227699663, -4.006736560905069, -10.87843805657857]
A=1.05077 -0.127953 -0.0714498 
0.0300629 1.00384 -0.16488 
0.00931232 0.226892 0.913255 

rotation R0.999552 -0.0298475 -0.00232819 
0.0285976 0.974912 -0.220744 
0.00885843 0.220578 0.975329 

upper R1.05124 -0.0971781 -0.068043 
0 1.03253 0.0428336 
0 0 0.927287 

s=0.251584 u=0.11103 v=-0.00281437 w0.0147038 r=0.993704
m_Rotation from vnl0.11103 -0.00281437 0.0147038 0.993704
 new params [0.11102957438772777, -0.0028143713417094684, 0.014703829842279486, 0.9937043374732751, 1.0512383268621333, 1.0325263039377306, 0.9272866251614434, -0.0924415363732891, -0.06472647419582317, 0.04148425752461933, -5.07647403407414, 2.120168976953579, 10.810326805305873]
outputput affine center: [16.8077, -16.4892, -5.6059]
output affine para: [0.11102957438772777, -0.0028143713417094684, 0.014703829842279486, 0.9937043374732751, 1.0512383268621333, 1.0325263039377306, 0.9272866251614434, -0.0924415363732891, -0.06472647419582317, 0.04148425752461933, -5.07647403407414, 2.120168976953579, 10.810326805305873]
initial measure value (MMI): rval = -0.189929
final measure value (MMI): rval = -0.515238
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -5873.78
 iteration 2 energy 0 : -6368.58
 iteration 3 energy 0 : -6755.34
 iteration 4 energy 0 : -7015.74
 iteration 5 energy 0 : -7227.38
 iteration 6 energy 0 : -7413.42
 iteration 7 energy 0 : -7556.1
 iteration 8 energy 0 : -7665.47
 iteration 9 energy 0 : -7745.31
 iteration 10 energy 0 : -7760.04
 iteration 11 energy 0 : -7760.77
 iteration 12 energy 0 : -7803.6
 E-Slope 0.00919268 iteration 13 energy 0 : -7801.09
 E-Slope 0.00670414 iteration 14 energy 0 : -7836.58
 E-Slope 0.00484076 iteration 15 energy 0 : -7830.08
 E-Slope 0.00341774 iteration 16 energy 0 : -7849.35
 E-Slope 0.00231806 iteration 17 energy 0 : -7845.27
 E-Slope 0.00160509 iteration 18 energy 0 : -7868.25
 E-Slope 0.00113323 iteration 19 energy 0 : -7863.46
 E-Slope 0.000916466 iteration 20 energy 0 : -7885.2
 E-Slope 0.000824966 iteration 21 energy 0 : -7878.85
 E-Slope 0.000771761 iteration 22 energy 0 : -7900.64
 E-Slope 0.000645444 iteration 23 energy 0 : -7893.18
 E-Slope 0.000636101 iteration 24 energy 0 : -7913.25
 E-Slope 0.00054843 iteration 25 energy 0 : -7903.33
 E-Slope 0.00057371 iteration 26 energy 0 : -7926.48
 E-Slope 0.000521109 iteration 27 energy 0 : -7918.58
 E-Slope 0.000509806 iteration 28 energy 0 : -7929.21
 E-Slope 0.000430554 iteration 29 energy 0 : -7920.73
 E-Slope 0.000439793 iteration 30 energy 0 : -7943.88
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -15859.2
 iteration 2 energy 0 : -16196.6
 iteration 3 energy 0 : -16417.9
 iteration 4 energy 0 : -16570
 iteration 5 energy 0 : -16687.9
 iteration 6 energy 0 : -16777.3
 iteration 7 energy 0 : -16849.6
 iteration 8 energy 0 : -16922.5
 iteration 9 energy 0 : -17031.7
 iteration 10 energy 0 : -17015.2
 iteration 11 energy 0 : -17031.1
 iteration 12 energy 0 : -17023.4
 E-Slope 0.00242607 iteration 13 energy 0 : -17032.9
 E-Slope 0.00182025 iteration 14 energy 0 : -17049.3
 E-Slope 0.00135818 iteration 15 energy 0 : -17054.4
 E-Slope 0.00100314 iteration 16 energy 0 : -17071.4
 E-Slope 0.000716671 iteration 17 energy 0 : -17069.2
 E-Slope 0.000524715 iteration 18 energy 0 : -17101.5
 E-Slope 0.000364274 iteration 19 energy 0 : -17089.3
 E-Slope 0.00031241 iteration 20 energy 0 : -17133.1
 E-Slope 0.00034631 iteration 21 energy 0 : -17116
 E-Slope 0.000394844 iteration 22 energy 0 : -17164.9
 E-Slope 0.000408679 iteration 23 energy 0 : -17143
 E-Slope 0.000451677 iteration 24 energy 0 : -17199.1
 E-Slope 0.000442922 iteration 25 energy 0 : -17173.2
 E-Slope 0.000478759 iteration 26 energy 0 : -17220.2
 E-Slope 0.000452921 iteration 27 energy 0 : -17191.3
 E-Slope 0.000454634 iteration 28 energy 0 : -17223.4
 E-Slope 0.000392616 iteration 29 energy 0 : -17198.7
 E-Slope 0.000389569 iteration 30 energy 0 : -17239
 E-Slope 0.000316344 iteration 31 energy 0 : -17215.7
 E-Slope 0.000316069 iteration 32 energy 0 : -17251.9
 E-Slope 0.000242561 iteration 33 energy 0 : -17226.1
 E-Slope 0.000240058 iteration 34 energy 0 : -17251
 E-Slope 0.000167757 iteration 35 energy 0 : -17228.7
 E-Slope 0.000179142 iteration 36 energy 0 : -17253.4
 E-Slope 0.00012175 iteration 37 energy 0 : -17232.3
 E-Slope 0.000140481 iteration 38 energy 0 : -17256.8
 E-Slope 9.11132e-05 iteration 39 energy 0 : -17236.3
 Converged due to oscillation in optimization  metric 0 bad 14  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -118383
 iteration 2 energy 0 : -120790
 iteration 3 energy 0 : -123039
 iteration 4 energy 0 : -124757
 iteration 5 energy 0 : -126075
 iteration 6 energy 0 : -127381
 iteration 7 energy 0 : -128480
 iteration 8 energy 0 : -129396
 iteration 9 energy 0 : -130177
 iteration 10 energy 0 : -130805
 iteration 11 energy 0 : -131353
 iteration 12 energy 0 : -131861
 E-Slope 0.00446275 iteration 13 energy 0 : -132359
 E-Slope 0.00378133 iteration 14 energy 0 : -132801
 E-Slope 0.00326547 iteration 15 energy 0 : -133250
 E-Slope 0.00285576 iteration 16 energy 0 : -133651
 E-Slope 0.00250916 iteration 17 energy 0 : -134017
 E-Slope 0.002239 iteration 18 energy 0 : -134340
 E-Slope 0.00202398 iteration 19 energy 0 : -134619
 E-Slope 0.00184725 iteration 20 energy 0 : -134878
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_676_04252014_Aug1_Ref_vimp2_2617_10262016/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_676_04252014_Aug1_Ref_vimp2_2617_10262016/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_676_04252014_Aug1_Ref_vimp2_2617_10262016/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_676_04252014_Aug1_Ref_vimp2_2617_10262016/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_676_04252014/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_702_04302014/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_676_04252014/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_702_04302014/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547791218
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [16.8077, -16.4892, -5.6059]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -7.321699239373402, -1.2915107640814192, 30.927601274673428]
level 0, iter 292, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.0949228427367273, -0.035083283543306885, -0.015460647853446067, 0.9947460909752551, 1.052304115633277, 1.0480563747306837, 1.0231058074542307, -0.0024883399118729383, -0.009688901413951876, -0.011931863393124824, -7.068088509998315, -2.811656083896704, 28.52957677421599]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 82, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.0982955532383137, -0.032184317209985276, -0.017580469573444415, 0.9944813125589027, 1.053813013755842, 1.0626693648223446, 1.0278155891974217, -0.0014748471541042214, -0.013092434626721878, -0.007733099210609411, -7.192458012217082, -2.92403665148496, 28.53184168409132]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 291, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.10658990134392254, -0.03278449173564321, -0.017965016057081264, 0.9936000343353443, 1.0477629711144554, 1.0647280176751501, 1.026713863192557, -0.010581039877830222, -0.02038893222991607, -0.002813048803400935, -7.169701368988183, -3.0063417960566716, 28.56077546371486]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 264, size: fix[40, 45, 32]-mov[39, 42, 32], affine para: [0.10706327617772499, -0.03011688914807271, -0.021138599408205908, 0.9935711285545662, 1.0468143012408417, 1.0643448915296982, 1.0325122909378444, -0.009002286096319314, -0.027626073809382597, -0.006407700287218375, -7.125597308421798, -2.969706416991922, 28.45028150434908]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 216, size: fix[79, 89, 45]-mov[77, 84, 37], affine para: [0.11130918865676333, -0.031410794581990545, -0.019689248158552157, 0.9930941345165886, 1.0392251540564301, 1.0720269290715543, 1.0280650767641566, -0.011242035447675148, -0.026008662214956922, -0.0033259265571708926, -7.410125200078152, -2.9591578427443324, 28.42001562354516]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 552, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.10952224469148931, 0.03355254736564936, 0.0234669271710255, 0.9931406787621597, 0.9483113675691811, 0.9227506854381055, 0.9670925624112094, 0.01067657240614141, 0.012943544236153173, -0.0038644298575765544, 4.651130502828487, -2.925250092359933, -27.785171916922316]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 75, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.10884348742833322, 0.03235094273040452, 0.019269654914512418, 0.9933454545868561, 0.9506449964342505, 0.9202001008654104, 0.9716401174520569, 0.011715402217152738, 0.01510802881347434, -0.008322770709003889, 4.722023587463195, -2.8701901266165293, -27.90071295410457]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 499, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.10722537759497887, 0.029635954026566946, 0.019493087091317796, 0.993601755324637, 0.9461868216845853, 0.9267872743058635, 0.9732594121126308, 0.0069397575280084455, 0.01632754146265805, -0.021731403576804326, 4.716135794968575, -2.5581462249252196, -28.014380973013715]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 308, size: fix[39, 42, 32]-mov[40, 45, 32], affine para: [-0.11603640478245854, 0.03198491480592145, 0.02191873207026674, 0.9924878272172668, 0.9500403660713438, 0.9186220495648432, 0.9646554293096423, 0.004805208813259462, 0.021213639812217397, -0.020304050108762253, 4.592002401964548, -2.8474012960712423, -27.75422591136571]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 368, size: fix[77, 84, 37]-mov[79, 89, 45], affine para: [-0.11295891165611704, 0.032231286074213356, 0.01667332004541669, 0.9929367698268258, 0.9595318821911376, 0.9235428847196465, 0.9677514010341429, 0.00231095137293165, 0.018365864161278365, -0.01631379137878329, 4.859247826873712, -2.8195430563472166, -27.83279548220896]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.551414 v2 -0.555283
 last params [0.11130918865676333, -0.031410794581990545, -0.019689248158552157, 0.9930941345165886, 1.0392251540564301, 1.0720269290715543, 1.0280650767641566, -0.011242035447675148, -0.026008662214956922, -0.0033259265571708926, -7.410125200078152, -2.9591578427443324, 28.42001562354516]
 my params [-0.11295891165611704, 0.032231286074213356, 0.01667332004541669, 0.9929367698268258, 0.9595318821911376, 0.9235428847196465, 0.9677514010341429, 0.00231095137293165, 0.018365864161278365, -0.01631379137878329, 4.859247826873712, -2.8195430563472166, -27.83279548220896]
A=1.03839 0.0201955 -0.0885658 
-0.0427212 1.05835 -0.225337 
0.0622479 0.232908 1.00481 

rotation R0.997367 0.0272473 -0.0672017 
-0.0410336 0.976143 -0.213215 
0.059789 0.215411 0.974691 

upper R1.04113 -0.00936041 -0.0190099 
0 1.08382 -0.00592825 
0 0 1.03337 

s=0.251635 u=0.107857 v=-0.0319552 w-0.0171818 r=0.993504
m_Rotation from vnl0.107857 -0.0319552 -0.0171818 0.993504
 new params [0.10785697020741208, -0.03195523264645125, -0.017181835615328978, 0.9935041628544273, 1.0411265372098997, 1.0838245991615696, 1.033373201763084, -0.008990657671594184, -0.01825899533187779, -0.005469747948526776, -7.453864961483613, -3.0800966996676147, 28.320788600610328]
outputput affine center: [16.8077, -16.4892, -5.6059]
output affine para: [0.10785697020741208, -0.03195523264645125, -0.017181835615328978, 0.9935041628544273, 1.0411265372098997, 1.0838245991615696, 1.033373201763084, -0.008990657671594184, -0.01825899533187779, -0.005469747948526776, -7.453864961483613, -3.0800966996676147, 28.320788600610328]
initial measure value (MMI): rval = -0.242669
final measure value (MMI): rval = -0.568039
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -5136.21
 iteration 2 energy 0 : -5613.33
 iteration 3 energy 0 : -5942.56
 iteration 4 energy 0 : -6176.92
 iteration 5 energy 0 : -6370.44
 iteration 6 energy 0 : -6547.04
 iteration 7 energy 0 : -6701.25
 iteration 8 energy 0 : -6829.86
 iteration 9 energy 0 : -6917.56
 iteration 10 energy 0 : -6971.5
 iteration 11 energy 0 : -7017.65
 iteration 12 energy 0 : -7046.23
 E-Slope 0.0108529 iteration 13 energy 0 : -7040.16
 E-Slope 0.00833307 iteration 14 energy 0 : -7052.08
 E-Slope 0.00631956 iteration 15 energy 0 : -7053.82
 E-Slope 0.00462528 iteration 16 energy 0 : -7057.76
 E-Slope 0.00322916 iteration 17 energy 0 : -7066.01
 E-Slope 0.00214901 iteration 18 energy 0 : -7071.05
 E-Slope 0.0014104 iteration 19 energy 0 : -7086.11
 E-Slope 0.000942759 iteration 20 energy 0 : -7086.56
 E-Slope 0.000696436 iteration 21 energy 0 : -7099.97
 E-Slope 0.000546075 iteration 22 energy 0 : -7098.02
 E-Slope 0.000522032 iteration 23 energy 0 : -7110.31
 E-Slope 0.000543475 iteration 24 energy 0 : -7110.47
 E-Slope 0.000566773 iteration 25 energy 0 : -7130.73
 E-Slope 0.000576057 iteration 26 energy 0 : -7128.02
 E-Slope 0.000586234 iteration 27 energy 0 : -7140.37
 E-Slope 0.000555195 iteration 28 energy 0 : -7136.14
 E-Slope 0.0005427 iteration 29 energy 0 : -7147.8
 E-Slope 0.000491709 iteration 30 energy 0 : -7142.82
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -14257.4
 iteration 2 energy 0 : -14576.6
 iteration 3 energy 0 : -14780.3
 iteration 4 energy 0 : -14933.8
 iteration 5 energy 0 : -15040.8
 iteration 6 energy 0 : -15125.9
 iteration 7 energy 0 : -15184.7
 iteration 8 energy 0 : -15239
 iteration 9 energy 0 : -15287.2
 iteration 10 energy 0 : -15333.2
 iteration 11 energy 0 : -15380.5
 iteration 12 energy 0 : -15396.2
 E-Slope 0.00264257 iteration 13 energy 0 : -15437.9
 E-Slope 0.00212277 iteration 14 energy 0 : -15454
 E-Slope 0.00175906 iteration 15 energy 0 : -15479.2
 E-Slope 0.0014765 iteration 16 energy 0 : -15479.9
 E-Slope 0.00124703 iteration 17 energy 0 : -15491
 E-Slope 0.00106153 iteration 18 energy 0 : -15505.2
 E-Slope 0.000881851 iteration 19 energy 0 : -15507.3
 E-Slope 0.000740319 iteration 20 energy 0 : -15529.5
 E-Slope 0.000598475 iteration 21 energy 0 : -15521.1
 E-Slope 0.000512168 iteration 22 energy 0 : -15550
 E-Slope 0.00043983 iteration 23 energy 0 : -15541
 E-Slope 0.00039231 iteration 24 energy 0 : -15568.6
 E-Slope 0.000360601 iteration 25 energy 0 : -15560.8
 E-Slope 0.000355266 iteration 26 energy 0 : -15584.7
 E-Slope 0.000341512 iteration 27 energy 0 : -15571.9
 E-Slope 0.000340864 iteration 28 energy 0 : -15599.3
 E-Slope 0.000313327 iteration 29 energy 0 : -15586.2
 E-Slope 0.000327088 iteration 30 energy 0 : -15620.5
 E-Slope 0.000320673 iteration 31 energy 0 : -15621.4
 E-Slope 0.00033512 iteration 32 energy 0 : -15632
 E-Slope 0.000302218 iteration 33 energy 0 : -15621.9
 E-Slope 0.000331432 iteration 34 energy 0 : -15656.7
 E-Slope 0.000316493 iteration 35 energy 0 : -15650.5
 E-Slope 0.00033126 iteration 36 energy 0 : -15662.7
 E-Slope 0.000293925 iteration 37 energy 0 : -15648
 E-Slope 0.000309832 iteration 38 energy 0 : -15680.2
 E-Slope 0.000256866 iteration 39 energy 0 : -15656.8
 E-Slope 0.000259697 iteration 40 energy 0 : -15685.9
 E-Slope 0.000192605 iteration 41 energy 0 : -15659.6
 E-Slope 0.000198998 iteration 42 energy 0 : -15692.3
 E-Slope 0.000165693 iteration 43 energy 0 : -15671.6
 E-Slope 0.000174463 iteration 44 energy 0 : -15702
 E-Slope 0.000119776 iteration 45 energy 0 : -15673.4
 E-Slope 0.000145011 iteration 46 energy 0 : -15706.6
 E-Slope 0.000116624 iteration 47 energy 0 : -15679.3
 E-Slope 0.000143021 iteration 48 energy 0 : -15715.2
 E-Slope 9.60454e-05 iteration 49 energy 0 : -15681.7
 Converged due to oscillation in optimization  metric 0 bad 14  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -107102
 iteration 2 energy 0 : -109054
 iteration 3 energy 0 : -110804
 iteration 4 energy 0 : -112249
 iteration 5 energy 0 : -113529
 iteration 6 energy 0 : -114802
 iteration 7 energy 0 : -116003
 iteration 8 energy 0 : -117037
 iteration 9 energy 0 : -117905
 iteration 10 energy 0 : -118522
 iteration 11 energy 0 : -119125
 iteration 12 energy 0 : -119600
 E-Slope 0.00491892 iteration 13 energy 0 : -120030
 E-Slope 0.00427283 iteration 14 energy 0 : -120420
 E-Slope 0.00371257 iteration 15 energy 0 : -120831
 E-Slope 0.00321665 iteration 16 energy 0 : -121228
 E-Slope 0.00278628 iteration 17 energy 0 : -121623
 E-Slope 0.00244796 iteration 18 energy 0 : -122030
 E-Slope 0.00220936 iteration 19 energy 0 : -122432
 E-Slope 0.00205292 iteration 20 energy 0 : -122809
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_676_04252014_Aug2_Ref_vimp2_702_04302014/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_676_04252014_Aug2_Ref_vimp2_702_04302014/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_676_04252014_Aug2_Ref_vimp2_702_04302014/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_676_04252014_Aug2_Ref_vimp2_702_04302014/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_702_04302014/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2926_02222017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_702_04302014/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2926_02222017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547791338
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [9.42233, -17.7741, 25.3258]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 4.884059121914236, 29.7227489242939, -13.192281506630144]
level 0, iter 960, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.010635588293403093, -0.0011848397117890006, 0.02386595405971207, 0.9996578898069731, 0.9228098487858638, 0.8696633146406542, 0.9764737721924869, -0.012240041068935356, 0.005308362741109759, -0.041060956849553076, 2.9138106348951744, 29.150151900599873, -10.382420846920606]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 178, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.011980816983182183, -0.005568872981839433, 0.027742310283394994, 0.9995277944600978, 0.9324713881529941, 0.8663641307947665, 0.978936716950155, -0.006173487699346105, 0.018213841295548285, -0.044941449774884804, 3.001644587607512, 29.325933316479862, -10.354916943184548]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 161, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.010035393666437692, -0.0046434042341416465, 0.03228526952060745, 0.9994175258834816, 0.9265963599222872, 0.852516086838432, 0.9783699493896837, 0.0010893252047505541, 0.018906102939014815, -0.04956689058550539, 2.961119547075729, 29.128745569590073, -10.293988784687695]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 40, size: fix[39, 42, 32]-mov[37, 42, 32], affine para: [-0.015471472325948338, -0.005012077102441921, 0.03025212021699504, 0.9994099868670331, 0.9257926982193307, 0.854516297338462, 0.978864121318093, 0.0006593095616628808, 0.016415523825614887, -0.052106131203582255, 2.9926724196222803, 29.160387547039917, -10.431553864854052]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 146, size: fix[77, 84, 37]-mov[74, 83, 37], affine para: [-0.01996066120191359, -0.004275947625984602, 0.02712622681997683, 0.9994235619069591, 0.9313079578412807, 0.8616277476477086, 0.9799653908463513, -0.0010461820931071523, 0.013714897367718014, -0.049951067379855774, 3.0698802605731372, 29.127603865338248, -10.550139121096498]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 2275, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.00925543937055598, 0.009495768390418033, -0.015548898711715579, 0.9997911776834133, 1.068529025452152, 1.1248836817540424, 1.0229215075698508, 0.026032971881538094, -0.027382374360530756, 0.008966820356808422, -5.200969032438155, -33.38995058623086, 10.347780940327196]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 469, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.011849447687140798, 0.008165848956384546, -0.022062574248680154, 0.9996530159599644, 1.067303540500603, 1.1404877320167224, 1.026903472720097, 0.014012905137486759, -0.02800062073758127, 0.01566130788435813, -5.341854175867602, -33.80057418355815, 10.077485510918779]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 59, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.01018884857493563, 0.007620081691352324, -0.025295366251745166, 0.9995990527035948, 1.0726275222889463, 1.1435214301195251, 1.0288500576095188, 0.013254971912145171, -0.025177158846483545, 0.015884419065175643, -5.497768204583162, -33.77112387110868, 10.263845156720315]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 693, size: fix[37, 42, 32]-mov[39, 42, 32], affine para: [0.011159425685398941, 0.006270348731134623, -0.023678181079590757, 0.9996376812055077, 1.0577415877937888, 1.139978168354947, 1.0088002550588198, 0.013370282449025307, -0.019937818257305753, 0.017819956015293875, -5.235099432427536, -33.44137829038636, 9.991345526720474]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 316, size: fix[74, 83, 37]-mov[77, 84, 37], affine para: [0.012232243708861437, 0.003841743013330211, -0.022425890317904873, 0.9996662906529937, 1.0554284807168455, 1.1411144486520102, 1.0135746956991123, 0.018097975214098984, -0.025279039160180112, 0.014880859454481313, -5.401154064641488, -33.33402370325961, 9.981651572099029]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.486521 v2 -0.471032
final [-0.01996066120191359, -0.004275947625984602, 0.02712622681997683, 0.9994235619069591, 0.9313079578412807, 0.8616277476477086, 0.9799653908463513, -0.0010461820931071523, 0.013714897367718014, -0.049951067379855774, 3.0698802605731372, 29.127603865338248, -10.550139121096498]
outputput affine center: [9.42233, -17.7741, 25.3258]
output affine para: [-0.01996066120191359, -0.004275947625984602, 0.02712622681997683, 0.9994235619069591, 0.9313079578412807, 0.8616277476477086, 0.9799653908463513, -0.0010461820931071523, 0.013714897367718014, -0.049951067379855774, 3.0698802605731372, 29.127603865338248, -10.550139121096498]
initial measure value (MMI): rval = -0.258899
final measure value (MMI): rval = -0.510637
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -6326.89
 iteration 2 energy 0 : -6885.12
 iteration 3 energy 0 : -7375.87
 iteration 4 energy 0 : -7719.2
 iteration 5 energy 0 : -7939.48
 iteration 6 energy 0 : -8102.16
 iteration 7 energy 0 : -8220.51
 iteration 8 energy 0 : -8298.41
 iteration 9 energy 0 : -8360.28
 iteration 10 energy 0 : -8408.95
 iteration 11 energy 0 : -8450.28
 iteration 12 energy 0 : -8480.96
 E-Slope 0.00881746 iteration 13 energy 0 : -8499.11
 E-Slope 0.0061363 iteration 14 energy 0 : -8487.56
 E-Slope 0.0043165 iteration 15 energy 0 : -8491.55
 E-Slope 0.00310342 iteration 16 energy 0 : -8509.67
 E-Slope 0.00221169 iteration 17 energy 0 : -8508.59
 E-Slope 0.00164018 iteration 18 energy 0 : -8543.08
 E-Slope 0.00123093 iteration 19 energy 0 : -8540.78
 E-Slope 0.000910491 iteration 20 energy 0 : -8535.63
 E-Slope 0.000673428 iteration 21 energy 0 : -8535.21
 E-Slope 0.000559956 iteration 22 energy 0 : -8559.54
 E-Slope 0.000491187 iteration 23 energy 0 : -8555.58
 E-Slope 0.00052432 iteration 24 energy 0 : -8583.39
 E-Slope 0.000545219 iteration 25 energy 0 : -8575.23
 E-Slope 0.000505373 iteration 26 energy 0 : -8575.88
 E-Slope 0.000431933 iteration 27 energy 0 : -8571.99
 E-Slope 0.000440307 iteration 28 energy 0 : -8601.55
 E-Slope 0.000389062 iteration 29 energy 0 : -8592.27
 E-Slope 0.000399143 iteration 30 energy 0 : -8595.11
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -15529.2
 iteration 2 energy 0 : -15726
 iteration 3 energy 0 : -15898.1
 iteration 4 energy 0 : -16059.4
 iteration 5 energy 0 : -16209.2
 iteration 6 energy 0 : -16320.3
 iteration 7 energy 0 : -16411.2
 iteration 8 energy 0 : -16490.9
 iteration 9 energy 0 : -16560
 iteration 10 energy 0 : -16607.5
 iteration 11 energy 0 : -16573.8
 iteration 12 energy 0 : -16651.2
 E-Slope 0.00282831 iteration 13 energy 0 : -16625.3
 E-Slope 0.00219823 iteration 14 energy 0 : -16618.8
 E-Slope 0.0016078 iteration 15 energy 0 : -16599.9
 E-Slope 0.00119887 iteration 16 energy 0 : -16678.2
 E-Slope 0.000859708 iteration 17 energy 0 : -16656.2
 E-Slope 0.000577725 iteration 18 energy 0 : -16641.3
 E-Slope 0.00034605 iteration 19 energy 0 : -16624.9
 E-Slope 0.000271164 iteration 20 energy 0 : -16695.8
 E-Slope 0.00022874 iteration 21 energy 0 : -16672.5
 E-Slope 0.000223115 iteration 22 energy 0 : -16668
 E-Slope 0.000140809 iteration 23 energy 0 : -16652.2
 E-Slope 0.000232525 iteration 24 energy 0 : -16725.6
 E-Slope 0.00025139 iteration 25 energy 0 : -16705.4
 E-Slope 0.000218354 iteration 26 energy 0 : -16682.6
 E-Slope 0.000127479 iteration 27 energy 0 : -16666.8
 E-Slope 0.000195824 iteration 28 energy 0 : -16726.6
 E-Slope 0.000194862 iteration 29 energy 0 : -16703
 E-Slope 0.000171579 iteration 30 energy 0 : -16710.3
 E-Slope 9.59113e-05 iteration 31 energy 0 : -16694.6
 Converged due to oscillation in optimization  metric 0 bad 15  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -92593.5
 iteration 2 energy 0 : -93986
 iteration 3 energy 0 : -95145.1
 iteration 4 energy 0 : -96035.1
 iteration 5 energy 0 : -96773.7
 iteration 6 energy 0 : -97407.7
 iteration 7 energy 0 : -97997.4
 iteration 8 energy 0 : -98574.1
 iteration 9 energy 0 : -99178.8
 iteration 10 energy 0 : -99730.4
 iteration 11 energy 0 : -100224
 iteration 12 energy 0 : -100694
 E-Slope 0.00364827 iteration 13 energy 0 : -101156
 E-Slope 0.00333954 iteration 14 energy 0 : -101590
 E-Slope 0.00311985 iteration 15 energy 0 : -102000
 E-Slope 0.00294146 iteration 16 energy 0 : -102379
 E-Slope 0.002775 iteration 17 energy 0 : -102707
 E-Slope 0.00260246 iteration 18 energy 0 : -102997
 E-Slope 0.00241891 iteration 19 energy 0 : -103250
 E-Slope 0.0022327 iteration 20 energy 0 : -103502
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_702_04302014_Aug1_Ref_vimp2_2926_02222017_Test_NewCases/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_702_04302014_Aug1_Ref_vimp2_2926_02222017_Test_NewCases/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_702_04302014_Aug1_Ref_vimp2_2926_02222017_Test_NewCases/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_702_04302014_Aug1_Ref_vimp2_2926_02222017_Test_NewCases/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_702_04302014/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2390_07272016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_702_04302014/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2390_07272016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547791446
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [9.42233, -17.7741, 25.3258]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 5.7889477054258265, 26.01779784926955, -7.02033280421028]
level 0, iter 114, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.006672201905908721, -0.03137164112517554, 0.020108226305221764, 0.9992832236606887, 0.9433127781290298, 0.9484973602684769, 0.9494350889611652, -0.008336568057790985, -0.0014619011451600583, 0.005674823266646388, 2.3664379484185245, 27.10147182469295, -5.678096237562106]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 56, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.0031505444002060687, -0.03209710265687271, 0.01960255497460371, 0.9992875411559399, 0.948610689965387, 0.9519593742599728, 0.9595403708671286, -0.005509821830376967, -0.0006127618057236265, 0.006103659068665615, 2.2456316223254307, 26.923503208347807, -5.762056228233865]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 60, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.004463681252633535, -0.03311337972934934, 0.02028614545428011, 0.9992357339162677, 0.9472072939646529, 0.9556025209670477, 0.9520736843483307, -0.005294982687496328, 0.002272944876582558, 0.0061584364720602075, 2.243999377093587, 27.06535491672288, -5.65507181478187]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 78, size: fix[39, 42, 32]-mov[39, 41, 32], affine para: [-0.003272741089247101, -0.03319266531519431, 0.01634200609209545, 0.9993099994355716, 0.94925962573529, 0.9607302998521215, 0.9575553488260669, -0.006551581717592733, 0.008629425063524626, 0.01028510872282025, 2.308858336752038, 27.119086079570607, -5.649392597901539]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 108, size: fix[77, 84, 37]-mov[78, 81, 39], affine para: [-0.006207637544587253, -0.029978865191210343, 0.0114570966212878, 0.999465591111056, 0.9420499815978904, 0.9563308211184031, 0.9592472534193603, -0.007799544438711569, 0.005358736199258337, 0.010597468266039634, 2.3649989896180785, 26.96767079532513, -5.557184829178718]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 475, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.0015322716176236044, 0.02631079720380589, -0.01327115787470412, 0.999564540418904, 1.0440114611599927, 1.0271749720144188, 1.033920113914074, 0.020263173693915375, 0.01595689242900461, -0.006332163356025198, -3.1020410840592723, -27.84555665363487, 6.024990624285407]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 281, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.002105871790543761, 0.025961975954672527, -0.018921258055057014, 0.9994816291969276, 1.048664424467048, 1.0419272363467695, 1.0381923209323864, 0.020413092540797474, 0.012804252751803568, -0.009760560006051999, -3.514685543533385, -28.281067867217082, 5.967181842381226]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 595, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.00009941761616303838, 0.032398398404537454, -0.013822273640369876, 0.999379446781036, 1.0600959482971892, 1.0395605881022805, 1.0470872412207863, 0.025288236802331755, -0.0006495912619064026, -0.018145472870939514, -3.529142553676027, -28.474746682400053, 6.297368277681377]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 189, size: fix[39, 41, 32]-mov[39, 42, 32], affine para: [0.0011995784695490268, 0.030219084839564373, -0.008165131443519198, 0.9995092288475703, 1.04783283743005, 1.0320168203036102, 1.0321719796380093, 0.025572040152137526, 0.0004095647723533077, -0.018969904679082418, -3.2166086702795247, -28.26010507772449, 6.039091387891046]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 1355, size: fix[78, 81, 39]-mov[77, 84, 37], affine para: [0.00028528353557162996, 0.029418847983522643, -0.003464385215865199, 0.9995611277114085, 1.058448781867192, 1.0372559126456855, 1.0465872482812821, 0.033326991647423504, -0.006419350245708775, -0.02821854870272108, -3.4805010183538214, -28.6910789683605, 6.077982377215035]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.444054 v2 -0.445935
 last params [-0.006207637544587253, -0.029978865191210343, 0.0114570966212878, 0.999465591111056, 0.9420499815978904, 0.9563308211184031, 0.9592472534193603, -0.007799544438711569, 0.005358736199258337, 0.010597468266039634, 2.3649989896180785, 26.96767079532513, -5.557184829178718]
 my params [0.00028528353557162996, 0.029418847983522643, -0.003464385215865199, 0.9995611277114085, 1.058448781867192, 1.0372559126456855, 1.0465872482812821, 0.033326991647423504, -0.006419350245708775, -0.02821854870272108, -3.4805010183538214, -28.6910789683605, 6.077982377215035]
A=0.943206 -0.0386607 -0.0503519 
0.00827881 0.964038 0.0272691 
0.0561921 -0.000739693 0.953832 

rotation R0.998192 -0.00884218 -0.0594559 
0.00876144 0.99996 -0.00161842 
0.0594679 0.00109458 0.99823 

upper R0.944914 -0.0301884 0.00670048 
0 0.964341 0.0287573 
0 0 0.955093 

s=0.250113 u=0.000678558 v=-0.0297444 w0.0044029 r=0.999548
m_Rotation from vnl0.000678558 -0.0297444 0.0044029 0.999548
 new params [0.0006785576582987467, -0.029744417700439316, 0.004402897539535559, 0.9995476095056315, 0.9449142296098594, 0.9643408349674671, 0.955093408942536, -0.031948270370764524, 0.007091103289725319, 0.029820646627829933, 2.4796499075316687, 27.522365643507886, -5.623022994877555]
outputput affine center: [9.42233, -17.7741, 25.3258]
output affine para: [0.0006785576582987467, -0.029744417700439316, 0.004402897539535559, 0.9995476095056315, 0.9449142296098594, 0.9643408349674671, 0.955093408942536, -0.031948270370764524, 0.007091103289725319, 0.029820646627829933, 2.4796499075316687, 27.522365643507886, -5.623022994877555]
initial measure value (MMI): rval = -0.17321
final measure value (MMI): rval = -0.448721
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -5548.96
 iteration 2 energy 0 : -6006.8
 iteration 3 energy 0 : -6366.8
 iteration 4 energy 0 : -6609.85
 iteration 5 energy 0 : -6796.12
 iteration 6 energy 0 : -6953.04
 iteration 7 energy 0 : -7096
 iteration 8 energy 0 : -7218.92
 iteration 9 energy 0 : -7336.72
 iteration 10 energy 0 : -7440.96
 iteration 11 energy 0 : -7507.27
 iteration 12 energy 0 : -7566.55
 E-Slope 0.0111656 iteration 13 energy 0 : -7626.05
 E-Slope 0.00918219 iteration 14 energy 0 : -7682.84
 E-Slope 0.00781286 iteration 15 energy 0 : -7743.26
 E-Slope 0.00678351 iteration 16 energy 0 : -7805.97
 E-Slope 0.00597037 iteration 17 energy 0 : -7863.27
 E-Slope 0.00531388 iteration 18 energy 0 : -7912.54
 E-Slope 0.00479661 iteration 19 energy 0 : -7956.21
 E-Slope 0.00437967 iteration 20 energy 0 : -7995.47
 E-Slope 0.0040696 iteration 21 energy 0 : -8033.73
 E-Slope 0.00384527 iteration 22 energy 0 : -8070.31
 E-Slope 0.00360024 iteration 23 energy 0 : -8098.6
 E-Slope 0.0033307 iteration 24 energy 0 : -8126.12
 E-Slope 0.00303636 iteration 25 energy 0 : -8146.22
 E-Slope 0.00272971 iteration 26 energy 0 : -8166.63
 E-Slope 0.0024419 iteration 27 energy 0 : -8188.37
 E-Slope 0.0022083 iteration 28 energy 0 : -8214.89
 E-Slope 0.00204054 iteration 29 energy 0 : -8245.78
 E-Slope 0.00192119 iteration 30 energy 0 : -8273.47
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -15050.8
 iteration 2 energy 0 : -15247.6
 iteration 3 energy 0 : -15423.3
 iteration 4 energy 0 : -15606.2
 iteration 5 energy 0 : -15753.8
 iteration 6 energy 0 : -15869.5
 iteration 7 energy 0 : -15960.3
 iteration 8 energy 0 : -16043.7
 iteration 9 energy 0 : -16118.9
 iteration 10 energy 0 : -16156.2
 iteration 11 energy 0 : -16119.9
 iteration 12 energy 0 : -16147.3
 E-Slope 0.00286882 iteration 13 energy 0 : -16133.5
 E-Slope 0.00216947 iteration 14 energy 0 : -16143.3
 E-Slope 0.00155484 iteration 15 energy 0 : -16152.7
 E-Slope 0.00106416 iteration 16 energy 0 : -16153.8
 E-Slope 0.000711009 iteration 17 energy 0 : -16174.6
 E-Slope 0.000448696 iteration 18 energy 0 : -16171.9
 E-Slope 0.000310265 iteration 19 energy 0 : -16207.6
 E-Slope 0.000239432 iteration 20 energy 0 : -16199.3
 E-Slope 0.000286452 iteration 21 energy 0 : -16233.5
 E-Slope 0.000344761 iteration 22 energy 0 : -16220.6
 E-Slope 0.000378385 iteration 23 energy 0 : -16256.3
 E-Slope 0.000399031 iteration 24 energy 0 : -16239.4
 E-Slope 0.0004173 iteration 25 energy 0 : -16273.2
 E-Slope 0.000398763 iteration 26 energy 0 : -16257.4
 E-Slope 0.000395752 iteration 27 energy 0 : -16282
 E-Slope 0.000348039 iteration 28 energy 0 : -16267.2
 E-Slope 0.000342622 iteration 29 energy 0 : -16299.4
 E-Slope 0.000288472 iteration 30 energy 0 : -16283
 E-Slope 0.000292756 iteration 31 energy 0 : -16310.1
 E-Slope 0.000248402 iteration 32 energy 0 : -16296.3
 E-Slope 0.000239208 iteration 33 energy 0 : -16303.6
 E-Slope 0.000182122 iteration 34 energy 0 : -16291.4
 E-Slope 0.000197455 iteration 35 energy 0 : -16324.1
 E-Slope 0.000155777 iteration 36 energy 0 : -16307.3
 E-Slope 0.000176124 iteration 37 energy 0 : -16331.9
 E-Slope 0.000148259 iteration 38 energy 0 : -16318.9
 E-Slope 0.000167869 iteration 39 energy 0 : -16340.2
 E-Slope 0.000140786 iteration 40 energy 0 : -16327.4
 E-Slope 0.000180222 iteration 41 energy 0 : -16356.7
 E-Slope 0.00016591 iteration 42 energy 0 : -16340.8
 E-Slope 0.000204824 iteration 43 energy 0 : -16365.5
 E-Slope 0.00019256 iteration 44 energy 0 : -16349.2
 E-Slope 0.000206724 iteration 45 energy 0 : -16373.3
 E-Slope 0.000176921 iteration 46 energy 0 : -16362.4
 E-Slope 0.00019969 iteration 47 energy 0 : -16381.9
 E-Slope 0.00016465 iteration 48 energy 0 : -16363.4
 E-Slope 0.000187166 iteration 49 energy 0 : -16394.1
 E-Slope 0.000157572 iteration 50 energy 0 : -16375.9
 E-Slope 0.000172652 iteration 51 energy 0 : -16399.2
 E-Slope 0.000141606 iteration 52 energy 0 : -16385
 E-Slope 0.000158645 iteration 53 energy 0 : -16402
 E-Slope 0.000129469 iteration 54 energy 0 : -16389.7
 E-Slope 0.000135981 iteration 55 energy 0 : -16400.7
 E-Slope 0.000102967 iteration 56 energy 0 : -16393
 E-Slope 0.00010106 iteration 57 energy 0 : -16399.5
 E-Slope 6.72415e-05 iteration 58 energy 0 : -16390.3
 Converged due to oscillation in optimization  metric 0 bad 23  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -91615.4
 iteration 2 energy 0 : -93054
 iteration 3 energy 0 : -94655
 iteration 4 energy 0 : -95913.4
 iteration 5 energy 0 : -96847.8
 iteration 6 energy 0 : -97589.7
 iteration 7 energy 0 : -98209.9
 iteration 8 energy 0 : -98781.7
 iteration 9 energy 0 : -99305.2
 iteration 10 energy 0 : -99780.5
 iteration 11 energy 0 : -100223
 iteration 12 energy 0 : -100620
 E-Slope 0.00390126 iteration 13 energy 0 : -101024
 E-Slope 0.00334681 iteration 14 energy 0 : -101442
 E-Slope 0.0029656 iteration 15 energy 0 : -101818
 E-Slope 0.00269865 iteration 16 energy 0 : -102133
 E-Slope 0.002489 iteration 17 energy 0 : -102406
 E-Slope 0.00230522 iteration 18 energy 0 : -102648
 E-Slope 0.00213073 iteration 19 energy 0 : -102872
 E-Slope 0.00196654 iteration 20 energy 0 : -103094
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_702_04302014_Aug2_Ref_vimp2_2390_07272016/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_702_04302014_Aug2_Ref_vimp2_2390_07272016/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_702_04302014_Aug2_Ref_vimp2_2390_07272016/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_702_04302014_Aug2_Ref_vimp2_2390_07272016/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_804_06042014/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2039_03182016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_804_06042014/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2039_03182016_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547791558
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [10.7286, -17.148, 34.3134]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 2.5878827767240846, 24.70145587870251, -28.949269179081597]
level 0, iter 337, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.0864133747690283, 0.07962089015054206, 0.01580390921371205, 0.992946866134451, 1.0056464946202999, 1.047761079303219, 1.1099198232682346, 0.0015596623835584574, 0.010490888774878655, 0.0038990603497602223, 1.5233773142189073, 26.52572594682614, -28.22567258778259]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 2095, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.10124953297275331, 0.08452273328213705, 0.016152494800153384, 0.9911324515638902, 0.9911048815212338, 1.0471020313824158, 1.1458108759392862, -0.0063420083701866675, 0.0027028846273604327, -0.04266968747904119, 1.6032208695062486, 26.48123452174959, -27.91821618523932]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 24, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.10520926893134804, 0.08527162780415988, 0.015445579630902744, 0.9906670446181329, 0.9973634534053676, 1.0500102762991455, 1.1480742144615632, -0.0041931228228190105, 0.0012887324860671348, -0.04650784110529736, 1.6312277931992865, 26.25543635788172, -28.04939229798007]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 86, size: fix[40, 43, 32]-mov[38, 40, 32], affine para: [-0.10268577234203376, 0.08647295595993872, 0.018258308787327933, 0.9907798414412241, 0.9998181661463339, 1.0512060170472133, 1.1539824325663526, -0.00038253693388455725, -0.0028328273012921843, -0.05594679248595536, 1.6418104103167999, 26.198452451739435, -27.884459657823488]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 656, size: fix[80, 85, 36]-mov[75, 80, 41], affine para: [-0.10392715015631562, 0.08632126631541709, 0.02608161120505628, 0.9904885340068493, 0.983767759796391, 1.029195662617219, 1.1463013904301036, 0.011755560986158615, 0.0037358450257993967, -0.07457233857283088, 1.7930742137550288, 26.164982745708464, -27.750716200252953]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 803, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.09880330645197946, -0.07818898592380318, -0.004766624575114497, 0.9920189859093038, 0.97532656852497, 0.9627610391339937, 0.8469114761369076, -0.0023316345355874476, -0.026637276195213114, 0.01908606119736712, -5.880092356724216, -28.86923833921717, 17.80511599337063]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 853, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.0991925637611742, -0.07973681102926188, -0.001120382686591012, 0.991867743705785, 0.9795008305057057, 0.9737175239982059, 0.8434409007215748, 0.005266394917762396, -0.020966562031741496, 0.03138847014938292, -5.929148089831643, -28.677630112124824, 17.823991046820925]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 405, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.09689885611068873, -0.07822699922184065, -0.0020792828985051483, 0.9922130944811273, 0.9804731403429902, 0.9774310614941795, 0.8445327007795383, 0.0005651212941731539, -0.026381971667512025, 0.029238810359537515, -5.818372159001562, -28.67988238677104, 17.773501830326968]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 164, size: fix[38, 40, 32]-mov[40, 43, 32], affine para: [0.09831641637499208, -0.08311406936229387, -0.0039036163349492493, 0.9916706587999509, 0.9759248024133129, 0.9730280273112986, 0.837835033476716, -0.0032375537923768315, -0.024401090150781343, 0.02883159056538282, -6.063764407751134, -28.60958954542784, 17.52998006058972]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 345, size: fix[75, 80, 41]-mov[80, 85, 36], affine para: [0.09447437884390966, -0.07866550902778503, -0.010476482384944958, 0.9923590946569165, 0.9764819417992651, 0.9806743672681022, 0.8340188276486068, -0.005793486182632883, -0.01968851051655948, 0.03467676932719596, -6.119413662602803, -28.336914594516678, 17.649418447661393]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.430922 v2 -0.446294
 last params [-0.10392715015631562, 0.08632126631541709, 0.02608161120505628, 0.9904885340068493, 0.983767759796391, 1.029195662617219, 1.1463013904301036, 0.011755560986158615, 0.0037358450257993967, -0.07457233857283088, 1.7930742137550288, 26.164982745708464, -27.750716200252953]
 my params [0.09447437884390966, -0.07866550902778503, -0.010476482384944958, 0.9923590946569165, 0.9764819417992651, 0.9806743672681022, 0.8340188276486068, -0.005793486182632883, -0.01968851051655948, 0.03467676932719596, -6.119413662602803, -28.336914594516678, 17.649418447661393]
A=1.00753 -0.0350572 0.181639 
0.0126198 1.00901 0.15256 
-0.189574 -0.222845 1.16277 

rotation R0.98268 -0.0521392 0.177822 
0.0123086 0.975847 0.218108 
-0.184899 -0.212142 0.959587 

upper R1.02528 0.0191733 -0.0346245 
0 1.03374 -0.107268 
0 0 1.18135 

s=0.252599 u=-0.108681 v=0.091623 w0.0162794 r=0.989711
m_Rotation from vnl-0.108681 0.091623 0.0162794 0.989711
 new params [-0.10868078249821624, 0.09162304125462004, 0.01627944331317422, 0.989711415288438, 1.0252832516482953, 1.0337395613385982, 1.1813541326326644, 0.018700452486443798, -0.03377070793319942, -0.10376713275708419, 1.9662308032099016, 25.976797072617856, -27.99704266956922]
outputput affine center: [10.7286, -17.148, 34.3134]
output affine para: [-0.10868078249821624, 0.09162304125462004, 0.01627944331317422, 0.989711415288438, 1.0252832516482953, 1.0337395613385982, 1.1813541326326644, 0.018700452486443798, -0.03377070793319942, -0.10376713275708419, 1.9662308032099016, 25.976797072617856, -27.99704266956922]
initial measure value (MMI): rval = -0.171885
final measure value (MMI): rval = -0.468412
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -4718.5
 iteration 2 energy 0 : -5089.11
 iteration 3 energy 0 : -5411.87
 iteration 4 energy 0 : -5643.61
 iteration 5 energy 0 : -5844.7
 iteration 6 energy 0 : -6077.33
 iteration 7 energy 0 : -6277.04
 iteration 8 energy 0 : -6424.75
 iteration 9 energy 0 : -6534.18
 iteration 10 energy 0 : -6623.31
 iteration 11 energy 0 : -6696.9
 iteration 12 energy 0 : -6760.19
 E-Slope 0.0142608 iteration 13 energy 0 : -6820.47
 E-Slope 0.0118096 iteration 14 energy 0 : -6875.67
 E-Slope 0.00984503 iteration 15 energy 0 : -6923.49
 E-Slope 0.0081447 iteration 16 energy 0 : -6969.18
 E-Slope 0.00667436 iteration 17 energy 0 : -7010.6
 E-Slope 0.00561885 iteration 18 energy 0 : -7057.51
 E-Slope 0.00489688 iteration 19 energy 0 : -7094.05
 E-Slope 0.00431067 iteration 20 energy 0 : -7102.96
 E-Slope 0.00377369 iteration 21 energy 0 : -7108.49
 E-Slope 0.0032293 iteration 22 energy 0 : -7103.26
 E-Slope 0.00279971 iteration 23 energy 0 : -7145.28
 E-Slope 0.00233506 iteration 24 energy 0 : -7137.18
 E-Slope 0.00197101 iteration 25 energy 0 : -7168.03
 E-Slope 0.00158506 iteration 26 energy 0 : -7152.21
 E-Slope 0.00135804 iteration 27 energy 0 : -7198.16
 E-Slope 0.00114463 iteration 28 energy 0 : -7191.46
 E-Slope 0.000991553 iteration 29 energy 0 : -7200.38
 E-Slope 0.00088007 iteration 30 energy 0 : -7193.28
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -13317.4
 iteration 2 energy 0 : -13535.1
 iteration 3 energy 0 : -13780.9
 iteration 4 energy 0 : -13981.3
 iteration 5 energy 0 : -14170.1
 iteration 6 energy 0 : -14350.1
 iteration 7 energy 0 : -14520.3
 iteration 8 energy 0 : -14655.9
 iteration 9 energy 0 : -14774.9
 iteration 10 energy 0 : -14739.8
 iteration 11 energy 0 : -14858.1
 iteration 12 energy 0 : -14797.7
 E-Slope 0.00486448 iteration 13 energy 0 : -14936.4
 E-Slope 0.0039392 iteration 14 energy 0 : -14902.2
 E-Slope 0.00314455 iteration 15 energy 0 : -14937.3
 E-Slope 0.0023583 iteration 16 energy 0 : -14892.9
 E-Slope 0.00183259 iteration 17 energy 0 : -15010.6
 E-Slope 0.00133659 iteration 18 energy 0 : -14948.3
 E-Slope 0.00111307 iteration 19 energy 0 : -15049.6
 E-Slope 0.00090377 iteration 20 energy 0 : -14984.6
 E-Slope 0.0009114 iteration 21 energy 0 : -15069.4
 E-Slope 0.000721313 iteration 22 energy 0 : -15006.8
 E-Slope 0.000782944 iteration 23 energy 0 : -15110.8
 E-Slope 0.000628076 iteration 24 energy 0 : -15056
 E-Slope 0.000713207 iteration 25 energy 0 : -15126.9
 E-Slope 0.000616953 iteration 26 energy 0 : -15062.5
 E-Slope 0.000661932 iteration 27 energy 0 : -15162
 E-Slope 0.000525564 iteration 28 energy 0 : -15109.4
 E-Slope 0.000592999 iteration 29 energy 0 : -15169.5
 E-Slope 0.000450842 iteration 30 energy 0 : -15107.7
 E-Slope 0.000548974 iteration 31 energy 0 : -15207.2
 E-Slope 0.000445448 iteration 32 energy 0 : -15152.5
 E-Slope 0.000515424 iteration 33 energy 0 : -15219.2
 E-Slope 0.000376798 iteration 34 energy 0 : -15154.5
 E-Slope 0.000462793 iteration 35 energy 0 : -15236.5
 E-Slope 0.000377014 iteration 36 energy 0 : -15188.3
 E-Slope 0.000432432 iteration 37 energy 0 : -15241.4
 E-Slope 0.000290155 iteration 38 energy 0 : -15182
 E-Slope 0.00036075 iteration 39 energy 0 : -15255.9
 E-Slope 0.000281423 iteration 40 energy 0 : -15216
 E-Slope 0.000335328 iteration 41 energy 0 : -15269.4
 E-Slope 0.000196517 iteration 42 energy 0 : -15205.8
 E-Slope 0.000258967 iteration 43 energy 0 : -15266.1
 E-Slope 0.000228271 iteration 44 energy 0 : -15266.2
 E-Slope 0.000275761 iteration 45 energy 0 : -15269.7
 E-Slope 0.00017979 iteration 46 energy 0 : -15241.5
 E-Slope 0.000242718 iteration 47 energy 0 : -15287.5
 E-Slope 0.000179261 iteration 48 energy 0 : -15253.9
 E-Slope 0.000240974 iteration 49 energy 0 : -15303.5
 E-Slope 0.000145234 iteration 50 energy 0 : -15258.7
 E-Slope 0.000218764 iteration 51 energy 0 : -15319.3
 E-Slope 0.000167303 iteration 52 energy 0 : -15277.1
 E-Slope 0.000275075 iteration 53 energy 0 : -15351.3
 E-Slope 0.000206769 iteration 54 energy 0 : -15298.5
 E-Slope 0.000335954 iteration 55 energy 0 : -15398.8
 E-Slope 0.000350922 iteration 56 energy 0 : -15330.9
 E-Slope 0.000489958 iteration 57 energy 0 : -15438.3
 E-Slope 0.000462092 iteration 58 energy 0 : -15367.7
 E-Slope 0.000585139 iteration 59 energy 0 : -15459.1
 E-Slope 0.000525318 iteration 60 energy 0 : -15386
 E-Slope 0.000604942 iteration 61 energy 0 : -15467.9
 E-Slope 0.000481926 iteration 62 energy 0 : -15391.7
 E-Slope 0.000523463 iteration 63 energy 0 : -15480
 E-Slope 0.000371583 iteration 64 energy 0 : -15404.3
 E-Slope 0.000401415 iteration 65 energy 0 : -15486.3
 E-Slope 0.000234582 iteration 66 energy 0 : -15412.5
 E-Slope 0.000289284 iteration 67 energy 0 : -15491.7
 E-Slope 0.000136852 iteration 68 energy 0 : -15419.4
 E-Slope 0.000217937 iteration 69 energy 0 : -15496
 E-Slope 9.55388e-05 iteration 70 energy 0 : -15424.9
 Converged due to oscillation in optimization  metric 0 bad 30  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -75998
 iteration 2 energy 0 : -77656.3
 iteration 3 energy 0 : -79186.3
 iteration 4 energy 0 : -80369.9
 iteration 5 energy 0 : -81393.7
 iteration 6 energy 0 : -82287.4
 iteration 7 energy 0 : -83125.4
 iteration 8 energy 0 : -83854.6
 iteration 9 energy 0 : -84491.5
 iteration 10 energy 0 : -85068.9
 iteration 11 energy 0 : -85480.8
 iteration 12 energy 0 : -85852.1
 E-Slope 0.00520579 iteration 13 energy 0 : -86193.9
 E-Slope 0.00448287 iteration 14 energy 0 : -86548
 E-Slope 0.00390662 iteration 15 energy 0 : -86879.7
 E-Slope 0.00342024 iteration 16 energy 0 : -87182.2
 E-Slope 0.00300217 iteration 17 energy 0 : -87427.4
 E-Slope 0.00265186 iteration 18 energy 0 : -87692.7
 E-Slope 0.00236928 iteration 19 energy 0 : -87922.6
 E-Slope 0.00214437 iteration 20 energy 0 : -88144.9
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_804_06042014_Aug1_Ref_vimp2_2039_03182016_Test_NewCases/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_804_06042014_Aug1_Ref_vimp2_2039_03182016_Test_NewCases/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_804_06042014_Aug1_Ref_vimp2_2039_03182016_Test_NewCases/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_804_06042014_Aug1_Ref_vimp2_2039_03182016_Test_NewCases/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_804_06042014/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2946_03032017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_804_06042014/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2946_03032017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547791692
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [10.7286, -17.148, 34.3134]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, -1.220017989802738, 29.542692492787182, -26.03014988015713]
level 0, iter 1192, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.06784205795493897, 0.0034412068044651356, 0.0011080757432707544, 0.9976895235674847, 1.0787404375634277, 0.9479491963334699, 1.0677508440968184, -0.011395336176297576, 0.1066451397943919, -0.03381899363855007, 0.7384614359276149, 30.34665096652932, -29.13650554815837]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 1000, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.08196335427681481, -0.0027404964792368054, 0.009995690325700543, 0.9965814489592175, 1.0883591841919809, 0.9031575380600543, 1.1041225163531538, 0.00976750385240484, 0.1952055048070448, -0.06939834987650155, 1.0360824189177105, 30.86310451905242, -28.947439138085016]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 29, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.08344956007655784, -0.002299942976290741, 0.0013341958514465416, 0.9965084551105248, 1.0909454747722758, 0.9023135946052939, 1.1109168154664184, 0.012114774967201975, 0.19783400150449046, -0.079788659092925, 1.159657578293075, 30.658755208606806, -29.122868331310272]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 411, size: fix[40, 43, 32]-mov[40, 45, 32], affine para: [-0.09684247806878174, -0.005751749733809478, 0.009688451478702715, 0.9952359447510132, 1.079781159231013, 0.9033553773662546, 1.1054917942311626, 0.01800192617986516, 0.21500344467863866, -0.09431750465419449, 1.165196215482692, 31.050863142917365, -28.869592729497942]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 127, size: fix[80, 85, 36]-mov[80, 89, 41], affine para: [-0.09738255059195944, -0.003201483297561436, 0.005486214596450254, 0.9952267534558652, 1.0890378350383072, 0.9154709339295256, 1.1119534843947043, 0.020510560304833853, 0.21406587290208373, -0.10009247703036431, 1.2097003969431712, 30.653055500125845, -29.154893339041497]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 3718, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.09452008795214822, -0.01997645369390545, -0.008755674319157745, 0.9952839958718066, 0.938414270659102, 0.9910962938625537, 0.7615337191189925, -0.05335894956125875, -0.14897125626602833, -0.01228553054177233, -4.782116410822697, -35.077994566720555, 14.080452874144534]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 237, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.09314615214688125, -0.02117646690183176, -0.00829859288118427, 0.9953926285370904, 0.9402725480892657, 0.9853981869458599, 0.7636302674014195, -0.0512602260477977, -0.14607771728686436, -0.008285357838979468, -4.7322983508495025, -34.294276742066195, 14.399188390414517]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 1266, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.10373597766122894, -0.020560298532887027, -0.003509580836226484, 0.9943861442645214, 0.9516924534606452, 0.9957321528001156, 0.7757981412877734, -0.048599626850412435, -0.15049342546047026, 0.0018160528706949487, -4.746368213661684, -35.09622478303784, 14.221610446878646]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 2229, size: fix[40, 45, 32]-mov[40, 43, 32], affine para: [0.1114290060738108, -0.014392514888907413, -0.004270125912175512, 0.9936589948997943, 0.9590893246323168, 1.0005271304945476, 0.7901249893715553, -0.0635540602472702, -0.17425540971946463, 0.016099223365494693, -4.972600478089876, -35.13817608570447, 14.309605449750295]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 2298, size: fix[80, 89, 41]-mov[80, 85, 36], affine para: [0.11819252261713172, -0.01620757972488601, -0.0132864553593327, 0.9927695160815749, 0.9735969356218331, 0.9956442861080311, 0.7909780302808459, -0.06483785808494182, -0.18520411469071538, 0.021878783015405592, -5.783294726135321, -35.1252058161169, 13.805857072575698]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.234969 v2 -0.253597
 last params [-0.09738255059195944, -0.003201483297561436, 0.005486214596450254, 0.9952267534558652, 1.0890378350383072, 0.9154709339295256, 1.1119534843947043, 0.020510560304833853, 0.21406587290208373, -0.10009247703036431, 1.2097003969431712, 30.653055500125845, -29.154893339041497]
 my params [0.11819252261713172, -0.01620757972488601, -0.0132864553593327, 0.9927695160815749, 0.9735969356218331, 0.9956442861080311, 0.7909780302808459, -0.06483785808494182, -0.18520411469071538, 0.021878783015405592, -5.783294726135321, -35.1252058161169, 13.805857072575698]
A=1.01948 -0.0221796 0.270877 
0.0236252 0.982438 0.209262 
-0.0446555 -0.296146 1.22827 

rotation R0.998774 -0.0347921 0.0352017 
0.0231454 0.957 0.289162 
-0.0437486 -0.287993 0.956633 

upper R1.02073 0.0135425 0.221653 
0 1.02625 -0.162894 
0 0 1.24505 

s=0.252783 u=-0.145895 v=0.0199573 w0.0146456 r=0.98899
m_Rotation from vnl-0.145895 0.0199573 0.0146456 0.98899
 new params [-0.1458950346738514, 0.019957300746334814, 0.014645622579244847, 0.9889903188321423, 1.0207292490725948, 1.026253469503809, 1.245050528456415, 0.013267449419621642, 0.2171515499856624, -0.15872697207896794, 1.3771950970045639, 31.75593815954124, -27.617793318557545]
outputput affine center: [10.7286, -17.148, 34.3134]
output affine para: [-0.1458950346738514, 0.019957300746334814, 0.014645622579244847, 0.9889903188321423, 1.0207292490725948, 1.026253469503809, 1.245050528456415, 0.013267449419621642, 0.2171515499856624, -0.15872697207896794, 1.3771950970045639, 31.75593815954124, -27.617793318557545]
initial measure value (MMI): rval = -0.121201
final measure value (MMI): rval = -0.282147
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -3069.48
 iteration 2 energy 0 : -3311.16
 iteration 3 energy 0 : -3516.72
 iteration 4 energy 0 : -3672.52
 iteration 5 energy 0 : -3800.64
 iteration 6 energy 0 : -3911.08
 iteration 7 energy 0 : -4004.41
 iteration 8 energy 0 : -4088.58
 iteration 9 energy 0 : -4166.97
 iteration 10 energy 0 : -4240.33
 iteration 11 energy 0 : -4310.93
 iteration 12 energy 0 : -4378.77
 E-Slope 0.0138243 iteration 13 energy 0 : -4431.77
 E-Slope 0.0117769 iteration 14 energy 0 : -4455.71
 E-Slope 0.0101102 iteration 15 energy 0 : -4469.76
 E-Slope 0.0087157 iteration 16 energy 0 : -4500.38
 E-Slope 0.00743277 iteration 17 energy 0 : -4512.27
 E-Slope 0.00633567 iteration 18 energy 0 : -4544.09
 E-Slope 0.00531475 iteration 19 energy 0 : -4556.43
 E-Slope 0.00445008 iteration 20 energy 0 : -4582.25
 E-Slope 0.00372414 iteration 21 energy 0 : -4599.31
 E-Slope 0.00317309 iteration 22 energy 0 : -4620.72
 E-Slope 0.00280349 iteration 23 energy 0 : -4640.04
 E-Slope 0.00262649 iteration 24 energy 0 : -4659.82
 E-Slope 0.00258405 iteration 25 energy 0 : -4678.48
 E-Slope 0.00254847 iteration 26 energy 0 : -4696.81
 E-Slope 0.00246988 iteration 27 energy 0 : -4713.67
 E-Slope 0.00242649 iteration 28 energy 0 : -4730.23
 E-Slope 0.00234029 iteration 29 energy 0 : -4747.69
 E-Slope 0.0022845 iteration 30 energy 0 : -4760.26
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -8955.63
 iteration 2 energy 0 : -9146.62
 iteration 3 energy 0 : -9315.89
 iteration 4 energy 0 : -9476.19
 iteration 5 energy 0 : -9643.73
 iteration 6 energy 0 : -9823.35
 iteration 7 energy 0 : -9988.48
 iteration 8 energy 0 : -10133.8
 iteration 9 energy 0 : -10255.9
 iteration 10 energy 0 : -10353
 iteration 11 energy 0 : -10443
 iteration 12 energy 0 : -10516.9
 E-Slope 0.00774326 iteration 13 energy 0 : -10578.5
 E-Slope 0.00693358 iteration 14 energy 0 : -10630.3
 E-Slope 0.00608048 iteration 15 energy 0 : -10667.9
 E-Slope 0.00520279 iteration 16 energy 0 : -10697.8
 E-Slope 0.00430916 iteration 17 energy 0 : -10697.1
 E-Slope 0.0034657 iteration 18 energy 0 : -10689.5
 E-Slope 0.00278242 iteration 19 energy 0 : -10728.2
 E-Slope 0.0021792 iteration 20 energy 0 : -10723.9
 E-Slope 0.00173435 iteration 21 energy 0 : -10763.8
 E-Slope 0.00132384 iteration 22 energy 0 : -10748.2
 E-Slope 0.00105857 iteration 23 energy 0 : -10783.2
 E-Slope 0.000850551 iteration 24 energy 0 : -10779.5
 E-Slope 0.000774488 iteration 25 energy 0 : -10820.8
 E-Slope 0.000709996 iteration 26 energy 0 : -10805.7
 E-Slope 0.00071004 iteration 27 energy 0 : -10829.2
 E-Slope 0.00070703 iteration 28 energy 0 : -10823.4
 E-Slope 0.000714466 iteration 29 energy 0 : -10855.1
 E-Slope 0.000638321 iteration 30 energy 0 : -10845.7
 E-Slope 0.000654742 iteration 31 energy 0 : -10880.2
 E-Slope 0.000597574 iteration 32 energy 0 : -10870.3
 E-Slope 0.000626713 iteration 33 energy 0 : -10898.1
 E-Slope 0.000576839 iteration 34 energy 0 : -10895.2
 E-Slope 0.000603281 iteration 35 energy 0 : -10922.9
 E-Slope 0.000566863 iteration 36 energy 0 : -10916.6
 E-Slope 0.00062903 iteration 37 energy 0 : -10949.1
 E-Slope 0.000600196 iteration 38 energy 0 : -10939.1
 E-Slope 0.000636809 iteration 39 energy 0 : -10973
 E-Slope 0.000595294 iteration 40 energy 0 : -10961.3
 E-Slope 0.000634916 iteration 41 energy 0 : -10995.4
 E-Slope 0.000597544 iteration 42 energy 0 : -10988
 E-Slope 0.000620708 iteration 43 energy 0 : -11008.2
 E-Slope 0.000552498 iteration 44 energy 0 : -10992
 E-Slope 0.00056088 iteration 45 energy 0 : -11026.1
 E-Slope 0.000520259 iteration 46 energy 0 : -11024.6
 E-Slope 0.000542775 iteration 47 energy 0 : -11051
 E-Slope 0.000476725 iteration 48 energy 0 : -11030.1
 E-Slope 0.000494577 iteration 49 energy 0 : -11060.3
 E-Slope 0.000473879 iteration 50 energy 0 : -11068.9
 E-Slope 0.000489518 iteration 51 energy 0 : -11073
 E-Slope 0.000412196 iteration 52 energy 0 : -11052.7
 E-Slope 0.000411995 iteration 53 energy 0 : -11075.5
 E-Slope 0.000351377 iteration 54 energy 0 : -11065.8
 E-Slope 0.000331201 iteration 55 energy 0 : -11080.6
 E-Slope 0.000245623 iteration 56 energy 0 : -11074.5
 E-Slope 0.000260614 iteration 57 energy 0 : -11105
 E-Slope 0.000212736 iteration 58 energy 0 : -11082.5
 E-Slope 0.000250719 iteration 59 energy 0 : -11110.1
 E-Slope 0.000229657 iteration 60 energy 0 : -11109.3
 E-Slope 0.000270732 iteration 61 energy 0 : -11122.8
 E-Slope 0.000278585 iteration 62 energy 0 : -11106.1
 E-Slope 0.000347063 iteration 63 energy 0 : -11145.1
 E-Slope 0.000312932 iteration 64 energy 0 : -11123
 E-Slope 0.00035581 iteration 65 energy 0 : -11154
 E-Slope 0.000315726 iteration 66 energy 0 : -11132
 E-Slope 0.000318326 iteration 67 energy 0 : -11152
 E-Slope 0.000255749 iteration 68 energy 0 : -11134.9
 E-Slope 0.000289656 iteration 69 energy 0 : -11166.7
 E-Slope 0.00022947 iteration 70 energy 0 : -11149.5
 E-Slope 0.000234991 iteration 71 energy 0 : -11166.7
 E-Slope 0.000193909 iteration 72 energy 0 : -11150.6
 E-Slope 0.000228792 iteration 73 energy 0 : -11185.9
 E-Slope 0.000181332 iteration 74 energy 0 : -11167.3
 E-Slope 0.000253141 iteration 75 energy 0 : -11200.9
 E-Slope 0.00022836 iteration 76 energy 0 : -11180.2
 E-Slope 0.000295289 iteration 77 energy 0 : -11207.7
 E-Slope 0.00028649 iteration 78 energy 0 : -11199.6
 E-Slope 0.000337258 iteration 79 energy 0 : -11223.2
 E-Slope 0.000307903 iteration 80 energy 0 : -11209.9
 E-Slope 0.000371158 iteration 81 energy 0 : -11240.7
 E-Slope 0.000354469 iteration 82 energy 0 : -11228.2
 E-Slope 0.000380039 iteration 83 energy 0 : -11247.4
 E-Slope 0.000342533 iteration 84 energy 0 : -11243.8
 E-Slope 0.000364967 iteration 85 energy 0 : -11254.6
 E-Slope 0.000296839 iteration 86 energy 0 : -11237.2
 E-Slope 0.000309952 iteration 87 energy 0 : -11259.4
 E-Slope 0.000255436 iteration 88 energy 0 : -11255.2
 E-Slope 0.000258118 iteration 89 energy 0 : -11269.4
 E-Slope 0.000203967 iteration 90 energy 0 : -11256.1
 tired convergence: reached max iterations 
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -56368
 iteration 2 energy 0 : -57412.8
 iteration 3 energy 0 : -58687.3
 iteration 4 energy 0 : -59876.9
 iteration 5 energy 0 : -60952.3
 iteration 6 energy 0 : -61981.8
 iteration 7 energy 0 : -62908.4
 iteration 8 energy 0 : -63736
 iteration 9 energy 0 : -64501
 iteration 10 energy 0 : -65211.2
 iteration 11 energy 0 : -65788.5
 iteration 12 energy 0 : -66333.3
 E-Slope 0.0077762 iteration 13 energy 0 : -66831.1
 E-Slope 0.006978 iteration 14 energy 0 : -67273
 E-Slope 0.00624844 iteration 15 energy 0 : -67681.8
 E-Slope 0.00558789 iteration 16 energy 0 : -68047.6
 E-Slope 0.00498474 iteration 17 energy 0 : -68370.7
 E-Slope 0.00443853 iteration 18 energy 0 : -68621.9
 E-Slope 0.00395388 iteration 19 energy 0 : -68885.4
 E-Slope 0.0035152 iteration 20 energy 0 : -69102.3
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_804_06042014_Aug2_Ref_vimp2_2946_03032017_Test_NewCases/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_804_06042014_Aug2_Ref_vimp2_2946_03032017_Test_NewCases/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_804_06042014_Aug2_Ref_vimp2_2946_03032017_Test_NewCases/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_804_06042014_Aug2_Ref_vimp2_2946_03032017_Test_NewCases/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_969_07142014/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2119_04142016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_969_07142014/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2119_04142016/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547791884
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [8.55325, -15.3108, 27.298]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 7.674115150977022, 21.67808430979337, -24.48570603463029]
level 0, iter 338, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.015331007963896234, -0.03897559199734274, -0.06300043080767966, 0.9971342984479645, 0.9775576130542626, 0.9579034685968691, 0.9771662160036572, 0.01945639028351078, 0.02189321961036096, -0.012817794687245558, 3.326257869847611, 22.28807009386614, -19.667784711562497]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 5762, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.025705966126382623, -0.054433530929336865, -0.06145976178755171, 0.9962925733423347, 1.0043453254956507, 0.9020397677223091, 0.9183184825383846, 0.04859706421120131, 0.001924726779727066, -0.06008215128018095, 2.588301627279276, 21.7132133520772, -21.118607623098168]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 137, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.020880091623365578, -0.04968503052009115, -0.06027007838187206, 0.9967261094041133, 1.0036357276744305, 0.9015146854588393, 0.9047335347558851, 0.054215823608322375, -0.00041236310248471067, -0.06354811817258428, 2.5176659579679876, 21.535943793703577, -20.982320830794105]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 192, size: fix[38, 42, 32]-mov[41, 42, 33], affine para: [-0.024441269440608496, -0.051249581146186704, -0.06351120834915652, 0.9963646075581478, 1.0150155280854658, 0.9049701131511273, 0.911250693534602, 0.05271864920877675, 0.003537601988195408, -0.0733123067704997, 2.3401129055889762, 21.505676976322196, -21.15326028394396]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 1149, size: fix[75, 84, 39]-mov[81, 84, 47], affine para: [-0.018316032850035434, -0.05091506040841546, -0.062424720091522154, 0.9965818249826448, 1.0184517335237402, 0.908663537506758, 0.939894526796405, 0.04923479448658516, -0.0015698878351653655, -0.07857654718139365, 2.0473986902381855, 21.442972390396967, -20.788314792360804]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 570, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.00044944568831939863, 0.02415391435151417, 0.06034172484043021, 0.9978853955556996, 1.0313886437435442, 1.0396909847150235, 1.0284634724586297, -0.010194062065377874, 0.013302637819885249, 0.010367192506567126, 0.5131857856513328, -22.070244872486125, 20.148501456896614]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 498, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.012781060001204549, 0.02417202905941823, 0.06575509222174034, 0.9974610896487675, 1.0186066502274975, 1.0370084914067776, 1.0287616412014229, -0.01481431325520558, 0.024680001800379596, 0.020362159090115302, 1.6255769845875692, -22.525014775063035, 19.375354869496466]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 1106, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.014681818142320212, 0.03006871904954956, 0.06420808166544624, 0.9973753749715292, 1.0029130550562462, 1.0340760173457206, 1.009593609500843, -0.025243533189431067, 0.026693045490893005, 0.023160196795585716, 2.426075325128947, -22.674461517838793, 18.785024685150052]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 254, size: fix[41, 42, 33]-mov[38, 42, 32], affine para: [0.014338606696024967, 0.028996840103673788, 0.06710611226571284, 0.9972213181228128, 0.9936849364662881, 1.0231082042167963, 1.0007292230479352, -0.021359688590243772, 0.02451711476342292, 0.018873981593953808, 2.41024206278185, -22.687481956547206, 18.555546663416003]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 168, size: fix[81, 84, 47]-mov[75, 84, 39], affine para: [0.014156608868686795, 0.03911753449320962, 0.059871543317008336, 0.9973388627850371, 0.9823602405737806, 1.0088123254100916, 0.988226618509255, -0.011402196887099732, 0.02802610940912586, 0.015860804541115808, 2.9206084278629327, -22.65895889919644, 18.44127035098541]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.279372 v2 -0.284226
 last params [-0.018316032850035434, -0.05091506040841546, -0.062424720091522154, 0.9965818249826448, 1.0184517335237402, 0.908663537506758, 0.939894526796405, 0.04923479448658516, -0.0015698878351653655, -0.07857654718139365, 2.0473986902381855, 21.442972390396967, -20.788314792360804]
 my params [0.014156608868686795, 0.03911753449320962, 0.059871543317008336, 0.9973388627850371, 0.9823602405737806, 1.0088123254100916, 0.988226618509255, -0.011402196887099732, 0.02802610940912586, 0.015860804541115808, 2.9206084278629327, -22.65895889919644, 18.44127035098541]
A=1.00393 0.134586 -0.105774 
-0.118563 0.984139 0.0166401 
0.0806718 -0.0238344 1.00841 

rotation R0.989951 0.119251 -0.0759979 
-0.116912 0.992542 0.0345271 
0.0795485 -0.0252951 0.99651 

upper R1.01412 0.0162797 -0.0264394 
0 0.993451 -0.0216055 
0 0 1.01351 

s=0.250659 u=-0.014995 v=-0.0389891 w-0.0591962 r=0.997372
m_Rotation from vnl-0.014995 -0.0389891 -0.0591962 0.997372
 new params [-0.014994962667079108, -0.038989072431561723, -0.05919618703331537, 0.997371954070424, 1.0141210302776413, 0.9934513109725458, 1.0135050561501284, 0.016052967256103806, -0.026071258470598116, -0.02174792015661381, 2.06809851478226, 22.33897101706967, -19.372058216975983]
outputput affine center: [8.55325, -15.3108, 27.298]
output affine para: [-0.014994962667079108, -0.038989072431561723, -0.05919618703331537, 0.997371954070424, 1.0141210302776413, 0.9934513109725458, 1.0135050561501284, 0.016052967256103806, -0.026071258470598116, -0.02174792015661381, 2.06809851478226, 22.33897101706967, -19.372058216975983]
initial measure value (MMI): rval = -0.0861808
final measure value (MMI): rval = -0.286639
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -3952.13
 iteration 2 energy 0 : -4225.97
 iteration 3 energy 0 : -4459.44
 iteration 4 energy 0 : -4626.2
 iteration 5 energy 0 : -4749.85
 iteration 6 energy 0 : -4853.66
 iteration 7 energy 0 : -4948.37
 iteration 8 energy 0 : -5042.71
 iteration 9 energy 0 : -5137.78
 iteration 10 energy 0 : -5229.58
 iteration 11 energy 0 : -5309.62
 iteration 12 energy 0 : -5384.25
 E-Slope 0.0120862 iteration 13 energy 0 : -5456.88
 E-Slope 0.0106219 iteration 14 energy 0 : -5521.86
 E-Slope 0.00966725 iteration 15 energy 0 : -5586.74
 E-Slope 0.00892222 iteration 16 energy 0 : -5635.99
 E-Slope 0.00808979 iteration 17 energy 0 : -5641.12
 E-Slope 0.0070967 iteration 18 energy 0 : -5632.14
 E-Slope 0.00609272 iteration 19 energy 0 : -5657.46
 E-Slope 0.00499959 iteration 20 energy 0 : -5646.48
 E-Slope 0.00407054 iteration 21 energy 0 : -5686.45
 E-Slope 0.00314919 iteration 22 energy 0 : -5670.9
 E-Slope 0.00250718 iteration 23 energy 0 : -5726.12
 E-Slope 0.0018858 iteration 24 energy 0 : -5704.57
 E-Slope 0.00160755 iteration 25 energy 0 : -5764.42
 E-Slope 0.00135282 iteration 26 energy 0 : -5739.53
 E-Slope 0.00139825 iteration 27 energy 0 : -5786.81
 E-Slope 0.00143147 iteration 28 energy 0 : -5761.93
 E-Slope 0.00156765 iteration 29 energy 0 : -5813.43
 E-Slope 0.00146671 iteration 30 energy 0 : -5786.84
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -10368.8
 iteration 2 energy 0 : -10441.7
 iteration 3 energy 0 : -10532
 iteration 4 energy 0 : -10618.3
 iteration 5 energy 0 : -10702.5
 iteration 6 energy 0 : -10794.3
 iteration 7 energy 0 : -10881.1
 iteration 8 energy 0 : -10955.3
 iteration 9 energy 0 : -11024.7
 iteration 10 energy 0 : -11088
 iteration 11 energy 0 : -11148.7
 iteration 12 energy 0 : -11175.5
 E-Slope 0.00372059 iteration 13 energy 0 : -11150.8
 E-Slope 0.0032026 iteration 14 energy 0 : -11140.4
 E-Slope 0.00265455 iteration 15 energy 0 : -11150.1
 E-Slope 0.00204381 iteration 16 energy 0 : -11127.4
 E-Slope 0.00152011 iteration 17 energy 0 : -11167.7
 E-Slope 0.00100277 iteration 18 energy 0 : -11137.2
 E-Slope 0.000692129 iteration 19 energy 0 : -11202.1
 E-Slope 0.00039766 iteration 20 energy 0 : -11164.7
 E-Slope 0.000338115 iteration 21 energy 0 : -11242
 E-Slope 0.000286557 iteration 22 energy 0 : -11200
 E-Slope 0.000452444 iteration 23 energy 0 : -11271.8
 E-Slope 0.000554428 iteration 24 energy 0 : -11227.3
 E-Slope 0.00070633 iteration 25 energy 0 : -11299.9
 E-Slope 0.000703417 iteration 26 energy 0 : -11252.3
 E-Slope 0.0007938 iteration 27 energy 0 : -11320.2
 E-Slope 0.000697643 iteration 28 energy 0 : -11270.7
 E-Slope 0.0007504 iteration 29 energy 0 : -11338.6
 E-Slope 0.000602901 iteration 30 energy 0 : -11288.1
 E-Slope 0.000648297 iteration 31 energy 0 : -11352.7
 E-Slope 0.000487171 iteration 32 energy 0 : -11301.7
 E-Slope 0.000539422 iteration 33 energy 0 : -11361
 E-Slope 0.000385866 iteration 34 energy 0 : -11310.5
 E-Slope 0.000439078 iteration 35 energy 0 : -11368
 E-Slope 0.00028044 iteration 36 energy 0 : -11312.6
 E-Slope 0.000338279 iteration 37 energy 0 : -11370.6
 E-Slope 0.000187561 iteration 38 energy 0 : -11316
 E-Slope 0.000251584 iteration 39 energy 0 : -11374.5
 E-Slope 0.00011152 iteration 40 energy 0 : -11321
 E-Slope 0.000188999 iteration 41 energy 0 : -11378.1
 E-Slope 6.70552e-05 iteration 42 energy 0 : -11325.6
 Converged due to oscillation in optimization  metric 0 bad 16  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -68466.5
 iteration 2 energy 0 : -69736.1
 iteration 3 energy 0 : -71063.7
 iteration 4 energy 0 : -72329.3
 iteration 5 energy 0 : -73320.4
 iteration 6 energy 0 : -74134.4
 iteration 7 energy 0 : -74867.3
 iteration 8 energy 0 : -75543.1
 iteration 9 energy 0 : -76230.3
 iteration 10 energy 0 : -76903
 iteration 11 energy 0 : -77578.5
 iteration 12 energy 0 : -78227.3
 E-Slope 0.00603385 iteration 13 energy 0 : -78844.1
 E-Slope 0.00551388 iteration 14 energy 0 : -79392.9
 E-Slope 0.00510406 iteration 15 energy 0 : -79892.7
 E-Slope 0.00479867 iteration 16 energy 0 : -80348
 E-Slope 0.00452544 iteration 17 energy 0 : -80739.5
 E-Slope 0.00423831 iteration 18 energy 0 : -81068
 E-Slope 0.00392429 iteration 19 energy 0 : -81356.1
 E-Slope 0.00358123 iteration 20 energy 0 : -81615.4
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_969_07142014_Aug1_Ref_vimp2_2119_04142016/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_969_07142014_Aug1_Ref_vimp2_2119_04142016/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_969_07142014_Aug1_Ref_vimp2_2119_04142016/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_969_07142014_Aug1_Ref_vimp2_2119_04142016/Temp/deformation/testWarp.nii.gz
 Run Reg 
 values 1
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_969_07142014/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2951_03062017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
Metric 0:  Not a Point-set
  Fixed image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_969_07142014/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  Moving image file: /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_2951_03062017_Test_NewCases/WMnMPRAGE_bias_corr_PProcessed.nii.gz
  similarity metric weight: 1
  Radius: [5, 5, 5]
  radius: [5, 5, 5]
 use Histogram Matching 
 prepro 
 set 
Use identity affine transform as initial affine para.
aff_init.IsNull()==1
Use identity affine transform as initial fixed affine para.
fixed_aff_init.IsNull()==1
Continue affine registration from the input
affine_opt.use_rotation_header = 0
affine_opt.ignore_void_orgin = 0
transform_initial: IsNotNull():0
OptAffine: metric_type=AffineWithMutualInformation
MI_bins=32 MI_samples=16000
number_of_seeds=0 time_seed=1547792033
number_of_levels=5
number_of_iteration_list=[10000,10000,10000,10000,10000]
graident_scales=[1,1,1,1,1,1,1,1,1,1,0.0001,0.0001,0.0001]
is_rigid = 0
mask null: 1
maximum_step_length=0.1
relaxation_factor=0.5
minimum_step_length=0.0001
translation_scales=0.0001
opt.transform_initial.IsNull(): 1
 opt.use_rotation_header: 0
 opt.ignore_void_orgin: 0
input affine center: [8.55325, -15.3108, 27.298]
input affine para: [0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 2.5117907907453905, 11.443856422117843, -32.46356468463058]
level 0, iter 1309, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.04121898412997262, 0.011238746774471996, -0.017198478685501152, 0.9989388861432599, 0.8316346889522777, 0.9826077968729336, 0.7911229335067154, 0.048669200572104276, -0.07291931571041735, 0.05795086967038353, -0.02798703804484018, 11.825055633007619, -30.876152527231984]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 757, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.028919024347619733, 0.017533887466796415, -0.013987510845422577, 0.9993300767821574, 0.8260702345639768, 1.005149989391742, 0.7969148421403427, 0.05753536757062785, -0.08467037599456335, 0.053832151895841736, -0.1419243468336446, 11.471914238575462, -30.558044966264287]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 102, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [-0.03149174070493944, 0.019487447708517548, -0.015246086450545102, 0.9991977114150749, 0.8337544253895585, 1.0055263889686836, 0.7958203055633556, 0.057784316186431144, -0.08204479108929721, 0.051989264831038086, -0.25824418715522274, 11.533468348057337, -30.4828429926116]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 119, size: fix[38, 42, 32]-mov[36, 40, 33], affine para: [-0.03827755502565767, 0.016626235921581047, -0.013489795289331207, 0.999037748277506, 0.8322456923123747, 0.999627504545353, 0.7906929263183069, 0.06272608237969216, -0.08138459896113852, 0.05107866532442061, -0.1204841076953329, 11.647834724522491, -30.6736798018241]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 539, size: fix[75, 84, 39]-mov[71, 80, 47], affine para: [-0.03985571676864003, 0.014373078215925978, -0.015219820026152334, 0.9989861328075722, 0.8304277752561141, 0.9884734559173101, 0.7953624241655775, 0.05390237979079893, -0.07555657218913064, 0.055895488160074266, -0.14964832828372812, 11.882566864757878, -30.39099225570461]
    reach oscillation, current step: 9.76563e-05<0.0001
A=1 0 0 
0 1 0 
0 0 1 

rotation R1 0 0 
0 1 0 
0 0 1 

upper R1 0 0 
0 1 0 
0 0 1 

s=0.25 u=0 v=0 w0 r=1
m_Rotation from vnl0 0 0 1
level 0, iter 1266, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.028945272354806515, -0.00646224929810424, 0.0015898142757749397, 0.9995588442072251, 1.189218502507771, 1.0177068060964656, 1.103525421494133, -0.027235071856268053, 0.07740160257636834, -0.027671837805892475, 3.2101845594470615, -14.43489565136662, 31.520175022826752]
    reach oscillation, current step: 9.76563e-05<0.0001
level 1, iter 385, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.0338002937288496, -0.01656448177531141, 0.011836641328734491, 0.9992212227577104, 1.1912575500831932, 0.9981456710447424, 1.1025157474375227, -0.030426631327264773, 0.08465928495787388, -0.028451449623914042, 3.0686249389498466, -14.972480873908115, 31.510862601257568]
    reach oscillation, current step: 9.76563e-05<0.0001
level 2, iter 311, size: fix[32, 32, 32]-mov[32, 32, 32], affine para: [0.04436737455498918, -0.01744484189065303, 0.01269905925998135, 0.9987822322510642, 1.1919626643045005, 0.9795800304424316, 1.1021901929565707, -0.03553449861071307, 0.08960153064746165, -0.02519174932525971, 3.337729799150854, -14.85790830100344, 31.25075138954671]
    reach oscillation, current step: 9.76563e-05<0.0001
level 3, iter 1970, size: fix[36, 40, 33]-mov[38, 42, 32], affine para: [0.04302349075903491, -0.027658291629154324, 0.005498871159482962, 0.998676003798547, 1.1904884029373977, 0.9626523640033103, 1.0922617031553572, -0.030265042120237746, 0.11016492976437303, -0.02225069126354687, 2.989703328673541, -14.482194580097913, 30.71869456154029]
    reach oscillation, current step: 9.76563e-05<0.0001
level 4, iter 1614, size: fix[71, 80, 47]-mov[75, 84, 39], affine para: [0.05486077140747341, -0.0292772700862986, 0.010677618949810161, 0.9980075779624289, 1.1879046804864337, 0.9625048338357979, 1.077836033345381, -0.052435969744336085, 0.11472266276695976, -0.012108263076942218, 3.5489226542591927, -14.904945525363228, 30.187471355119282]
    reach oscillation, current step: 9.76563e-05<0.0001
 v1 -0.401472 v2 -0.361255
final [-0.03985571676864003, 0.014373078215925978, -0.015219820026152334, 0.9989861328075722, 0.8304277752561141, 0.9884734559173101, 0.7953624241655775, 0.05390237979079893, -0.07555657218913064, 0.055895488160074266, -0.14964832828372812, 11.882566864757878, -30.39099225570461]
outputput affine center: [8.55325, -15.3108, 27.298]
output affine para: [-0.03985571676864003, 0.014373078215925978, -0.015219820026152334, 0.9989861328075722, 0.8304277752561141, 0.9884734559173101, 0.7953624241655775, 0.05390237979079893, -0.07555657218913064, 0.055895488160074266, -0.14964832828372812, 11.882566864757878, -30.39099225570461]
initial measure value (MMI): rval = -0.139991
final measure value (MMI): rval = -0.43138
finish affine registeration...
 Requested Transformation Model:  SyN : Using 
SyN diffeomorphic model for transformation. 
  Grad Step 0.25 total-smoothing 0 gradient-smoothing 3
 setting N-TimeSteps = 1 trunc 256
 ScaleFactor 4 nlev 3 curl 0
 allocated def field 1 0 0
0 -0 -1
0 -1 -0

 Its at this level 30
 Allocating 
 Allocating Done 
 iteration 1 energy 0 : -4562.85
 iteration 2 energy 0 : -4853.66
 iteration 3 energy 0 : -5115.88
 iteration 4 energy 0 : -5351.44
 iteration 5 energy 0 : -5557.07
 iteration 6 energy 0 : -5740.3
 iteration 7 energy 0 : -5901.94
 iteration 8 energy 0 : -6049.1
 iteration 9 energy 0 : -6184.94
 iteration 10 energy 0 : -6298.3
 iteration 11 energy 0 : -6395.02
 iteration 12 energy 0 : -6476.13
 E-Slope 0.0148016 iteration 13 energy 0 : -6545.95
 E-Slope 0.0127456 iteration 14 energy 0 : -6613.76
 E-Slope 0.0109945 iteration 15 energy 0 : -6674.81
 E-Slope 0.00951827 iteration 16 energy 0 : -6732.41
 E-Slope 0.00828023 iteration 17 energy 0 : -6789.27
 E-Slope 0.0072658 iteration 18 energy 0 : -6846.34
 E-Slope 0.00645649 iteration 19 energy 0 : -6904.37
 E-Slope 0.0058362 iteration 20 energy 0 : -6959.43
 E-Slope 0.00539676 iteration 21 energy 0 : -7013.23
 E-Slope 0.00509064 iteration 22 energy 0 : -7067.08
 E-Slope 0.00488872 iteration 23 energy 0 : -7123.25
 E-Slope 0.00474756 iteration 24 energy 0 : -7177.63
 E-Slope 0.00463633 iteration 25 energy 0 : -7230.96
 E-Slope 0.0045469 iteration 26 energy 0 : -7281.7
 E-Slope 0.00443918 iteration 27 energy 0 : -7323.74
 E-Slope 0.00429159 iteration 28 energy 0 : -7359.37
 E-Slope 0.00408993 iteration 29 energy 0 : -7387.38
 E-Slope 0.00378928 iteration 30 energy 0 : -7394.1
 tired convergence: reached max iterations 
 ScaleFactor 2 nlev 3 curl 1
 Its at this level 90
 iteration 1 energy 0 : -12671.8
 iteration 2 energy 0 : -12871.6
 iteration 3 energy 0 : -13043.7
 iteration 4 energy 0 : -13174.6
 iteration 5 energy 0 : -13279.6
 iteration 6 energy 0 : -13302.9
 iteration 7 energy 0 : -13402
 iteration 8 energy 0 : -13427.5
 iteration 9 energy 0 : -13486.8
 iteration 10 energy 0 : -13479.2
 iteration 11 energy 0 : -13546.8
 iteration 12 energy 0 : -13546.2
 E-Slope 0.00247373 iteration 13 energy 0 : -13592.2
 E-Slope 0.0019353 iteration 14 energy 0 : -13577.5
 E-Slope 0.0016137 iteration 15 energy 0 : -13639
 E-Slope 0.00135003 iteration 16 energy 0 : -13622.7
 E-Slope 0.00123145 iteration 17 energy 0 : -13676.8
 E-Slope 0.00102789 iteration 18 energy 0 : -13655.9
 E-Slope 0.000982665 iteration 19 energy 0 : -13711.2
 E-Slope 0.000871301 iteration 20 energy 0 : -13688.2
 E-Slope 0.000868082 iteration 21 energy 0 : -13741.9
 E-Slope 0.000745818 iteration 22 energy 0 : -13711.4
 E-Slope 0.000752449 iteration 23 energy 0 : -13765.3
 E-Slope 0.000657916 iteration 24 energy 0 : -13733.7
 E-Slope 0.000665456 iteration 25 energy 0 : -13786.9
 E-Slope 0.00056386 iteration 26 energy 0 : -13760.5
 E-Slope 0.000589527 iteration 27 energy 0 : -13811.4
 E-Slope 0.000507832 iteration 28 energy 0 : -13783.8
 E-Slope 0.000545241 iteration 29 energy 0 : -13833.9
 E-Slope 0.000469744 iteration 30 energy 0 : -13805
 E-Slope 0.000515722 iteration 31 energy 0 : -13854.1
 E-Slope 0.000447154 iteration 32 energy 0 : -13824.6
 E-Slope 0.000498287 iteration 33 energy 0 : -13873
 E-Slope 0.000423372 iteration 34 energy 0 : -13842.2
 E-Slope 0.000469841 iteration 35 energy 0 : -13890.2
 E-Slope 0.00039047 iteration 36 energy 0 : -13859.2
 E-Slope 0.000432089 iteration 37 energy 0 : -13906.6
 E-Slope 0.000355035 iteration 38 energy 0 : -13873.4
 E-Slope 0.000399321 iteration 39 energy 0 : -13921.7
 E-Slope 0.000326104 iteration 40 energy 0 : -13888.9
 E-Slope 0.000373103 iteration 41 energy 0 : -13936
 E-Slope 0.000298403 iteration 42 energy 0 : -13900.2
 E-Slope 0.000346616 iteration 43 energy 0 : -13948.9
 E-Slope 0.000270836 iteration 44 energy 0 : -13910.8
 E-Slope 0.000314452 iteration 45 energy 0 : -13956.4
 E-Slope 0.000232451 iteration 46 energy 0 : -13916.9
 E-Slope 0.000291623 iteration 47 energy 0 : -13976.3
 E-Slope 0.000241138 iteration 48 energy 0 : -13947.3
 E-Slope 0.000285849 iteration 49 energy 0 : -13976.1
 E-Slope 0.000212684 iteration 50 energy 0 : -13942.2
 E-Slope 0.000277258 iteration 51 energy 0 : -13998.1
 E-Slope 0.000208735 iteration 52 energy 0 : -13953.8
 E-Slope 0.00028234 iteration 53 energy 0 : -14014.1
 E-Slope 0.000235245 iteration 54 energy 0 : -13981.7
 E-Slope 0.000283226 iteration 55 energy 0 : -14008.5
 E-Slope 0.000204369 iteration 56 energy 0 : -13972.5
 E-Slope 0.000260003 iteration 57 energy 0 : -14028.6
 E-Slope 0.000170112 iteration 58 energy 0 : -13982.1
 E-Slope 0.000245273 iteration 59 energy 0 : -14044.6
 E-Slope 0.000209659 iteration 60 energy 0 : -14009.6
 E-Slope 0.000239335 iteration 61 energy 0 : -14034.4
 E-Slope 0.000149027 iteration 62 energy 0 : -13997.1
 E-Slope 0.000208944 iteration 63 energy 0 : -14051.4
 E-Slope 0.000118725 iteration 64 energy 0 : -14003.8
 E-Slope 0.00020162 iteration 65 energy 0 : -14068.8
 E-Slope 0.000165656 iteration 66 energy 0 : -14029.4
 E-Slope 0.000194699 iteration 67 energy 0 : -14053.9
 E-Slope 9.95696e-05 iteration 68 energy 0 : -14013.2
 Converged due to oscillation in optimization  metric 0 bad 30  
 ScaleFactor 1 nlev 3 curl 2
 Its at this level 20
 iteration 1 energy 0 : -78227.7
 iteration 2 energy 0 : -79752.4
 iteration 3 energy 0 : -81066
 iteration 4 energy 0 : -82225.5
 iteration 5 energy 0 : -83359.6
 iteration 6 energy 0 : -84511.2
 iteration 7 energy 0 : -85592.1
 iteration 8 energy 0 : -86581.7
 iteration 9 energy 0 : -87532.5
 iteration 10 energy 0 : -88298.5
 iteration 11 energy 0 : -88937.6
 iteration 12 energy 0 : -89524.3
 E-Slope 0.00637011 iteration 13 energy 0 : -90034.8
 E-Slope 0.00577197 iteration 14 energy 0 : -90480.7
 E-Slope 0.00519936 iteration 15 energy 0 : -90942.5
 E-Slope 0.00463251 iteration 16 energy 0 : -91327.2
 E-Slope 0.00408751 iteration 17 energy 0 : -91656
 E-Slope 0.00359756 iteration 18 energy 0 : -91966.4
 E-Slope 0.00317743 iteration 19 energy 0 : -92283.9
 E-Slope 0.0028279 iteration 20 energy 0 : -92587.2
 tired convergence: reached max iterations 
 Registration Done 
 begin writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_969_07142014_Aug2_Ref_vimp2_2951_03062017_Test_NewCases/Temp/deformation/test
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_969_07142014_Aug2_Ref_vimp2_2951_03062017_Test_NewCases/Temp/deformation/test affine 
 writing /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_969_07142014_Aug2_Ref_vimp2_2951_03062017_Test_NewCases/Temp/deformation/test def 
filename /array/ssd/msmajdi/experiments/keras/exp1_tmp/train/vimp2_969_07142014_Aug2_Ref_vimp2_2951_03062017_Test_NewCases/Temp/deformation/testWarp.nii.gz
Using TensorFlow backend.
image 0 / 67 augment 1 / 2
image 0 / 67 augment 2 / 2
image 1 / 67 augment 1 / 2
image 1 / 67 augment 2 / 2
image 2 / 67 augment 1 / 2
image 2 / 67 augment 2 / 2
image 3 / 67 augment 1 / 2
image 3 / 67 augment 2 / 2
image 4 / 67 augment 1 / 2
image 4 / 67 augment 2 / 2
image 5 / 67 augment 1 / 2
image 5 / 67 augment 2 / 2
image 6 / 67 augment 1 / 2
image 6 / 67 augment 2 / 2
image 7 / 67 augment 1 / 2
image 7 / 67 augment 2 / 2
image 8 / 67 augment 1 / 2
image 8 / 67 augment 2 / 2
image 9 / 67 augment 1 / 2
image 9 / 67 augment 2 / 2
image 10 / 67 augment 1 / 2
image 10 / 67 augment 2 / 2
image 11 / 67 augment 1 / 2
image 11 / 67 augment 2 / 2
image 12 / 67 augment 1 / 2
image 12 / 67 augment 2 / 2
image 13 / 67 augment 1 / 2
image 13 / 67 augment 2 / 2
image 14 / 67 augment 1 / 2
image 14 / 67 augment 2 / 2
image 15 / 67 augment 1 / 2
image 15 / 67 augment 2 / 2
image 16 / 67 augment 1 / 2
image 16 / 67 augment 2 / 2
image 17 / 67 augment 1 / 2
image 17 / 67 augment 2 / 2
image 18 / 67 augment 1 / 2
image 18 / 67 augment 2 / 2
image 19 / 67 augment 1 / 2
image 19 / 67 augment 2 / 2
image 20 / 67 augment 1 / 2
image 20 / 67 augment 2 / 2
image 21 / 67 augment 1 / 2
image 21 / 67 augment 2 / 2
image 22 / 67 augment 1 / 2
image 22 / 67 augment 2 / 2
image 23 / 67 augment 1 / 2
image 23 / 67 augment 2 / 2
image 24 / 67 augment 1 / 2
image 24 / 67 augment 2 / 2
image 25 / 67 augment 1 / 2
image 25 / 67 augment 2 / 2
image 26 / 67 augment 1 / 2
image 26 / 67 augment 2 / 2
image 27 / 67 augment 1 / 2
image 27 / 67 augment 2 / 2
image 28 / 67 augment 1 / 2
image 28 / 67 augment 2 / 2
image 29 / 67 augment 1 / 2
image 29 / 67 augment 2 / 2
image 30 / 67 augment 1 / 2
image 30 / 67 augment 2 / 2
image 31 / 67 augment 1 / 2
image 31 / 67 augment 2 / 2
image 32 / 67 augment 1 / 2
image 32 / 67 augment 2 / 2
image 33 / 67 augment 1 / 2
image 33 / 67 augment 2 / 2
image 34 / 67 augment 1 / 2
image 34 / 67 augment 2 / 2
image 35 / 67 augment 1 / 2
image 35 / 67 augment 2 / 2
image 36 / 67 augment 1 / 2
image 36 / 67 augment 2 / 2
image 37 / 67 augment 1 / 2
image 37 / 67 augment 2 / 2
image 38 / 67 augment 1 / 2
image 38 / 67 augment 2 / 2
image 39 / 67 augment 1 / 2
image 39 / 67 augment 2 / 2
image 40 / 67 augment 1 / 2
image 40 / 67 augment 2 / 2
image 41 / 67 augment 1 / 2
image 41 / 67 augment 2 / 2
image 42 / 67 augment 1 / 2
image 42 / 67 augment 2 / 2
image 43 / 67 augment 1 / 2
image 43 / 67 augment 2 / 2
image 44 / 67 augment 1 / 2
image 44 / 67 augment 2 / 2
image 45 / 67 augment 1 / 2
image 45 / 67 augment 2 / 2
image 46 / 67 augment 1 / 2
image 46 / 67 augment 2 / 2
image 47 / 67 augment 1 / 2
image 47 / 67 augment 2 / 2
image 48 / 67 augment 1 / 2
image 48 / 67 augment 2 / 2
image 49 / 67 augment 1 / 2
image 49 / 67 augment 2 / 2
image 50 / 67 augment 1 / 2
image 50 / 67 augment 2 / 2
image 51 / 67 augment 1 / 2
image 51 / 67 augment 2 / 2
image 52 / 67 augment 1 / 2
image 52 / 67 augment 2 / 2
image 53 / 67 augment 1 / 2
image 53 / 67 augment 2 / 2
image 54 / 67 augment 1 / 2
image 54 / 67 augment 2 / 2
image 55 / 67 augment 1 / 2
image 55 / 67 augment 2 / 2
image 56 / 67 augment 1 / 2
image 56 / 67 augment 2 / 2
image 57 / 67 augment 1 / 2
image 57 / 67 augment 2 / 2
image 58 / 67 augment 1 / 2
image 58 / 67 augment 2 / 2
image 59 / 67 augment 1 / 2
image 59 / 67 augment 2 / 2
image 60 / 67 augment 1 / 2
image 60 / 67 augment 2 / 2
image 61 / 67 augment 1 / 2
image 61 / 67 augment 2 / 2
image 62 / 67 augment 1 / 2
image 62 / 67 augment 2 / 2
image 63 / 67 augment 1 / 2
image 63 / 67 augment 2 / 2
image 64 / 67 augment 1 / 2
image 64 / 67 augment 2 / 2
image 65 / 67 augment 1 / 2
image 65 / 67 augment 2 / 2
image 66 / 67 augment 1 / 2
image 66 / 67 augment 2 / 2
